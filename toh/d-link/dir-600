<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>D-Link DIR-600/601(Rev.A1) [OpenWrt Wiki]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="toh,d-link,dir-600"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../lib/exe/opensearch.php" title="OpenWrt Wiki"/>
<link rel="start" href="../../index.html"/>
<link rel="contents" href="dir-600?do=index" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Recent changes" href="../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="../../feed.php?mode=list&amp;ns=toh:d-link"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="../../_export/xhtml/toh/d-link/dir-600"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="../../_export/raw/toh/d-link/dir-600"/>
<link rel="canonical" href="dir-600"/>
<link rel="stylesheet" type="text/css" href="../../lib/exe/css.php?t=openwrt&amp;tseed=6f44f363dc87908d905dc56ff3acbfc4"/>
<script type="text/javascript">/*<![CDATA[*/var NS='toh:d-link';var JSINFO = {"id":"toh:d-link:dir-600","namespace":"toh:d-link"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../lib/exe/js.php?tseed=6f44f363dc87908d905dc56ff3acbfc4"></script>
<script type="text/javascript" charset="utf-8">/*<![CDATA[*/jQuery(function(){
	for ( i=0; i < document.forms.length; i++ ) {
		if (document.forms[i].method == 'post') {
			var myElement = document.createElement('input');
			myElement.setAttribute('type', 'hidden');
			myElement.name = 'bb2_screener_';
			myElement.value = '1432266220 166.182.3.17';
			document.forms[i].appendChild(myElement);
		}
	}
});
/*!]]>*/</script>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="../../lib/tpl/openwrt/images/favicon.ico" />
<link rel="apple-touch-icon" href="../../lib/tpl/openwrt/images/apple-touch-icon.png" />
    </head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_openwrt     ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="dir-600#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="../../start"  accesskey="h" title="[H]"><img src="../../lib/tpl/openwrt/images/logo.png" width="386" height="98" alt="" /> <span>OpenWrt Wiki</span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="dir-600?do=register"  class="action register" rel="nofollow" title="Register">Register</a></li><li><a href="dir-600?do=login&amp;sectok=382740b13d95f946eed36caa57076b4a"  class="action login" rel="nofollow" title="Login">Login</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="../../start" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="../../doku.php" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="toh:d-link:dir-600" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Show pagesource</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Login</option><option value="register">Register</option></optgroup></select><input type="submit" value="&gt;" /></div></form>            </div>
            <ul>
                <li><a href="dir-600?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a></li><li><a href="dir-600?do=media&amp;ns=toh%253Ad-link"  class="action media" rel="nofollow" title="Media Manager">Media Manager</a></li><li><a href="dir-600?do=index"  class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                            <div class="youarehere"><span class="bchead">You are here: </span><span class="home"><bdi><a href="../../start" class="wikilink1" title="start">OpenWrt Wiki</a></bdi></span> » <bdi><a href="../start" class="wikilink1" title="toh:start">Table of Hardware</a></bdi> » <bdi><a href="start" class="wikilink1" title="toh:d-link:start">D-Link</a></bdi> » <bdi><span class="curid"><a href="dir-600" class="wikilink1" title="toh:d-link:dir-600">D-Link DIR-600/601(Rev.A1)</a></span></bdi></div>
                                    <div class="plugin_multilingual">
        <ul>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/cz/toh/d-link/dir-600" class="media" title="cz:toh:d-link:dir-600"><img src="../../lib/exe/fetch.php?cache=&amp;tok=aff589&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fcz.gif" class="media" title="Čeština (Czech)" alt="Čeština (Czech)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/de/toh/d-link/dir-600" class="media" title="de:toh:d-link:dir-600"><img src="../../lib/exe/fetch.php?cache=&amp;tok=e24010&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fde.gif" class="media" title="Deutsch (German)" alt="Deutsch (German)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <span class="curid"><a href="dir-600" class="media" title="toh:d-link:dir-600"><img src="../../lib/exe/fetch.php?cache=&amp;tok=2a37ae&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fgb.gif" class="media" title="English" alt="English" /></a></span>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/es/toh/d-link/dir-600" class="media" title="es:toh:d-link:dir-600"><img src="../../lib/exe/fetch.php?cache=&amp;tok=46c004&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fmx.gif" class="media" title="Español (Spanish, Mexico)" alt="Español (Spanish, Mexico)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/fr/toh/d-link/dir-600" class="media" title="fr:toh:d-link:dir-600"><img src="../../lib/exe/fetch.php?cache=&amp;tok=a5beba&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ffr.gif" class="media" title="Français (French)" alt="Français (French)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/hu/toh/d-link/dir-600" class="media" title="hu:toh:d-link:dir-600"><img src="../../lib/exe/fetch.php?cache=&amp;tok=6b5470&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fhu.gif" class="media" title="Magyar (Hungarian)" alt="Magyar (Hungarian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/jp/toh/d-link/dir-600" class="media" title="jp:toh:d-link:dir-600"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f999fc&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fjp.gif" class="media" title="日本語 (Japanese)" alt="日本語 (Japanese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pl/toh/d-link/dir-600" class="media" title="pl:toh:d-link:dir-600"><img src="../../lib/exe/fetch.php?cache=&amp;tok=c805c0&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fpl.gif" class="media" title="Poliski (Polish)" alt="Poliski (Polish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pt-br/toh/d-link/dir-600" class="media" title="pt-br:toh:d-link:dir-600"><img src="../../lib/exe/fetch.php?cache=&amp;tok=13127d&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fbr.gif" class="media" title="Português brasileiro (Portuguese, Brasil)" alt="Português brasileiro (Portuguese, Brasil)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/ru/toh/d-link/dir-600" class="media" title="ru:toh:d-link:dir-600"><img src="../../lib/exe/fetch.php?cache=&amp;tok=66ab5e&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fru.gif" class="media" title="Русский (Russsian)" alt="Русский (Russsian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/tr/toh/d-link/dir-600" class="media" title="tr:toh:d-link:dir-600"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f4beed&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ftr.gif" class="media" title="Tϋrkçe (Turkish)" alt="Tϋrkçe (Turkish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-cn/toh/d-link/dir-600" class="media" title="zh-cn:toh:d-link:dir-600"><img src="../../lib/exe/fetch.php?cache=&amp;tok=93625a&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-cn.gif" class="media" title="官話/官话 (Chinese)" alt="官話/官话 (Chinese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-tw/toh/d-link/dir-600" class="media" title="zh-tw:toh:d-link:dir-600"><img src="../../lib/exe/fetch.php?cache=&amp;tok=b56198&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-tw.gif" class="media" title="臺灣華語 (Taiwanese)" alt="臺灣華語 (Taiwanese)" /></a>
              </div>
            </div>
          </li>
        </ul>
      </div>
        </div>
    
    
    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>toh:d-link:dir-600</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="dir-600#dir-600">DIR-600</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="dir-600#supported_versions">Supported Versions</a></div></li>
<li class="level2"><div class="li"><a href="dir-600#hardware_highlights">Hardware Highlights</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="dir-600#dir-601">DIR-601</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="dir-600#supported_versions1">Supported Versions</a></div></li>
<li class="level2"><div class="li"><a href="dir-600#hardware_highlights1">Hardware Highlights</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="dir-600#installation">Installation</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="dir-600#installing_of_openwrt_for_first_time">Installing of OpenWrt for first time</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="dir-600#flash_via_d-link_web_interface">Flash via D-Link Web Interface</a></div></li>
<li class="level3"><div class="li"><a href="dir-600#flash_via_normal_web_interface">Flash via Normal Web Interface</a></div></li>
<li class="level3"><div class="li"><a href="dir-600#flash_via_u-boot_console">Flash via U-Boot console</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="dir-600#upgrading_openwrt">Upgrading OpenWrt</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="dir-600#hardware">Hardware</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="dir-600#info">Info</a></div></li>
<li class="level2"><div class="li"><a href="dir-600#photos">Photos</a></div></li>
<li class="level2"><div class="li"><a href="dir-600#serial">Serial</a></div></li>
<li class="level2"><div class="li"><a href="dir-600#jtag">JTAG</a></div></li>
<li class="level2"><div class="li"><a href="dir-600#usb_mod">USB Mod</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="dir-600#hardware1">Hardware</a></div></li>
<li class="level3"><div class="li"><a href="dir-600#software">Software</a></div></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"><a href="dir-600#basic_configuration">Basic configuration</a></div></li>
<li class="level1"><div class="li"><a href="dir-600#specific_configuration">Specific Configuration</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="dir-600#interfaces">Interfaces</a></div></li>
<li class="level2"><div class="li"><a href="dir-600#flash_layout">Flash Layout</a></div></li>
<li class="level2"><div class="li"><a href="dir-600#controlling_gpios">Controlling GPIOs</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="dir-600#failsafe_mode">Failsafe mode</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="dir-600#boot_into_failsafe_mode">Boot into failsafe mode</a></div></li>
<li class="level2"><div class="li"><a href="dir-600#what_to_do_in_failsafe_mode">What to do in failsafe mode?</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="dir-600#other_info">Other Info</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="dir-600#stock_bootlog">Stock Bootlog</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="dir-600#tags">Tags</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="d-link_dir-600601_reva1">D-Link DIR-600/601(Rev.A1)</h1>
<div class="level1">
<div class="table sectionedit2"><table class="inline">
	<tr class="row0">
		<td class="col0"><img src="../../lib/images/smileys/icon_exclaim.gif" class="icon" alt=":!:" /> Note: For DIR-600 (Rev.B1/B2) see <strong><a href="dir-300revb" class="wikilink1" title="toh:d-link:dir-300revb">D-Link DIR-300 Rev.B</a></strong>. DIR-601 (Rev.B1) is not yet supported</td>
	</tr>
</table></div>

</div>

<h2 class="sectionedit3" id="dir-600">DIR-600</h2>
<div class="level2">

<p>
There are (at least) three revisions of this router: A1, B1 and B2. Rev.A1 has been rebranded as FR-54RTR. The FR-54RTR is a close enough match that it can be flashed with the A1&#039;s firmware from D-Link: <a href="ftp://ftp.dlink.com/Gateway/dir600/Firmware/dir600_firmware_101NA.zip" class="urlextern" title="ftp://ftp.dlink.com/Gateway/dir600/Firmware/dir600_firmware_101NA.zip"  rel="nofollow">ftp://ftp.dlink.com/Gateway/dir600/Firmware/dir600_firmware_101NA.zip</a>
</p>

<p>
There are DIR-600N and DIR-600NW, both have reduced hardware feature (although not reduced price). DIR-600NW for example have reduced to 8MB memory and 2MB flash. DIR-600NB is suspected to have reduced features too. Any 3rd party firmware are unlikely able to run on these reduced hardwares. They seems only sold in China.
</p>

</div>

<h3 class="sectionedit4" id="supported_versions">Supported Versions</h3>
<div class="level3">
<div class="table sectionedit5"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Version/Model </th><th class="col1"> S/N </th><th class="col2"> OpenWrt Version Supported </th><th class="col3"> Model Specific Notes </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> A1 </td><td class="col1"> - </td><td class="col2"> <a href="https://forum.openwrt.org/viewtopic.php?pid=103396" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?pid=103396"  rel="nofollow">yes</a> </td><td class="col3"> same HW as <a href="../frys/fr54rtr" class="wikilink1" title="toh:frys:fr54rtr">FRYS FR-54RTR</a>, similar to <a href="dir-615" class="wikilink1" title="toh:d-link:dir-615">DIR-615</a> E1-E4 </td>
	</tr>
	<tr class="row2">
		<td class="col0"> B1 &amp; B2 </td><td class="col1"> for B2, see <a href="dir-300revb" class="wikilink1" title="toh:d-link:dir-300revb">DIR-300(B1)/DIR-600(B1&amp;B2)</a> </td><td class="col2"> other hardware </td><td class="col3"> same HW as <a href="dir-300revb" class="wikilink1" title="toh:d-link:dir-300revb">DIR-300(B1)/DIR-600(B1&amp;B2)</a> </td>
	</tr>
</table></div>

</div>

<h3 class="sectionedit6" id="hardware_highlights">Hardware Highlights</h3>
<div class="level3">
<div class="table sectionedit7"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> CPU </th><th class="col1"> Ram </th><th class="col2"> Flash </th><th class="col3"> Network </th><th class="col4"> USB </th><th class="col5"> Serial </th><th class="col6"> JTAG </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> AR7240 </td><td class="col1"> 32MB </td><td class="col2"> 4MB </td><td class="col3"> 4 x 1</td><td class="col4"> No </td><td class="col5"> Internal TTL solder pads </td><td class="col6"> No </td>
	</tr>
</table></div>

</div>

<h2 class="sectionedit8" id="dir-601">DIR-601</h2>
<div class="level2">

<p>
The DIR-601 is basically a slightly newer DIR-600 with Atheros AR7240 SoC <em>version 2</em>, and a non-detachable antenna.
</p>

</div>

<h3 class="sectionedit9" id="supported_versions1">Supported Versions</h3>
<div class="level3">
<div class="table sectionedit10"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Version/Model </th><th class="col1"> S/N </th><th class="col2"> OpenWrt Version Supported </th><th class="col3"> Model Specific Notes </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> A1 </td><td class="col1"> - </td><td class="col2"> Backfire 10.03.1 (confirmed by uvray313) </td><td class="col3"> JFFS2-Images does not appear to work </td>
	</tr>
	<tr class="row2">
		<td class="col0"> A1 </td><td class="col1"> - </td><td class="col2"> Attitude Adjustment 12.09b2 (confirmed by nop) </td><td class="col3"> no JFFS2-Images, possible better stability </td>
	</tr>
	<tr class="row3">
		<td class="col0"> B1 </td><td class="col1"> - </td><td class="col2"> <a href="https://dev.openwrt.org/changeset/36786/trunk" class="urlextern" title="https://dev.openwrt.org/changeset/36786/trunk"  rel="nofollow">r36786</a> </td><td class="col3"> <a href="https://forum.openwrt.org/viewtopic.php?id=33231" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?id=33231"  rel="nofollow">Forum Thread</a> </td>
	</tr>
</table></div>



</div>

<h3 class="sectionedit11" id="hardware_highlights1">Hardware Highlights</h3>
<div class="level3">
<div class="table sectionedit12"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> CPU </th><th class="col1"> Ram </th><th class="col2"> Flash </th><th class="col3"> Network </th><th class="col4"> USB </th><th class="col5"> Serial </th><th class="col6"> JTAG </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> AR7240 </td><td class="col1"> 32MB </td><td class="col2"> 4MB </td><td class="col3"> 4 x 1</td><td class="col4"> mod </td><td class="col5"> Internal TTL solder pads </td><td class="col6"> No </td>
	</tr>
</table></div>

</div>

<h2 class="sectionedit13" id="installation">Installation</h2>
<div class="level2">

<p>
See this link for up-to-date information on browsers and flashing this router.
</p>

<p>
<a href="https://forum.openwrt.org/viewtopic.php?id=44107" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?id=44107"  rel="nofollow">https://forum.openwrt.org/viewtopic.php?id=44107</a>
</p>

</div>

<h3 class="sectionedit14" id="installing_of_openwrt_for_first_time">Installing of OpenWrt for first time</h3>
<div class="level3">

<p>
Download <a href="http://downloads.openwrt.org/backfire/10.03.1/ar71xx/openwrt-ar71xx-dir-600-a1-squashfs-factory.bin" class="urlextern" title="http://downloads.openwrt.org/backfire/10.03.1/ar71xx/openwrt-ar71xx-dir-600-a1-squashfs-factory.bin"  rel="nofollow">http://downloads.openwrt.org/backfire/10.03.1/ar71xx/openwrt-ar71xx-dir-600-a1-squashfs-factory.bin</a>
</p>

<p>
or <a href="http://downloads.openwrt.org/attitude_adjustment/12.09-beta2/ar71xx/generic/openwrt-ar71xx-generic-dir-601-a1-squashfs-factory.bin" class="urlextern" title="http://downloads.openwrt.org/attitude_adjustment/12.09-beta2/ar71xx/generic/openwrt-ar71xx-generic-dir-601-a1-squashfs-factory.bin"  rel="nofollow">http://downloads.openwrt.org/attitude_adjustment/12.09-beta2/ar71xx/generic/openwrt-ar71xx-generic-dir-601-a1-squashfs-factory.bin</a>
</p>

<p>
Some DIR-601 (Rev.A1) factory firmware revisions will accept a 10.03.x DIR-600 (Rev.A1) squashfs-factory.bin if the final byte is changed from <abbr title="American Standard Code for Information Interchange">ASCII</abbr> &quot;0&quot; to &quot;2&quot;. 12.09beta and later provide separate images for the DIR-601 (Rev.A1).
</p>

</div>

<h4 id="flash_via_d-link_web_interface">Flash via D-Link Web Interface</h4>
<div class="level4">

<p>
These D-Link routers have a special (and very nice) web interface specifically for flashing firmware.  This is the simplest way to upgrade this router to OpenWRT. It also provides a fail-safe method of reflashing the firmware in case you &quot;brick&quot; your router and can no longer access it using other methods.
</p>

<p>
- Manually set your PC&#039;s IP address to any address between 192.168.0.2 and 192.168.0.253. 
</p>

<p>
Don&#039;t use 192.168.0.1 (The router IP address will default to 192.168.0.1 when reset as instructed below.)
</p>

<p>
- Hold the reset button while powering up the router and continue to hold until the power light begins blinking. Repeat if necessary.
</p>

<p>
- Open Internet Explorer 6, and go to <a href="http://192.168.0.1" class="urlextern" title="http://192.168.0.1"  rel="nofollow">http://192.168.0.1</a>.
</p>

<p>
Most other web browser such as Firefox and even later versions of Internet Explorer, will appear to work but may not successfully upload the firmware to the router.
</p>

<p>
- Upload the .bin file you downloaded above.  
</p>

<p>
The progress will get to a random percentage and then stop while the router reboots. This is OK. The actual percentage does not actually mean anything useful. 
</p>

<p>
- Wait for the router to boot back up. 
</p>

<p>
The router signifies restarting by quickly flashing all lights. You&#039;ll know when the router has fully booted when the &#039;Status&#039; light turns from orange to green.  The <abbr title="Local Area Network">LAN</abbr> and WAN link lights will not light up, but the router is functioning.
</p>

<p>
- Set your computer&#039;s network interface back to automatic or manually to any IP address between 192.168.1.2 and 192.168.1.253. 
</p>

<p>
Don&#039;t use 192.168.1.1 as this is the new IP address of the router now that the OpenWRT firmware has been successfully installed.
</p>

<p>
- Telnet to 192.168.1.1 and you should be presented with a shell prompt.
</p>

<p>
If you set the password via Telnet, you will need to use a SSH connection using a program like &quot;Putty&quot; to log in afterwards. Alternatively, you can set your password via the web interface.
</p>

<p>
- Access the web interface using a web browser and go to <a href="http://192.168.1.1" class="urlextern" title="http://192.168.1.1"  rel="nofollow">http://192.168.1.1</a>
</p>

<p>
You will be presented with a login page.
</p>

<p>
If you cannot access the router via Telnet or the web interface , check to ensure that you have properly reconfigured your computer&#039;s network interface and that it has a correct IP address. If all else fails, repeat these instructions as the router&#039;s firmware has not been successfually flashed with OpenWRT. 
</p>

</div>

<h4 id="flash_via_normal_web_interface">Flash via Normal Web Interface</h4>
<div class="level4">

<p>
The normal web interface accepts the ddwrt image linked in their wiki, but not the openwrt images. Attempting to flash openwrt from ddwrt can damage the u-boot and wireless partitions, resulting in no wireless or a brick. BACK UP EVERYTHING!
</p>

</div>

<h4 id="flash_via_u-boot_console">Flash via U-Boot console</h4>
<div class="level4">

<p>
Loading an image via tftp may not work, arp replies do not seem to make it though the switch, these commands use y-modem instead. 
</p>

<p>
<pre class="code">
ar7240&gt; loady 0x81000000
## Ready for binary (ymodem) download to 0x81000000 at 115200 bps...
CCCCC
*** file: /tftp_root/openwrt.bin
sb -vv /tftp_root/openwrt.bin 
Sending: openwrt.bin
Bytes Sent:3735680   BPS:9438                            
Sending: 
Ymodem sectors/kbytes sent:   0/ 0k
Transfer complete

*** exit status: 0
## Total Size      = 0x00390018 = 3735576 Bytes
ar7240&gt; protect off 0xbf040000 +0x00390017
ar7240&gt; erase 0xbf040000 +0x00390017
ar7240&gt; cp.b 0x81000000 0xbf040000 0x00390018
ar7240&gt; bootm 0xbf040000
## Booting image at bf040000 ...
   Image Name:   MIPS OpenWrt Linux-2.6.32.27
   Created:      2011-12-21   1:03:18 UTC
   Image Type:   MIPS Linux Kernel Image (lzma  compressed)
   Data Size:    894180 Bytes = 873.2 kB
   Load Address: 80060000
   Entry Point:  80060000
   Verifying Checksum ... OK
   LZMA Umcompressing Kernel Image ...    Image loaded from 80060000-803039c0
 OK
No initrd
## Transferring control to Linux (at address 80060000) ...
## Giving linux memsize in bytes, 33554432

Starting kernel ...
.....
.....</pre>

</p>

</div>

<h3 class="sectionedit15" id="upgrading_openwrt">Upgrading OpenWrt</h3>
<div class="level3">

<p>
→<a href="../../doc/howto/generic.sysupgrade" class="wikilink1" title="doc:howto:generic.sysupgrade">generic.sysupgrade</a>
</p>

</div>

<h2 class="sectionedit16" id="hardware">Hardware</h2>
<div class="level2">

</div>

<h3 class="sectionedit17" id="info">Info</h3>
<div class="level3">
<div class="table sectionedit18"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> Architecture:  </th><td class="col1"> MIPS </td>
	</tr>
	<tr class="row1">
		<th class="col0 leftalign"> Vendor:  </th><td class="col1"> Atheros </td>
	</tr>
	<tr class="row2">
		<th class="col0 leftalign"> Bootloader:  </th><td class="col1"> U-Boot </td>
	</tr>
	<tr class="row3">
		<th class="col0 leftalign"> System-On-Chip:  </th><td class="col1"> AR7240 </td>
	</tr>
	<tr class="row4">
		<th class="col0 leftalign"> CPU Speed:  </th><td class="col1"> 350MHz </td>
	</tr>
	<tr class="row5">
		<th class="col0 leftalign"> Flash-Chip:  </th><td class="col1"> Winbond W25X32VF1G SPI flash </td>
	</tr>
	<tr class="row6">
		<th class="col0 leftalign"> Flash size:  </th><td class="col1"> 4MiB </td>
	</tr>
	<tr class="row7">
		<th class="col0 leftalign"> RAM:  </th><td class="col1"> 32MiB </td>
	</tr>
	<tr class="row8">
		<th class="col0 leftalign"> Wireless:  </th><td class="col1"> Atheros AR9285 </td>
	</tr>
	<tr class="row9">
		<th class="col0 leftalign"> Ethernet:  </th><td class="col1"> eth0, eth1 (confirmed on 601 only)</td>
	</tr>
	<tr class="row10">
		<th class="col0 leftalign"> Switch:  </th><td class="col1">AR7240 built-in 6 port switch (cpu @ port 0), 16 vlans (confirmed on 601 only)</td>
	</tr>
	<tr class="row11">
		<th class="col0 leftalign"> USB:  </th><td class="col1"> mod (601) </td>
	</tr>
	<tr class="row12">
		<th class="col0 leftalign"> Serial:  </th><td class="col1"> <a href="http://wiki.openwrt.org/inbox#serial" class="wikilink2" title="inbox" rel="nofollow">Yes</a> </td>
	</tr>
	<tr class="row13">
		<th class="col0 leftalign"> JTAG:  </th><td class="col1"> No </td>
	</tr>
</table></div>

<p>
The swconfig command provides the following info about the Dir-601 ethernet switch.
<pre class="code">root@OpenWrt:/# swconfig dev eth0 show
Global attributes:
        enable_vlan: 1
Port 0:
        pvid: 1
Port 1:
        pvid: 1
Port 2:
        pvid: 1
Port 3:
        pvid: 1
Port 4:
        pvid: 1
Port 5:
        pvid: 0
VLAN 0:
        vid: 0
        ports: 5
VLAN 1:
        vid: 1
        ports: 0 1 2 3 4</pre>

The information written on the main Atheros chip is as follows:
<pre class="code">AR7240-AH1A
F48053, 1C
1005
TAIWAN</pre>

<img src="../../lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> Link to datasheet
</p>

<p>
The information written on the WiFi Atheros chip is as follows:
<pre class="code">AR9285-AL1A
D02868B
1005
TAIWAN</pre>

<img src="../../lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> Link to datasheet
</p>

<p>
The information written on the PSC DDR-Ram chip ar as as follows:
<pre class="code">A3S56D40ETP
A10ANL25
TAIWAN -G5</pre>

<img src="../../lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> Link to PSC datasheet
Link to non-manufacturer datasheet (should be similar): <a href="http://www.google.com/url?sa=t&amp;source=web&amp;cd=7&amp;ved=0CEYQFjAG&amp;url=http%3A%2F%2Fcomcute.wippiespace.com%2FA3S56D3040ETP_I%2520ver_v.2.0_Zentel.pdf&amp;rct=j&amp;q=A3S56D40ETP&amp;ei=obHSTcXRO8Lm0gGG_7GFDA&amp;usg=AFQjCNHGtTRr_GO_sC9LioD1vsLkspZMYA&amp;sig2=1MgAx_3VkhvL0lWoEdRH9w&amp;cad=rja" class="urlextern" title="http://www.google.com/url?sa=t&amp;source=web&amp;cd=7&amp;ved=0CEYQFjAG&amp;url=http%3A%2F%2Fcomcute.wippiespace.com%2FA3S56D3040ETP_I%2520ver_v.2.0_Zentel.pdf&amp;rct=j&amp;q=A3S56D40ETP&amp;ei=obHSTcXRO8Lm0gGG_7GFDA&amp;usg=AFQjCNHGtTRr_GO_sC9LioD1vsLkspZMYA&amp;sig2=1MgAx_3VkhvL0lWoEdRH9w&amp;cad=rja"  rel="nofollow">here</a>
</p>

<p>
The information on the W25X32VF1G Winbond Flash chip are as follows:
<pre class="code">25X32VF1G
1007</pre>

Datasheet: <a href="http://www.alldatasheet.com/view.jsp?Searchword=W25X32" class="urlextern" title="http://www.alldatasheet.com/view.jsp?Searchword=W25X32"  rel="nofollow">http://www.alldatasheet.com/view.jsp?Searchword=W25X32</a>
</p>

<p>
Alternate Flash: MX25L3206E in SOP8 package (hidden under SOP16 in pics)
<a href="http://www.zlgmcu.com/mxic/pdf/NOR_Flash_c/MX25L3206E_DS_EN.pdf" class="urlextern" title="http://www.zlgmcu.com/mxic/pdf/NOR_Flash_c/MX25L3206E_DS_EN.pdf"  rel="nofollow">http://www.zlgmcu.com/mxic/pdf/NOR_Flash_c/MX25L3206E_DS_EN.pdf</a>
</p>

</div>

<h3 class="sectionedit19" id="photos">Photos</h3>
<div class="level3">

</div>

<h5 id="dir-601_a1_top_pcb">DIR-601 A1 Top PCB</h5>
<div class="level5">

<p>
<a href="../../_detail/toh/d-link/dir-601_pcb_top_web.jpg?id=toh%253Ad-link%253Adir-600" class="media" title="toh:d-link:dir-601_pcb_top_web.jpg"><img src="../../_media/toh/d-link/dir-601_pcb_top_web.jpg?w=400&amp;tok=dcdaad" class="media" title="DIR-601 A1 Top PCB" alt="DIR-601 A1 Top PCB" width="400" /></a>
</p>

</div>

<h5 id="dir-601_a1_bottom_pcb_and_case">DIR-601 A1 Bottom PCB and Case</h5>
<div class="level5">

<p>
<a href="../../_detail/toh/d-link/dir-601_pcb_bottom_web.jpg?id=toh%253Ad-link%253Adir-600" class="media" title="toh:d-link:dir-601_pcb_bottom_web.jpg"><img src="../../_media/toh/d-link/dir-601_pcb_bottom_web.jpg?w=400&amp;tok=7b352a" class="media" title="DIR-601 A1 Bottom PCB and Case" alt="DIR-601 A1 Bottom PCB and Case" width="400" /></a>
</p>

</div>

<h3 class="sectionedit20" id="serial">Serial</h3>
<div class="level3">

<p>
Serial header pinout:
<pre class="code">           _______
          |
          | S        JP3 pinout:
___       | h          1: VCC (3.3V) (square)
   |  o 1 | i          2: Rx
 S |  o 2 | e          3: Tx
 h |  o 3 | l          4: GND
 i |  o 4 | d
 e |  JP3 |
 l |      |_______
 d |
___|

   DS4
   LED2  DS5
___|*|__|*|____________ </pre>

</p>

<p>
This setup:
</p>

<p>
<a href="http://images.kaneva.com/filestore9/4609772/6089590/UARTUJumperUWires_ad.JPG" class="urlextern" title="http://images.kaneva.com/filestore9/4609772/6089590/UARTUJumperUWires_ad.JPG"  rel="nofollow">http://images.kaneva.com/filestore9/4609772/6089590/UARTUJumperUWires_ad.JPG</a>
</p>

<p>
works great for me.  Just remember that you can&#039;t hook up a PC serial port directly. You need a TTL to RS232 level converter. Note that the linked image above has the ports facing you, and LEDs facing away. This is opposed to the above images of the DIR-601 with ports facing away. Take note of the position of the square solder pad in relation to the others when soldering.
</p>

<p>
You can also have a look at the picture in the USB mod section where these pins are labeled on the left-hand side.
</p>

</div>

<h3 class="sectionedit21" id="jtag">JTAG</h3>
<div class="level3">

<p>
(generic JTAG boilerplate)
</p>

<p>
How to connect to JTAG interface, and how to reflash the device with <a href="http://downloads.openwrt.org/tools/oem/jtag/tools.zip" class="urlextern" title="http://downloads.openwrt.org/tools/oem/jtag/tools.zip"  rel="nofollow">JTAG tools</a>
</p>

<p>
See <a href="../../doc/hardware/port.jtag" class="wikilink1" title="doc:hardware:port.jtag">port.jtag</a> for more JTAG details.
</p>

<p>
The DIR-601 does not appear to have a JTAG interface. (I am not sure about the DIR-600).
</p>

</div>

<h3 class="sectionedit22" id="usb_mod">USB Mod</h3>
<div class="level3">

<p>
Information on how to add USB hardware and support to the AR72xx processor.
</p>

</div>

<h4 id="hardware1">Hardware</h4>
<div class="level4">

<p>
Hardware portion of the mod involving soldering and adding a few passive components.
</p>

</div>

<h5 id="caution">Caution</h5>
<div class="level5">

<p>
USB is possible on the DIR-601 (and likely DIR-600) and I (amishx64) have it working. I still need to sort out some kinks before posting more details and pictures, but they will be posted soon.
</p>

<p>
<img src="../../lib/images/smileys/icon_exclaim.gif" class="icon" alt=":!:" /> Note: This section is still being written.
</p>

<p>
<img src="../../lib/images/smileys/icon_exclaim.gif" class="icon" alt=":!:" /> This USB port mod is very hard to do even with very good tools due to the tiny pin spacing on the Atheros AR72xx processor.
</p>
<div class="table sectionedit23"><table class="inline">
	<tr class="row0">
		<td class="col0"> <img src="../../_media/meta/icons/tango/48px-dialog-warning.svg.png" class="media" alt="" /> </td><td class="col1"> <strong><span style='color:red; '>Warning:</span></strong> You will run the risk of ruining the device if you attempt this mod. You have been warned. </td>
	</tr>
</table></div>

</div>

<h5 id="resources">Resources</h5>
<div class="level5">

<p>
This mod was completed with two main resources:
the USB Host section of the TP-Link TL-WR741ND page at <a href="../tp-link/tl-wr741nd?s[]=build#usb.host" class="urlextern" title="http://wiki.openwrt.org/toh/tp-link/tl-wr741nd?s[]=build#usb.host"  rel="nofollow">http://wiki.openwrt.org/toh/tp-link/tl-wr741nd?s[]=build#usb.host</a>
and part 1 of the D-Link DIR-615 rev E1-E4 USB port mod <a href="dir-615/ex-usb" class="urlextern" title="http://wiki.openwrt.org/toh/d-link/dir-615/ex-usb"  rel="nofollow">http://wiki.openwrt.org/toh/d-link/dir-615/ex-usb</a>.
</p>

</div>

<h5 id="connections">Connections</h5>
<div class="level5">

<p>
Solder two wires onto pins 73 and 74 on the Atheros SOC. The pins can be counted starting from the upper left corner of the chip with the dot (pin 1) and counterclockwise along the sides. Since the SOC has 128 pins, there are 32 pins per side. Pins 73 and 74 should be on the right side of the chip if you are facing the chip right side up. Alternatively, the two pins are 9 and 10 when counting from the bottom of the right side of the chip. The two pins should not have any PCB traces leading to them. <strong><span style='color:black; '>Pin 73/9 is D-</span> and <span style='color:green; '>pin 74/10 is D+</span></strong>. I recommend using wire wrap to solder to the pins since it is very thin. Tin the wire wrap with a minimal amount of solder, hold it on top of a pin with tweezers and apply heat to a part of the wire not touching the pin itself with a solder-free tip. Do not touch the tip of the soldering iron directly to the pins like I did. You will likely bridge some pins, rendering the device useless unless cleaned (very hard to do, but possible and very time consuming). Use ample flux. Once both wires have been soldered, apply hot glue to the board and wires (not the chip!) to ensure they don&#039;t break off. If you don&#039;t glue them down, they will break off and will likely short out other pins.
</p>

<p>
<a href="../../_detail/toh/d-link/ar72xx_usb_mod_solder_points.jpg?id=toh%253Ad-link%253Adir-600" class="media" title="toh:d-link:ar72xx_usb_mod_solder_points.jpg"><img src="../../_media/toh/d-link/ar72xx_usb_mod_solder_points.jpg" class="media" alt="" /></a>
</p>

<p>
Once you have soldered the two wires on and checked your work, use a 15K Ohm resistor to pull the lines low. <em>(In my picture, I use 10K Ohm and 5.1K Ohm resistors = 15.1K Ohm since that is what I had on-hand.)</em> To clarify, pulling the D+ and D- lines low means that you need to hook one end of the resistor to GND and the other end to one of the lines. Do this for each line. A 330 ohm resisror is not needed as specified in the USB host standard, so I suspect that the 330 ohm resistors are internal.
</p>

<p>
<a href="../../_detail/toh/d-link/ar72xx_usb_mod_pull_down.jpg?id=toh%253Ad-link%253Adir-600" class="media" title="toh:d-link:ar72xx_usb_mod_pull_down.jpg"><img src="../../_media/toh/d-link/ar72xx_usb_mod_pull_down.jpg" class="media" alt="" /></a>
</p>

<p>
Next connect the two lines to a female type A USB plug. +5V (red) can be sourced from the router&#039;s 5V connector and GND (black) can be connected at any unoccupied GND pad on the board. D- is likely to be white and D+ green on the USB female plug. Alternatively, from the front of a female type A USB connector, pin 1 is VCC (+5V), pin 2 is D- (white, 73/9), pin 3 is D+ (green, 74/10), and pin 4 is GND (black). Source: <a href="http://pinouts.ru/Slots/USB_pinout.shtml" class="urlextern" title="http://pinouts.ru/Slots/USB_pinout.shtml"  rel="nofollow">http://pinouts.ru/Slots/USB_pinout.shtml</a>
</p>
<div class="table sectionedit24"><table class="inline">
	<tr class="row0">
		<td class="col0"> <img src="../../_media/meta/icons/tango/48px-dialog-warning.svg.png" class="media" alt="" /> </td><td class="col1"> <strong><span style='color:red; '>Thermal Caution:</span></strong> Some of these new packages can be rather processor-intensive. Without <strong>additional cooling</strong> the CPU stops functioning! I find active cooling with heatsink <em>and</em> a small fan are required. </td>
	</tr>
</table></div>

</div>

<h4 id="software">Software</h4>
<div class="level4">

<p>
Check → <a href="../../doc/howto/usb.essentials" class="wikilink1" title="doc:howto:usb.essentials">usb.essentials</a> and → <a href="../../doc/howto/usb.storage" class="wikilink1" title="doc:howto:usb.storage">usb.storage</a> or simply build your own firmware with everything already integrated:
</p>

</div>

<h5 id="kernel_modifications">Kernel Modifications</h5>
<div class="level5">

<p>
The only file that needs to be modified is <code>target/linux/ar71xx/files/arch/mips/ar71xx/mach-dir-600-a1.c</code> as  part 1 of <a href="dir-615/ex-usb" class="urlextern" title="http://wiki.openwrt.org/toh/d-link/dir-615/ex-usb"  rel="nofollow">http://wiki.openwrt.org/toh/d-link/dir-615/ex-usb</a>.
</p>

<p>
I have tried this on Backfire 10.03.1-rc4 and confirmed it working. This should also apply to any other Backfire builds as well as trunk but has not been tested by me yet.
</p>
<ol>
<li class="level1"><div class="li"> Download SVN source code</div>
</li>
<li class="level1"><div class="li"> Backup by copying <code>target/linux/ar71xx/files/arch/mips/ar71xx/mach-dir-600-a1.c</code> to a completely different location (in case something goes wrong)</div>
</li>
<li class="level1"><div class="li"> Edit file <code>target/linux/ar71xx/files/arch/mips/ar71xx/mach-dir-600-a1.c</code></div>
<ul>
<li class="level2"><div class="li"> Add line <span style='color:blue; '><em>#include &quot;dev-usb.h&quot;</em></span> after line <span style='color:blue; '><em>#include &quot;dev-leds-gpio.h&quot;</em></span></div>
</li>
<li class="level2"><div class="li"> Add line <span style='color:blue; '><em>ar71xx_add_device_usb();</em></span> after line <span style='color:blue; '><em>ar71xx_add_device_eth(0);</em></span></div>
</li>
<li class="level2"><div class="li"> Note: order of lines pasted does not necessarily matter as long as they are in their corresponding sections or methods</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Run &#039;make menuconfig&#039; and select platform/profile (atheros ar71xx/Dir-600-a1) and other packages discussed in the next section</div>
</li>
<li class="level1"><div class="li"> Compile the image and flash it to the router</div>
</li>
</ol>

</div>

<h5 id="packages">Packages</h5>
<div class="level5">

<p>
Packages that I have enabled are listed below. They support Ext4 formated USB drives. I am currently having problems with FAT and large (2GB+ drives). Not all packages listed are necessary (few are). Just use this for a guide to get things up an running.
</p>

</div>

<h5 id="base_system">Base system</h5>
<div class="level5">

<p>
block-extroot
block-hotplugfdisk
fat_filesystem
Ext_filesystem
linux_swap_filesystem (prob not needed)
mount
umount
block-mount
</p>

</div>

<h5 id="base_system_-_busybox_-_configuration_-_linux_system_utilities">Base System -&gt; busybox -&gt; Configuration -&gt; Linux System Utilities</h5>
<div class="level5">

<p>
<code>fdisk
fat_filesystem
Ext_filesystem
linux_swap_filesystem (prob not needed)
mount
umount</code>
</p>

</div>

<h5 id="libraries">Libraries</h5>
<div class="level5">

<p>
<code>libusb</code>
</p>

</div>

<h5 id="kernel_modules_-_block_devices">Kernel Modules -&gt; Block Devices</h5>
<div class="level5">

<p>
<code>kmod-scsi-core</code>
</p>

</div>

<h5 id="kernel_modules_-_filesystems">Kernel Modules -&gt; Filesystems</h5>
<div class="level5">

<p>
<code>kmod-fs-autofs4
kmod-fs-ext4
kmod-fs-msdos
kmod-fs-vfat</code>
</p>

</div>

<h5 id="usb_support">USB Support</h5>
<div class="level5">

<p>
<code>kmod-usb-core
kmod-usb-ohci
kmod-usb-storage
kmod-usb-usb2</code>
</p>

</div>

<h5 id="utilities">Utilities</h5>
<div class="level5">

<p>
<code>mount-utils</code>
</p>

<p>
<img src="../../lib/images/smileys/icon_exclaim.gif" class="icon" alt=":!:" /> Warning: enabling <code>mountd</code> may cause high CPU load without a patch
</p>

</div>

<h2 class="sectionedit25" id="basic_configuration">Basic configuration</h2>
<div class="level2">

<p>
→ <a href="../../doc/howto/configuration" class="wikilink1" title="doc:howto:basic.config">Basic configuration</a> After flashing, proceed with this.<br/>

Set up your Internet connection, configure wireless, configure USB port, etc.
</p>

</div>

<h2 class="sectionedit26" id="specific_configuration">Specific Configuration</h2>
<div class="level2">

</div>

<h3 class="sectionedit27" id="interfaces">Interfaces</h3>
<div class="level3">

<p>
The default (OpenWRT) network configuration is:
</p>
<div class="table sectionedit28"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Interface Name </th><th class="col1"> Description </th><th class="col2"> Default configuration </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> br-lan </td><td class="col1"> <abbr title="Local Area Network">LAN</abbr> &amp; WiFi </td><td class="col2"> 192.168.1.1/24 </td>
	</tr>
	<tr class="row2">
		<td class="col0"> eth0 </td><td class="col1"> <abbr title="Local Area Network">LAN</abbr> </td><td class="col2"> None </td>
	</tr>
	<tr class="row3">
		<td class="col0"> eth1 </td><td class="col1"> WAN </td><td class="col2"> None </td>
	</tr>
	<tr class="row4">
		<td class="col0"> lan1 </td><td class="col1"> <abbr title="Local Area Network">LAN</abbr> </td><td class="col2"> None </td>
	</tr>
	<tr class="row5">
		<td class="col0"> lan2 </td><td class="col1"> <abbr title="Local Area Network">LAN</abbr> </td><td class="col2"> None </td>
	</tr>
	<tr class="row6">
		<td class="col0"> lan3 </td><td class="col1"> <abbr title="Local Area Network">LAN</abbr> </td><td class="col2"> None </td>
	</tr>
	<tr class="row7">
		<td class="col0"> lan4 </td><td class="col1"> <abbr title="Local Area Network">LAN</abbr> </td><td class="col2"> None </td>
	</tr>
</table></div>

</div>

<h3 class="sectionedit29" id="flash_layout">Flash Layout</h3>
<div class="level3">
<div class="table sectionedit30"><table class="inline">
	<tr class="row0">
		<td class="col0"> You could prettify this <a href="../../doc/techref/flash.layout" class="wikilink1" title="doc:techref:flash.layout">flash.layout</a>.  — <em>orca 2011/05/16 13:03</em> </td>
	</tr>
</table></div>

<p>
MTD memory partitions for DIR-601:
</p>
<div class="table sectionedit31"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Address Start </th><th class="col1"> Address End </th><th class="col2"> Name </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> 0x000000000000 </td><td class="col1"> 0x000000030000 </td><td class="col2"> u-boot </td>
	</tr>
	<tr class="row2">
		<td class="col0"> 0x000000030000 </td><td class="col1"> 0x000000040000 </td><td class="col2"> nvram </td>
	</tr>
	<tr class="row3">
		<td class="col0"> 0x000000040000 </td><td class="col1"> 0x000000120000 </td><td class="col2"> kernel </td>
	</tr>
	<tr class="row4">
		<td class="col0"> 0x000000120000 </td><td class="col1"> 0x0000003e0000 </td><td class="col2"> rootfs </td>
	</tr>
	<tr class="row5">
		<td class="col0"> 0x00000025a000 </td><td class="col1"> 0x0000003e0000 </td><td class="col2"> rootfs_data </td>
	</tr>
	<tr class="row6">
		<td class="col0"> 0x0000003e0000 </td><td class="col1"> 0x0000003f0000 </td><td class="col2"> mac </td>
	</tr>
	<tr class="row7">
		<td class="col0"> 0x0000003f0000 </td><td class="col1"> 0x000000040000 </td><td class="col2"> art </td>
	</tr>
	<tr class="row8">
		<td class="col0"> 0x000000040000 </td><td class="col1"> 0x0000003e0000 </td><td class="col2"> firmware </td>
	</tr>
</table></div>

</div>

<h3 class="sectionedit32" id="controlling_gpios">Controlling GPIOs</h3>
<div class="level3">

</div>

<h5 id="controlling_leds">Controlling LEDs</h5>
<div class="level5">

<p>
The ability to control LEDs has been confirmed to work on the DIR-601. I have not tested the DIR-600.
There are three predefined LEDs that can be controlled.
</p>

<p>
To turn on the green power led:
<pre class="code">echo &quot;1&quot; &gt;/sys/class/leds/dir-600-a1\:green\:power/brightness</pre>

To turn on the amber power led:
<pre class="code">echo &quot;1&quot; &gt;/sys/class/leds/dir-600-a1\:amber\:power/brightness</pre>

To turn on the blue wireless protected setup led (on the side of the router):
<pre class="code">echo &quot;1&quot; &gt;/sys/class/leds/dir-600-a1\:blue\:wps/brightness</pre>

To turn off the LEDs, you replace the &quot;1&quot; with a &quot;0&quot; in the above commands.
<del>
I still don&#039;t know how to control the individual <abbr title="Local Area Network">LAN</abbr>/WAN LEDs. 
I also don&#039;t know what the trigger (does nothing), max_brightness (returns permission denied), and uevent functions do nor have I had time to look into them. 
Also, the brightness function used above doesn&#039;t seem to be able to vary the LED brightness (PWM), as different values than &quot;0&quot; or &quot;1&quot; have no noticeable effect.</del>
Software PWM is possible with the use of a timer but I don&#039;t see any developed software to implement it. Maybe someone could make a package that does this?
</p>

<p>
I (amishx64) will be working on mapping and expanding the functionality of the LEDs/GPIOs next after I finish up the USB mod section. <em>After the GPIOs all work, I can look at adding SD can other bit-bang protocol support…</em>
</p>

<p>
In order to add GPIOs/LEDs, the <code>target/linux/ar71xx/files/arch/mips/ar71xx/mach-dir600-a1.c</code> file needs to be modified.
Backup by copying <code>target/linux/ar71xx/files/arch/mips/ar71xx/mach-dir600-a1.c</code> to a completely different location (in case something goes wrong).
</p>

<p>
The unmodified <code>mach-dir600-a1.c</code> file has two main sections that need to be added to in order to add LED &#039;devices&#039; as GPIOs to the system.
</p>

</div>

<h5 id="definitions">Definitions</h5>
<div class="level5">

<p>
The first section that needs to be added to is the <span style='color:purple; '>#define section</span>, after the #include section.
Since there are LEDs that need to be added, any additions should look similar to the provided code in the original file:
<code><span style='color:purple; '>
#define DIR_600_A1_GPIO_LED_WPS			0
#define DIR_600_A1_GPIO_LED_POWER_AMBER		1
#define DIR_600_A1_GPIO_LED_POWER_GREEN		6
</span></code>
</p>

<p>
Here is a table of the LEDs on the DIR-601 and corresponding GPIOs:
</p>
<div class="table sectionedit33"><table class="inline">
	<thead>
	<tr class="row0">
		<td class="col0 leftalign">           </td><th class="col1"> Power </th><th class="col2"> Globe </th><th class="col3"> WiFi </th><th class="col4"> <abbr title="Local Area Network">LAN</abbr> 1 </th><th class="col5 leftalign"> <abbr title="Local Area Network">LAN</abbr> 2  </th><th class="col6"> <abbr title="Local Area Network">LAN</abbr> 3 </th><th class="col7"> <abbr title="Local Area Network">LAN</abbr> 4 </th><th class="col8"> WPS </th>
	</tr>
	</thead>
	<tr class="row1">
		<th class="col0 leftalign"> <span style='color:orange; '>Amber</span>  </th><td class="col1"> GPIO 1 </td><td class="col2 leftalign"> GPIO 7  </td><td class="col3"> ——- </td><td class="col4"> ——- </td><td class="col5"> ——- </td><td class="col6"> ——- </td><td class="col7"> ——- </td><td class="col8"> —— </td>
	</tr>
	<tr class="row2">
		<th class="col0 leftalign"> <span style='color:green; '>Green</span>   </th><td class="col1"> GPIO 6 </td><td class="col2"> GPIO 17 </td><td class="col3"> GPIO ?? </td><td class="col4"> GPIO 13 </td><td class="col5"> GPIO 14 </td><td class="col6"> GPIO 15 </td><td class="col7"> GPIO 16 </td><td class="col8"> —— </td>
	</tr>
	<tr class="row3">
		<th class="col0 leftalign"> <span style='color:blue; '>Blue</span>     </th><td class="col1"> —— </td><td class="col2"> ——- </td><td class="col3"> ——- </td><td class="col4"> ——- </td><td class="col5"> ——- </td><td class="col6"> ——- </td><td class="col7"> ——- </td><td class="col8"> GPIO 0 </td>
	</tr>
</table></div>

<p>
<strong>Of those, the WPS LED all <abbr title="Local Area Network">LAN</abbr> LEDs GPIOs are active low.</strong> If you don&#039;t define them as active low in the next section they will behave as if the signal is inverted.
</p>

<p>
The new definitions that need to be added are as follows:
</p>

<p>
<code><span style='color:purple; '>
#define DIR_600_A1_GPIO_LED_GLOBE_AMBER		7
#define DIR_600_A1_GPIO_LED_LAN1_GREEN		13
#define DIR_600_A1_GPIO_LED_LAN2_GREEN		14
#define DIR_600_A1_GPIO_LED_LAN3_GREEN		15
#define DIR_600_A1_GPIO_LED_LAN4_GREEN		16
#define DIR_600_A1_GPIO_LED_GLOBE_GREEN		17
</span></code>
</p>

</div>

<h5 id="array_structure">Array Structure</h5>
<div class="level5">

<p>
The defined LED GPIOs then need to be implemented in in a structure to be included in the kernel as devices.
</p>

<p>
Add the following lines to the <code><span style='color:green; '>static</span> <span style='color:red; '>struct</span> gpio_led dir_600_a1_leds_gpio[] __initdata</code> array section of code:
</p>

<p>
<img src="../../lib/images/smileys/icon_exclaim.gif" class="icon" alt=":!:" /> You must not miss commas or any other syntax <em>(missing a space is fine)</em> otherwise you will break the build.
</p>

<p>
<code>, {
		.name		= &quot;dir-600-a1:amber:globe&quot;,
		.gpio		= DIR_600_A1_GPIO_LED_GLOBE_AMBER,
	},  {
		.name		= &quot;dir-600-a1:green:LAN1&quot;,
		.gpio		= DIR_600_A1_GPIO_LED_LAN1_GREEN,
		.active_low	= 1,		
	}, {
		.name		= &quot;dir-600-a1:green:LAN2&quot;,
		.gpio		= DIR_600_A1_GPIO_LED_LAN2_GREEN,
		.active_low	= 1,
	}, {
		.name		= &quot;dir-600-a1:green:LAN3&quot;,
		.gpio		= DIR_600_A1_GPIO_LED_LAN3_GREEN,
		.active_low	= 1,
	}, {
		.name		= &quot;dir-600-a1:green:LAN4&quot;,
		.gpio		= DIR_600_A1_GPIO_LED_LAN4_GREEN,
		.active_low	= 1,
	}, {
		.name		= &quot;dir-600-a1:green:globe&quot;,
		.gpio		= DIR_600_A1_GPIO_LED_GLOBE_GREEN,
		.active_low	= 1,
	}
</code>
</p>

</div>

<h5 id="compile_openwrt">Compile OpenWrt</h5>
<div class="level5">

<p>
And that should be it. Do a <code>make clean</code> and then <code>make</code>. If you get any error on compiling the edited file or on <code>linux/install</code>, when building, you messed something up above.
</p>

<p>
Just a note for anyone with a different router reading this: if you get a <code>leds-gpio/: probe of leds-gpio failed with error -22&quot;</code> error that means that you tried to add a GPIO that either doesn&#039;t exist or can&#039;t be made a GPIO. Change the GPIO pin definition.
</p>

</div>

<h5 id="further_work_and_other_thoughts">Further Work and Other Thoughts</h5>
<div class="level5">

<p>
<del>Once I get the WiFi LED working I will submit a patch to the developers for future OpenWrt images.</del> It seems as though the WiFi LED is not a standard GPIO pin. I am making this assumption for two reasons:
</p>

<p>
1) I can&#039;t get the LED to turn on even when I define every single GPIO possibility.
</p>

<p>
2) The LED does not turn on at router boot up like all the LEDs do.
</p>

<p>
I don&#039;t think it is worth my time to get one LED to work, especially since there are now so many others working. My best guess is that the LED is actually tied to the wireless chipset and blinks whenever there is traffic.
</p>

<p>
Also there is a empty spot on the PCB (DS2) where a LED could be present. It is likely this would be controlled via GPIO also, but the surrounding area is missing some passive components that may need to be put in.
There is also a test point (TP29) near the CPU and a bit to the right of the serial header. This is likely a GPIO also.
</p>

<p>
I will also host the modified <code>mach-dir600-a1.c</code> file for anyone that wants it (eventually).
</p>

<p>
<img src="../../lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> @jkiddo: - I recently ported the DIR-632-A1, and for this board the WLAN is not a normal GPIO, to get the WLAN LED to work you actually have to call <pre class="code">   ap9x_pci_setup_wmac_led_pin(0, DIR_632_A1_WLAN_GPIO_LED); </pre>

where DIR_632_A1_WLAN_GPIO_LED is 0 in this case, I have seen it as 1 in other boards. I suspect you need to do something similar here…
</p>

</div>

<h2 class="sectionedit34" id="failsafe_mode">Failsafe mode</h2>
<div class="level2">

<p>
→ <a href="../../doc/howto/generic.failsafe" class="wikilink1" title="doc:howto:generic.failsafe">generic.failsafe</a>
</p>

<p>
If you forgot your password, broke one of the startup scripts, firewalled yourself out, or corrupted the JFFS2 partition, you can get back in by using OpenWrt&#039;s failsafe mode or simply reflashing the firmware as instructed above.
</p>

</div>

<h3 class="sectionedit35" id="boot_into_failsafe_mode">Boot into failsafe mode</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Unplug the router&#039;s power cord.</div>
</li>
<li class="level1"><div class="li"> Connect the router&#039;s LAN1 port directly to your PC.</div>
</li>
<li class="level1"><div class="li"> Configure your PC with a static IP address between 192.168.1.2 and 192.168.1.254. Eg. 192.168.1.2 (gateway and <abbr title="Domain Name System">DNS</abbr> is not required).</div>
</li>
<li class="level1"><div class="li"> Plug the power on and wait for the DMZ LED to light up.</div>
</li>
<li class="level1"><div class="li"> While the DMZ LED is on immediately press any button (Reset and Secure Easy Setup will work) a few times .</div>
</li>
<li class="level1"><div class="li"> If done right the DMZ LED will quickly flash 3 times every second.</div>
</li>
<li class="level1"><div class="li"> You should be able to telnet to the router at 192.168.1.1 now (no username and password)</div>
</li>
</ul>

</div>

<h3 class="sectionedit36" id="what_to_do_in_failsafe_mode">What to do in failsafe mode?</h3>
<div class="level3">

<p>
<strong>NOTE:</strong> The root file system in failsafe mode is the SquashFS partition mounted in readonly mode. To switch to the normal writable root file system run mount_root and make any changes. Run mount_root now.
</p>
<ol>
<li class="level1"><div class="li"> Forgot/lost your password and you like to set a new one</div>
</li>
</ol>

<p>
 <code>passwd</code>
</p>
<ol>
<li class="level1"><div class="li"> Forgot the routers IP address</div>
</li>
</ol>

<p>
 <code>uci get network.lan.ipaddr</code>
</p>
<ol>
<li class="level1"><div class="li"> You accidentally run &#039;ipkg upgrade&#039; or filled up the flash by installing large packages (clean the JFFS2 partition and start over)</div>
</li>
</ol>

<p>
 <code>mtd -r erase rootfs_data</code>
If you are done with failsafe mode power cycle the router and boot in normal mode.
</p>

</div>

<h2 class="sectionedit37" id="other_info">Other Info</h2>
<div class="level2">

</div>

<h3 class="sectionedit38" id="stock_bootlog">Stock Bootlog</h3>
<div class="level3">

<p>
<pre class="code">U-Boot 1.1.4 (Apr 23 2009 - 11:58:47)

AP91 (ar7240) U-boot
DRAM:
sri
#### TAP VALUE 1 = 8, 2 = 9
32 MB
Top of RAM usable for U-Boot at: 82000000
Reserving 243k for U-Boot at: 81fc0000
Reserving 192k for malloc() at: 81f90000
Reserving 44 Bytes for Board Info at: 81f8ffd4
Reserving 36 Bytes for Global Data at: 81f8ffb0
Reserving 128k for boot params() at: 81f6ffb0
Stack Pointer at: 81f6ff98
Now running in RAM - U-Boot at: 81fc0000
id read 0x100000ff
flash size 4194304, sector count = 64
Flash:  4 MB
*** Warning - bad CRC, using default environment

In:    serial
Out:   serial
Err:   serial
Net:   ag7240_enet_initialize...
Fetching MAC Address from 0x81fe6e50
: cfg1 0xf cfg2 0x7014
eth0: 00:03:7f:e0:04:33
eth0 up
No valid address in Flash. Using fixed address
: cfg1 0xf cfg2 0x7214
eth1: 00:03:7f:09:0b:ad
ATHRS26: resetting s26
ATHRS26: s26 reset done
eth1 up
eth0, eth1
Hit any key to stop autoboot:  0
## Booting image at bf040000 ...
   Image Name:   Linux Kernel Image
   Created:      2010-01-29   6:12:45 UTC
   Image Type:   MIPS Linux Kernel Image (lzma  compressed)
   Data Size:    980953 Bytes = 958 kB
   Load Address: 80002000
   Entry Point:  802b0000
   Verifying Checksum ... OK
   LZMA Umcompressing Kernel Image ...    Image loaded from 80002000-802d8086
 OK
No initrd
## Transferring control to Linux (at address 802b0000) ...
## Giving linux memsize in bytes, 33554432

Starting kernel ...

Booting AR7240(Python)...
Linux version 2.6.15--LSDK-7.3.0.260 (root@debian) (gcc version 3.4.4) #1 Fri Jan 29 01:08:23 EST 2010
flash_size passed from bootloader = 4
arg 1: console=ttyS0,115200
arg 2: root=31:03
arg 3: rootfstype=squashfs,jffs2
arg 4: init=/sbin/init
arg 5: mtdparts=ar7240-nor0:192k(u-boot),64k(nvram),960k(linux),2752k(rootfs),64k(MAC),64k(ART)
arg 6: mem=32M
CPU revision is: 00019374
Determined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
User-defined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
Built 1 zonelists
Kernel command line: console=ttyS0,115200 root=31:03 rootfstype=squashfs,jffs2 init=/sbin/init mtdparts=ar7240-nor0:192k(u-boot),64k(nvram),960k(linux),2752k(rootfs),64k(MAC),64k(ART) mem=32M
Primary instruction cache 64kB, physically tagged, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, linesize 32 bytes.
Synthesized TLB refill handler (20 instructions).
Synthesized TLB load handler fastpath (32 instructions).
Synthesized TLB store handler fastpath (32 instructions).
Synthesized TLB modify handler fastpath (31 instructions).
Cache parity protection disabled
PID hash table entries: 256 (order: 8, 4096 bytes)
Using 175.000 MHz high precision timer.
Console: colour dummy device 80x25
Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
Memory: 29104k/32768k available (2285k kernel code, 3648k reserved, 454k data, 164k init, 0k highmem)
Mount-cache hash table entries: 512
Checking for &#039;wait&#039; instruction...  available.
NET: Registered protocol family 16
SCSI subsystem initialized
Returning IRQ 48
TC classifier action (bugs to netdev@vger.kernel.org cc hadi@cyberus.ca)
AR7240 GPIOC major 0
squashfs: version 3.1 (2006/08/19) Phillip Lougher
Initializing Cryptographic API
io scheduler noop registered
io scheduler deadline registered
HDLC line discipline: version $Revision: 1.1.1.1 $, maxframe=4096
N_HDLC line discipline registered.
Software Watchdog Timer: 0.07 initialized. soft_noboot=0 soft_margin=60 sec (nowayout= 0)
Serial: 8250/16550 driver $Revision: 1.1.1.1 $ 1 ports, IRQ sharing disabled
serial8250.0: ttyS0 at MMIO 0x0 (irq = 19) is a 16550A
RAMDISK driver initialized: 1 RAM disks of 8192K size 1024 blocksize
loop: loaded (max 8 devices)
PPP generic driver version 2.4.2
PPP Deflate Compression module registered
PPP BSD Compression module registered
PPP MPPE Compression module registered
NET: Registered protocol family 24
PPTP driver version 0.7.12
6 cmdlinepart partitions found on MTD device ar7240-nor0
Creating 6 MTD partitions on &quot;ar7240-nor0&quot;:
0x00000000-0x00030000 : &quot;u-boot&quot;
0x00030000-0x00040000 : &quot;nvram&quot;
0x00040000-0x00130000 : &quot;linux&quot;
0x00130000-0x003e0000 : &quot;rootfs&quot;
0x003e0000-0x003f0000 : &quot;MAC&quot;
0x003f0000-0x00400000 : &quot;ART&quot;
GACT probability on
Mirror/redirect action on
Simple TC action Loaded
netem: version 1.1
u32 classifier
    Perfomance counters on
    input device check on
    Actions configured
Netfilter messages via NETLINK v0.30.
NET: Registered protocol family 2
IP route cache hash table entries: 512 (order: -1, 2048 bytes)
TCP established hash table entries: 2048 (order: 1, 8192 bytes)
TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
TCP: Hash tables configured (established 2048 bind 2048)
TCP reno registered
ip_conntrack version 2.4 (256 buckets, 2048 max) - 232 bytes per conntrack
ip_ct_h323: init success
ip_conntrack_rtsp v0.6.21 loading
ip_nat_rtsp v0.6.21 loading
ip_conntrack_pptp version 3.1 loaded
ip_nat_pptp version 3.0 loaded
ip_tables: (C) 2000-2002 Netfilter core team
ipt_time loading
ipt_recent v0.3.1: Stephen Frost &lt;sfrost@snowman.net&gt;.  http://snowman.net/projects/ipt_recent/
ClusterIP Version 0.8 loaded successfully
TCP bic registered
NET: Registered protocol family 1
NET: Registered protocol family 10
lo: Disabled Privacy Extensions
IPv6 over IPv4 tunneling driver
NET: Registered protocol family 17
arch/mips/ar7240/gpio.c (ar7240_simple_config_init) JUMPSTART_GPIO: 12

ar7240: calling simple_config callback..
ar7240wdt_init: Registering WDT VFS: Mounted root (squashfs filesystem) readonly.
Freeing unused kernel memory: 164k freed
init started:  BusyBox v1.01 (2010.01.29-06:12+0000) multi-call binary
Algorithmics/MIPS FPU Emulator v1.5

Please press Enter to activate this console. ag7240_mod: module license &#039;unspecified&#039; taints kernel.
AG7240: Length per segment 1536
AG7240: Max segments per packet 1
AG7240: Max tx descriptor count    80
AG7240: Max rx descriptor count    252
AG7240: fifo cfg 3 01f00140
AG7240CHH: Mac address for unit 0
AG7240CHH: 00:03:7f:e0:04:33
AG7240CHH: Mac address for unit 1
AG7240CHH: ff:ff:ff:ff:ff:ff
in get_default_mac!!!
ag7240_ring_alloc Allocated 1280 at 0x803c8000
ag7240_ring_alloc Allocated 4032 at 0x813b8000
Setting PHY...
ADDRCONF(NETDEV_UP): eth0: link is not ready
eth0: Cannot assign requested address
ag7240_ring_alloc Allocated 1280 at 0x813d4800
ag7240_ring_alloc Allocated 4032 at 0x813df000
Call athrs26_reg_init_lan
ATHRS26: resetting s26
ATHRS26: s26 reset done
Setting PHY...
ADDRCONF(NETDEV_UP): eth1: link is not ready
eth1: Cannot assign requested address
device eth1 entered promiscuous mode
AG7240: enet unit:1 phy:0 is up...Mii 100Mbps full duplex
AG7240: done cfg2 0x7205 ifctl 0x0 miictrl
AG7240: enet unit 1 phy 0 mode 0x4c04
ADDRCONF(NETDEV_CHANGE): eth1: link becomes ready
br0: port 1(eth1) entering learning state
br0: topology change detected, propagating
br0: port 1(eth1) entering forwarding state
Fri Jan 29 01:11:00 UTC 2010
Entry gpio_ioctl init_module !!
sh: cannot create /proc/sys/net/ipv6/conf/eth0/accept_ra: Directory nonexistent
lan mac = 00:01:23:11:11:11rc is BUSY now!
eth0: Cannot assign requested address
sh: cannot create /proc/sys/net/ipv6/conf/eth0/accept_ra: Directory nonexistent
eth1: Cannot assign requested address
dhcpd_enabled::::::
domain empty
Failure parsing line 19 of /var/etc/udhcpd.conf
Failure parsing line 20 of /var/etc/udhcpd.conf
Failure parsing line 21 of /var/etc/udhcpd.conf
DHCP server start.
device_lan_ip=192.168.0.1 , device_lan_subnet_mask=255.255.255.0
=======================
=== insmod_wlan_mod ===
=======================
DHCP client start.
max_leases value (254) not sane, setting to 100 instead
Unable to open /var/misc/udhcpd.leases for reading
ath_hal: 0.9.17.1 (AR5416, DEBUG, REGOPS_FUNC, WRITE_EEPROM, 11D)
eth0      Link encap:Ethernet  HWaddr 1C:AF:F7:CC:9F:BC
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

wlan: 0.8.4.2 (Atheros/multi-bss)
ath_rate_atheros: Copyright (c) 2001-2005 Atheros Communications, Inc, All Rights Reserved
ath_dev: Copyright (c) 2001-2007 Atheros Communications, Inc, All Rights Reserved
ath_pci: 0.9.4.5 (Atheros/multi-bss)
wifi0: Atheros 9285: mem=0x10000000, irq=48 hw_base=0xb0000000
wlan: mac acl policy registered
wlan_me: Version 0.1
Copyright (c) 2008 Atheros Communications, Inc. All Rights Reserved
Sending discover...
ath0
device br0 already exists; can&#039;t create bridge with the same name
device eth1 left promiscuous mode
br0: port 1(eth1) entering disabled state
device ath0 entered promiscuous mode
device eth1 entered promiscuous mode
br0: port 2(eth1) entering learning state
br0: topology change detected, propagating
br0: port 2(eth1) entering forwarding state
Country ie is USI

/************** debug wlan setting ****************/
/* WlanMode: Set to default mode (AP)
/* 80211Mode: 11NGHT20
/* ChannelWidth: 20
/* Essid: dlink
/* Channel: 6
/* WEP: close
/* WPA: close (non security)
/* WPS: Non-Sec-Enable
/* WPS AP-DEFAULT-PIN: 34102350
/* WPS AP-PIN: 34102350
/**************************************************/

########################
### turn wps-led off ###
########################

Sending discover...
Reading topology file /tmp/tmp/topology.conf ...
Reading bss configuration file /tmp/tmp/secath0.conf ...

br0: port 1(ath0) entering disabled state
Defaulted uuid based on mac addr 1c:af:f7:cc:9f:bb
Could not connect to kernel driver.
Using interface ath0 with hwaddr 1c:af:f7:cc:9f:bb and ssid &#039;dlink&#039;
Country ie is USI
br0: port 1(ath0) entering learning state
br0: topology change detected, propagating
br0: port 1(ath0) entering forwarding state
upnp_wps_device_init called
l2_packet_receive - recvfrom: Network is down
br0: File exists
TFTP main
standard_tftp_server launched on port 69.
Fri Jan 29 01:11:00 UTC 2010
DHCPC Received SIGUSR2=&gt;DHCPC Release
Performing a DHCPC release
Performing a DHCPC release
Entering released state
wantimer: dhcpc_release (VCT_DISCONNECT)
wan_ipaddr == NULL, enable mac_filter/ upnp only
Start Firewall: Clear iptables
killall: crowdcontrol: no process killed
killall: wakeOnLanProxy: no process killed
rc is IDLE now!
write_radvd_conf_cmd start
write radvd_conf_cmd finished
</pre>

</p>

</div>

<h2 class="sectionedit39" id="tags">Tags</h2>
<div class="level2">

<p>
<a href="http://wiki.openwrt.org/_media/toh/d-link/gigabitethernet" class="media mediafile mf_ wikilink2" title="toh:d-link:gigabitethernet">gigabitethernet</a>
</p>

</div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>toh/d-link/dir-600.txt</bdi> · Last modified: 2014/01/09 15:03 (external edit)</div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="dir-600?do=edit"  class="action source" accesskey="v" rel="nofollow" title="Show pagesource [V]"><span>Show pagesource</span></a></li><li><a href="dir-600?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="dir-600?do=backlink"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="dir-600#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license" class="urlextern">CC Attribution-Noncommercial-Share Alike 3.0 Unported</a></bdi></div>
    <div class="buttons">
        <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license"><img src="../../lib/images/license/button/cc-by-nc-sa.png" alt="CC Attribution-Noncommercial-Share Alike 3.0 Unported" /></a>        <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="../../lib/tpl/openwrt/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://www.php.net" title="Powered by PHP" ><img
            src="../../lib/tpl/openwrt/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="../../lib/tpl/openwrt/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="../../lib/tpl/openwrt/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="../../lib/tpl/openwrt/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="../../lib/exe/indexer.php?id=toh%253Ad-link%253Adir-600&amp;1432266220" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->
</body>
</html>
