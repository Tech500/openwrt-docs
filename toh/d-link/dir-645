<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>D-Link DIR-645 [OpenWrt Wiki]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="ramips,rt3883,gigabitethernet,5port,usb,802.11bgn,rt2860,nondetachableantenna,64ram,8flash,mips,74kc"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../lib/exe/opensearch.php" title="OpenWrt Wiki"/>
<link rel="start" href="../../index.html"/>
<link rel="contents" href="http://wiki.openwrt.org/toh/d-link/dir-645?do=index" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Recent changes" href="../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="../../feed.php?mode=list&amp;ns=toh:d-link"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="http://wiki.openwrt.org/_export/xhtml/toh/d-link/dir-645"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="http://wiki.openwrt.org/_export/raw/toh/d-link/dir-645"/>
<link rel="canonical" href="dir-645"/>
<link rel="stylesheet" type="text/css" href="../../lib/exe/css.php?t=openwrt&amp;tseed=6f44f363dc87908d905dc56ff3acbfc4"/>
<script type="text/javascript">/*<![CDATA[*/var NS='toh:d-link';var JSINFO = {"id":"toh:d-link:dir-645","namespace":"toh:d-link"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../lib/exe/js.php?tseed=6f44f363dc87908d905dc56ff3acbfc4"></script>
<script type="text/javascript" charset="utf-8">/*<![CDATA[*/jQuery(function(){
	for ( i=0; i < document.forms.length; i++ ) {
		if (document.forms[i].method == 'post') {
			var myElement = document.createElement('input');
			myElement.setAttribute('type', 'hidden');
			myElement.name = 'bb2_screener_';
			myElement.value = '1432279810 166.182.3.208';
			document.forms[i].appendChild(myElement);
		}
	}
});
/*!]]>*/</script>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="../../lib/tpl/openwrt/images/favicon.ico" />
<link rel="apple-touch-icon" href="../../lib/tpl/openwrt/images/apple-touch-icon.png" />
    </head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_openwrt     ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="dir-645#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="../../start"  accesskey="h" title="[H]"><img src="../../lib/tpl/openwrt/images/logo.png" width="386" height="98" alt="" /> <span>OpenWrt Wiki</span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="http://wiki.openwrt.org/toh/d-link/dir-645?do=register"  class="action register" rel="nofollow" title="Register">Register</a></li><li><a href="http://wiki.openwrt.org/toh/d-link/dir-645?do=login&amp;sectok=382740b13d95f946eed36caa57076b4a"  class="action login" rel="nofollow" title="Login">Login</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="../../start" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="../../doku.php" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="toh:d-link:dir-645" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Show pagesource</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Login</option><option value="register">Register</option></optgroup></select><input type="submit" value="&gt;" /></div></form>            </div>
            <ul>
                <li><a href="http://wiki.openwrt.org/toh/d-link/dir-645?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a></li><li><a href="http://wiki.openwrt.org/toh/d-link/dir-645?do=media&amp;ns=toh%3Ad-link"  class="action media" rel="nofollow" title="Media Manager">Media Manager</a></li><li><a href="http://wiki.openwrt.org/toh/d-link/dir-645?do=index"  class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                            <div class="youarehere"><span class="bchead">You are here: </span><span class="home"><bdi><a href="../../start" class="wikilink1" title="start">OpenWrt Wiki</a></bdi></span> » <bdi><a href="../start" class="wikilink1" title="toh:start">Table of Hardware</a></bdi> » <bdi><a href="start" class="wikilink1" title="toh:d-link:start">D-Link</a></bdi> » <bdi><span class="curid"><a href="dir-645" class="wikilink1" title="toh:d-link:dir-645">D-Link DIR-645</a></span></bdi></div>
                                    <div class="plugin_multilingual">
        <ul>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/cz/toh/d-link/dir-645" class="media" title="cz:toh:d-link:dir-645"><img src="../../lib/exe/fetch.php?cache=&amp;tok=aff589&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fcz.gif" class="media" title="Čeština (Czech)" alt="Čeština (Czech)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/de/toh/d-link/dir-645" class="media" title="de:toh:d-link:dir-645"><img src="../../lib/exe/fetch.php?cache=&amp;tok=e24010&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fde.gif" class="media" title="Deutsch (German)" alt="Deutsch (German)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <span class="curid"><a href="dir-645" class="media" title="toh:d-link:dir-645"><img src="../../lib/exe/fetch.php?cache=&amp;tok=2a37ae&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fgb.gif" class="media" title="English" alt="English" /></a></span>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/es/toh/d-link/dir-645" class="media" title="es:toh:d-link:dir-645"><img src="../../lib/exe/fetch.php?cache=&amp;tok=46c004&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fmx.gif" class="media" title="Español (Spanish, Mexico)" alt="Español (Spanish, Mexico)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/fr/toh/d-link/dir-645" class="media" title="fr:toh:d-link:dir-645"><img src="../../lib/exe/fetch.php?cache=&amp;tok=a5beba&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ffr.gif" class="media" title="Français (French)" alt="Français (French)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/hu/toh/d-link/dir-645" class="media" title="hu:toh:d-link:dir-645"><img src="../../lib/exe/fetch.php?cache=&amp;tok=6b5470&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fhu.gif" class="media" title="Magyar (Hungarian)" alt="Magyar (Hungarian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/jp/toh/d-link/dir-645" class="media" title="jp:toh:d-link:dir-645"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f999fc&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fjp.gif" class="media" title="日本語 (Japanese)" alt="日本語 (Japanese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pl/toh/d-link/dir-645" class="media" title="pl:toh:d-link:dir-645"><img src="../../lib/exe/fetch.php?cache=&amp;tok=c805c0&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fpl.gif" class="media" title="Poliski (Polish)" alt="Poliski (Polish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pt-br/toh/d-link/dir-645" class="media" title="pt-br:toh:d-link:dir-645"><img src="../../lib/exe/fetch.php?cache=&amp;tok=13127d&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fbr.gif" class="media" title="Português brasileiro (Portuguese, Brasil)" alt="Português brasileiro (Portuguese, Brasil)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/ru/toh/d-link/dir-645" class="media" title="ru:toh:d-link:dir-645"><img src="../../lib/exe/fetch.php?cache=&amp;tok=66ab5e&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fru.gif" class="media" title="Русский (Russsian)" alt="Русский (Russsian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/tr/toh/d-link/dir-645" class="media" title="tr:toh:d-link:dir-645"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f4beed&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ftr.gif" class="media" title="Tϋrkçe (Turkish)" alt="Tϋrkçe (Turkish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-cn/toh/d-link/dir-645" class="media" title="zh-cn:toh:d-link:dir-645"><img src="../../lib/exe/fetch.php?cache=&amp;tok=93625a&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-cn.gif" class="media" title="官話/官话 (Chinese)" alt="官話/官话 (Chinese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-tw/toh/d-link/dir-645" class="media" title="zh-tw:toh:d-link:dir-645"><img src="../../lib/exe/fetch.php?cache=&amp;tok=b56198&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-tw.gif" class="media" title="臺灣華語 (Taiwanese)" alt="臺灣華語 (Taiwanese)" /></a>
              </div>
            </div>
          </li>
        </ul>
      </div>
        </div>
    
    
    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>toh:d-link:dir-645</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="dir-645#supported_versions">Supported Versions</a></div></li>
<li class="level1"><div class="li"><a href="dir-645#hardware_highlights">Hardware Highlights</a></div></li>
<li class="level1"><div class="li"><a href="dir-645#installation">Installation</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="dir-645#flash_layout">Flash Layout</a></div></li>
<li class="level2"><div class="li"><a href="dir-645#oem_easy_installation">OEM easy installation</a></div></li>
<li class="level2"><div class="li"><a href="dir-645#oem_installation_using_the_tftp_method">OEM installation using the TFTP method</a></div></li>
<li class="level2"><div class="li"><a href="dir-645#upgrading_openwrt">Upgrading OpenWrt</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="dir-645#luci_web_upgrade_process">LuCI Web Upgrade Process</a></div></li>
<li class="level3"><div class="li"><a href="dir-645#terminal_upgrade_process">Terminal Upgrade Process</a></div></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"><a href="dir-645#basic_configuration">Basic configuration</a></div></li>
<li class="level1"><div class="li"><a href="dir-645#specific_configuration">Specific Configuration</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="dir-645#interfaces">Interfaces</a></div></li>
<li class="level2"><div class="li"><a href="dir-645#switch_ports_for_vlans">Switch Ports (for VLANs)</a></div></li>
<li class="level2"><div class="li"><a href="dir-645#failsafe_mode">Failsafe mode</a></div></li>
<li class="level2"><div class="li"><a href="dir-645#buttons">Buttons</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="dir-645#hardware">Hardware</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="dir-645#info">Info</a></div></li>
<li class="level2"><div class="li"><a href="dir-645#photos">Photos</a></div></li>
<li class="level2"><div class="li"><a href="dir-645#opening_the_case">Opening the case</a></div></li>
<li class="level2"><div class="li"><a href="dir-645#serial">Serial</a></div></li>
<li class="level2"><div class="li"><a href="dir-645#jtag">JTAG</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="dir-645#debricking">Debricking</a></div></li>
<li class="level1"><div class="li"><a href="dir-645#bootloader_mods">Bootloader Mods</a></div></li>
<li class="level1"><div class="li"><a href="dir-645#hardware_mods">Hardware mods</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="dir-645#mib_ram_mod">128MiB RAM Mod</a></div></li>
<li class="level2"><div class="li"><a href="dir-645#i_c_gpio_mod">I²C GPIO Mod</a></div></li>
<li class="level2"><div class="li"><a href="dir-645#i_c_tiny-usb_mod">I²C Tiny-USB Mod</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="dir-645#notes">Notes</a></div></li>
<li class="level1"><div class="li"><a href="dir-645#telnet_login">Telnet Login</a></div></li>
<li class="level1"><div class="li"><a href="dir-645#tags">Tags</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="d-link_dir-645">D-Link DIR-645</h1>
<div class="level1">

</div>

<h2 class="sectionedit2" id="supported_versions">Supported Versions</h2>
<div class="level2">
<div class="table sectionedit3"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Version/Model </th><th class="col1"> Launch Date </th><th class="col2"> S/N </th><th class="col3"> OpenWrt Version Supported </th><th class="col4"> Model Specific Notes </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 leftalign"> A1   </td><td class="col1 centeralign">  2011-09  </td><td class="col2"> - </td><td class="col3"> <strong>Initial support since <a href="https://dev.openwrt.org/changeset/33843/trunk" class="urlextern" title="https://dev.openwrt.org/changeset/33843/trunk"  rel="nofollow">R33843</a>-<a href="https://dev.openwrt.org/changeset/33845/trunk" class="urlextern" title="https://dev.openwrt.org/changeset/33845/trunk"  rel="nofollow">R33845</a>. <span style='color:red; '> Still open: wireless</span></strong> </td><td class="col4"> - </td>
	</tr>
</table></div>

</div>

<h2 class="sectionedit4" id="hardware_highlights">Hardware Highlights</h2>
<div class="level2">
<div class="table sectionedit5"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> CPU </th><th class="col1"> Ram </th><th class="col2"> Flash </th><th class="col3"> Gigabit </th><th class="col4"> WLan </th><th class="col5"> USB </th><th class="col6"> Serial </th><th class="col7"> JTag </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> Ralink </td><td class="col1"> 64MB </td><td class="col2"> 8MB </td><td class="col3"> 4+1 </td><td class="col4"> Yes </td><td class="col5"> Yes </td><td class="col6"> Yes </td><td class="col7"> ? </td>
	</tr>
</table></div>

</div>

<h2 class="sectionedit6" id="installation">Installation</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> → <a href="../../doc/howto/obtain.firmware" class="wikilink1" title="doc:howto:obtain.firmware">obtain.firmware</a></div>
</li>
<li class="level1"><div class="li"> → <a href="../../doc/howto/installing" class="wikilink1" title="doc:howto:generic.flashing">Install OpenWrt</a></div>
</li>
</ol>

</div>

<h3 class="sectionedit7" id="flash_layout">Flash Layout</h3>
<div class="level3">
<div class="table sectionedit8"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 centeralign" colspan="9">   D-Link DIR-645 Rev.A1  Flash Layout           </th>
	</tr>
	</thead>
	<tr class="row1">
		<th class="col0 leftalign"> Layer0       </th><td class="col1 centeralign" colspan="8">                    MX24L6405D c2 2017c220  (mtd0, mtd6)    8192KiB                                                                 </td>
	</tr>
	<tr class="row2">
		<th class="col0 leftalign"> Layer1       </th><td class="col1 rightalign">  mtd7<br/>
<strong><em>u-boot</em></strong><br/>
192KiB </td><td class="col2" colspan="2"> mtd4<br/>
<strong><em>devdata</em></strong><br/>
64KiB </td><td class="col4"> mtd3<br/>
<strong><em>devconf</em></strong><br/>
64KiB </td><td class="col5 leftalign" colspan="3"> mtd2<br/>
<strong><em>upgrade</em></strong><br/>
7680KiB  </td><td class="col8"> mtd5<br/>
<strong><em>langpack</em></strong><br/>
128KiB</td>
	</tr>
	<tr class="row3">
		<th class="col0 leftalign"> Layer2       </th><td class="col1 leftalign">  </td><td class="col2"> mtd8<br/>
<strong><em>boot env</em></strong><br/>
32KiB </td><td class="col3"> </td><td class="col4"> </td><td class="col5"><br/>
<strong>kernel</strong><br/>
1280.1KiB </td><td class="col6"> mtd1<br/>
<strong><em>rootfs</em></strong><br/>
5748KiB </td><td class="col7"> </td><td class="col8"> </td>
	</tr>
	<tr class="row4">
		<th class="col0 leftalign"> mountpoints  </th><td class="col1 leftalign">  </td><td class="col2"> </td><td class="col3"> </td><td class="col4"> </td><td class="col5"> </td><td class="col6 leftalign"> <code>/</code>   </td><td class="col7 leftalign">            </td><td class="col8 leftalign">             </td>
	</tr>
	<tr class="row5">
		<th class="col0 leftalign"> filesystem   </th><td class="col1 leftalign">  </td><td class="col2"> </td><td class="col3"> </td><td class="col4"> gzipped xml </td><td class="col5"> </td><td class="col6"> SquashFS </td><td class="col7"> </td><td class="col8"> </td>
	</tr>
</table></div>

<p>
The original firmware in upgrade contains a 96 bytes SEAMA-header followed by the kernel padded to 64KB, followed by the rootfs.  Thus the rootfs is 96 bytes off from a 64 KB boundary.  Note that the SEAMA-header is variable size.
</p>

</div>

<h3 class="sectionedit9" id="oem_easy_installation">OEM easy installation</h3>
<div class="level3">
<div class="table sectionedit10"><table class="inline">
	<tr class="row0">
		<td class="col0"> <img src="../../lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> The instructions below are for Broadcom devices and only serve as an example. Don&#039;t leave them in place if they do not apply to a particular device! </td>
	</tr>
</table></div>

<p>
This section deals with how you install OpenWrt from a device freshly opened.  Plus the steps required such as reset to factory defaults if the device has already been configured
</p>

<p>
<strong>Note:</strong> Reset router to factory defaults if it has been previously configured.
</p>
<ul>
<li class="level1"><div class="li">Browse to <a href="http://192.168.1.1/Upgrade.asp" class="urlextern" title="http://192.168.1.1/Upgrade.asp"  rel="nofollow">http://192.168.1.1/Upgrade.asp</a></div>
</li>
<li class="level1"><div class="li">Upload .bin file to router</div>
</li>
<li class="level1"><div class="li">Wait for it to reboot</div>
</li>
<li class="level1"><div class="li">Telnet to 192.168.1.1 and set a root password, or browse to <a href="http://192.168.1.1" class="urlextern" title="http://192.168.1.1"  rel="nofollow">http://192.168.1.1</a> if LuCI is installed.</div>
</li>
</ul>

</div>

<h3 class="sectionedit11" id="oem_installation_using_the_tftp_method">OEM installation using the TFTP method</h3>
<div class="level3">

<p>
There may be an easier way to do this but this is what worked for me.
</p>

<p>
First, get your serial port going.  At the moment the network interfaces aren&#039;t coming up so you&#039;ll need the console to work with it.
</p>

<p>
Get the source from D-Link at this address:
</p>

<p>
<a href="http://tsd.dlink.com.tw/GPL.asp" class="urlextern" title="http://tsd.dlink.com.tw/GPL.asp"  rel="nofollow">http://tsd.dlink.com.tw/GPL.asp</a>
</p>

<p>
The file you&#039;re looking for is this DIR645A1_GPL101.tar.gz
</p>

<p>
Read the instructions and follow them till you get a successful build.
</p>

<p>
Once you get a build of the d-link linux, get your openwrt build going for this device (rt3883) but build an initramfs image.
</p>

<p>
You can use the usual tftp setup to get the initramfs running on there or you can burn it to the flash.  The flash isn&#039;t supported out of the box with openwrt (as far as I can tell) so it&#039;ll need to be the initramfs kernel so that it loads everything in to ram.  Hopefully someone can get the flash support going.
</p>

<p>
If you want to burn it in there you&#039;ll need to package it properly.  Here&#039;s the generic procedure for this device using the dlink source for packaging it.
</p>

<p>
1. Get a kernel and a rootfs (if you build openwrt from the trunk these files will be in trunk/build_dir/linux-ramips_rt3883 as vmlinux and root.squashfs).
</p>

<p>
2. run these commands from the dlink directory (DIR645A1_GPL101).
</p>

<p>
<code>source ./setupenv</code>
</p>

<p>
<code>tools/lzma/lzma vmlinux</code>
</p>

<p>
<code>tools/building/packimgs -o raw.img -i vmlinux.lzma -i root.squashfs</code>
</p>

<p>
<code>tools/seama/seama -i raw.img -m dev=/dev/mtdblock/2 -m type=firmware</code>
</p>

<p>
<code>tools/seama/seama -s web.img -i raw.img.seama -m signature=wrgn39_dlob.hans_dir645</code>
</p>

<p>
<code>tools/seama/seama -d web.img</code>
</p>

<p>
<code>tools/release.sh web.img DIR645A1_FW101B06_c5fl.bin</code>
</p>

<p>
<code>make sealpac_template</code>
</p>

<p>
<code>tools/release.sh sealpac.slt DIR645A1_FW101B06_c5fl.slt</code>
</p>

<p>
(replace vmlinux and root.squashfs with correct location and names of appropriate files)
</p>

<p>
3. your image is in images as DIR645A1_FW101B06_c5fl.bin use options 2 in the serial console to burn the image to the device.
</p>

<p>
Again, if you use the kernel that comes from doing an initramfs build you&#039;ll be able to get in and work with it in ram and hopefully get the flash suport going so that a regular build can be put on. 
</p>

<p>
Tftp is simple.  Just set up a tftp server on a computer (probably the one that you built the image on).  When the device boots up hit option 1 or 2 as appropriate (1 for ram image, 2 to burn it).  The first option is the ip address for the device (the address you want the device to have), the second is the ip address of the tftp server and the third is the filename you want to grab (DIR645A1_FW101B06_c5fl.bin if you used the steps above).
</p>

</div>

<h3 class="sectionedit12" id="upgrading_openwrt">Upgrading OpenWrt</h3>
<div class="level3">

<p>
→  <a href="../../doc/howto/generic.sysupgrade" class="wikilink1" title="doc:howto:generic.sysupgrade">generic.sysupgrade</a>
</p>

<p>
If you have already installed OpenWrt and like to reflash for e.g. upgrading to a new OpenWrt version you can upgrade using the mtd command line tool. It is important that you put the firmware image into the ramdisk (/tmp) before you start flashing.
</p>

</div>

<h4 id="luci_web_upgrade_process">LuCI Web Upgrade Process</h4>
<div class="level4">
<ul>
<li class="level1"><div class="li"> Browse to <a href="http://192.168.1.1/cgi-bin/luci/mini/system/upgrade/" class="urlextern" title="http://192.168.1.1/cgi-bin/luci/mini/system/upgrade/"  rel="nofollow">http://192.168.1.1/cgi-bin/luci/mini/system/upgrade/</a> LuCI Upgrade <abbr title="Uniform Resource Locator">URL</abbr></div>
</li>
<li class="level1"><div class="li"> Upload image file for sysupgrade to LuCI</div>
</li>
<li class="level1"><div class="li"> Wait for reboot</div>
</li>
</ul>

</div>

<h4 id="terminal_upgrade_process">Terminal Upgrade Process</h4>
<div class="level4">
<ul>
<li class="level1"><div class="li"> Login as root via SSH on 192.168.1.1</div>
</li>
<li class="level1"><div class="li"> Use the following commands to upgrade.</div>
</li>
</ul>

<p>
<pre class="code">cd /tmp/
wget http://downloads.openwrt.org/snapshots/trunk/XXX/xxx.abc
sysupgrade /tmp/xxx.abc</pre>

</p>
<ul>
<li class="level1"><div class="li">If sysupgrade does not support this router, use the following commands.</div>
</li>
</ul>

<p>
<pre class="code">cd /tmp/
wget http://downloads.openwrt.org/snapshots/trunk/XXX/xxx.abc
mtd write /tmp/xxx.abc linux &amp;&amp; reboot</pre>

</p>

</div>

<h2 class="sectionedit13" id="basic_configuration">Basic configuration</h2>
<div class="level2">

<p>
→ <a href="../../doc/howto/configuration" class="wikilink1" title="doc:howto:basic.config">Basic configuration</a> After flashing, proceed with this.<br/>

Set up your Internet connection, configure wireless, configure USB port, etc.
</p>

</div>

<h2 class="sectionedit14" id="specific_configuration">Specific Configuration</h2>
<div class="level2">

</div>

<h3 class="sectionedit15" id="interfaces">Interfaces</h3>
<div class="level3">

<p>
The default network configuration is:
</p>
<div class="table sectionedit16"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Interface Name </th><th class="col1"> Description </th><th class="col2"> Default configuration </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> br-lan </td><td class="col1"> <abbr title="Local Area Network">LAN</abbr> &amp; WiFi </td><td class="col2"> 192.168.1.1/24 </td>
	</tr>
	<tr class="row2">
		<td class="col0"> vlan0 (eth0.0) </td><td class="col1"> <abbr title="Local Area Network">LAN</abbr> ports (1 to 4) </td><td class="col2"> None </td>
	</tr>
	<tr class="row3">
		<td class="col0"> vlan1 (eth0.1) </td><td class="col1"> WAN port </td><td class="col2"> DHCP </td>
	</tr>
	<tr class="row4">
		<td class="col0"> wl0 </td><td class="col1"> WiFi </td><td class="col2"> Disabled </td>
	</tr>
</table></div>

</div>

<h3 class="sectionedit17" id="switch_ports_for_vlans">Switch Ports (for VLANs)</h3>
<div class="level3">

<p>
Numbers 0-3 are Ports 1-4 as labeled on the unit, number 4 is the Internet (WAN) on the unit, 5 is the internal connection to the router itself. Don&#039;t be fooled: Port 1 on the unit is number 3 when configuring VLANs. vlan0 = eth0.0, vlan1 = eth0.1 and so on.
</p>
<div class="table sectionedit18"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Port </th><th class="col1"> Switch port </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> Internet (WAN) </td><td class="col1"> 4 </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <abbr title="Local Area Network">LAN</abbr> 1 </td><td class="col1"> 3 </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <abbr title="Local Area Network">LAN</abbr> 2 </td><td class="col1"> 2 </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <abbr title="Local Area Network">LAN</abbr> 3 </td><td class="col1"> 1 </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <abbr title="Local Area Network">LAN</abbr> 4 </td><td class="col1"> 0 </td>
	</tr>
</table></div>

</div>

<h3 class="sectionedit19" id="failsafe_mode">Failsafe mode</h3>
<div class="level3">

<p>
→ <a href="../../doc/howto/generic.failsafe" class="wikilink1" title="doc:howto:generic.failsafe">generic.failsafe</a>
</p>

</div>

<h3 class="sectionedit20" id="buttons">Buttons</h3>
<div class="level3">

<p>
→ <a href="../../doc/howto/hardware.button" class="wikilink1" title="doc:howto:hardware.button">hardware.button</a> on howto use and configure the hardware button(s).
</p>

<p>
The DIR-645 has two buttons. They are Reset and WPS. Here, we merely name the buttons, so we can use them in the above Howto:
</p>
<div class="table sectionedit21"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> BUTTON </th><th class="col1"> Event </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> Reset </td><td class="col1"> reset </td>
	</tr>
	<tr class="row2">
		<td class="col0"> Wireless Protection Setup </td><td class="col1"> wps </td>
	</tr>
</table></div>

</div>

<h2 class="sectionedit22" id="hardware">Hardware</h2>
<div class="level2">

</div>

<h3 class="sectionedit23" id="info">Info</h3>
<div class="level3">
<div class="table sectionedit24"><table class="inline">
	<tr class="row0">
		<td class="col0 leftalign"> <strong><a href="http://en.wikipedia.org/wiki/Instruction set" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Instruction set">Instruction set</a>:</strong>  </td><td class="col1"> <a href="http://en.wikipedia.org/wiki/MIPS architecture" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/MIPS architecture">MIPS</a> </td>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> <strong>Vendor:</strong>                  </td><td class="col1 leftalign"> <a href="http://en.wikipedia.org/wiki/Ralink" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Ralink">Ralink</a>  </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> <strong><a href="../../doc/techref/bootloader.1" class="wikilink1" title="doc:techref:bootloader">Bootloader</a>:</strong>     </td><td class="col1"> <a href="../../doc/techref/bootloader/uboot" class="wikilink1" title="doc:techref:bootloader:uboot">U-Boot</a> </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <strong><a href="../../doc/hardware/soc.1" class="wikilink1" title="doc:hardware:soc">System-On-Chip</a>:</strong>  </td><td class="col1"> Ralink 3883 (MIPS 74Kc) </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> <strong><a href="../../doc/hardware/cpu" class="wikilink1" title="doc:hardware:cpu">CPU</a>/Speed</strong>        </td><td class="col1"> 74Kc V4.12 500 Mhz </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> <strong>Flash-Chip:</strong>              </td><td class="col1"> MX24L6405D </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> <strong>Flash size:</strong>              </td><td class="col1"> 8192 KiB </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> <strong>RAM:</strong>                     </td><td class="col1 leftalign"> 64 MiB   </td>
	</tr>
	<tr class="row8">
		<td class="col0 leftalign"> <strong>Wireless:</strong>                </td><td class="col1 leftalign"> RT2860v2_ap 2.4GHz 802.11bgn  </td>
	</tr>
	<tr class="row9">
		<td class="col0"> <strong><a href="../../doc/hardware/switch" class="wikilink1" title="doc:hardware:switch">Switch</a>:</strong> </td><td class="col1 leftalign"> RealTek RTL8367RB Gigabit     </td>
	</tr>
	<tr class="row10">
		<td class="col0 leftalign"> <strong>USB:</strong>                     </td><td class="col1 leftalign"> Yes 1 x 2.0     </td>
	</tr>
	<tr class="row11">
		<td class="col0 leftalign"> <strong><a href="../../OpenWrtDocs/Customizing/Hardware/Serial_Console" class="wikilink1" title="doc:hardware:port.serial">Serial</a>:</strong>  </td><td class="col1 leftalign"> Yes  </td>
	</tr>
	<tr class="row12">
		<td class="col0 leftalign"> <strong><a href="../../doc/hardware/port.jtag" class="wikilink1" title="doc:hardware:port.jtag">JTAG</a>:</strong>      </td><td class="col1 leftalign"> <a href="dir-645#jtag" title="toh:d-link:dir-645 ↵" class="wikilink1">?</a>  </td>
	</tr>
</table></div>

</div>

<h3 class="sectionedit25" id="photos">Photos</h3>
<div class="level3">

<p>
Model Number
</p>

<p>
<em>Front:</em>
</p>

<p>
<strong>Photo of front of the casing</strong>
</p>

<p>
<em>Back:</em>
</p>

<p>
<strong>Photo of back of the casing</strong>
</p>

</div>

<h3 class="sectionedit26" id="opening_the_case">Opening the case</h3>
<div class="level3">

<p>
<strong>Note:</strong> This will void your warranty!
</p>
<ul>
<li class="level1"><div class="li">To remove the cover do a/b/c</div>
</li>
</ul>

<p>
<em>Main PCB</em>
</p>

<p>
<strong>Photo of PCB</strong>
</p>

</div>

<h3 class="sectionedit27" id="serial">Serial</h3>
<div class="level3">

<p>
The serial port is connected to the header labeled JP1.  The pinout is as follows:
</p>
<div class="table sectionedit28"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> JP1 Pins</th><th class="col1"> Signal </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> Pin </td><td class="col1"> Rx </td>
	</tr>
	<tr class="row2">
		<td class="col0"> no pin </td><td class="col1 leftalign">  </td>
	</tr>
	<tr class="row3">
		<td class="col0"> Pin </td><td class="col1"> +3.3v </td>
	</tr>
	<tr class="row4">
		<td class="col0"> Pin </td><td class="col1"> Gnd </td>
	</tr>
	<tr class="row5">
		<td class="col0"> Pin </td><td class="col1"> Tx </td>
	</tr>
</table></div>

<p>
Settings:  57600 8N1
</p>

<p>
→ <a href="../../OpenWrtDocs/Customizing/Hardware/Serial_Console" class="wikilink1" title="doc:hardware:port.serial">port.serial</a> general information about the serial port, serial port cable, etc.
</p>

<p>
How to connect to the Serial Port of this specific device:
</p>

<p>
<strong>Photo of PCB with markings</strong>
</p>

</div>

<h3 class="sectionedit29" id="jtag">JTAG</h3>
<div class="level3">

<p>
→ <a href="../../doc/hardware/port.jtag" class="wikilink1" title="doc:hardware:port.jtag">port.jtag</a> general information about the JTAG port, JTAG cable, etc.
</p>

<p>
How to connect to the JTAG Port of this specific device:
</p>

<p>
<strong>Photo of PCB with markings</strong>
</p>

</div>

<h2 class="sectionedit30" id="debricking">Debricking</h2>
<div class="level2">

<p>
→ <a href="../../doc/howto/generic.debrick" class="wikilink1" title="doc:howto:generic.debrick">generic.debrick</a>
</p>

<p>
Like other D-Link routers it has a built-in firmware recovery mode. 
</p>

<p>
To access, simply hold down the reset button while powering on the router. The WAN LED should blink. Set your computer with a static IP in the 192.168.0.x range, and open 192.168.0.101 in a web browser. Recovery mode loads up within a few seconds, but doesn&#039;t respond to pings. If the power LED is blinking the above page should be accessible.
</p>

<p>
You will need to flash either a stock firmware image or Openwrt-factory image, *not* a sysupgrade image.
</p>

</div>

<h2 class="sectionedit31" id="bootloader_mods">Bootloader Mods</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> you could read about <a href="../../doc/techref/bootloader.1" class="wikilink1" title="doc:techref:bootloader">bootloader</a> in general</div>
</li>
</ol>

</div>

<h2 class="sectionedit32" id="hardware_mods">Hardware mods</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> as a beginner, you really should inform yourself about <a href="../../doc/hardware/soldering" class="wikilink1" title="doc:hardware:soldering">soldering</a> in general and then obtain some practical experience!</div>
</li>
</ol>

</div>

<h3 class="sectionedit33" id="mib_ram_mod">128MiB RAM Mod</h3>
<div class="level3">

</div>

<h3 class="sectionedit34" id="i_c_gpio_mod">I²C GPIO Mod</h3>
<div class="level3">

</div>

<h3 class="sectionedit35" id="i_c_tiny-usb_mod">I²C Tiny-USB Mod</h3>
<div class="level3">

</div>

<h2 class="sectionedit36" id="notes">Notes</h2>
<div class="level2">

</div>

<h2 class="sectionedit37" id="telnet_login">Telnet Login</h2>
<div class="level2">

<p>
Login: Alphanetworks
</p>

<p>
Password: Firmware Signatur for example: wrgn39_dlob.hans_dir645
</p>

</div>

<h2 class="sectionedit38" id="tags">Tags</h2>
<div class="level2">

<p>
For some Help with the Tags, please have a look here: <a href="../../meta/tags" class="wikilink1" title="meta:tags">tags</a>
</p>
<div class="tags"><span>
	<a href="../../tag/ramips?do=showtag&amp;tag=ramips" class="wikilink1" title="tag:ramips" rel="tag">ramips</a>,
	<a href="../../tag/rt3883?do=showtag&amp;tag=rt3883" class="wikilink1" title="tag:rt3883" rel="tag">rt3883</a>,
	<a href="../../tag/gigabitethernet?do=showtag&amp;tag=GigabitEthernet" class="wikilink1" title="tag:gigabitethernet" rel="tag">GigabitEthernet</a>,
	<a href="../../tag/5port?do=showtag&amp;tag=5Port" class="wikilink1" title="tag:5port" rel="tag">5Port</a>,
	<a href="../../tag/usb?do=showtag&amp;tag=USB" class="wikilink1" title="tag:usb" rel="tag">USB</a>,
	<a href="../../tag/802.11bgn?do=showtag&amp;tag=802.11bgn" class="wikilink1" title="tag:802.11bgn" rel="tag">802.11bgn</a>,
	<a href="../../tag/rt2860?do=showtag&amp;tag=rt2860" class="wikilink1" title="tag:rt2860" rel="tag">rt2860</a>,
	<a href="../../tag/nondetachableantenna?do=showtag&amp;tag=NonDetachableAntenna" class="wikilink1" title="tag:nondetachableantenna" rel="tag">NonDetachableAntenna</a>,
	<a href="../../tag/64ram?do=showtag&amp;tag=64RAM" class="wikilink1" title="tag:64ram" rel="tag">64RAM</a>,
	<a href="../../tag/8flash?do=showtag&amp;tag=8Flash" class="wikilink1" title="tag:8flash" rel="tag">8Flash</a>,
	<a href="../../tag/mips?do=showtag&amp;tag=MIPS" class="wikilink1" title="tag:mips" rel="tag">MIPS</a>,
	<a href="../../tag/74kc?do=showtag&amp;tag=74Kc" class="wikilink1" title="tag:74kc" rel="tag">74Kc</a>
</span></div>

</div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>toh/d-link/dir-645.txt</bdi> · Last modified: 2014/03/19 12:27 (external edit)</div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="http://wiki.openwrt.org/toh/d-link/dir-645?do=edit"  class="action source" accesskey="v" rel="nofollow" title="Show pagesource [V]"><span>Show pagesource</span></a></li><li><a href="http://wiki.openwrt.org/toh/d-link/dir-645?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="http://wiki.openwrt.org/toh/d-link/dir-645?do=backlink"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="dir-645#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license" class="urlextern">CC Attribution-Noncommercial-Share Alike 3.0 Unported</a></bdi></div>
    <div class="buttons">
        <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license"><img src="../../lib/images/license/button/cc-by-nc-sa.png" alt="CC Attribution-Noncommercial-Share Alike 3.0 Unported" /></a>        <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="../../lib/tpl/openwrt/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://www.php.net" title="Powered by PHP" ><img
            src="../../lib/tpl/openwrt/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="../../lib/tpl/openwrt/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="../../lib/tpl/openwrt/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="../../lib/tpl/openwrt/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="http://wiki.openwrt.org/lib/exe/indexer.php?id=toh%3Ad-link%3Adir-645&amp;1432279810" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->
</body>
</html>
