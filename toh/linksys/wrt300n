<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>Linksys WRT300N [OpenWrt Wiki]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="toh,linksys,wrt300n"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../lib/exe/opensearch.php" title="OpenWrt Wiki"/>
<link rel="start" href="../../index.html"/>
<link rel="contents" href="http://wiki.openwrt.org/toh/linksys/wrt300n?do=index" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Recent changes" href="../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="../../feed.php?mode=list&amp;ns=toh:linksys"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="http://wiki.openwrt.org/_export/xhtml/toh/linksys/wrt300n"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="http://wiki.openwrt.org/_export/raw/toh/linksys/wrt300n"/>
<link rel="canonical" href="wrt300n"/>
<link rel="stylesheet" type="text/css" href="../../lib/exe/css.php?t=openwrt&amp;tseed=6f44f363dc87908d905dc56ff3acbfc4"/>
<script type="text/javascript">/*<![CDATA[*/var NS='toh:linksys';var JSINFO = {"id":"toh:linksys:wrt300n","namespace":"toh:linksys"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../lib/exe/js.php?tseed=6f44f363dc87908d905dc56ff3acbfc4"></script>
<script type="text/javascript" charset="utf-8">/*<![CDATA[*/jQuery(function(){
	for ( i=0; i < document.forms.length; i++ ) {
		if (document.forms[i].method == 'post') {
			var myElement = document.createElement('input');
			myElement.setAttribute('type', 'hidden');
			myElement.name = 'bb2_screener_';
			myElement.value = '1432282529 166.182.3.66';
			document.forms[i].appendChild(myElement);
		}
	}
});
/*!]]>*/</script>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="../../lib/tpl/openwrt/images/favicon.ico" />
<link rel="apple-touch-icon" href="../../lib/tpl/openwrt/images/apple-touch-icon.png" />
    </head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_openwrt     ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="wrt300n#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="../../start"  accesskey="h" title="[H]"><img src="../../lib/tpl/openwrt/images/logo.png" width="386" height="98" alt="" /> <span>OpenWrt Wiki</span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="http://wiki.openwrt.org/toh/linksys/wrt300n?do=register"  class="action register" rel="nofollow" title="Register">Register</a></li><li><a href="http://wiki.openwrt.org/toh/linksys/wrt300n?do=login&amp;sectok=382740b13d95f946eed36caa57076b4a"  class="action login" rel="nofollow" title="Login">Login</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="../../start" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="../../doku.php" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="toh:linksys:wrt300n" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Show pagesource</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Login</option><option value="register">Register</option></optgroup></select><input type="submit" value="&gt;" /></div></form>            </div>
            <ul>
                <li><a href="http://wiki.openwrt.org/toh/linksys/wrt300n?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a></li><li><a href="http://wiki.openwrt.org/toh/linksys/wrt300n?do=media&amp;ns=toh%3Alinksys"  class="action media" rel="nofollow" title="Media Manager">Media Manager</a></li><li><a href="http://wiki.openwrt.org/toh/linksys/wrt300n?do=index"  class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                            <div class="youarehere"><span class="bchead">You are here: </span><span class="home"><bdi><a href="../../start" class="wikilink1" title="start">OpenWrt Wiki</a></bdi></span> » <bdi><a href="../start" class="wikilink1" title="toh:start">Table of Hardware</a></bdi> » <bdi><a href="start" class="wikilink1" title="toh:linksys:start">Linksys</a></bdi> » <bdi><span class="curid"><a href="wrt300n" class="wikilink1" title="toh:linksys:wrt300n">Linksys WRT300N</a></span></bdi></div>
                                    <div class="plugin_multilingual">
        <ul>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/cz/toh/linksys/wrt300n" class="media" title="cz:toh:linksys:wrt300n"><img src="../../lib/exe/fetch.php?cache=&amp;tok=aff589&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fcz.gif" class="media" title="Čeština (Czech)" alt="Čeština (Czech)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/de/toh/linksys/wrt300n" class="media" title="de:toh:linksys:wrt300n"><img src="../../lib/exe/fetch.php?cache=&amp;tok=e24010&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fde.gif" class="media" title="Deutsch (German)" alt="Deutsch (German)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <span class="curid"><a href="wrt300n" class="media" title="toh:linksys:wrt300n"><img src="../../lib/exe/fetch.php?cache=&amp;tok=2a37ae&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fgb.gif" class="media" title="English" alt="English" /></a></span>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/es/toh/linksys/wrt300n" class="media" title="es:toh:linksys:wrt300n"><img src="../../lib/exe/fetch.php?cache=&amp;tok=46c004&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fmx.gif" class="media" title="Español (Spanish, Mexico)" alt="Español (Spanish, Mexico)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/fr/toh/linksys/wrt300n" class="media" title="fr:toh:linksys:wrt300n"><img src="../../lib/exe/fetch.php?cache=&amp;tok=a5beba&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ffr.gif" class="media" title="Français (French)" alt="Français (French)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/hu/toh/linksys/wrt300n" class="media" title="hu:toh:linksys:wrt300n"><img src="../../lib/exe/fetch.php?cache=&amp;tok=6b5470&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fhu.gif" class="media" title="Magyar (Hungarian)" alt="Magyar (Hungarian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/jp/toh/linksys/wrt300n" class="media" title="jp:toh:linksys:wrt300n"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f999fc&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fjp.gif" class="media" title="日本語 (Japanese)" alt="日本語 (Japanese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pl/toh/linksys/wrt300n" class="media" title="pl:toh:linksys:wrt300n"><img src="../../lib/exe/fetch.php?cache=&amp;tok=c805c0&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fpl.gif" class="media" title="Poliski (Polish)" alt="Poliski (Polish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pt-br/toh/linksys/wrt300n" class="media" title="pt-br:toh:linksys:wrt300n"><img src="../../lib/exe/fetch.php?cache=&amp;tok=13127d&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fbr.gif" class="media" title="Português brasileiro (Portuguese, Brasil)" alt="Português brasileiro (Portuguese, Brasil)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/ru/toh/linksys/wrt300n" class="media" title="ru:toh:linksys:wrt300n"><img src="../../lib/exe/fetch.php?cache=&amp;tok=66ab5e&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fru.gif" class="media" title="Русский (Russsian)" alt="Русский (Russsian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/tr/toh/linksys/wrt300n" class="media" title="tr:toh:linksys:wrt300n"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f4beed&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ftr.gif" class="media" title="Tϋrkçe (Turkish)" alt="Tϋrkçe (Turkish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-cn/toh/linksys/wrt300n" class="media" title="zh-cn:toh:linksys:wrt300n"><img src="../../lib/exe/fetch.php?cache=&amp;tok=93625a&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-cn.gif" class="media" title="官話/官话 (Chinese)" alt="官話/官话 (Chinese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-tw/toh/linksys/wrt300n" class="media" title="zh-tw:toh:linksys:wrt300n"><img src="../../lib/exe/fetch.php?cache=&amp;tok=b56198&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-tw.gif" class="media" title="臺灣華語 (Taiwanese)" alt="臺灣華語 (Taiwanese)" /></a>
              </div>
            </div>
          </li>
        </ul>
      </div>
        </div>
    
    
    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>toh:linksys:wrt300n</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level2"><div class="li"><a href="wrt300n#version_10">Version 1.0</a></div></li>
<li class="level2"><div class="li"><a href="wrt300n#version_11">Version 1.1</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="wrt300n#forum_success_story">=== Forum Success Story ===</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="wrt300n#version_20">Version 2.0</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="linksys_wrt300n">Linksys WRT300N</h1>
<div class="level1">

<p>
<strong>Identification by S/N</strong>
</p>

<p>
Useful for identifying shrinkwrapped units. The <strong>S/N</strong> can be found on the box, below the UPC barcode.
</p>
<div class="table sectionedit2"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Model </th><th class="col1"> S/N </th><th class="col2"> Stable<br/>
White Russian </th><th class="col3"> Kamikaze </th><td class="col4"></td>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> WRT300N v1.0 </td><td class="col1 rightalign">  CNP01 </td><td class="col2 rightalign">  ( ) </td><td class="col3 rightalign">  ( ) </td><td class="col4"></td>
	</tr>
	<tr class="row2">
		<td class="col0"> WRT300N v2.0 </td><td class="col1 rightalign">  SNP00 </td><td class="col2 rightalign">  ( ) </td><td class="col3 rightalign">  (X) </td><td class="col4"> (X) </td>
	</tr>
</table></div>

</div>

<h3 class="sectionedit3" id="version_10">Version 1.0</h3>
<div class="level3">
<div class="table sectionedit4"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Model </th><th class="col1"> boardrev </th><th class="col2"> boardtype </th><th class="col3"> boardflags </th><th class="col4"> boardflags2 </th><th class="col5"> boardnum </th><th class="col6"> wl0_corerev </th><th class="col7"> cpu model </th><th class="col8"> boot_ver </th><th class="col9"> pmon_ver </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> WRT300N v1.0 </td><td class="col1 rightalign">      0x10 </td><td class="col2 rightalign">   0x0472 </td><td class="col3 rightalign">       0x0010 </td><td class="col4 rightalign">        0 </td><td class="col5 rightalign">   42 </td><td class="col6 rightalign">        11 </td><td class="col7 rightalign">  BCM3302 V0.6 </td><td class="col8 rightalign">   v3.9 </td><td class="col9 rightalign">   CFE 4.81.17.0 </td>
	</tr>
</table></div>

<p>
The WRT300N v1.0 is based on the Broadcom 4704 cpu. I guess it has about 300MHz. It has 4 <abbr title="Megabyte">MB</abbr> flash and 32 <abbr title="Megabyte">MB</abbr> SDRAM. The wireless NIC is a Broadcom Cardbus card with BCM4329 Chipset.  The switch is an Broadcom BCM5325   FKQMG.    
 Forum Entries claim this version is supported but creator of this page has no documented hardware experience.
</p>

</div>

<h3 class="sectionedit5" id="version_11">Version 1.1</h3>
<div class="level3">
<pre class="code">  === CFE Bootloader Output to Serial Port ===</pre>

<p>
<code>Start to blink diag led …


CFE version 1.0.37 for BCM947XX (32bit,SP,LE)
Build Date: Tue Feb 27 19:35:53 CST 2007 (root@localhost.localdomain)
Copyright (C) 2000,2001,2002,2003 Broadcom Corporation.

Initializing Arena
Initializing PCI. [normal]
PCI bus 0 slot 0/0: vendor 0x14e4 product 0x0800 (flash memory, rev 0x02)
PCI bus 0 slot 1/0: vendor 0x14e4 product 0x471f (ethernet network, rev 0x02)
PCI bus 0 slot 2/0: vendor 0x14e4 product 0x471a (USB serial bus, interface 0x10, rev 0x02)
PCI bus 0 slot 2/1: vendor 0x14e4 product 0x471a (USB serial bus, interface 0x20, rev 0x02)
PCI bus 0 slot 3/0: vendor 0x14e4 product 0x471b (USB serial bus, rev 0x02)
PCI bus 0 slot 4/0: vendor 0x14e4 product 0x0804 (PCI bridge, rev 0x02)
PCI bus 0 slot 5/0: vendor 0x14e4 product 0x0816 (MIPS processor, rev 0x02)
PCI bus 0 slot 6/0: vendor 0x14e4 product 0x471d (IDE mass storage, rev 0x02)
PCI bus 0 slot 7/0: vendor 0x14e4 product 0x4718 (network/computing crypto, rev 0x02)
PCI bus 0 slot 8/0: vendor 0x14e4 product 0x080f (RAM memory, rev 0x02)
PCI bus 0 slot 9/0: vendor 0x14e4 product 0x471e (class 0xfe, subclass 0x00, rev 0x02)
Initializing Devices.

No DPN
This is a Parallel Flash
Partition information:
boot    #00   00000000 → 0003FFFF  (262144)
trx     #01   00040000 → 0004001B  (28)
os      #02   0004001C → 007F7FFF  (8093668)
nvram   #03   007F8000 → 007FFFFF  (32768)
Partition information:
boot    #00   00000000 → 0003FFFF  (262144)
trx     #01   00040000 → 007F7FFF  (8093696)
nvram   #02   007F8000 → 007FFFFF  (32768)
Reset switch via GPIO 8 …
PCI bus 0 slot 1/0: pci_map_mem: attempt to map 64-bit region tag=0x800 @ addr=18010004
PCI bus 0 slot 1/0: pci_map_mem: addr=0x18010004 pa=0x18010000
ge0: BCM5750 Ethernet at 0x18010000
CPU type 0x2901A: 300MHz
Total memory: 32768 KBytes

Total memory used by CFE:  0x80600000 - 0x806A1900 (661760)
Initialized Data:          0x80636C40 - 0x80639BE0 (12192)
BSS Area:                  0x80639BE0 - 0x8063B900 (7456)
Local Heap:                0x8063B900 - 0x8069F900 (409600)
Stack Area:                0x8069F900 - 0x806A1900 (8192)
Text (code) segment:       0x80600000 - 0x80636C40 (224320)
Boot area (physical):      0x006A2000 - 0x006E2000
Relocation Factor:         I:00000000 - D:00000000

Boot version: v4.4
The boot is CFE
mac_init(): Find mac [00:1d:7e:1c:38:9a] in location 0
Nothing…
CMD: [ifconfig eth0 -addr=192.168.1.1 -mask=255.255.255.0]
eth0: Link speed: 100BaseT FDX
Device eth0:  hwaddr 00-1D-7E-1C-38-9A, ipaddr 192.168.1.1, mask 255.255.255.0
        gateway not set, nameserver not set
CMD: [go;]
Check CRC of image1
  Len:     0xDB000      (897024)        (0xBC040000)
  Offset0: 0x1C         (28)            (0xBC04001C)
  Offset1: 0x974        (2420)  (0xBC040974)
  Offset2: 0xDB000      (897024)        (0xBC11B000)
  Header CRC:    0x292ED801
  Calculate CRC: 0x292ED801
Image 1 is OK
Try to load image 1.
Waiting for 3 seconds to upgrade …
CMD: [load -raw -addr=0x806a1900 -max=0xf70000 :]
Loader:raw Filesys:tftp Dev:eth0 File:: Options:(null)
Loading: _tftpd_open(): retries=0/3
_tftpd_open(): retries=1/3
_tftpd_open(): retries=2/3
Failed.
Could not load :: Timeout occured
CMD: [boot -raw -z -addr=0x80001000 -max=0xf70000 flash0.os:]
Loader:raw Filesys:raw Dev:flash0.os File: Options:(null)
Loading: .. 4092 bytes read
Entry at 0x80001000
Closing network.
eth0: cannot clear 1400/00000002</code>
</p>

</div>

<h4 id="forum_success_story">=== Forum Success Story ===</h4>
<div class="level4">

<p>
<a href="https://forum.openwrt.org/viewtopic.php?id=33937" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?id=33937"  rel="nofollow">https://forum.openwrt.org/viewtopic.php?id=33937</a>
</p>

</div>

<h3 class="sectionedit6" id="version_20">Version 2.0</h3>
<div class="level3">

<p>
The WRT300N v2.0 is based on the Intel IXP420 cpu which is part of the IXP425 family. The cpu runs at 266Mhz.  It has 4Mb of flash and 16Mb of RAM. It has a Marvell 88E6060 switch chip. The wireless is provided by a mini-pci card containing an ar5416 or ar5418 MAC. It is running linux out of the box.
</p>

<p>
<strong>Table summary</strong>
</p>

<p>
How to get info:
</p>
<ul>
<li class="level1"><div class="li"> board info: <pre class="code">nvram show | grep board | sort</pre>
</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> cpu model: <pre class="code">grep cpu /proc/cpuinfo</pre>
</div>
</li>
</ul>

<p>
<strong>How to install OpenWRT</strong>
</p>
<ul>
<li class="level1"><div class="li"> Page in spanish with some useful precompiled files, hacks and and instructions: <a href="http://heli.xbot.es/wp/?p=35" class="urlextern" title="http://heli.xbot.es/wp/?p=35"  rel="nofollow">http://heli.xbot.es/wp/?p=35</a></div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> Precompiled RedBoot available at (<a href="http://davidkra.net/downloads2.html" class="urlextern" title="http://davidkra.net/downloads2.html"  rel="nofollow">http://davidkra.net/downloads2.html</a> not working) <a href="http://www.arrakis.es/~helitp/redboot_mio.rar" class="urlextern" title="http://www.arrakis.es/~helitp/redboot_mio.rar"  rel="nofollow">http://www.arrakis.es/~helitp/redboot_mio.rar</a>, skip to step 10 if you use it.</div>
</li>
</ul>

<p>
<br/>
Step 1: Get Linksys WRT300N v2.00.20 sources<br/>
<br/>
 Step 2: Untar sources and go to sources directory.<br/>
<br/>
 Step 3: Get this toolchain: <a href="ftp://ftp.ges.redhat.com/private/gnupro-xscale-030422/i686-pc-linux-gnulibc2.2-x-xscale-elf.tar.Z" class="urlextern" title="ftp://ftp.ges.redhat.com/private/gnupro-xscale-030422/i686-pc-linux-gnulibc2.2-x-xscale-elf.tar.Z"  rel="nofollow">ftp://ftp.ges.redhat.com/private/gnupro-xscale-030422/i686-pc-linux-gnulibc2.2-x-xscale-elf.tar.Z</a><br/>
<br/>
<br/>
 Step 4: mkdir gnutools &amp;&amp; mv *xscale-elf.tar.Z gnutools &amp;&amp; cd gnutools<br/>
<br/>
 Step 5: Untar toolchain with this command: gunzip2 *xscale-elf.tar.Z; tar xvf *xscale-elf.tar<br/>
<br/>
 Step 6: export PATH=$PWD/H-i686-pc-linux-gnulibc-2.2/bin:$PATH &amp;&amp; cd ../src/redboot <br/>
<br/>
 Step 7: Edit options/startup_ROMRAM.edl: replace <br/>

</p>

<p>
<pre class="code">cdl_option CYGOPT_REDBOOT_FIS {
    user_value 0
}; </pre>

</p>

<p>
with:
</p>

<p>
<pre class="code">cdl_option CYGOPT_REDBOOT_FIS {
    user_value 1
}; </pre>

</p>

<p>
and replace:
</p>

<p>
<pre class="code">cdl_component CYGSEM_REDBOOT_FLASH_CONFIG {
    user_value 0
};</pre>

</p>

<p>
with:
</p>

<p>
<pre class="code">cdl_component CYGSEM_REDBOOT_FLASH_CONFIG {
    user_value 1
};</pre>

</p>

<p>
Step 8: &#039;make&#039; <br/>
<br/>
 Step 9: Setup a TFTPd or HTTPd, copy build/wrt300n/install/bin/redboot.bin to your filedir for your server<br/>
<br/>
 Step 10: Get into RedBoot ( Read this <a href="http://www.nslu2-linux.org/wiki/HowTo/ReflashUsingRedbootAndTFTP" class="urlextern" title="http://www.nslu2-linux.org/wiki/HowTo/ReflashUsingRedbootAndTFTP"  rel="nofollow">http://www.nslu2-linux.org/wiki/HowTo/ReflashUsingRedbootAndTFTP</a> , serial console preferred), type:<br/>

</p>

<p>
<pre class="code">(only if via serial console) ether
ip -h {yourIP}
load -r -b 0x70000 -m (choose tftp or http, i&#039;ll use http) http /redboot.bin
fis write -f 0x50060000 -b 0x70000 -l 0x4d254 //possible typos: length and flash address. if it doesn&#039;t work, first try -l 0x4fd00 and if it still doesn&#039;t work, try -f 0x50000000
reset</pre>

</p>

<p>
Step 11: Get <a href="http://downloads.openwrt.org/kamikaze/7.09/ixp4xx-2.6/openwrt-ixp4xx-2.6-squashfs.img" class="urlextern" title="http://downloads.openwrt.org/kamikaze/7.09/ixp4xx-2.6/openwrt-ixp4xx-2.6-squashfs.img"  rel="nofollow">http://downloads.openwrt.org/kamikaze/7.09/ixp4xx-2.6/openwrt-ixp4xx-2.6-squashfs.img</a> and <a href="http://downloads.openwrt.org/kamikaze/7.09/ixp4xx-2.6/openwrt-wrt300nv2-2.6-zImage" class="urlextern" title="http://downloads.openwrt.org/kamikaze/7.09/ixp4xx-2.6/openwrt-wrt300nv2-2.6-zImage"  rel="nofollow">http://downloads.openwrt.org/kamikaze/7.09/ixp4xx-2.6/openwrt-wrt300nv2-2.6-zImage</a> , rename the first to wrt.img, second to wrt,zI. put them into your filedir for your server <br/>
<br/>
 Step 12: Get into RedBoot, again: type:
</p>

<p>
<pre class="code">fis init
(only if via serial console) ether
ip -h {yourip}
load -r -b 0x70000 -m {http,tftp} http /wrt.zI
fis create kernel
load -r -b 0x70000 -m {http,tftp} http /wrt.img
fis create rootfs</pre>

</p>

<p>
Step 13: Almost done :-3 , final command in RedBoot:  <pre class="code"> fis load kernel </pre>

 <br/>
<br/>
Step 14. DONE<br/>
<br/>

</p>

<p>
If you want to have your box auto-bootable, run &#039;fconfig boot_script&#039;, substitute false with true and enter:
</p>

<p>
<pre class="code">ether
fis load kernel
exec</pre>

</p>
<ul>
<li class="level1"><div class="li"> Set Timeout to something bigger than 1.<strong>OpenWRT boot log</strong></div>
</li>
</ul>

<p>
<pre class="code">Uncompressing Linux................................................................. done, booting the kernel.
Linux version 2.6.21.6 (nbd@ds10) (gcc version 4.1.2) #2 Sun Sep 30 20:44:34 CEST 2007
CPU: XScale-IXP42x Family [690541f1] revision 1 (ARMv5TE), cr=000039ff
Machine: Linksys WRT300N v2
Memory policy: ECC disabled, Data cache writeback
CPU0: D VIVT undefined 5 cache
CPU0: I cache: 32768 bytes, associativity 32, 32 byte lines, 32 sets
CPU0: D cache: 32768 bytes, associativity 32, 32 byte lines, 32 sets
Built 1 zonelists.  Total pages: 4064
Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 noinitrd console=ttyS0,115200 init=/etc/preinit
PID hash table entries: 64 (order: 6, 256 bytes)
Dentry cache hash table entries: 2048 (order: 1, 8192 bytes)
Inode-cache hash table entries: 1024 (order: 0, 4096 bytes)
Memory: 16MB = 16MB total
Memory: 14172KB available (1788K code, 167K data, 76K init)
Mount-cache hash table entries: 512
CPU: Testing write buffer coherency: ok
NET: Registered protocol family 16
IXP4xx: Using 16MiB expansion bus window size
PCI: IXP4xx is host
PCI: IXP4xx Using direct access for memory space
PCI: bus0: Fast back to back transfers enabled
dmabounce: registered device 0000:00:01.0 on pci bus
Time: OSTS clocksource has been installed.
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 512 (order: 0, 4096 bytes)
TCP bind hash table entries: 512 (order: -1, 2048 bytes)
TCP: Hash tables configured (established 512 bind 512)
TCP reno registered
NetWinder Floating Point Emulator V0.97 (double precision)
squashfs: version 3.0 (2006/03/15) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (C) 2001-2006 Red Hat, Inc.
io scheduler noop registered
io scheduler deadline registered (default)
IXP4xx Watchdog Timer: heartbeat 60 sec
Serial: 8250/16550 driver $Revision: 1.90 $ 2 ports, IRQ sharing disabled
serial8250.0: ttyS0 at MMIO 0xc8001000 (irq = 13) is a XScale
IXP4XX Q Manager 0.2.1 initialized.
IXP4XX NPE driver Version 0.3.0 initialized
ixp_crypto: No HW crypto available
IXP4XX-Flash.0: Found 1 x16 devices at 0x0 in 16-bit bank
 Amd/Fujitsu Extended Query Table at 0x0040
number of CFI chips: 1
cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.
Searching for RedBoot partition table in IXP4XX-Flash.0 at offset 0x3f0000
5 RedBoot partitions found on MTD device IXP4XX-Flash.0
Creating 5 MTD partitions on &quot;IXP4XX-Flash.0&quot;:
0x00000000-0x00080000 : &quot;RedBoot&quot;
0x00080000-0x00170000 : &quot;kernel&quot;
0x00170000-0x00290000 : &quot;rootfs&quot;
0x00260000-0x00290000 : &quot;rootfs_data&quot;
0x00290000-0x003f0000 : &quot;unallocated&quot;
0x003f0000-0x00400000 : &quot;FIS directory&quot;
i2c /dev entries driver
nf_conntrack version 0.5.0 (128 buckets, 1024 max)
ip_tables: (C) 2000-2006 Netfilter Core Team
TCP westwood registered
NET: Registered protocol family 1
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear 
All bugs added by David S. Miller 
XScale DSP coprocessor detected.
ixp4xx_mac driver 0.3.1: eth0 on NPE-B with PHY[-1] initialized
ixp4xx_mac driver 0.3.1: eth1 on NPE-C with PHY[1] initialized
drivers/rtc/hctosys.c: unable to open rtc device (rtc0)
VFS: Mounted root (squashfs filesystem) readonly.
Freeing init memory: 76K
Warning: unable to open an initial console.
- preinit -
jffs2 not ready yet; using ramdisk
mini_fo: using base directory: /
mini_fo: using storage directory: /tmp/root
- init -
init started:  BusyBox v1.4.2 (2007-09-29 10:12:09 CEST) multi-call binary
Please press Enter to activate this console. eth0: NPE-B not running
eth0: NPE-B not running
PPP generic driver version 2.4.2
wlan: 0.8.4.2 (svn r2568)
ath_hal: module license &#039;Proprietary&#039; taints kernel.
ath_hal: 0.9.30.13 (AR5210, AR5211, AR5212, AR5416, RF5111, RF5112, RF2413, RF5413, RF2133, REGOPS_FUNC)
ath_rate_minstrel: Minstrel automatic rate control algorithm 1.2 (svn r2568)
ath_rate_minstrel: look around rate set to 10%
ath_rate_minstrel: EWMA rolloff level set to 75%
ath_rate_minstrel: max segment size in the mrr set to 6000 us
wlan: mac acl policy registered
ath_pci: 0.9.4.5 (svn r2568)
PCI: enabling device 0000:00:01.0 (0340 -&gt; 0342)
irq 25: nobody cared (try booting with the &quot;irqpoll&quot; option)
handlers:
[]
Disabling IRQ #25
MadWifi: unable to attach hardware: &#039;Hardware didn&#039;t respond as expected&#039; (HAL status 3)
jffs2: Too few erase blocks (3)
BusyBox v1.4.2 (2007-09-29 10:12:09 CEST) Built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.
  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   |   _  |  -__|     |   |  |  |    _|    _|
 |_ ^ |_____|__| ^ ^ |  |____|
          |__| W I R E L E S S   F R E E D O M
 KAMIKAZE (7.09) -----------------------------------
   * 10 oz Vodka       Shake well with ice and strain
   * 10 oz Triple sec  mixture into 10 shot glasses.
   * 10 oz lime juice  Salute!
 ---------------------------------------------------
root@OpenWrt:/# </pre>

</p>

<p>
<strong>Hardware hacking</strong>
</p>

<p>
Memory update to 32Mb using two K4S281632d or HY57V281620h: <a href="http://heli.xbot.es/wp/?p=35" class="urlextern" title="http://heli.xbot.es/wp/?p=35"  rel="nofollow">http://heli.xbot.es/wp/?p=35</a>
Tested with Bleeding edge r26387, partial log:
</p>

<p>
<pre class="code">RedBoot(tm) bootstrap and debug environment, compiLed by helitp@arrakis.es [ROMRAM]
Red Hat certified release, version 2.02 - built 21:54:28, Apr 4 2011

Platform: Intel Generic Residential Gateway (IXP42X 266MHz) BE
Copyright (C) 2000, 2001, 2002, 2003, 2004 Red Hat, Inc.

RAM: 0x00000000-0x02000000, [0x0006ac98-0x01fe1000] available
FLASH: 0x50000000 - 0x50400000, 64 blocks of 0x00010000 bytes each.
== Executing boot script in 2.000 seconds - enter ^C to abort
RedBoot&gt; ether

Trying NPE-B...success. Using NPE-B with PHY 16.
Ethernet eth0: MAC address 00:18:39:2f:fa:74
IP: 192.168.0.10/255.255.255.0, Gateway: 0.0.0.0
Default server: 192.168.0.125
RedBoot&gt; fis load kernel
RedBoot&gt; exec
Using base address 0x0006b000 and length 0x000d5724
Uncompressing Linux... done, booting the kernel.
Linux version 2.6.37.6 (heli@asus) (gcc version 4.5.2 (Linaro GCC 4.5-2011.02-0) ) #7 Fri Apr 8 06:50:08 CEST 2011
CPU: XScale-IXP42x Family [690541f1] revision 1 (ARMv5TE), cr=000039ff
CPU: VIVT data cache, VIVT instruction cache
Machine: Linksys WRT300N v2
Memory policy: ECC disabled, Data cache writeback
Built 1 zonelists in Zone order, mobility grouping on. Total pages: 8128
Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 noinitrd console=ttyS0,115200
PID hash table entries: 128 (order: -3, 512 bytes)
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Memory: 32MB = 32MB total
Memory: 30016k/30016k available, 2752k reserved, 0K highmem</pre>

</p>

<p>
<strong>Opening the case</strong>
</p>

<p>
Pull off the blue Cover Plates on top and bottom of the Device, pull off the black Front cover and remove the 4 Screws in Bottom.
</p>

<p>
<strong>Debug Mode</strong>
</p>

<p>
<strong> </strong>To enable Debug Mode, log on to your router and type: <a href="http://you.rro.ute.rip/setup.cgi?todo=debug" class="urlextern" title="http://you.rro.ute.rip/setup.cgi?todo=debug"  rel="nofollow">http://you.rro.ute.rip/setup.cgi?todo=debug</a> . Actually I don&#039;t know what happens to the router after enabling, but now i&#039;m auditing the code.
</p>

<p>
<strong>Using ping to run commands</strong>
</p>

<p>
Like with other Linksys routers, it&#039;s possible to run system commands using &quot;ping&quot;; for instance, entering &quot;; reboot&quot; (without quotation marks) in the &quot;ping&quot; tool will reboot the router. <em>Doesn&#039;t work with 2.00.20

<strong>Recovering from a bad flash</strong>

To recover from a bad flash, issue these commands in RedBoot (flashing to linksys fw, assuming you already downloaded it.):

&lt;code&gt;
load -r -b 0x70000 -m (choose between &#039;http&#039; or &#039;tftp&#039;, assuming http, default tftp) http -h 192.168.0.9 (change this to your ip) /wrt300n.bin
fis write -f 0x50000000 -b 0x70000 -l 0x3fffff&lt;/code&gt;

<strong>WRT300N v2 Serial Console</strong>

There aren&#039;t many connector slots on the board. The serial console (JP1) is just above the flash chip on the same side as the power connector. Console speed is 115200,8n1

  * () Vcc () RX () TX () GND
—-
  * <a href="http://wiki.openwrt.org/oldwiki/categorymodel" class="wikilink2" title="oldwiki:categorymodel" rel="nofollow">CategoryModel</a>
The console connector for the WRT300N v2 uses TTL voltage. Thus it cannot be directly connected to a PC RS232 port (you may fry your WRT300N v2 if you do so). It requires level shifting (by the use of MAX3232 component for example). Details about such a modified cable are widely available. Among other places you can find them at the WRT54G (linux) pages.

—-
<strong>WRT300N v2 PCB&#039;s</strong>

<a href="http://wiki.openwrt.org/oldwiki/imagelink_wrt300nv2_side1.jpg_width_800_alt_pcb_front" class="wikilink2" title="oldwiki:imagelink_wrt300nv2_side1.jpg_width_800_alt_pcb_front" rel="nofollow">ImageLink(wrt300nv2_side1.jpg,,width=800,alt=PCB front])</a>

<a href="http://wiki.openwrt.org/_detail/oldwiki/openwrtdocs/hardware/linksys/wrt300nv2_side1.jpg?id=toh%3Alinksys%3Awrt300n" class="media" title="oldwiki:openwrtdocs:hardware:linksys:wrt300nv2_side1.jpg"><img src="http://wiki.openwrt.org/_media/oldwiki/openwrtdocs/hardware/linksys/wrt300nv2_side1.jpg" class="media" title="ASCII" alt="ASCII" /></a>

<a href="http://wiki.openwrt.org/oldwiki/imagelink_wrt300nv2_side2.jpg_width_800_alt_pcb_back" class="wikilink2" title="oldwiki:imagelink_wrt300nv2_side2.jpg_width_800_alt_pcb_back" rel="nofollow">ImageLink(wrt300nv2_side2.jpg,,width=800,alt=PCB back])</a>

<a href="http://wiki.openwrt.org/_detail/oldwiki/openwrtdocs/hardware/linksys/wrt300nv2_side2.jpg?id=toh%3Alinksys%3Awrt300n" class="media" title="oldwiki:openwrtdocs:hardware:linksys:wrt300nv2_side2.jpg"><img src="http://wiki.openwrt.org/_media/oldwiki/openwrtdocs/hardware/linksys/wrt300nv2_side2.jpg" class="media" title="ASCII" alt="ASCII" /></a>

—-
</p>

</div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>toh/linksys/wrt300n.txt</bdi> · Last modified: 2012/06/13 12:37 by <bdi>heli</bdi></div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="http://wiki.openwrt.org/toh/linksys/wrt300n?do=edit"  class="action source" accesskey="v" rel="nofollow" title="Show pagesource [V]"><span>Show pagesource</span></a></li><li><a href="http://wiki.openwrt.org/toh/linksys/wrt300n?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="http://wiki.openwrt.org/toh/linksys/wrt300n?do=backlink"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="wrt300n#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license" class="urlextern">CC Attribution-Noncommercial-Share Alike 3.0 Unported</a></bdi></div>
    <div class="buttons">
        <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license"><img src="../../lib/images/license/button/cc-by-nc-sa.png" alt="CC Attribution-Noncommercial-Share Alike 3.0 Unported" /></a>        <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="../../lib/tpl/openwrt/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://www.php.net" title="Powered by PHP" ><img
            src="../../lib/tpl/openwrt/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="../../lib/tpl/openwrt/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="../../lib/tpl/openwrt/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="../../lib/tpl/openwrt/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="http://wiki.openwrt.org/lib/exe/indexer.php?id=toh%3Alinksys%3Awrt300n&amp;1432282529" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->
</body>
</html>
