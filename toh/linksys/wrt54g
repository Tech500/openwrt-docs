<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>Linksys WRT54G, WRT54GL and WRT54GS [OpenWrt Wiki]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="bcm53xx,bcm5352,mips"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../lib/exe/opensearch.php" title="OpenWrt Wiki"/>
<link rel="start" href="../../index.html"/>
<link rel="contents" href="wrt54g?do=index" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Recent changes" href="../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="../../feed.php?mode=list&amp;ns=toh:linksys"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="../../_export/xhtml/toh/linksys/wrt54g"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="../../_export/raw/toh/linksys/wrt54g"/>
<link rel="canonical" href="wrt54g-tm"/>
<link rel="stylesheet" type="text/css" href="../../lib/exe/css.php?t=openwrt&amp;tseed=6f44f363dc87908d905dc56ff3acbfc4"/>
<script type="text/javascript">/*<![CDATA[*/var NS='toh:linksys';var JSINFO = {"id":"toh:linksys:wrt54g","namespace":"toh:linksys"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../lib/exe/js.php?tseed=6f44f363dc87908d905dc56ff3acbfc4"></script>
<script type="text/javascript" charset="utf-8">/*<![CDATA[*/jQuery(function(){
	for ( i=0; i < document.forms.length; i++ ) {
		if (document.forms[i].method == 'post') {
			var myElement = document.createElement('input');
			myElement.setAttribute('type', 'hidden');
			myElement.name = 'bb2_screener_';
			myElement.value = '1432266234 166.182.3.17';
			document.forms[i].appendChild(myElement);
		}
	}
});
/*!]]>*/</script>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="../../lib/tpl/openwrt/images/favicon.ico" />
<link rel="apple-touch-icon" href="../../lib/tpl/openwrt/images/apple-touch-icon.png" />
    </head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_openwrt     ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="wrt54g-tm#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="../../start"  accesskey="h" title="[H]"><img src="../../lib/tpl/openwrt/images/logo.png" width="386" height="98" alt="" /> <span>OpenWrt Wiki</span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="wrt54g?do=register"  class="action register" rel="nofollow" title="Register">Register</a></li><li><a href="wrt54g?do=login&amp;sectok=382740b13d95f946eed36caa57076b4a"  class="action login" rel="nofollow" title="Login">Login</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="../../start" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="../../doku.php" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="toh:linksys:wrt54g" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Show pagesource</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Login</option><option value="register">Register</option></optgroup></select><input type="submit" value="&gt;" /></div></form>            </div>
            <ul>
                <li><a href="wrt54g?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a></li><li><a href="wrt54g?do=media&amp;ns=toh%253Alinksys"  class="action media" rel="nofollow" title="Media Manager">Media Manager</a></li><li><a href="wrt54g?do=index"  class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                            <div class="youarehere"><span class="bchead">You are here: </span><span class="home"><bdi><a href="../../start" class="wikilink1" title="start">OpenWrt Wiki</a></bdi></span> » <bdi><a href="../start" class="wikilink1" title="toh:start">Table of Hardware</a></bdi> » <bdi><a href="start" class="wikilink1" title="toh:linksys:start">Linksys</a></bdi> » <bdi><span class="curid"><a href="wrt54g-tm" class="wikilink1" title="toh:linksys:wrt54g">Linksys WRT54G, WRT54GL and WRT54GS</a></span></bdi></div>
                                    <div class="plugin_multilingual">
        <ul>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/cz/toh/linksys/wrt54g" class="media" title="cz:toh:linksys:wrt54g"><img src="../../lib/exe/fetch.php?cache=&amp;tok=aff589&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fcz.gif" class="media" title="Čeština (Czech)" alt="Čeština (Czech)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/de/toh/linksys/wrt54g" class="media" title="de:toh:linksys:wrt54g"><img src="../../lib/exe/fetch.php?cache=&amp;tok=e24010&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fde.gif" class="media" title="Deutsch (German)" alt="Deutsch (German)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <span class="curid"><a href="wrt54g-tm" class="media" title="toh:linksys:wrt54g"><img src="../../lib/exe/fetch.php?cache=&amp;tok=2a37ae&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fgb.gif" class="media" title="English" alt="English" /></a></span>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/es/toh/linksys/wrt54g" class="media" title="es:toh:linksys:wrt54g"><img src="../../lib/exe/fetch.php?cache=&amp;tok=46c004&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fmx.gif" class="media" title="Español (Spanish, Mexico)" alt="Español (Spanish, Mexico)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/fr/toh/linksys/wrt54g" class="media" title="fr:toh:linksys:wrt54g"><img src="../../lib/exe/fetch.php?cache=&amp;tok=a5beba&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ffr.gif" class="media" title="Français (French)" alt="Français (French)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/hu/toh/linksys/wrt54g" class="media" title="hu:toh:linksys:wrt54g"><img src="../../lib/exe/fetch.php?cache=&amp;tok=6b5470&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fhu.gif" class="media" title="Magyar (Hungarian)" alt="Magyar (Hungarian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/jp/toh/linksys/wrt54g" class="media" title="jp:toh:linksys:wrt54g"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f999fc&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fjp.gif" class="media" title="日本語 (Japanese)" alt="日本語 (Japanese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pl/toh/linksys/wrt54g" class="media" title="pl:toh:linksys:wrt54g"><img src="../../lib/exe/fetch.php?cache=&amp;tok=c805c0&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fpl.gif" class="media" title="Poliski (Polish)" alt="Poliski (Polish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pt-br/toh/linksys/wrt54g" class="media" title="pt-br:toh:linksys:wrt54g"><img src="../../lib/exe/fetch.php?cache=&amp;tok=13127d&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fbr.gif" class="media" title="Português brasileiro (Portuguese, Brasil)" alt="Português brasileiro (Portuguese, Brasil)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/ru/toh/linksys/wrt54g" class="media" title="ru:toh:linksys:wrt54g"><img src="../../lib/exe/fetch.php?cache=&amp;tok=66ab5e&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fru.gif" class="media" title="Русский (Russsian)" alt="Русский (Russsian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/tr/toh/linksys/wrt54g" class="media" title="tr:toh:linksys:wrt54g"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f4beed&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ftr.gif" class="media" title="Tϋrkçe (Turkish)" alt="Tϋrkçe (Turkish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-cn/toh/linksys/wrt54g" class="media" title="zh-cn:toh:linksys:wrt54g"><img src="../../lib/exe/fetch.php?cache=&amp;tok=93625a&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-cn.gif" class="media" title="官話/官话 (Chinese)" alt="官話/官话 (Chinese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-tw/toh/linksys/wrt54g" class="media" title="zh-tw:toh:linksys:wrt54g"><img src="../../lib/exe/fetch.php?cache=&amp;tok=b56198&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-tw.gif" class="media" title="臺灣華語 (Taiwanese)" alt="臺灣華語 (Taiwanese)" /></a>
              </div>
            </div>
          </li>
        </ul>
      </div>
        </div>
    
    
    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>toh:linksys:wrt54g</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="wrt54g-tm#supported_versions">Supported Versions</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="wrt54g-tm#notes_on_specific_wrt54g_hardware_versions">Notes on specific WRT54G hardware versions</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="wrt54g-tm#wrt54g">WRT54G</a></div></li>
<li class="level3"><div class="li"><a href="wrt54g-tm#wrt54gl">WRT54GL</a></div></li>
<li class="level3"><div class="li"><a href="wrt54g-tm#wrt54g-tm">WRT54G-TM</a></div></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"><a href="wrt54g-tm#basic_configuration">Basic configuration</a></div></li>
<li class="level1"><div class="li"><a href="wrt54g-tm#specific_configuration">Specific Configuration</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="wrt54g-tm#interfaces">Interfaces</a></div></li>
<li class="level2"><div class="li"><a href="wrt54g-tm#internal_architecture_-_wrt54g_v2_v3_wrt54gs_v1_v2">Internal Architecture - WRT54G (v2, v3) &amp; WRT54GS (v1, v2)</a></div></li>
<li class="level2"><div class="li"><a href="wrt54g-tm#switch_ports_for_vlans_-_wrt54g_v2_v3_wrt54gs_v1_v2">Switch Ports (for VLANs) - WRT54G (v2, v3) &amp; WRT54GS (v1, v2)</a></div></li>
<li class="level2"><div class="li"><a href="wrt54g-tm#internal_architecture_-_wrt54g_v4_wrt54gs_v3">Internal Architecture - WRT54G (v4) &amp; WRT54GS (v3)</a></div></li>
<li class="level2"><div class="li"><a href="wrt54g-tm#switch_ports_for_vlans_-_wrt54g_v4_wrt54gs_v3">Switch Ports (for VLANs) - WRT54G (v4) &amp; WRT54GS (v3)</a></div></li>
<li class="level2"><div class="li"><a href="wrt54g-tm#failsafe_mode">Failsafe mode</a></div></li>
<li class="level2"><div class="li"><a href="wrt54g-tm#buttons">Buttons</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="wrt54g-tm#hardware">Hardware</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="wrt54g-tm#opening_the_case">Opening the case</a></div></li>
<li class="level2"><div class="li"><a href="wrt54g-tm#serial_port">Serial port</a></div></li>
<li class="level2"><div class="li"><a href="wrt54g-tm#jtag">JTAG</a></div></li>
<li class="level2"><div class="li"><a href="wrt54g-tm#photos">Photos</a></div></li>
<li class="level2"><div class="li"><a href="wrt54g-tm#hardware_mods">Hardware Mods</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="wrt54g-tm#adding_an_mmcsd_card">Adding an MMC/SD card</a></div></li>
<li class="level3"><div class="li"><a href="wrt54g-tm#adding_usb_ports">Adding USB ports.</a></div></li>
<li class="level3"><div class="li"><a href="wrt54g-tm#power_supply_mods">Power Supply Mods</a></div></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"><a href="wrt54g-tm#installing_openwrt">Installing OpenWrt</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="wrt54g-tm#using_the_linksys_web_gui">Using the Linksys web GUI</a></div></li>
<li class="level2"><div class="li"><a href="wrt54g-tm#using_the_tftp_method">Using the TFTP method</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="wrt54g-tm#upgrading_openwrt">Upgrading OpenWrt</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="wrt54g-tm#using_mtd_or_sysupgrade">Using mtd OR sysupgrade</a></div></li>
<li class="level2"><div class="li"><a href="wrt54g-tm#using_luci">Using LuCI</a></div></li>
<li class="level2"><div class="li"><a href="wrt54g-tm#upgrading_from_tomato">Upgrading from Tomato</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="wrt54g-tm#flashing_via_jtag">Flashing via JTAG</a></div></li>
<li class="level1"><div class="li"><a href="wrt54g-tm#kamikazewhite_russian_recovery">Kamikaze/White Russian Recovery</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="wrt54g-tm#enter_failsafe_mode">Enter Failsafe Mode:</a></div></li>
<li class="level2"><div class="li"><a href="wrt54g-tm#get_your_kit_in_order">Get Your Kit in Order:</a></div></li>
<li class="level2"><div class="li"><a href="wrt54g-tm#update_the_openwrt_image_from_failsafe">Update the OpenWrt Image from Failsafe:</a></div></li>
<li class="level2"><div class="li"><a href="wrt54g-tm#backing_up_your_nvram_variables">Backing up your nvram variables:</a></div></li>
<li class="level2"><div class="li"><a href="wrt54g-tm#running_the_clean_up_script">Running the Clean Up Script:</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="wrt54g-tm#wireless_broken_by_default_because_of_wrong_macaddr">Wireless broken by default because of wrong macaddr:</a></div></li>
<li class="level1"><div class="li"><a href="wrt54g-tm#read_only_filesystem">Read only filesystem</a></div></li>
<li class="level1"><div class="li"><a href="wrt54g-tm#tags">Tags</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="linksys_wrt54g_wrt54gl_and_wrt54gs">Linksys WRT54G, WRT54GL and WRT54GS</h1>
<div class="level1">

<p>
The original WRT54G was first released as a SOHO router in December 2002. The product line supports WiFi and five switched Ethernet ports. (The WAN port is part of the same internal network switch, but on a different VLAN.) The devices have two removable antennas connected through Reverse Polarity SMA connectors. For additional background information, see <a href="http://en.wikipedia.org/wiki/Linksys WRT54G series" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Linksys WRT54G series">Linksys WRT54G series</a>.
</p>

</div>

<h2 class="sectionedit2" id="supported_versions">Supported Versions</h2>
<div class="level2">

<p>
The different models within the WRT54G series may all look identical. Please refer to the model information sticker on the underside of the unit in order to determine the precise model number and hardware version of your device.
</p>

<p>
<strong>Note:</strong> The supported versions of OpenWrt can be found on the <a href="../start#linksys" class="wikilink1" title="toh:start">Table of Hardware</a>
</p>

<p>
For wireless support on Kernel 2.6 it is recommended to use trunk snapshots or releases newer than and including &quot;Backfire&quot; 10.3.
</p>

<p>
Note: the wireless driver names are different in 2.6 from 2.4. You may need to do:
</p>
<pre class="code">opkg install kmod-b43
wifi detect &gt; /etc/config/wireless</pre>

<p>
in order to get the correct wireless configuration created.
</p>

<p>
For versions of the OpenWrt &quot;brcm47xx&quot; target prior to &quot;Attitude Adjustment&quot; 12.09-final, you may wish to use Broadcom&#039;s proprietary wl driver due to longstanding issues with the b43 driver in Linux kernel versions 2.6 and newer (<a href="https://dev.openwrt.org/ticket/7552" class="urlextern" title="https://dev.openwrt.org/ticket/7552"  rel="nofollow">https://dev.openwrt.org/ticket/7552</a>). After installing the brcm47xx image, you will need to execute the following commands while logged into the router over TELNET or SSH:
</p>
<pre class="code">opkg update
opkg install kmod-brcm-wl wlc nas
rm /etc/modules.d/*b43*</pre>

<p>
After rebooting the router, configure wireless as usual, only using the Broadcom driver instead of the b43 driver.
</p>

</div>

<h3 class="sectionedit3" id="notes_on_specific_wrt54g_hardware_versions">Notes on specific WRT54G hardware versions</h3>
<div class="level3">

</div>

<h4 id="wrt54g">WRT54G</h4>
<div class="level4">

<p>
* The Linksys WRT54G 1.1 hardware (4 <abbr title="Megabyte">MB</abbr> of flash) has trouble with OpenWrt 10.03.1-rc6 and maybe all 10.03 releases as of 2011-12-08. In a test with OpenWrt 10.03.1-rc6, the <abbr title="Operating System">OS</abbr> will install but LuCI will be unable to update settings because there isn&#039;t enough flash left free.
</p>
<ul>
<li class="level1"><div class="li"> References:</div>
<ul>
<li class="level3"><div class="li"> &quot;Kamikaze, brcm47xx, WRT54G v1.1: jffs2 marker not detected, rootfs_data not mounted&quot;, <a href="https://dev.openwrt.org/ticket/5071" class="urlextern" title="https://dev.openwrt.org/ticket/5071"  rel="nofollow">https://dev.openwrt.org/ticket/5071</a></div>
</li>
<li class="level3"><div class="li"> &quot;Linksys WRT54G v1.1 default after reboot&quot;, <a href="https://forum.openwrt.org/viewtopic.php?id=28223" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?id=28223"  rel="nofollow">https://forum.openwrt.org/viewtopic.php?id=28223</a></div>
</li>
<li class="level3"><div class="li"> &quot;config changes aren&#039;t permanent&quot;, <a href="https://forum.openwrt.org/viewtopic.php?id=20125" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?id=20125"  rel="nofollow">https://forum.openwrt.org/viewtopic.php?id=20125</a></div>
</li>
</ul>
</li>
<li class="level2"><div class="li"> The solution is to go back to OpenWrt 8.09 r14511 (code name &quot;kamikaze&quot;) – the link to the Broadcom Linux 2.4 chipset version is <a href="http://downloads.openwrt.org/kamikaze/8.09/brcm-2.4/openwrt-brcm-2.4-squashfs.trx" class="urlextern" title="http://downloads.openwrt.org/kamikaze/8.09/brcm-2.4/openwrt-brcm-2.4-squashfs.trx"  rel="nofollow">http://downloads.openwrt.org/kamikaze/8.09/brcm-2.4/openwrt-brcm-2.4-squashfs.trx</a>.</div>
</li>
</ul>

</div>

<h4 id="wrt54gl">WRT54GL</h4>
<div class="level4">

<p>
Testing with the WRT54GL 1.1 (16MB RAM, 4MB flash) showed it can run the following versions:
</p>
<div class="table sectionedit4"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 leftalign">                  </th><th class="col1 leftalign">            </th><th class="col2 leftalign"> 7.09      </th><th class="col3 centeralign">  8.09.2   </th><th class="col4 centeralign">  10.03                      </th><th class="col5 centeralign">  10.03.1                   </th><th class="col6 centeralign">  12.04                    </th><th class="col7 centeralign">  12.09          </th><th class="col8 centeralign">  14.07                                 </th>
	</tr>
	</thead>
	<tr class="row1">
		<th class="col0 leftalign">brcm-2.4          </th><td class="col1 leftalign">            </td><td class="col2 centeralign">  works    </td><td class="col3 centeralign">  works    </td><td class="col4 centeralign">  works                      </td><td class="col5 centeralign">  works                     </td><td class="col6 centeralign">  n/a                      </td><td class="col7 centeralign">  n/a            </td><td class="col8 centeralign">  n/a                                   </td>
	</tr>
	<tr class="row2">
		<th class="col0 leftalign">brcm47xx          </th><td class="col1"> b43/legacy </td><td class="col2 rightalign">  untested </td><td class="col3 rightalign">  untested </td><td class="col4 centeralign">  works (somewhat unstable)  </td><td class="col5 rightalign">  works (somewhat unstable) </td><td class="col6 rightalign">  very low free ram &amp; jffs </td><td class="col7 rightalign">  see note below </td><td class="col8 centeralign">  unviable, not enough RAM to run wifi  </td>
	</tr>
</table></div>

<p>
* <strong>10.03.1 brcm-2.4</strong> had frequent WiFi drops when in client mode w/ psk2 (did not drop when connecting to same AP w/ encryption disabled).
</p>

<p>
* <strong>12.04</strong> almost certainly needs to rebuilt with unnecessary packages (e.g. LuCI) and daemons (uhttpd) removed to make enough free ram &amp; jffs to obtain long uptimes..  — <em>tc424 2013/08/26 17:28</em>
</p>

<p>
* <strong>12.09</strong> &quot;Only have 688kb available on filesystem /overlay, pkg kmod-brcm-wl needs 695&quot; Impossible to install proprietary <strong>wl</strong> driver into 12.09  — <em>jikuja 2013/11/18 12:29</em>
</p>

<p>
* <strong>14.07</strong> had slow LuCI web interface, after enabling Wifi, the entire router became inaccessible. A custom cut-down image worked slightly better, but would not let WAN and Wifi work at the same time due to low system RAM. Ref: <a href="https://forum.openwrt.org/viewtopic.php?id=51729" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?id=51729"  rel="nofollow">Forum Thread</a>
</p>

<p>
As the WRT54GL has only 4Mb flash, any image sent to the device must be 3866624 bytes or smaller.
</p>

</div>

<h4 id="wrt54g-tm">WRT54G-TM</h4>
<div class="level4">

<p>
According to the <a href="http://en.wikipedia.org/wiki/Linksys WRT54G series" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Linksys WRT54G series">Linksys WRT54G series</a>, the WRT54G-TM is nothing but a renamed WRT54GS v3.0.  Because these models have additional RAM and FLASH they do not suffer from the constraints of the WRT54G and WRT54GL series and can run all versions of OpenWRT as of 11/1/2014.
</p>

</div>

<h2 class="sectionedit5" id="basic_configuration">Basic configuration</h2>
<div class="level2">

<p>
Please follow the <a href="../../doc/howto/configuration" class="wikilink1" title="doc:howto:basic.config">basic.config</a> guide.
</p>

</div>

<h2 class="sectionedit6" id="specific_configuration">Specific Configuration</h2>
<div class="level2">

</div>

<h3 class="sectionedit7" id="interfaces">Interfaces</h3>
<div class="level3">

<p>
The default network configuration is:
</p>
<div class="table sectionedit8"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 rightalign">  Interface Name </th><th class="col1 centeralign">  Description        </th><th class="col2 rightalign">  Default configuration </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 centeralign">  br-lan         </td><td class="col1 centeralign">  <abbr title="Local Area Network">LAN</abbr> &amp; WiFi         </td><td class="col2 centeralign">  192.168.1.1/24        </td>
	</tr>
	<tr class="row2">
		<td class="col0 rightalign">  vlan0 (eth0.0) </td><td class="col1 rightalign">  <abbr title="Local Area Network">LAN</abbr> ports (1 to 4) </td><td class="col2 centeralign">  None                  </td>
	</tr>
	<tr class="row3">
		<td class="col0 rightalign">  vlan1 (eth0.1) </td><td class="col1 centeralign">  WAN port           </td><td class="col2 centeralign">  DHCP                  </td>
	</tr>
	<tr class="row4">
		<td class="col0 centeralign">  wl0            </td><td class="col1 centeralign">  WiFi               </td><td class="col2 centeralign">  Disabled              </td>
	</tr>
</table></div>

</div>

<h3 class="sectionedit9" id="internal_architecture_-_wrt54g_v2_v3_wrt54gs_v1_v2">Internal Architecture - WRT54G (v2, v3) &amp; WRT54GS (v1, v2)</h3>
<div class="level3">

<p>
<a href="../../_detail/toh/linksys/wrt54g-v2.v3_wrt54gs-v1.v2_internal-arch.png?id=toh%253Alinksys%253Awrt54g" class="media" title="toh:linksys:wrt54g-v2.v3_wrt54gs-v1.v2_internal-arch.png"><img src="../../_media/toh/linksys/wrt54g-v2.v3_wrt54gs-v1.v2_internal-arch.png" class="media" alt="" /></a>
</p>

</div>

<h3 class="sectionedit10" id="switch_ports_for_vlans_-_wrt54g_v2_v3_wrt54gs_v1_v2">Switch Ports (for VLANs) - WRT54G (v2, v3) &amp; WRT54GS (v1, v2)</h3>
<div class="level3">

<p>
Switch port numbers 1-4 are <abbr title="Local Area Network">LAN</abbr> Ports 1-4 as labeled on the unit, number 0 is the Internet (WAN) port, and number 5 is the internal connection to the router&#039;s CPU (labeled &quot;CPU&quot; in LuCI). Use these <em>switch</em> port numbers when specifying a VLAN&#039;s ports via the UCI (i.e., in the <code>ports</code> option of a VLAN&#039;s <code>config switch_vlan</code> section, in <code>/etc/config/network</code>).
</p>
<div class="table sectionedit11"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Port </th><th class="col1"> Switch port </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> Internet (WAN) </td><td class="col1"> 0 </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <abbr title="Local Area Network">LAN</abbr> 1 </td><td class="col1"> 1 </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <abbr title="Local Area Network">LAN</abbr> 2 </td><td class="col1"> 2 </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <abbr title="Local Area Network">LAN</abbr> 3 </td><td class="col1"> 3 </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <abbr title="Local Area Network">LAN</abbr> 4 </td><td class="col1"> 4 </td>
	</tr>
	<tr class="row6">
		<td class="col0"> CPU (internal) </td><td class="col1"> 5 </td>
	</tr>
</table></div>

<p>
See: <a href="../../doc/uci/network#switch" class="wikilink1" title="doc:uci:network">Network configuration (Switch)</a>
</p>

</div>

<h3 class="sectionedit12" id="internal_architecture_-_wrt54g_v4_wrt54gs_v3">Internal Architecture - WRT54G (v4) &amp; WRT54GS (v3)</h3>
<div class="level3">

<p>
<a href="../../_detail/toh/linksys/wrt54_internal_architecture.png?id=toh%253Alinksys%253Awrt54g" class="media" title="toh:linksys:wrt54_internal_architecture.png"><img src="../../_media/toh/linksys/wrt54_internal_architecture.png" class="media" alt="" /></a>
</p>

</div>

<h3 class="sectionedit13" id="switch_ports_for_vlans_-_wrt54g_v4_wrt54gs_v3">Switch Ports (for VLANs) - WRT54G (v4) &amp; WRT54GS (v3)</h3>
<div class="level3">

<p>
Switch port numbers 0-3 are <abbr title="Local Area Network">LAN</abbr> Ports 4-1 as labeled on the unit, number 4 is the Internet (WAN) port, and number 5 is the internal connection to the router&#039;s CPU (labeled &quot;CPU&quot; in LuCI). Use these <em>switch</em> port numbers when specifying a VLAN&#039;s ports via the UCI (i.e., in the <code>ports</code> option of a VLAN&#039;s <code>config switch_vlan</code> section, in <code>/etc/config/network</code>). <em class="u">Don&#039;t Be Fooled</em>: <abbr title="Local Area Network">LAN</abbr> Port 1 on the unit is switch port 3 when configuring VLANs on the switch.
</p>
<div class="table sectionedit14"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Port </th><th class="col1"> Switch port </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> Internet (WAN) </td><td class="col1"> 4 </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <abbr title="Local Area Network">LAN</abbr> 1 </td><td class="col1"> 3 </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <abbr title="Local Area Network">LAN</abbr> 2 </td><td class="col1"> 2 </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <abbr title="Local Area Network">LAN</abbr> 3 </td><td class="col1"> 1 </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <abbr title="Local Area Network">LAN</abbr> 4 </td><td class="col1"> 0 </td>
	</tr>
	<tr class="row6">
		<td class="col0"> CPU (internal) </td><td class="col1"> 5 </td>
	</tr>
</table></div>

<p>
See: <a href="../../doc/uci/network#switch" class="wikilink1" title="doc:uci:network">Network configuration (Switch)</a>
</p>

</div>

<h3 class="sectionedit15" id="failsafe_mode">Failsafe mode</h3>
<div class="level3">

<p>
If you forget your password, have broken one of the startup scripts, firewalled yourself out, or corrupted the JFFS2 partition, you can get back in by using OpenWrt&#039;s failsafe mode:
</p>

<p>
* Unplug the power cord, press and hold the reset button, put in the power cord, when DMZ-LED lits up release the reset button. When done right, both Power-LED and DMZ-LED will start blinking. Now you can ping and telnet into 192.168.1.1
</p>

<p>
See: <a href="../../doc/howto/generic.failsafe" class="wikilink1" title="doc:howto:generic.failsafe">generic.failsafe</a>
</p>

</div>

<h3 class="sectionedit16" id="buttons">Buttons</h3>
<div class="level3">

<p>
The Linksys WRT54G has two buttons. They are Reset and Secure Easy Setup. The buttons can be used with hotplug events. Please see the <a href="../../doc/howto/wifitoggle" class="wikilink1" title="doc:howto:wifitoggle">WiFi toggle</a> Wiki page.
</p>
<div class="table sectionedit17"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 centeralign">  BUTTON            </th><th class="col1 rightalign">  Event </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 centeralign">  Reset             </td><td class="col1 rightalign">  reset </td>
	</tr>
	<tr class="row2">
		<td class="col0 rightalign">  Secure Easy Setup </td><td class="col1 centeralign">  ses   </td>
	</tr>
</table></div>

</div>

<h2 class="sectionedit18" id="hardware">Hardware</h2>
<div class="level2">

</div>

<h3 class="sectionedit19" id="opening_the_case">Opening the case</h3>
<div class="level3">

<p>
To remove the front cover you simply pop the front of the case off after removing the antennas. Please note that this will void the warranty.
</p>

<p>
Usually there are two screws holding the PCB to the bottom cover, but on some newer versions (e.g. v2.2) there&#039;s only a single screw.
</p>

</div>

<h3 class="sectionedit20" id="serial_port">Serial port</h3>
<div class="level3">

<p>
The WRT54G/S/L has a 10 pin connection slot on the board called JP1 (JP2 on some v1.1 boards). This slot provides two TTL serial ports at 3.3V. Neither of the ports use hardware flow control, you need to use software flow control instead. Other routers may have similar connections. These two TTL serial ports on the WRT54GL router can be used as standard Serial Ports similar to the serial ports you may have on your PC. In order to do this though you need a line driver chip that can raise the signal levels to RS-232 levels. You can not directly connect a serial port header to the board and expect it to work. That method will only work with devices that can connect to TTL serial ports at 3.3V. Connecting two which have 3.3V directly will work (TX - RX, RX - TX, GND - GND). Standard RS-232 devices cannot be directly connected which accounts for nearly all serial PC devices.
</p>

<p>
Once the modification is made you can have at most two serial ports to use for connecting devices etc. By default, OpenWrt uses the first serial port to access the built-in serial console on the router. You can connect to it at 115200,8,N,1 using a terminal program like Putty, SecureCRT or minicom for example. This is helpful because if you have problems communicating with your router this method will allow you easy access connecting over a serial console. By default this leaves you with one serial port left, however, there is a method to turn the console off giving you access to both ports if you really need them. It isn&#039;t recommended but it can be done.
</p>
<div class="table sectionedit21"><table class="inline">
	<tr class="row0">
		<th class="col0"> Pin 2 </th><th class="col1">3.3V </th><th class="col2"> Pin 4 </th><th class="col3">TX_0 </th><th class="col4"> Pin 6 </th><th class="col5">RX_0 </th><th class="col6"> Pin 8 </th><th class="col7">Not connected </th><th class="col8"> Pin 10 </th><th class="col9">GND </th>
	</tr>
	<tr class="row1">
		<th class="col0"> Pin 1 </th><th class="col1">3.3V </th><th class="col2"> Pin 3 </th><th class="col3">TX_1 </th><th class="col4"> Pin 5 </th><th class="col5">RX_1 </th><th class="col6"> Pin 7 </th><th class="col7">Not connected </th><th class="col8"> Pin 9 </th><th class="col9">GND </th>
	</tr>
</table></div>

<p>
<a href="../../_detail/oldwiki/openwrtdocs/hardware/linksys/wrt54gl_v11_serialport_.jpg?id=toh%253Alinksys%253Awrt54g" class="media" title="oldwiki:openwrtdocs:hardware:linksys:wrt54gl_v11_serialport_.jpg"><img src="../../_media/oldwiki/openwrtdocs/hardware/linksys/wrt54gl_v11_serialport_.jpg" class="media" title="wrt54gl_v11_serialport_.jpg" alt="wrt54gl_v11_serialport_.jpg" /></a>
</p>

</div>

<h3 class="sectionedit22" id="jtag">JTAG</h3>
<div class="level3">

<p>
The JTAG port is a unpopulated 12-pin header and is located next to the serial port header. A simple unbuffered should work fine.
</p>
<div class="table sectionedit23"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> Pin 2  </th><th class="col1 leftalign"> GND    </th><th class="col2"> Pin 4 </th><th class="col3"> GND </th><th class="col4"> Pin 6 </th><th class="col5"> GND </th><th class="col6"> Pin 8 </th><th class="col7"> GND </th><th class="col8"> Pin 10 </th><th class="col9"> GND </th><th class="col10"> Pin 12 </th><th class="col11 leftalign">GND    </th>
	</tr>
	<tr class="row1">
		<th class="col0 leftalign"> Pin 1  </th><th class="col1"> nTRST* </th><th class="col2"> Pin 3 </th><th class="col3"> TDI </th><th class="col4"> Pin 5 </th><th class="col5"> TDO </th><th class="col6"> Pin 7 </th><th class="col7"> TMS </th><th class="col8 leftalign"> Pin 9  </th><th class="col9"> TCK </th><th class="col10"> Pin 11 </th><th class="col11">nSRST* </th>
	</tr>
</table></div>

<p>
<a href="../../_detail/oldwiki/openwrtdocs/hardware/linksys/wrt54gl_v11_jtagport_.jpg?id=toh%253Alinksys%253Awrt54g" class="media" title="oldwiki:openwrtdocs:hardware:linksys:wrt54gl_v11_jtagport_.jpg"><img src="../../_media/oldwiki/openwrtdocs/hardware/linksys/wrt54gl_v11_jtagport_.jpg" class="media" title="wrt54gl_v11_jtagport_.jpg" alt="wrt54gl_v11_jtagport_.jpg" /></a>
</p>

<p>
See <a href="../../doc/hardware/port.jtag" class="wikilink1" title="doc:hardware:port.jtag">here</a> for more JTAG details.
</p>

</div>

<h3 class="sectionedit24" id="photos">Photos</h3>
<div class="level3">

<p>
WRT54GL v1.1 - Serial number: CL7B
</p>

<p>
<em>Front:</em>
</p>

<p>
<a href="../../_detail/oldwiki/openwrtdocs/hardware/linksys/wrt54gl_v11_front_hires.jpg?id=toh%253Alinksys%253Awrt54g" class="media" title="oldwiki:openwrtdocs:hardware:linksys:wrt54gl_v11_front_hires.jpg"><img src="../../_media/oldwiki/openwrtdocs/hardware/linksys/wrt54gl_v11_front_hires.jpg?w=600&amp;tok=4353c7" class="media" title="wrt54gl_v11_front_hires.jpg" alt="wrt54gl_v11_front_hires.jpg" width="600" /></a>
</p>

<p>
<em>Back:</em>
</p>

<p>
<a href="../../_detail/oldwiki/openwrtdocs/hardware/linksys/wrt54gl_v11_back_hires.jpg?id=toh%253Alinksys%253Awrt54g" class="media" title="oldwiki:openwrtdocs:hardware:linksys:wrt54gl_v11_back_hires.jpg"><img src="../../_media/oldwiki/openwrtdocs/hardware/linksys/wrt54gl_v11_back_hires.jpg?w=600&amp;tok=eae62e" class="media" title="wrt54gl_v11_back_hires.jpg" alt="wrt54gl_v11_back_hires.jpg" width="600" /></a>
</p>

</div>

<h3 class="sectionedit25" id="hardware_mods">Hardware Mods</h3>
<div class="level3">

</div>

<h4 id="adding_an_mmcsd_card">Adding an MMC/SD card</h4>
<div class="level4">

<p>
The GPIO (General Purpose Input/Output) lines can be used to add a SD card in SPI mode. Please see the <a href="http://wiki.openwrt.org/oldwiki/port.gpio" class="wikilink1" title="oldwiki:port.gpio">GPIO</a> page in the oldwiki.
</p>

<p>
To add an SD card with backfire and kernel 2.6, You need to mask GPIO&#039;s from b43 module. To achieve it, edit:
</p>
<pre class="code">vi /etc/modules.d/30-b43</pre>

<p>
… putting masking just after b43, so content of above file looks like:
</p>
<pre class="code">b43 gpiomask=0</pre>

<p>
What&#039;s presented above, is a failsafe examaple, that masks <strong>*all</strong>* GPIO diodes from b43. in reality, You&#039;re using only 4 GPIO&#039;s, so after ensuring that card work properly, You may tweak gpiomask to mask *only* used GPIO&#039;s. For example, value <strong>&#039;0x1&#039;</strong> disables all diodes except WiFi and power (+ 4 port switch, wchich isn&#039;t connected to GPIO at all). After doing that, <strong>reboot</strong>, and install following packages (install one by one, as for reasons unknown, device does like to crash when provided with many packages to install at once):
</p>
<pre class="code">opkg install kmod-mmc 
opkg install kmod-mmc-over-gpio 
opkg install kmod-mmc-spi 
opkg install kmod-spi-bitbang 
opkg install kmod-spi-gpio-old</pre>

<p>
Then, carefully edit:
</p>
<pre class="code">vi /etc/config/mmc_over_gpio</pre>

<p>
…setting &#039;enable&#039; to &quot;1&quot;, and providing GPIO numbers for SD&#039;s clock, data-in, data-out and select-chip. Actually, You may use other GPIO&#039;s, presented here are just example. This setup, render amber/white SES and DMZ diodes unusable, with the latter, hoever, working properly during boot. You could as good &quot;sacrifice&quot; connection to WiFi and power diodes, in any combination - it&#039;s up to You.
</p>

<p>
Then, just run:
<pre class="code">/etc/init.d/mmc_over_gpio start</pre>
, and You should see message like one presented below:
</p>

<p>
<pre class="code">root@OpenWrt:~# dmesg|tail
&lt;snip&gt;
gpio-mmc: MMC-Card &quot;default&quot; attached to GPIO pins di=2, do=4, clk=3, cs=7
mmc_spi spi32766.0: can&#039;t change chip-select polarity
mmc0: host does not support reading read-only switch. assuming write-enable.
mmc0: new SD card on SPI
mmcblk0: mmc0:0000 00000 1.88 GiB 
 mmcblk0: p1</pre>

You can mount it with
<pre class="code">mount /dev/mmcblk0p1 /mnt/</pre>

…or, mount it anywhere else, add it to be automatically enabled at startup, do some extroot, etc… There are, literally, gigabytes of possibilities :)
</p>

</div>

<h4 id="adding_usb_ports">Adding USB ports.</h4>
<div class="level4">

<p>
Yes it is possible to add USB ports on WRT54 GSv3/GL, only downside are that it is only USB v 1.1.
</p>

<p>
So how then?
You will need this.
</p>
<ul>
<li class="level1"><div class="li"> Breadboard</div>
</li>
<li class="level1"><div class="li"> 4x 15 kohm resistors</div>
</li>
<li class="level1"><div class="li"> 4x 22 ohm resistors</div>
</li>
<li class="level1"><div class="li"> 2x female usb connectors</div>
</li>
</ul>

<p>
You should also be confident with a soldering iron and basic knowledge with a multimeter will always help.
</p>

<p>
This circuit also needs 5 volt output which is standard for USB, <a href="http://lmgtfy.com/?q=7805+circuit+for+usb" class="urlextern" title="http://lmgtfy.com/?q=7805+circuit+for+usb"  rel="nofollow">5 Volt Regulator</a>. It&#039;s recommended to add heatsink to 7805 chip.
</p>

<p>
<em>Schematics:</em>
</p>

<p>
<a href="../../_detail/media/linksys.wrt54gl.usb-diagram.png?id=toh%253Alinksys%253Awrt54g" class="media" title="media:linksys.wrt54gl.usb-diagram.png"><img src="../../_media/media/linksys.wrt54gl.usb-diagram.png?w=200&amp;tok=3945b0" class="media" title="Schematics" alt="Schematics" width="200" /></a>
</p>

<p>
<em>12 volt source:</em>
</p>

<p>
<a href="../../_detail/media/linksys.wrt54gl.12v_source.jpg?id=toh%253Alinksys%253Awrt54g" class="media" title="media:linksys.wrt54gl.12v_source.jpg"><img src="../../_media/media/linksys.wrt54gl.12v_source.jpg?w=200&amp;tok=c502df" class="media" title="Where to take 12 volt from." alt="Where to take 12 volt from." width="200" /></a>
</p>

<p>
<em>USB source soldered:</em>
</p>

<p>
RH21 = USB1 Data + 
</p>

<p>
RH23 = USB1 Data - 
</p>

<p>
RH25 = USB2 Data + 
</p>

<p>
RH26 = USB2 Data - 
</p>

<p>
<a href="../../_detail/media/linksys.wrt54gl.usb_pins_solderd.jpg?id=toh%253Alinksys%253Awrt54g" class="media" title="media:linksys.wrt54gl.usb_pins_solderd.jpg"><img src="../../_media/media/linksys.wrt54gl.usb_pins_solderd.jpg?w=200&amp;tok=7784af" class="media" title="USB 1 and 2 soldered." alt="USB 1 and 2 soldered." width="200" /></a>
<a href="../../_detail/media/wrt54gl.v1.1.usb.mod.jpg?id=toh%253Alinksys%253Awrt54g" class="media" title="media:wrt54gl.v1.1.usb.mod.jpg"><img src="../../_media/media/wrt54gl.v1.1.usb.mod.jpg?w=250&amp;tok=797031" class="media" title="USB 1 and 2 from another side" alt="USB 1 and 2 from another side" width="250" /></a>
</p>

<p>
<em>USB Port:</em>
</p>

<p>
<a href="../../_detail/media/linksys.wrt54gl.usb_port_mounted.jpg?id=toh%253Alinksys%253Awrt54g" class="media" title="media:linksys.wrt54gl.usb_port_mounted.jpg"><img src="../../_media/media/linksys.wrt54gl.usb_port_mounted.jpg?w=200&amp;tok=077a16" class="media" title="USB Port mounted." alt="USB Port mounted." width="200" /></a>
</p>

<p>
When the circuits are done and everything is soldered onto the pcb of the router, it&#039;s time to install the software.
</p>

<p>
<pre class="code">opkg update
opkg install kmod-usb-ohci kmod-usb-storage kmod-usb-core</pre>

Do not forget to install the filesystem you wish to use.
This page has all the extra information needed about USB on this device. <a href="../../doc/howto/usb.storage" class="wikilink1" title="doc:howto:usb.storage">usb.storage</a>
</p>

<p>
External resources and more indepth information.
<a href="http://voidmain.is-a-geek.net/wrt/wrt_usb_mod.html" class="urlextern" title="http://voidmain.is-a-geek.net/wrt/wrt_usb_mod.html"  rel="nofollow">Void Main&#039;s WRT54GSv3 USB Mod</a>
<a href="http://knight-galaad.no-ip.org/wordpress/?p=1622" class="urlextern" title="http://knight-galaad.no-ip.org/wordpress/?p=1622"  rel="nofollow">Linksys WRT54GL ajout de 2 ports USB</a> (french) &gt; <a href="http://translate.google.com/translate?hl=en&amp;sl=auto&amp;tl=en&amp;u=http%3A%2F%2Fknight-galaad.no-ip.org%2Fwordpress%2F%3Fp%3D1622" class="urlextern" title="http://translate.google.com/translate?hl=en&amp;sl=auto&amp;tl=en&amp;u=http%3A%2F%2Fknight-galaad.no-ip.org%2Fwordpress%2F%3Fp%3D1622"  rel="nofollow">translated</a>
</p>

</div>

<h4 id="power_supply_mods">Power Supply Mods</h4>
<div class="level4">

<p>
(Disclaimer: this has only been tested on WRT54G v1.1 and a WRT54GL v2, it should be the same for other models but I can&#039;t be certain. If in doubt check voltages with a multimeter.)
</p>

<p>
If you&#039;ve lost your power brick or want to power the WRT54G from an alternate source its possible to solder power cables directly to the power jack connectors. The WRT54G seems to run on anything from 5 to 12 (maybe more) volts. At 5 volts it needs about 800 milliamps, I had thought it might be possible to run it off USB but USB only (officially) supplies 500 milliamps. However, some USB ports will supply 800 milliamps and a lot of USB mains adaptors (e.g. the one for the Amazon Kindle or iPhone) supply 1 amp. 
</p>

<p>
<a href="../../_detail/toh/linksys/wrt54g_psumod1.jpg?id=toh%253Alinksys%253Awrt54g" class="media" title="toh:linksys:wrt54g_psumod1.jpg"><img src="../../_media/toh/linksys/wrt54g_psumod1.jpg" class="media" title="WRT54G Board with power connector removed and wires attached to positive and ground." alt="WRT54G Board with power connector removed and wires attached to positive and ground." /></a>
To connect up an alternative power supply, open up the case and locate the small black connector where the power input goes. 
</p>

<p>
You can (as shown in the picture above) desolder the power connector (this took quite a lot of effort and I broke the connector in the process). If you want to keep it just solder to the underside of the board instead, you might need to file away a bit of plastic from the outer casing to make room for the wires. 
</p>

<p>
There are 3 legs to the power connector, each just under 1cm long. The one closest towards the front of the router (the LED side) and running across the router is the positive (red wire in the picture). The one in the middle, running from back to front is the ground (black wire in the picture). Just solder a wire to each of these and connect to your power supply of choice. 
</p>

<p>
<a href="../../_detail/toh/linksys/wrt54g_psumod2.jpg?id=toh%253Alinksys%253Awrt54g" class="media" title="toh:linksys:wrt54g_psumod2.jpg"><img src="../../_media/toh/linksys/wrt54g_psumod2.jpg" class="media" title="WRT54G running at 5 volts, 800 milliamps." alt="WRT54G running at 5 volts, 800 milliamps." /></a>
</p>

<p>
If you want to run the WRT54G from USB, cut up a USB cable and solder the black wire to negative and the red wire to the positive. Or you can run it from a PC power supply by getting a male 4 pin molex hard disk power connector (as found on some PC fans or molex splitter/extension cables). Connect the yellow wire (12 volts) to the positive side and one (or both) of the black wires to the ground. Now connect this to a spare hard disk power connector on a PC power supply and your WRT54G will power up.
</p>

<p>
<a href="../../_detail/toh/linksys/wrt54g_psumod3.jpg?id=toh%253Alinksys%253Awrt54g" class="media" title="toh:linksys:wrt54g_psumod3.jpg"><img src="../../_media/toh/linksys/wrt54g_psumod3.jpg" class="media" title="Molex connector for running the WRT54G." alt="Molex connector for running the WRT54G." /></a>
</p>

<p>
You can also use a 12 volt lead acid battery (e.g. a car battery) to run the WRT54G. These can peak at around 14 volts when fully charged, but this doesn&#039;t seem to cause any problems for the router. 
</p>

</div>

<h2 class="sectionedit26" id="installing_openwrt">Installing OpenWrt</h2>
<div class="level2">

</div>

<h3 class="sectionedit27" id="using_the_linksys_web_gui">Using the Linksys web GUI</h3>
<div class="level3">

<p>

It is possible to install OpenWrt directly with the Linksys web <abbr title="Graphical User Interface">GUI</abbr>. If you are initially installing OpenWrt use the Linksys web <abbr title="Graphical User Interface">GUI</abbr>, this is the easiest way. 
</p>
<ul>
<li class="level1"><div class="li"> Download the openwrt-wrt54g-squashfs.bin firmware image from the brcm-2.4 folder to your PC.</div>
</li>
<li class="level1"><div class="li"> You can find that image at: <a href="http://downloads.openwrt.org/backfire/10.03.1/brcm-2.4/" class="urlextern" title="http://downloads.openwrt.org/backfire/10.03.1/brcm-2.4/"  rel="nofollow">http://downloads.openwrt.org/backfire/10.03.1/brcm-2.4/</a></div>
</li>
<li class="level1"><div class="li"> Actually the safest version to use would be <del><strong>8.09</strong></del>. <em>Hmmm, it looks like 10.03.1 is safe but you must use the <strong>brcm-2.4</strong> variant like in the link above</em>. I am not risking bricking my router for the initial flash, so I am going with <strong>8.09</strong>.</div>
</li>
<li class="level1"><div class="li"> Open <a href="http://192.168.1.1/Upgrade.asp" class="urlextern" title="http://192.168.1.1/Upgrade.asp"  rel="nofollow">http://192.168.1.1/Upgrade.asp</a> in your browser or manually go to <a href="http://192.168.1.1" class="urlextern" title="http://192.168.1.1"  rel="nofollow">http://192.168.1.1</a> → Administration → Firmware Upgrade</div>
</li>
<li class="level1"><div class="li"> Upload openwrt-wrt54g-squashfs.bin</div>
</li>
<li class="level1"><div class="li"> Wait 2 minutes. The router will reboot itself automatically after the upgrade is complete.</div>
</li>
<li class="level1"><div class="li"> Your router should now be telnettable at 192.168.1.1. The web interface <code>luci</code> is also available at <a href="http://192.168.1.1" class="urlextern" title="http://192.168.1.1"  rel="nofollow">http://192.168.1.1</a> . Telnet is disabled and ssh is enabled once a password has been set.</div>
</li>
<li class="level1"><div class="li"> Type these commands out in telnet/ssh. This is to ensure that tftp is available, in case your router gets bricked.</div>
</li>
</ul>

<p>
<pre class="code">nvram set boot_wait=on
nvram set boot_time=10
nvram set wait_time=10 #important for some models
nvram commit &amp;&amp; reboot</pre>

</p>
<ul>
<li class="level1"><div class="li"> <strong>You&#039;re done!</strong> At this point, you are free to continue using brcm-2.4. However, if you wish to use brcm47xx, proceed below.</div>
</li>
<li class="level1"><div class="li"> Download the image openwrt-brcm47xx-squashfs.trx here: <a href="http://downloads.openwrt.org/backfire/10.03.1/brcm47xx/" class="urlextern" title="http://downloads.openwrt.org/backfire/10.03.1/brcm47xx/"  rel="nofollow">http://downloads.openwrt.org/backfire/10.03.1/brcm47xx/</a></div>
</li>
<li class="level1"><div class="li"> Upload using luci at System &gt; Flash Firmware</div>
</li>
<li class="level1"><div class="li"> <strong>OR</strong>, you can simply ssh into the router, </div>
</li>
</ul>

<p>
<pre class="code">cd /tmp
wget http://downloads.openwrt.org/backfire/10.03.1/brcm47xx/openwrt-brcm47xx-squashfs.trx
sysupgrade /tmp/openwrt-brcm47xx-squashfs.trx</pre>

</p>
<ul>
<li class="level1"><div class="li"> Wait for the router to reboot and login! In case you somehow found out that you can&#039;t telnet, then ssh should be possible since your previous settings before flashing remained (unless you used <code>sysupgrade -n</code>)</div>
</li>
</ul>

</div>

<h3 class="sectionedit28" id="using_the_tftp_method">Using the TFTP method</h3>
<div class="level3">

<p>
Right after flashing at your first login to OpenWrt set the following NVRAM parameters to enable tftpd at bootup:
</p>

<p>
<pre class="code">nvram set boot_wait=on
nvram set boot_time=10
nvram set wait_time=10
nvram commit &amp;&amp; reboot</pre>

</p>

<p>
<strong><code>NOTE:</code></strong> Do not touch any other NVRAM parameters. NVRAM is only used as environment for the bootloader. OpenWrt ignores NVRAM parameters.
</p>

<p>
<strong><code>NOTE:</code></strong> On WRT54GL (at least), you should probably use &#039;wait_time&#039; instead of &#039;boot_time&#039;. <em>bg300: Added</em>.
</p>

<p>
<strong><code>NOTE:</code></strong> On WRT54GS v1.1 too you have to use &#039;wait_time&#039; instead of &#039;boot_time&#039;, anyway if in doubt add both parameters.
</p>

<p>
Once you have set the NVRAM parameters above it is possible to use a TFTP client to flash OpenWrt. The TFTP method is also <strong>the recommended way to restore the original Linksys firmware or switch to other third-party firmwares.</strong>
</p>

<p>
First download a firmware image file ending in &quot;.bin&quot;, e.g. openwrt-wrt54g-squashfs.bin.
</p>

<p>
Then follow the <a href="../../doc/howto/tftp" class="wikilink1" title="doc:howto:generic.flashing.tftp">Generic TFTP flashing instructions</a>.
</p>

</div>

<h2 class="sectionedit29" id="upgrading_openwrt">Upgrading OpenWrt</h2>
<div class="level2">

</div>

<h3 class="sectionedit30" id="using_mtd_or_sysupgrade">Using mtd OR sysupgrade</h3>
<div class="level3">

<p>
If you have already installed OpenWrt and like to reflash for e.g. upgrading to a new OpenWrt version. It is important that you put the firmware image into the ramdisk (/tmp) before you start flashing.
</p>

<p>
<pre class="code">cd /tmp/
wget http://downloads.openwrt.org/backfire/10.03.1/brcm47xx/openwrt-brcm47xx-squashfs.trx # The file must be the trx file.
mtd write /tmp/openwrt-brcm47xx-squashfs.trx linux &amp;&amp; reboot</pre>

</p>

<p>
OR
</p>

<p>
<pre class="code">cd /tmp/
wget http://downloads.openwrt.org/backfire/10.03.1/brcm47xx/openwrt-brcm47xx-squashfs.trx # The file must be the trx file.
sysupgrade /tmp/openwrt-brcm47xx-squashfs.trx</pre>

</p>

<p>
Feel free to explore the rest of sysupgrade options by typing &#039;sysupgrade&#039; in the terminal.
</p>

</div>

<h3 class="sectionedit31" id="using_luci">Using LuCI</h3>
<div class="level3">
<ol>
<li class="level1"><div class="li"> Select Administration in the top right corner</div>
</li>
<li class="level1"><div class="li"> Choose the System &gt; Flash Firmware tab</div>
</li>
<li class="level1"><div class="li"> Click Browse and navigate to the firmware (it must be a <em>.trx</em> file) you wish to flash to</div>
</li>
<li class="level1"><div class="li"> Click &#039;Upload image&#039;</div>
</li>
<li class="level1"><div class="li"> Follow the instructions</div>
</li>
</ol>

</div>

<h3 class="sectionedit32" id="upgrading_from_tomato">Upgrading from Tomato</h3>
<div class="level3">

<p>
The instructions from the <a href="http://www.polarcloud.com/tomatofaq#installing_another_firmware_or" class="urlextern" title="http://www.polarcloud.com/tomatofaq#installing_another_firmware_or"  rel="nofollow">Tomato upgrade instructions</a> are confirmed to work with  Backfire (10.03.1-rc4, r24045)
</p>

</div>

<h1 class="sectionedit33" id="other_info">Other Info</h1>
<div class="level1">

</div>

<h2 class="sectionedit34" id="flashing_via_jtag">Flashing via JTAG</h2>
<div class="level2">

</div>
<div class="plugin_include_content plugin_include__meta:infobox:unverified" id="plugin_include__meta__infobox__unverified">
<div class="level2">

<p>

<table class="inline" style="width:70%; margin-left:15%">
  <tr>
    <td style="border-left:6px solid #f57900; vertical-align:middle">
      <img src="../../_media/meta/icons/tango/48px-emblem-question.svg.png" alt="" style="float:left; margin-right:0.5em" />
      <strong>Unverified Information!</strong><br />
      This page or section contains unverified information. <a href="wrt54g?do=edit">Remove</a> this notice if you can ensure its correctness.
    </td>
  </tr>
</table>

</p>

</div>
</div>
<div class="level2">

</div>

<h2 class="sectionedit37" id="kamikazewhite_russian_recovery">Kamikaze/White Russian Recovery</h2>
<div class="level2">

<p>
After successfully running a late model version of Kamikaze.  I had some stability issues decided to go with white russian, I downgraded with the web gui to the latest default version of openwrt-brcm-2.4-squashfs.trx and got bricked.  These instructions are linux specific, if you are running any other <abbr title="Operating System">OS</abbr> your mileage may vary.
</p>

</div>

<h3 class="sectionedit38" id="enter_failsafe_mode">Enter Failsafe Mode:</h3>
<div class="level3">

<p>
I was able to get into failsafe mode consistently by hitting the reset button for 2 seconds after the DMZ led lights up.
</p>
<ol>
<li class="level1"><div class="li"> Power on the WRT.</div>
</li>
<li class="level1"><div class="li"> <strong>Wait for the DMZ light</strong> first (failing to wait for DMZ on before button press would end up completely Linksys-destroying the nvram contents, i.e. <strong>boot wait off</strong> (ouch), 192.168.1.1, SSID linksys).</div>
</li>
<li class="level1"><div class="li"> <strong>Then</strong> press and hold the reset button on the back until the DMZ light blinks.</div>
</li>
</ol>

<p>
Unit is now available at 192.168.1.1. If, for any reason (like interface configuration being totally messed up), the WRT doesn&#039;t show up on that IP in failsafe mode, see section &quot;Last Resort Recovery&quot; below.  
</p>

</div>

<h3 class="sectionedit39" id="get_your_kit_in_order">Get Your Kit in Order:</h3>
<div class="level3">

<p>
Get the proper code into the tmp directory of your computer, for me this was:
</p>
<div class="table sectionedit40"><table class="inline">
	<tr class="row0">
		<td class="col0"> <pre class="code">cd /tmp
wget http://downloads.openwrt.org/whiterussian/newest/default/openwrt-brcm-2.4-squashfs.trx
wget http://downloads.openwrt.org/people/nbd/nvram-clean.sh</pre>
 </td>
	</tr>
</table></div>

</div>

<h3 class="sectionedit41" id="update_the_openwrt_image_from_failsafe">Update the OpenWrt Image from Failsafe:</h3>
<div class="level3">

<p>
Get the code into the tmp directory of the WRT from the failsafe telnet session and then overwrite the firmware with the new image using mtd.
<pre class="code">cd tmp
scp root@192.168.1.2:/tmp/openwrt-brcm-2.4-squashfs.trx ./
mtd -r write openwrt-brcm-2.4-squashfs.trx linux </pre>

I found that the machine would not reboot itself nor would it reboot using /sbin/reboot.
I had to unplug to make it reload. Make sure the commands you have previously typed have finished completely before you pull the juice.
</p>

<p>
According to Internet sources your WRT may be fixed at this point.  Mine still would not come up, it seems that I had some nvram variables mucked up, so back to failsafe again.
</p>

</div>

<h3 class="sectionedit42" id="backing_up_your_nvram_variables">Backing up your nvram variables:</h3>
<div class="level3">

<p>
It is a good idea to save these just in case you need to refer to anything previously set.
</p>

<p>
<code>nvram show | sort</code>
</p>

<p>
I copied the output to my laptop using
</p>

<p>
<code>cat &gt; nvram-broke</code>
</p>

<p>
and pasting the output of the &quot;nvram show&quot; command to my terminal.
</p>

<p>
make sure you got the code by doing:
</p>

<p>
<code>cat nvram-broke</code>
</p>

</div>

<h3 class="sectionedit43" id="running_the_clean_up_script">Running the Clean Up Script:</h3>
<div class="level3">

<p>
The cleanup script gets your nvram variables back to a sane state and gets rid of anything not used by OpenWrt.
</p>
<div class="table sectionedit44"><table class="inline">
	<tr class="row0">
		<td class="col0"> <pre class="code">cd /tmp/
scp root@192.168.1.2:/tmp/nvram-clean.sh ./
chmod a+x nvram-clean.sh
./nvram-clean.sh
nvram commit</pre>
 </td>
	</tr>
</table></div>

<p>
Throw the bones on the floor and reboot.  Your WRT should be up and running.
</p>

</div>

<h1 class="sectionedit45" id="troubleshooting">Troubleshooting</h1>
<div class="level1">

</div>

<h2 class="sectionedit46" id="wireless_broken_by_default_because_of_wrong_macaddr">Wireless broken by default because of wrong macaddr:</h2>
<div class="level2">

<p>
There&#039;s something wrong with mac address settings in the default /etc/config/wireless
Make sure the mac address line reads the mac you find in /sys/class/ieee80211/phy0/macaddress
Ref: <a href="https://dev.openwrt.org/ticket/7102" class="urlextern" title="https://dev.openwrt.org/ticket/7102"  rel="nofollow">https://dev.openwrt.org/ticket/7102</a>
</p>

</div>

<h2 class="sectionedit47" id="read_only_filesystem">Read only filesystem</h2>
<div class="level2">

<p>
If the file system stays in read only mode type
<pre class="code">mtd unlock rootfs_data</pre>

Put this command in <code>/etc/init.d/nvram</code> for example, so that it is called on every start up.
</p>

<p>
(Source and details: <a href="https://forum.openwrt.org/viewtopic.php?id=25063" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?id=25063"  rel="nofollow">https://forum.openwrt.org/viewtopic.php?id=25063</a>)
</p>

</div>

<h2 class="sectionedit48" id="tags">Tags</h2>
<div class="level2">
<div class="tags"><span>
	<a href="../../tag/bcm53xx?do=showtag&amp;tag=bcm53xx" class="wikilink1" title="tag:bcm53xx" rel="tag">bcm53xx</a>,
	<a href="../../tag/bcm5352?do=showtag&amp;tag=bcm5352" class="wikilink1" title="tag:bcm5352" rel="tag">bcm5352</a>,
	<a href="../../tag/mips?do=showtag&amp;tag=MIPS" class="wikilink1" title="tag:mips" rel="tag">MIPS</a>
</span></div>

</div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>toh/linksys/wrt54g.txt</bdi> · Last modified: 2014/12/09 00:24 by <bdi>pbix</bdi></div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="wrt54g?do=edit"  class="action source" accesskey="v" rel="nofollow" title="Show pagesource [V]"><span>Show pagesource</span></a></li><li><a href="wrt54g?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="wrt54g?do=backlink"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="wrt54g-tm#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license" class="urlextern">CC Attribution-Noncommercial-Share Alike 3.0 Unported</a></bdi></div>
    <div class="buttons">
        <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license"><img src="../../lib/images/license/button/cc-by-nc-sa.png" alt="CC Attribution-Noncommercial-Share Alike 3.0 Unported" /></a>        <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="../../lib/tpl/openwrt/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://www.php.net" title="Powered by PHP" ><img
            src="../../lib/tpl/openwrt/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="../../lib/tpl/openwrt/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="../../lib/tpl/openwrt/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="../../lib/tpl/openwrt/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="../../lib/exe/indexer.php?id=toh%253Alinksys%253Awrt54g&amp;1432266234" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->
</body>
</html>
