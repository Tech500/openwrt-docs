<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>Fonera [OpenWrt Wiki]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="fastethernet,1nic,no switch,serial,integrated,802.11bg,detachableantenna,16ram,8flash,mips,4kec"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../lib/exe/opensearch.php" title="OpenWrt Wiki"/>
<link rel="start" href="../../index.html"/>
<link rel="contents" href="fonera?do=index" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Recent changes" href="../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="../../feed.php?mode=list&amp;ns=toh:fon"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="../../_export/xhtml/toh/fon/fonera"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="../../_export/raw/toh/fon/fonera"/>
<link rel="canonical" href="fonera"/>
<link rel="stylesheet" type="text/css" href="../../lib/exe/css.php?t=openwrt&amp;tseed=6f44f363dc87908d905dc56ff3acbfc4"/>
<script type="text/javascript">/*<![CDATA[*/var NS='toh:fon';var JSINFO = {"id":"toh:fon:fonera","namespace":"toh:fon"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../lib/exe/js.php?tseed=6f44f363dc87908d905dc56ff3acbfc4"></script>
<script type="text/javascript" charset="utf-8">/*<![CDATA[*/jQuery(function(){
	for ( i=0; i < document.forms.length; i++ ) {
		if (document.forms[i].method == 'post') {
			var myElement = document.createElement('input');
			myElement.setAttribute('type', 'hidden');
			myElement.name = 'bb2_screener_';
			myElement.value = '1432266227 166.182.3.17';
			document.forms[i].appendChild(myElement);
		}
	}
});
/*!]]>*/</script>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="../../lib/tpl/openwrt/images/favicon.ico" />
<link rel="apple-touch-icon" href="../../lib/tpl/openwrt/images/apple-touch-icon.png" />
    </head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_openwrt     ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="fonera#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="../../start"  accesskey="h" title="[H]"><img src="../../lib/tpl/openwrt/images/logo.png" width="386" height="98" alt="" /> <span>OpenWrt Wiki</span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="fonera?do=register"  class="action register" rel="nofollow" title="Register">Register</a></li><li><a href="fonera?do=login&amp;sectok=382740b13d95f946eed36caa57076b4a"  class="action login" rel="nofollow" title="Login">Login</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="../../start" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="../../doku.php" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="toh:fon:fonera" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Show pagesource</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Login</option><option value="register">Register</option></optgroup></select><input type="submit" value="&gt;" /></div></form>            </div>
            <ul>
                <li><a href="fonera?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a></li><li><a href="fonera?do=media&amp;ns=toh%253Afon"  class="action media" rel="nofollow" title="Media Manager">Media Manager</a></li><li><a href="fonera?do=index"  class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                            <div class="youarehere"><span class="bchead">You are here: </span><span class="home"><bdi><a href="../../start" class="wikilink1" title="start">OpenWrt Wiki</a></bdi></span> » <bdi><a href="../start" class="wikilink1" title="toh:start">Table of Hardware</a></bdi> » <bdi><a href="start" class="wikilink1" title="toh:fon:start">Fon</a></bdi> » <bdi><span class="curid"><a href="fonera" class="wikilink1" title="toh:fon:fonera">Fonera</a></span></bdi></div>
                                    <div class="plugin_multilingual">
        <ul>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/cz/toh/fon/fonera" class="media" title="cz:toh:fon:fonera"><img src="../../lib/exe/fetch.php?cache=&amp;tok=aff589&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fcz.gif" class="media" title="Čeština (Czech)" alt="Čeština (Czech)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/de/toh/fon/fonera" class="media" title="de:toh:fon:fonera"><img src="../../lib/exe/fetch.php?cache=&amp;tok=e24010&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fde.gif" class="media" title="Deutsch (German)" alt="Deutsch (German)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <span class="curid"><a href="fonera" class="media" title="toh:fon:fonera"><img src="../../lib/exe/fetch.php?cache=&amp;tok=2a37ae&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fgb.gif" class="media" title="English" alt="English" /></a></span>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/es/toh/fon/fonera" class="media" title="es:toh:fon:fonera"><img src="../../lib/exe/fetch.php?cache=&amp;tok=46c004&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fmx.gif" class="media" title="Español (Spanish, Mexico)" alt="Español (Spanish, Mexico)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/fr/toh/fon/fonera" class="media" title="fr:toh:fon:fonera"><img src="../../lib/exe/fetch.php?cache=&amp;tok=a5beba&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ffr.gif" class="media" title="Français (French)" alt="Français (French)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/hu/toh/fon/fonera" class="media" title="hu:toh:fon:fonera"><img src="../../lib/exe/fetch.php?cache=&amp;tok=6b5470&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fhu.gif" class="media" title="Magyar (Hungarian)" alt="Magyar (Hungarian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/jp/toh/fon/fonera" class="media" title="jp:toh:fon:fonera"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f999fc&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fjp.gif" class="media" title="日本語 (Japanese)" alt="日本語 (Japanese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pl/toh/fon/fonera" class="media" title="pl:toh:fon:fonera"><img src="../../lib/exe/fetch.php?cache=&amp;tok=c805c0&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fpl.gif" class="media" title="Poliski (Polish)" alt="Poliski (Polish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pt-br/toh/fon/fonera" class="media" title="pt-br:toh:fon:fonera"><img src="../../lib/exe/fetch.php?cache=&amp;tok=13127d&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fbr.gif" class="media" title="Português brasileiro (Portuguese, Brasil)" alt="Português brasileiro (Portuguese, Brasil)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/ru/toh/fon/fonera" class="media" title="ru:toh:fon:fonera"><img src="../../lib/exe/fetch.php?cache=&amp;tok=66ab5e&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fru.gif" class="media" title="Русский (Russsian)" alt="Русский (Russsian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/tr/toh/fon/fonera" class="media" title="tr:toh:fon:fonera"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f4beed&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ftr.gif" class="media" title="Tϋrkçe (Turkish)" alt="Tϋrkçe (Turkish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-cn/toh/fon/fonera" class="media" title="zh-cn:toh:fon:fonera"><img src="../../lib/exe/fetch.php?cache=&amp;tok=93625a&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-cn.gif" class="media" title="官話/官话 (Chinese)" alt="官話/官话 (Chinese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-tw/toh/fon/fonera" class="media" title="zh-tw:toh:fon:fonera"><img src="../../lib/exe/fetch.php?cache=&amp;tok=b56198&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-tw.gif" class="media" title="臺灣華語 (Taiwanese)" alt="臺灣華語 (Taiwanese)" /></a>
              </div>
            </div>
          </li>
        </ul>
      </div>
        </div>
    
    
    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>toh:fon:fonera</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="fonera#hardware">Hardware</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="fonera#power">Power</a></div></li>
<li class="level2"><div class="li"><a href="fonera#serial_port">Serial port</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="fonera#fon2100">FON2100</a></div></li>
<li class="level3"><div class="li"><a href="fonera#fon2200">FON2200</a></div></li>
<li class="level3"><div class="li"><a href="fonera#open-mesh_om1p">Open-Mesh OM1P</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="fonera#gpio">GPIO</a></div></li>
<li class="level2"><div class="li"><a href="fonera#case">Case</a></div></li>
<li class="level2"><div class="li"><a href="fonera#additional_comments">Additional Comments</a></div></li>
<li class="level2"><div class="li"><a href="fonera#jtag">JTAG</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="fonera#original_software">Original software</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="fonera#booting_time_output">Booting time output</a></div></li>
<li class="level2"><div class="li"><a href="fonera#boot_timing">Boot timing</a></div></li>
<li class="level2"><div class="li"><a href="fonera#flash_layout">Flash layout</a></div></li>
<li class="level2"><div class="li"><a href="fonera#backing_up_the_original_firmware">Backing up the Original Firmware</a></div></li>
<li class="level2"><div class="li"><a href="fonera#restoring_the_original_firmware">Restoring the Original Firmware</a></div></li>
<li class="level2"><div class="li"><a href="fonera#updatingunbricking_via_redboot">Updating / Unbricking via RedBoot</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="fonera#fonera_s_bootloaderredboot">Fonera&#039;s bootloader: RedBoot</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="fonera#enable_telnet_into_redboot_with_serial_access">Enable Telnet into RedBoot, with Serial Access</a></div></li>
<li class="level2"><div class="li"><a href="fonera#enabling_telnet_into_redboot_without_serial_access">Enabling Telnet into RedBoot, WITHOUT Serial Access</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="fonera#replace_the_kernel_to_disable_write_protection">Replace the Kernel to Disable Write Protection</a></div></li>
<li class="level3"><div class="li"><a href="fonera#overwrite_the_redboot_configuration">Overwrite the RedBoot Configuration</a></div></li>
<li class="level3"><div class="li"><a href="fonera#telnet_into_redboot">Telnet into RedBoot</a></div></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"><a href="fonera#openwrt">OpenWrt</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="fonera#installing_openwrt_with_redboot">Installing OpenWrt with RedBoot</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="fonera#step_1downloading_the_openwrt_images">Step 1: Downloading the OpenWrt Images</a></div></li>
<li class="level3"><div class="li"><a href="fonera#step_2access_and_configure_redboot">Step 2: Access and Configure RedBoot</a></div></li>
<li class="level3"><div class="li"><a href="fonera#step_3download_and_flash_the_images">Step 3: Download and Flash the Images</a></div></li>
<li class="level3"><div class="li"><a href="fonera#step_4check_boot_script">Step 4: Check boot script</a></div></li>
<li class="level3"><div class="li"><a href="fonera#step_5reboot_the_router_and_enjoy_openwrt">Step 5: Reboot the Router and enjoy OpenWrt</a></div></li>
<li class="level3"><div class="li"><a href="fonera#automating_the_installation_with_expect">Automating the Installation with &quot;expect&quot;</a></div></li>
<li class="level3"><div class="li"><a href="fonera#automating_the_installation_with_fon-flash">Automating the installation with fon-flash</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="fonera#upgrading_openwrt_from_within_a_running_openwrt_installation">Upgrading OpenWrt from within a running OpenWrt installation</a></div></li>
<li class="level2"><div class="li"><a href="fonera#basic_configuration">Basic configuration</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="fonera#the_fonera_pack_from_sven-olafon_mesh_network">The Fonera Pack (from sven-ola): FON + Mesh Network</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="fonera#installation">Installation</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="fonera#software_hacks">Software Hacks</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="fonera#disabling_serial_console">Disabling serial console</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="fonera#hardware_hacks">Hardware Hacks</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="fonera#second_antenna">Second antenna</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="fonera#fon21001">FON2100</a></div></li>
<li class="level3"><div class="li"><a href="fonera#fon22001">FON2200</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="fonera#hardware_mp3_client">Hardware mp3 client</a></div></li>
<li class="level2"><div class="li"><a href="fonera#spi_usagesdmmc_card_reader">SPI usage: SD/MMC card reader</a></div></li>
<li class="level2"><div class="li"><a href="fonera#spi_usagehoperf_rfm12_433_mhz_radio_module">SPI usage: HopeRF rfm12 433 MHz radio module</a></div></li>
<li class="level2"><div class="li"><a href="fonera#wire_bus">1-Wire Bus</a></div></li>
<li class="level2"><div class="li"><a href="fonera#i_c_bus">I²C Bus</a></div></li>
<li class="level2"><div class="li"><a href="fonera#various_hardware_mods">Various hardware mods</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="fonera#resources">Resources</a></div></li>
<li class="level1"><div class="li"><a href="fonera#tags">Tags</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="fonera">Fonera</h1>
<div class="level1">

<p>
The Fonera FON2100A is based on an Atheros system-on-a-chip (SoC). It got a MIPS 4KEc V6.4 processor.  Fon&#039;s firmware for the Fonera is a derivative of OpenWrt proper, so expect no difficulties in running OpenWrt on your device.
</p>

<p>
The FON2200 is a rebuild of the FON2100. The only outward changes (apart from the label) is that it runs on 7.5V rather then 5V. Inside, the entire board was reworked. It has a simpler serial connection and gives off much less heat. They even left off the heat sink. When relevant, sections below mention where the FON2200 deviates.
</p>

<p>
<strong>Note:</strong> If you came here for instructions on how to install OpenWrt on a new, unmodified <em>La Fonera</em>, you should proceed to <a href="fonera#enabling_telnet_into_redboot_without_serial_access" title="toh:fon:fonera ↵" class="wikilink1">here</a> and <a href="fonera#enable_telnet_into_redboot_with_serial_access" title="toh:fon:fonera ↵" class="wikilink1">then here</a>.
</p>

<p>
Related hardware (See additional comments below): ACCTON MR3201A, FON FON2100 A,B,C and F, Edge-Core WA3101, Philips SNR6500, SMC WEBT-G, Siemens Gigaset Wlan repeater 108
</p>

</div>

<h2 class="sectionedit2" id="hardware">Hardware</h2>
<div class="level2">
<div class="table sectionedit3"><table class="inline">
	<tr class="row0">
		<td class="col0"> Architecture </td><td class="col1"> MIPS 4KEc </td>
	</tr>
	<tr class="row1">
		<td class="col0"> Vendor </td><td class="col1"> <em>n/a</em> </td>
	</tr>
	<tr class="row2">
		<td class="col0"> Bootloader </td><td class="col1"> RedBoot </td>
	</tr>
	<tr class="row3">
		<td class="col0"> System-On-Chip </td><td class="col1"> Atheros AR2315 </td>
	</tr>
	<tr class="row4">
		<td class="col0"> CPU Speed </td><td class="col1"> 183 <abbr title="Megahertz">MHz</abbr> </td>
	</tr>
	<tr class="row5">
		<td class="col0"> Flash size </td><td class="col1"> 8 MiB </td>
	</tr>
	<tr class="row6">
		<td class="col0"> RAM </td><td class="col1"> 16 MiB </td>
	</tr>
	<tr class="row7">
		<td class="col0"> Wireless </td><td class="col1"> Integrated Atheros 802.11b/g </td>
	</tr>
	<tr class="row8">
		<td class="col0"> Ethernet </td><td class="col1"> 1x RJ45 </td>
	</tr>
	<tr class="row9">
		<td class="col0"> USB </td><td class="col1"> No </td>
	</tr>
	<tr class="row10">
		<td class="col0"> Serial </td><td class="col1"> Yes </td>
	</tr>
	<tr class="row11">
		<td class="col0"> JTAG </td><td class="col1"> No </td>
	</tr>
</table></div>
<ul>
<li class="level1"><div class="li"> 5V power supply</div>
</li>
<li class="level1"><div class="li"> Antenna</div>
</li>
<li class="level1"><div class="li"> SPI-Bus</div>
</li>
</ul>

<p>
FON2200 PCB front
<a href="../../_detail/media/fon2200-pcb-front.jpg?id=toh%253Afon%253Afonera" class="media" title="media:fon2200-pcb-front.jpg"><img src="../../_media/media/fon2200-pcb-front.jpg" class="media" title="fon2200-pcb-front.jpg" alt="fon2200-pcb-front.jpg" /></a>
</p>

<p>
FON2200 PCB back
<a href="../../_detail/media/toh/fon2200-pcb-back.jpg?id=toh%253Afon%253Afonera" class="media" title="media:toh:fon2200-pcb-back.jpg"><img src="../../_media/media/toh/fon2200-pcb-back.jpg" class="media" title="fon2200-pcb-back.jpg" alt="fon2200-pcb-back.jpg" /></a>
</p>

</div>

<h3 class="sectionedit4" id="power">Power</h3>
<div class="level3">

<p>
FON2100: 5V - Internally this is regulated to 3.3V by a linear regulator, so it will probably work on anything from 4 to 6V. But higher voltage will add to the heat issues of the device. La Fonera comes with an I.T.E. Power Supply Model MU12-2050200-A1. This power supply has a 5.5mm outer diameter and 2.5mm inner diameter plug with tip-positive / ring-negative polarity. You can get a cheap replacement <a href="http://dx.com/p/ac-power-adapter-for-wireless-router-surveillance-security-camera-5-5x2-5mm-us-plug-100-240v-101106" class="urlextern" title="http://dx.com/p/ac-power-adapter-for-wireless-router-surveillance-security-camera-5-5x2-5mm-us-plug-100-240v-101106"  rel="nofollow">here</a>.
</p>

<p>
FON2200: 7.5V (small connector) - Internally this is regulated to 3.3V by a switched regulator, so it will probably work on anything from 4 to 16V, without adding to heat. A 12V supply voltage is proved to work.
</p>

</div>

<h3 class="sectionedit5" id="serial_port">Serial port</h3>
<div class="level3">

<p>
<em class="u"><strong>Note</strong></em>: RXD and TXD directions are from the computer side (i.e. swapped with respect to Fonera board side):
</p>
<ul>
<li class="level1"><div class="li"> RXD = fonera→host</div>
</li>
<li class="level1"><div class="li"> TXD = host→fonera</div>
</li>
</ul>

<p>
<em class="u"><strong>Warning</strong></em>: Theses signals are low-level (3.3V) signals <em class="u">NOT</em> RS232 levels.
</p>

<p>
<em class="u"><strong>Note</strong></em>: On some models (mainly FON2100), you have to plug in the serial adapter around 3 secondes after turning the fonera on, otherwise it won&#039;t boot.
</p>

<p>
Default serial settings are <strong>9600,8N1</strong>
</p>

</div>

<h4 id="fon2100">FON2100</h4>
<div class="level4">

<p>
If the ethernet jack is in front of you, it looks like this:
</p>

<p>
<pre class="code">+-------------------+
|GND| . |TXD|RXD| . |
|VCC| . | . | . | . |
+-------------------+
+-----+ +--------+    +---+
|Power| |Ethernet|    |Ant|</pre>

</p>

<p>
<a href="http://www.hidaba.com/wp-content/uploads/2007/11/fonera-serial.jpg" class="urlextern" title="http://www.hidaba.com/wp-content/uploads/2007/11/fonera-serial.jpg"  rel="nofollow">Picture with labels</a>
<a href="http://www.shadowandy.net/wp/wp-content/uploads/laFoneraSerialPinout.jpg" class="urlextern" title="http://www.shadowandy.net/wp/wp-content/uploads/laFoneraSerialPinout.jpg"  rel="nofollow">Another picture with labels</a>
</p>

<p>
<a href="http://fonblog.files.wordpress.com/2006/10/fonera_serial.jpg" class="urlextern" title="http://fonblog.files.wordpress.com/2006/10/fonera_serial.jpg"  rel="nofollow">Here</a>, you can have a visual confirmation of pining for <a href="http://fonblog.files.wordpress.com/2006/10/fonera_serial.jpg" class="urlextern" title="http://fonblog.files.wordpress.com/2006/10/fonera_serial.jpg"  rel="nofollow">FON2100 serial port</a> with corresponding signals:
</p>
<div class="table sectionedit6"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Signal </th><th class="col1"> Color </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> VCC (3.3V) </td><td class="col1 leftalign"> red    </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> GND        </td><td class="col1 leftalign"> blue   </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> RX         </td><td class="col1"> orange </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> TX         </td><td class="col1 leftalign"> white  </td>
	</tr>
</table></div>

</div>

<h4 id="fon2200">FON2200</h4>
<div class="level4">

<p>
Looking inside, with the connectors at your left hand:
<pre class="code">---+  +----------------+
 P |  |GND RXD TXD 3.3V|
 O |  +----------------+
 W | +---------------------+
 E | |RAM                  |
 R | |                     |
</pre>

</p>

</div>

<h4 id="open-mesh_om1p">Open-Mesh OM1P</h4>
<div class="level4">

<p>
Looking inside, with the connectors at your left hand:
<pre class="code">---+  +----------------+
 P |  |3.3V RXD TXD GND|
 O |  +----------------+
 W | +---------------------+
 E | |RAM                  |
 R | |                     |</pre>

</p>

</div>

<h3 class="sectionedit7" id="gpio">GPIO</h3>
<div class="level3">
<div class="table sectionedit8"><table class="inline">
	<tr class="row0">
		<td class="col0"> GPIO </td><td class="col1"> Description </td>
	</tr>
	<tr class="row1">
		<td class="col0"> 0 </td><td class="col1"> TP3 </td>
	</tr>
	<tr class="row2">
		<td class="col0"> 1 </td><td class="col1"> 5 of SW1 </td>
	</tr>
	<tr class="row3">
		<td class="col0"> 2 </td><td class="col1"> WLAN LED </td>
	</tr>
	<tr class="row4">
		<td class="col0"> 3 </td><td class="col1"> pin 1 of SW1 </td>
	</tr>
	<tr class="row5">
		<td class="col0"> 4 </td><td class="col1"> pin 2 of SW1 </td>
	</tr>
	<tr class="row6">
		<td class="col0"> 5 </td><td class="col1"> RESET (!) </td>
	</tr>
	<tr class="row7">
		<td class="col0"> 6 </td><td class="col1"> RESET button </td>
	</tr>
	<tr class="row8">
		<td class="col0"> 7 </td><td class="col1"> pin 6 of SW1 </td>
	</tr>
</table></div>

</div>

<h3 class="sectionedit9" id="case">Case</h3>
<div class="level3">

<p>
To open the case remove the two rubber feet on the opposite site to the antenna jack, they will reveal two crosspoint screws.
</p>

</div>

<h3 class="sectionedit10" id="additional_comments">Additional Comments</h3>
<div class="level3">

<p>
Detailed Information may be found in the FCC database: Doing a search on Fonera&#039;s FCC-ID reveals, that this device is actually made by Accton/SMC (<a href="http://www.accton.com.tw/" class="urlextern" title="http://www.accton.com.tw/"  rel="nofollow">http://www.accton.com.tw/</a>).
</p>

<p>
A look at the varius test reports and external photos shows, that this device is provided also under the Trade(Model) Names
</p>
<ul>
<li class="level1"><div class="li"> ACCTON MR3201A</div>
</li>
<li class="level1"><div class="li"> FON FON2100A,B,C and F</div>
</li>
<li class="level1"><div class="li"> Edge-Core WA3101</div>
</li>
<li class="level1"><div class="li"> Philips SNR6500</div>
</li>
<li class="level1"><div class="li"> SMC WEBT-G</div>
</li>
<li class="level1"><div class="li"> Siemens Gigaset Wlan repeater 108</div>
</li>
</ul>

<p>
Copies of the mentioned FCC-documents may also be found at <a href="http://mobileaccess.de/fonera/" class="urlextern" title="http://mobileaccess.de/fonera/"  rel="nofollow">http://mobileaccess.de/fonera/</a>
</p>

<p>
According to OpenWrt, the output-power is set to 18dBm, in contrast to the FCC-RF-tests where an output power of almost 25dBm (actually 24.89dBm on channel 6 in 802.11g mode) is measured. Question here is, if further versions will provide an adjustable TX-Power up to that level. Is the information provided by OpenWrt of 18dBm just a hypothetical value? I found no reference in Kamikaze on how to adjust it.
</p>

<p>
Another interessting issue is the possible frequency range, as specified by Atheros itself at <a href="http://www.atheros.com/pt/bulletins/AR5006AP_GBulletin.pdf" class="urlextern" title="http://www.atheros.com/pt/bulletins/AR5006AP_GBulletin.pdf"  rel="nofollow">http://www.atheros.com/pt/bulletins/AR5006AP_GBulletin.pdf</a> - where the available band ranges from 2.300GHz to 2.500GHz. Question here is, if there will be an option to use further frequencies than the international standardized 14 Channels. In particular, there might be a very high interest e.g. from the amateur-radio community!
</p>

</div>

<h3 class="sectionedit11" id="jtag">JTAG</h3>
<div class="level3">

<p>
There seems to be a 14 pin unpopulated JTAG, but it is not that important as the RedBoot boatloader does not seem to be crippled.
</p>

</div>

<h2 class="sectionedit12" id="original_software">Original software</h2>
<div class="level2">

</div>

<h3 class="sectionedit13" id="booting_time_output">Booting time output</h3>
<div class="level3">

<p>
<pre class="code">+PHY ID is 0022:5521
Ethernet eth0: MAC address xx:xx:xx:xx:xx
IP: 0.0.0.0/255.255.255.255, Gateway: 0.0.0.0
Default server: 0.0.0.0
RedBoot(tm) bootstrap and debug environment [ROMRAM]
Non-certified release, version v1.3.0 - built 16:57:58, Aug  7 2006
Copyright (C) 2000, 2001, 2002, 2003, 2004 Red Hat, Inc.
Board: ap51
RAM: 0x80000000-0x81000000, [0x80040450-0x80fe1000] available
FLASH: 0xa8000000 - 0xa87f0000, 128 blocks of 0x00010000 bytes each.
== Executing boot script in 1.000 seconds - enter ^C to abort
^C
RedBoot&gt;</pre>

</p>

</div>

<h3 class="sectionedit14" id="boot_timing">Boot timing</h3>
<div class="level3">

<p>
<pre class="code">power                t=0
safe to connect TX   t+~3sec
+                    t+7sec
PHY ID               t+9sec
redboot banner       t+13sec
WLAN light blinks    t+86sec</pre>

</p>

<p>
Maybe you think your fonera serial port is not working due to bogus serial pinouts posted on Hungarian blog pages.  Maybe you started cursing greedy mouth-breathing corporations and ranting about the need for GPLv3.  If so, the timing above may help you restore your calmness.  You should see the &#039;+&#039; within 7 seconds of poweron.  The problem &quot;my fonera doesn&#039;t boot with serial port plugged in&quot; stops the &#039;+&#039; from appearing, so if you see &#039;+&#039; you haven&#039;t got that problem.
</p>

<p>
Note: FON2200 seems to have more full-featured redboot, as well as address 192.168.1.1 set with a 2 second timeout. So theoratically, you could telnet directly into the Redboot, without serial or modification.
</p>

</div>

<h3 class="sectionedit15" id="flash_layout">Flash layout</h3>
<div class="level3">

<p>
<pre class="code">RedBoot&gt; fis list
Name              FLASH addr  Mem addr    Length      Entry point
RedBoot           0xA8000000  0xA8000000  0x00030000  0x00000000
rootfs            0xA8030000  0xA8030000  0x00700000  0x00000000
vmlinux.bin.l7    0xA8730000  0x80041000  0x000B0000  0x80041000
FIS directory     0xA87E0000  0xA87E0000  0x0000F000  0x00000000
RedBoot config    0xA87EF000  0xA87EF000  0x00001000  0x00000000</pre>

</p>

<p>
As you can see, the vmlinux.bin.l7 partition is of B0000, ergo 720896 bytes length. That means, that the kernel size can not exceed 720kb without reinitializing the FIS (which is fine if you are prepared to rewrite the root FS as well). Like wise the rootfs partition has a size of 0x700000 or 7340032 bytes. You&#039;ve got 7.3 MiB space.
</p>

</div>

<h3 class="sectionedit16" id="backing_up_the_original_firmware">Backing up the Original Firmware</h3>
<div class="level3">

<p>
After <a href="http://stefans.datenbruch.de/lafonera/" class="urlextern" title="http://stefans.datenbruch.de/lafonera/"  rel="nofollow">gaining SSH access</a> use these commands:
</p>

<p>
<pre class="code">cd /dev/mtdblock
httpd -p 9090</pre>

</p>

<p>
Connect to the Fonera through the private network. Now you can download the mtd partiotions using the addresses:
</p>

<p>
<pre class="code">http://192.168.10.1:9090/0ro
http://192.168.10.1:9090/1ro
http://192.168.10.1:9090/2ro
http://192.168.10.1:9090/3ro
http://192.168.10.1:9090/4ro
http://192.168.10.1:9090/5ro
http://192.168.10.1:9090/6ro
http://192.168.10.1:9090/7ro</pre>

</p>

<p>
Also take note of the output of the command
</p>

<p>
<pre class="code">cat /proc/mtd</pre>

</p>

<p>
That should be:
</p>

<p>
<pre class="code">dev:    size   erasesize  name
mtd0: 00030000 00010000 &quot;RedBoot&quot;
mtd1: 006f0000 00010000 &quot;rootfs&quot;
mtd2: 00560000 00010000 &quot;rootfs1&quot;
mtd3: 00010000 00010000 &quot;config&quot;
mtd4: 000b0000 00010000 &quot;vmlinux.bin.l7&quot;
mtd5: 0000f000 00010000 &quot;FIS directory&quot;
mtd6: 00001000 00010000 &quot;RedBoot config&quot;
mtd7: 00010000 00010000 &quot;board_config&quot;</pre>

</p>

</div>

<h3 class="sectionedit17" id="restoring_the_original_firmware">Restoring the Original Firmware</h3>
<div class="level3">

</div>

<h3 class="sectionedit18" id="updatingunbricking_via_redboot">Updating / Unbricking via RedBoot</h3>
<div class="level3">

<p>
First, download the original firmware and extract it to the machine where you run the TFTP server:
</p>

<p>
<pre class="code">$ wget -q -O - http://downloads.fon.com/firmware/current/fonera_0.7.1.1.fon | tail -c +520 - | tar xvfz -
upgrade
rootfs.squashfs
kernel.lzma
hotfix
$ cp kernel.lzma /tftp/
$ cp rootfs.squashfs /tftp/</pre>

</p>

<p>
Replace <code>/tfptp/</code> above with the name of the directory from where you serve your TFTP files (on a standard Debian installation this would be <code>/srv/tftp</code>).  Make sure your TFTP server is running and ready to serve.  <code>atftpd</code> has been proven to work well.
</p>

<p>
<code>kernel.lzma</code> and <code>rootfs.squashfs</code> are the two files which will be written to the flash storage of the router.
</p>

<p>
Now access the prompt of the bootloader as described further below and proceed as if flashing OpenWrt (see below), using of course the two files mentioned above as kernel and rootfs image instead.
</p>

</div>

<h2 class="sectionedit19" id="fonera_s_bootloaderredboot">Fonera&#039;s bootloader: RedBoot</h2>
<div class="level2">

<p>
The Fonera routers use <em>RedBoot</em> as their boot loader.  <em>RedBoot</em> allows for both serial access as well as Telnet access.  An unmodified <em>FON 2100</em> does not have Telnet enabled, unfortunately, so in order to enable that, further steps have to be taken (see further below).  To access the serial console, a TTL level converter has to be attached to the serial port and connected to an RS-232 port.
</p>

</div>

<h3 class="sectionedit20" id="enable_telnet_into_redboot_with_serial_access">Enable Telnet into RedBoot, with Serial Access</h3>
<div class="level3">

<p>
If you have access to serial console of RedBoot (only possible if opening the case and attaching a TTL line converter cable), then you can enable Telnet for future convenience by changing a few RedBoot configuration variables.
</p>

<p>
The default form of the <code>fconfig</code> command will force you to enter the data, change and confirm every initialized variable. To avoid reentering the <code>boot_script_*</code> data and harming unnecessary variables, run the <code>fconfig list</code> command first to look at variable names and values:
</p>

<p>
<pre class="code">RedBoot&gt; fconfig -l -n
boot_script: true
boot_script_data:
.. fis load -l vmlinux.bin.l7
.. exec
boot_script_timeout: 1
bootp: false
bootp_my_gateway_ip: 0.0.0.0
bootp_my_ip: 0.0.0.0
bootp_my_ip_mask: 255.255.255.255
bootp_server_ip: 0.0.0.0
console_baud_rate: 9600
gdb_port: 9000
info_console_force: false
net_debug: false</pre>

</p>

<p>
Next, change only necessary variables (using their names from the previous listing) and update the RedBoot non-volatile configuration after the last change:
</p>

<p>
<pre class="code">RedBoot&gt; fconfig boot_script_timeout 10
boot_script_timeout: Setting to 10
Update RedBoot non-volatile configuration - continue (y/n)? n
RedBoot&gt; fconfig bootp_my_ip 192.168.5.22
Update RedBoot non-volatile configuration - continue (y/n)? n
RedBoot&gt; fconfig bootp_my_ip_mask 255.255.255.0
Update RedBoot non-volatile configuration - continue (y/n)? n
RedBoot&gt; fconfig bootp_server_ip 192.168.5.2
Update RedBoot non-volatile configuration - continue (y/n)? y
... Erase from 0xa87e0000-0xa87f0000: .
... Program from 0x80ff0000-0x81000000 at 0xa87e0000: .</pre>

</p>

<p>
<strong>Note:</strong> <em>The configuration is only in the RAM until you update the RedBoot non-volatile configuration.</em> If you reset the device without updating, the configuration will not be changed. You can use changes without the update for temporary settings.
</p>

<p>
Verify the configuration by listing the aliases this time:
</p>

<p>
<pre class="code">RedBoot&gt; fconfig -l
Run script at boot: true
Boot script:
.. fis load -l vmlinux.bin.l7
.. exec
Boot script timeout (1000ms resolution): 10
Use BOOTP for network configuration: false
Gateway IP address: 0.0.0.0
Local IP address: 192.168.5.22
Local IP address mask: 255.255.255.0
Default server IP address: 192.168.5.2
Console baud rate: 9600
GDB connection port: 9000
Force console for special debug messages: false
Network debug at boot time: false</pre>

</p>

<p>
I specified a 10 second timeout here, so I have this 10 second time frame to telnet into RedBoot. If you are not able to hit the enter-key within 10 seconds after powering up, go for a larger time frame.
</p>

<p>
<pre class="code">+PHY ID is 0022:5521
Ethernet eth0: MAC address xx:xx:xx:xx:xx:xx
IP: 192.168.5.22/255.255.255.0, Gateway: 0.0.0.0
Default server: 192.168.5.2
RedBoot(tm) bootstrap and debug environment [ROMRAM]
Non-certified release, version v1.3.0 - built 16:57:58, Aug  7 2006
Copyright (C) 2000, 2001, 2002, 2003, 2004 Red Hat, Inc.
Board: ap51
RAM: 0x80000000-0x81000000, [0x80040450-0x80fe1000] available
FLASH: 0xa8000000 - 0xa87f0000, 128 blocks of 0x00010000 bytes each.
== Executing boot script in 10.000 seconds - enter ^C to abort</pre>

</p>

<p>
Actually I had problems with my old BSD telnet on Slackware 11 to send a proper CTRL-C to the RedBoot console. I circumvented the problem with this small trick:
</p>

<p>
<pre class="code">$ echo -e &quot;\0377\0364\0377\0375\0006&quot; &gt; break
$ nc -vvv 192.168.5.22 9000 &lt; break ; telnet 192.168.5.22 9000
Warning: Inverse name lookup failed for `192.168.5.22&#039;
192.168.5.22 9000 open
== Executing boot script in 7.420 seconds - enter ^C to abort
ÿü^C
RedBoot&gt; ÿüExiting.
Total received bytes: 82
Total sent bytes: 6
Trying 192.168.5.22...
Connected to 192.168.5.22.
Escape character is &#039;^]&#039;.
RedBoot&gt;</pre>

</p>

<p>
I have to CTRL-C to abort <em>netcat</em>.
</p>

<p>
The CTRL-C problem seems to be caused by a disabled TELNET LINEMODE option. When you enable this option by creating a file <code>~/.telnetrc</code> with the following contents:
</p>

<p>
<pre class="code">192.168.5.22 9000
        mode line</pre>

</p>

<p>
You can interrupt redboot with CTRL-C:
</p>

<p>
<pre class="code">$ arping -qf 192.168.5.22 ; telnet 192.168.5.22 9000
WARNING: interface is ignored: Operation not permitted
Trying 192.168.5.22...
?Invalid command
Connected to 192.168.5.22.
Escape character is &#039;^]&#039;.
== Executing boot script in 9.940 seconds - enter ^C to abort
^C
RedBoot&gt;</pre>

</p>

<p>
The boot process is somehow signalled via the LEDs, first only the power LED is on, then the internet LED starts blinking, and when this internet LED is solid green, it is the right time to connect to the RedBoot console.
</p>

<p>
This is the point, where I disconnected the serial cable and closed the case. If the kernel is booting and SSH working, I do not need any debug-stuff in between. It is possible to unbrick the Fonera with this RedBoot console, as I can always reflash to a working firmware.
</p>

</div>

<h3 class="sectionedit21" id="enabling_telnet_into_redboot_without_serial_access">Enabling Telnet into RedBoot, WITHOUT Serial Access</h3>
<div class="level3">

<p>
As long as you can SSH into the running router, it is possible to overwrite the RedBoot configuration with a pre-made configuration partition, in order to enable Telnet access.  This allows you to enable Telnet without ever accessing RedBoot through the serial port.
</p>

<p>
Thus, in order to follow this recipe, you need SSH access to the running Fonera and its OpenWrt derivative <abbr title="Operating System">OS</abbr>.  By default, Fonera does not allow this for obvious reasons (they don&#039;t want people to tamper with the device and reinstall it).  However, several ways exist to re-enable SSH access, all of which rely on various ways to inject code into a running Fonera.  <strong>Please refer to <a href="http://stefans.datenbruch.de/lafonera/" class="urlextern" title="http://stefans.datenbruch.de/lafonera/"  rel="nofollow">http://stefans.datenbruch.de/lafonera/</a>, which does have all the information you need.</strong>  Do not forget to enable SSH permanently after jail-breaking the device.
</p>

<p>
<strong>Note:</strong> If your Fonera was connected to the Internet proper in the past it will by now have auto-installed an updated firmware, and the abovementioned jail-breaking exploits will not work any longer.  In this case, factory-reset the Fonera by holding down the reset button on the device for about 20 seconds, while the device is up and running.  Then disconnect it from the Internet and do not give it network access until you have permanently enabled SSH access and disabled the auto-updater.
</p>

<p>
As we can see via &#039;dmesg&#039; there is a mtd for the RedBoot config:
</p>

<p>
<pre class="code">Creating 6 MTD partitions on &quot;spiflash&quot;:
0x00000000-0x00030000 : &quot;RedBoot&quot;
0x00030000-0x00720000 : &quot;rootfs&quot;
0x00730000-0x007e0000 : &quot;vmlinux.bin.l7&quot;
0x007e0000-0x007ef000 : &quot;FIS directory&quot;
0x007ef000-0x007f0000 : &quot;RedBoot config&quot;
0x007f0000-0x00800000 : &quot;board_config&quot;</pre>

</p>

<p>
We can even dump that mtd content with
</p>

<p>
<pre class="code">root@OpenWrt:~# cat /dev/mtd/4ro &gt; /tmp/redboot_config
root@OpenWrt:~# strings /tmp/redboot_config
boot_script
boot_script_data
boot_script
fis load -l vmlinux.bin.l7
exec
boot_script_timeout
boot_script
bootp
bootp_my_gateway_ip
bootp
bootp_my_ip
bootp
bootp_my_ip_mask
bootp
bootp_server_ip
console_baud_rate
gdb_port
info_console_force
info_console_number
info_console_force
net_debug</pre>

</p>

<p>
It should be possible to use such a file to reflash other foneras in order to gain RedBoot access without ever opening the case. As long as someone can gain shell access to the Fonera, he could enable RedBoot telnet access to his Fonera and fiddle around with it.
</p>

<p>
This would be nice, but does not work just that easily, as the &quot;RedBoot config&quot; mtd partion is not writable:
</p>

<p>
<pre class="code">root@OpenWrt:~# mtd write /tmp/redboot_config &quot;RedBoot config&quot;</pre>

</p>

<p>
Make this partition writable, by adding in <code>kernel/driver/mtd/mtdpart.c</code> after line 435
</p>

<p>
<pre class="code">                        if (!(slave-&gt;mtd.flags &amp; MTD_WRITEABLE)){
                        slave-&gt;mtd.flags |= MTD_WRITEABLE;
                        printk (&quot;mtd: partition \&quot;%s\&quot; was read-only -- force writable -- CAMICIA HACK\n&quot;,
                                parts[i].name);
                        }</pre>

</p>

<p>
So you have to reflash the kernel with a kernel image that allows writing to the RedBoot config partition and then reflash that config partition in order to gain access to the RedBoot console.
</p>

<p>
<strong>Please note</strong> that they were not writeable for a reason. Writing &quot;RedBoot config&quot; is probably going to reset the FIS directory because it is on the same &quot;erase sector&quot;. This is not a major problem since with RedBoot we can easily recreate them using the command &quot;fis init&quot; and to install OpenWrt we must do this anyway.  However, if you write garbage into the RedBoot config partition by accident, it might be possible that you end up with a brick.  So be careful here.
</p>

<p>
The basic steps are:
</p>

</div>

<h4 id="replace_the_kernel_to_disable_write_protection">Replace the Kernel to Disable Write Protection</h4>
<div class="level4">

<p>
<pre class="code">root@OpenWrt:~# cd /tmp
root@OpenWrt:~# wget http://ipkg.k1k2.de/hack/openwrt-ar531x-2.4-vmlinux-CAMICIA.lzma
root@OpenWrt:~# Connecting to ipkg.k1k2.de[85.10.200.90]:80
openwrt-ar531x-2.4-v 100% |**************************|   512 KB    00:00 ETA
root@OpenWrt:~# mtd -e vmlinux.bin.l7 write openwrt-ar531x-2.4-vmlinux-CAMICIA.lzma vmlinux.bin.l7
Unlocking vmlinux.bin.l7 ...
Erasing vmlinux.bin.l7 ...
Writing from openwrt-ar531x-2.4-vmlinux-CAMICIA.lzma to vmlinux.bin.l7 ... [w]
root@OpenWrt:~# reboot</pre>

</p>

</div>

<h4 id="overwrite_the_redboot_configuration">Overwrite the RedBoot Configuration</h4>
<div class="level4">

<p>
<pre class="code">root@OpenWrt:~# cd /tmp
root@OpenWrt:~# wget http://ipkg.k1k2.de/hack/out.hex
root@OpenWrt:~# Connecting to ipkg.k1k2.de[85.10.200.90]:80
out.hex 100% |*******************************| 4096 00:00 ETA
root@OpenWrt:~# mtd -e &quot;RedBoot config&quot; write out.hex &quot;RedBoot config&quot;
Unlocking RedBoot config ...
Erasing RedBoot config ...
Writing from out.hex to RedBoot config ... [w]
root@OpenWrt:~# reboot</pre>

The configuration we have just written sets an IP address of <code>192.168.1.254</code>, listens for a Telnet connection on port 9000, and waits for 10 seconds before booting.
</p>

<p>
The FIS table will likely be gone, so you will have to reflash the router now, after telnetting into it.  However, the above procedure is permanent, so you will not need to repeat it ever again.
</p>

</div>

<h4 id="telnet_into_redboot">Telnet into RedBoot</h4>
<div class="level4">

<p>
<pre class="code">$ telnet 192.168.1.254 9000</pre>

This, of course, requires that your machine has a route to 192.168.1.254.  You can simply attach the Fonera directly to your machine by using the ethernet cable that came with the router (there&#039;s no need for a switch/hub) and configuring your ethernet port with an appropriate IP address in the 192.168.1.0 net.
</p>

<p>
It can be necesarry to ping the Fonera before connecting to RedBoot via telnet.  Otherwise telnet access might be unreliable. 
</p>

<p>
Now proceed as instructed further below by installing OpenWrt, or the original Fonera firmware.
</p>

</div>

<h2 class="sectionedit22" id="openwrt">OpenWrt</h2>
<div class="level2">

</div>

<h3 class="sectionedit23" id="installing_openwrt_with_redboot">Installing OpenWrt with RedBoot</h3>
<div class="level3">

<p>
In order to install a new image from RedBoot you need to first gain access to RedBoot either via serial cable or Telnet.  The <em>2100A</em> does by default <em>not</em> allow Telnet access to the boot loader, but it is possible to enable it without having to open the device and attaching a serial cable (see <a href="fonera#enablingtelnetintoredbootwithoutserialaccess" title="toh:fon:fonera ↵" class="wikilink1">&quot;Enabling Telnet into RedBoot without Serial Access&quot;</a> on how to do that).
</p>

<p>
You also need a machine where you can run a TFTP server.  RedBoot will expect a TFTP server from where it will download the image files to be flashed onto the router.  <strong>Note:</strong> It&#039;s also possible to use an HTTP server; this has been tested with om1p and did not work. If you have other experience please edit this page.)
</p>

</div>

<h4 id="step_1downloading_the_openwrt_images">Step 1: Downloading the OpenWrt Images</h4>
<div class="level4">

<p>
You have to download two files, namely the <code>.lzma</code> image of the kernel and the <code>.squashfs</code> image of the root filesystem.  Pick a version that suits you.  Both <em>Kamikaze 8.09</em> and <em>Backfire 10.03</em> will work, where the former will use somewhat less memory.  You want the port from the <code>atheros/</code> subdirectory.  For example (please check for newer versions yourself):
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://downloads.openwrt.org/kamikaze/8.09.2/atheros/openwrt-atheros-vmlinux.lzma" class="urlextern" title="http://downloads.openwrt.org/kamikaze/8.09.2/atheros/openwrt-atheros-vmlinux.lzma"  rel="nofollow">http://downloads.openwrt.org/kamikaze/8.09.2/atheros/openwrt-atheros-vmlinux.lzma</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://downloads.openwrt.org/kamikaze/8.09.2/atheros/openwrt-atheros-root.squashfs" class="urlextern" title="http://downloads.openwrt.org/kamikaze/8.09.2/atheros/openwrt-atheros-root.squashfs"  rel="nofollow">http://downloads.openwrt.org/kamikaze/8.09.2/atheros/openwrt-atheros-root.squashfs</a></div>
</li>
</ul>

<p>
Copy <code>openwrt-atheros-vmlinux.lzma</code> and <code>openwrt-atheros-root.squashfs</code> to the machine where your TFTP server is running, into the directory from where TFTP is serving its files (on <em>Debian</em>, for example, this would be <code>/srv/tftp</code>. Use &#039;apt-get install atftpd&#039; on Debian and all will be setup for you).
</p>

</div>

<h4 id="step_2access_and_configure_redboot">Step 2: Access and Configure RedBoot</h4>
<div class="level4">

<p>
Turn on the router, wait about ten seconds, then connect to RedBoot either through a serial connection or Telnet.  Press Ctrl-C to interrupt the boot procedure.  You will see the RedBoot prompt:
<pre class="code">RedBoot&gt; _</pre>

</p>

<p>
We now configure the address of the TFTP (or HTTP) server.  Below, replace the two IP address placeholders with something that applies to you.  The first IP in the command, &quot;IP address of the server&quot;, is the IP address of the TFTP server that you have running that will serve the OpenWRT images to La Fonera. The second IP in the command, &quot;IP address for the router&quot; is only temporary, it must be a free IP address in the same subnet as the TFTP server.  If you are connected to RedBoot via Telnet, set the &quot;IP address for the router&quot; to the IP address that you telneted to (192.168.1.254). The switch <em>-l</em> is for <em>local</em>.
<pre class="code">RedBoot&gt; ip_address -h &lt;IP address of the server&gt; -l &lt;IP address for the router&gt;/24
IP: [...], Gateway: 0.0.0.0
Default server: [...]</pre>

</p>

<p>
For example:
</p>

<p>
<strong>Step A:</strong> Stop network-manager on your local computer
<pre class="code"># /etc/init.d/network-manager stop</pre>

<strong>Step B:</strong> Set up your computers interface with static ip
<pre class="code"># ifconfig eth0 192.168.0.2/24</pre>

<strong>Step C:</strong> Set Redboot interface (-l) and tftp server (-h)
<pre class="code">RedBoot&gt; ip_address -h 192.168.0.2 -l 192.168.0.1/24</pre>

RedBoot is now ready to receive the image files from your machine.
</p>

</div>

<h4 id="step_3download_and_flash_the_images">Step 3: Download and Flash the Images</h4>
<div class="level4">

<p>
Now, load the kernel image via TFTP:
<pre class="code">RedBoot&gt; load -r -b %{FREEMEMLO} openwrt-atheros-vmlinux.lzma
Using default protocol (TFTP)
Raw file loaded [...], assumed entry at [...]</pre>

The target addresses given in the above message will vary, depending on kernel size. (<strong>Note:</strong>* to load via HTTP append &quot;<code>-m HTTP</code>&quot; to the <code>load</code> command. Not tested.)
</p>

<p>
<strong>Note:</strong> sometimes tftp need absolute path of the file. Example: <em>load -r -b %{FREEMEMLO} &quot;/srv/tftp/openwrt-atheros-vmlinux.lzma&quot;</em>
</p>

<p>
Next, we initialize the FIS (flash memory partition table).  <em>This will wipe the currently installed system off the router, caveat emptor!</em>
<pre class="code">RedBoot&gt; fis init</pre>

</p>

<p>
Now it&#039;s time to flash the kernel image.  The value of 0x80041000 for the -e and -r switches in the <code>fis create</code> RedBoot command below is the kernel entry point. <em>Do not change this value!</em>  Especially disregard what the <code>load</code> command from above reported as the <code>assumed entry</code>. Note: that&#039;s small-L7 at the end, not the number 17.
<pre class="code">RedBoot&gt; fis create -e 0x80041000 -r 0x80041000 vmlinux.bin.l7
... Erase from 0xa8730000-0xa87e0000: ...........
... Program from 0x80041000-0x800f1000 at 0xa8730000: ...........
... Erase from 0xa87e0000-0xa87f0000: .
... Program from 0x80ff0000-0x81000000 at 0xa87e0000: .</pre>

Again, the addresses reported back to you will vary.  The process will take a minute or two, the <code>fis create</code> command will block and not output any indication of progress.  This is normal and no reason to be disturbed.
</p>

<p>
Now flash the rootfs:
</p>
<div class="table sectionedit24"><table class="inline">
	<tr class="row0">
		<td class="col0"><pre class="code">RedBoot&gt; load -r -b %{FREEMEMLO} openwrt-atheros-root.squashfs
Using default protocol (TFTP)

Raw file loaded 0x80041000-0x80200fff, assumed entry at 0x80041000
RedBoot&gt; fis create rootfs
... Erase from 0xa8030000-0xa8730000: ................................................................................................................
... Program from 0x80041000-0x80741000 at 0xa8030000: ..............................................................................................................
... Erase from 0xa87e0000-0xa87f0000: .
... Program from 0x80ff0000-0x81000000 at 0xa87e0000: .</pre>
</td>
	</tr>
</table></div>

<p>
<strong>Note:</strong> append &quot;<code>-m HTTP</code>&quot; to the <code>load</code> command to load the image via HTTP (probably doesn&#039;t work, use tftp instead).
</p>

<p>
There is no need to give any other parameters to <code>fis create</code>, because the rootfs is longer than the kernel image, and we loaded it to <code>%{FREEMEMLO}</code> just as we did with the kernel image before.  If you give the remaining free bytes on the flash as length, as we did, the rootfs will begin just after the kernel that we flashed before (<code>fis create</code> takes care of that) and occupy all remaining space on the flash device (because we calculated our <em>LENGTH</em> value that way).
</p>

<p>
Again, this process will take some time (a lot longer than flashing the kernel, as more bytes need to be written), and <code>fis create</code> will not report progress.  Just leave the router doing its work and wait until the prompt returns.
</p>

</div>

<h4 id="step_4check_boot_script">Step 4: Check boot script</h4>
<div class="level4">

<p>
Finally check whether RedBoot is configured to boot the <code>vmlinux.bin.l7</code> segment which we created. Execute
<pre class="code">fconfig -l -n</pre>

and check that the value of <code>boot_script_data</code> matches the one given at <a href="fonera#enabletelnetintoredbootwithserialaccess" title="toh:fon:fonera ↵" class="wikilink1">Enable Telnet into RedBoot, with Serial Access</a>.  
</p>

<p>
If the scripts do not match, update the boot config:
<pre class="code">RedBoot&gt; fconfig boot_script_data 
boot_script_data: 
.. fis load -l vmlinux.bin.1
.. exec
Enter script, terminate with empty line
&gt;&gt; fis load -l vmlinux.bin.l7
&gt;&gt; exec
&gt;&gt; 
Update RedBoot non-volatile configuration - continue (y/n)? y
... Erase from 0xa87e0000-0xa87f0000: .
... Program from 0x80ff0000-0x81000000 at 0xa87e0000: .
RedBoot&gt; </pre>

</p>

</div>

<h4 id="step_5reboot_the_router_and_enjoy_openwrt">Step 5: Reboot the Router and enjoy OpenWrt</h4>
<div class="level4">

<p>
<pre class="code">RedBoot&gt; reset</pre>

will reboot the router.  You can also just powercycle the device.
</p>

<p>
<strong>NOTE</strong>: If you changed RedBoot&#039;s baud rate to something different than 9600bps, revert that change unless your terminal program does auto baud detection – OpenWrt logs to its serial console with 9600bps, so having the same baud rate in RedBoot is a good idea.
</p>

<p>
If you have a serial connection to the Fonera you can now observe the OpenWrt boot sequence.  Otherwise just wait for about two minutes until OpenWrt has booted, then connect to the router at <code>192.168.1.1</code> via telnet.  This is the default address for a fresh OpenWrt installation.  Set the password with <code>passwd</code> and log out again.  Telnet will not work anymore from this point on, but SSH will.
</p>

<p>
It&#039;s time to access the web interface on <code><a href="http://192.168.1.1" class="urlextern" title="http://192.168.1.1"  rel="nofollow">http://192.168.1.1</a></code> to complete basic configuration of your new router.
</p>

</div>

<h4 id="automating_the_installation_with_expect">Automating the Installation with &quot;expect&quot;</h4>
<div class="level4">

<p>
It&#039;s possible to automate the installation process by using the Unix <em>expect</em> utility.  This is probably only useful if you have a serial adapter to access RedBoot and need to reflash several Foneras in one swoop.
</p>

<p>
First you need to have the TFTP server working, then you need <code>cu</code> to access the serial port, and the <code>expect</code> tool to execute this script. Once you have the files needed in the tftp dir you can exec this script (save it to a file and exec it via <code>expect &lt;filename&gt;</code>).
</p>

<p>
The IP addresses in the script are only examples and will probably need to be changed for your particular scenario.
</p>

<p>
This script does not check whether <code>boot_script_data</code> in <code>fconfig</code> has the correct value (see <a href="fonera#step4checkbootscript" title="toh:fon:fonera ↵" class="wikilink1">above</a>). 
</p>

<p>
<pre class="code">#!/usr/bin/expect -f
spawn cu -l /dev/ttyS0 -s 9600
#match_max 100000
set timeout 3600
# Look for passwod prompt
expect &quot;enter ^C to abort&quot;
send \003
# send blank line (\r) to make sure we get back to gui
expect &quot;RedBoot&gt;&quot;
send -- &quot;ip_address -h 192.168.1.13 -l 192.168.1.21/24\r&quot;
expect &quot;RedBoot&gt;&quot;
send -- &quot;fis init\r&quot;
expect &quot;(y/n)? &quot;
send -- &quot;y\r&quot;
expect &quot;RedBoot&gt;&quot;
send -- &quot;load -r -b %\{FREEMEMLO\} openwrt-atheros-vmlinux.lzma\r&quot;
expect &quot;RedBoot&gt;&quot;
send -- &quot;fis create -e 0x80041000 -r 0x80041000 vmlinux.bin.l7\r&quot;
expect &quot;RedBoot&gt;&quot;
send -- &quot;load -r -b %\{FREEMEMLO\} openwrt-atheros-root.squashfs\r&quot;
expect &quot;RedBoot&gt;&quot;
send -- &quot;fis create -l 0x006F0000 rootfs\r&quot;
expect &quot;RedBoot&gt;&quot;
send -- &quot;reset\r&quot;</pre>

</p>

</div>

<h4 id="automating_the_installation_with_fon-flash">Automating the installation with fon-flash</h4>
<div class="level4">

<p>
Source code or binaries of the utility fon-flash can be obtained <a href="http://www.gargoyle-router.com/download.php" class="urlextern" title="http://www.gargoyle-router.com/download.php"  rel="nofollow">here</a>. Using this tool, simply connect your Fonera via Ethernet to your PC and run following command:
<pre class="code">sudo ./fon-flash -i eth0 -c openwrt openwrt-atheros-root.squashfs openwrt-atheros-vmlinux.lzma 
Reading image file openwrt-atheros-root.squashfs with 1966080 bytes, rounded to 0x001e0000
Reading image file openwrt-atheros-vmlinux.lzma with 917504 bytes, rounded to 0x000e0000
No packet.
No packet.
...
No packet.
No packet.
Peer MAC: 00:18:84:11:c1:84
Peer IP : 192.168.5.22
Your MAC: 00:ba:be:ca:ff:ee
Your IP : 192.168.5.0

Setting IP address...
ip_addr -l 192.168.5.22/8 -h 192.168.5.0


Initializing partitions ...
fis init

loading file:
load -r -b 0x80100000 -m tftp file_1

creating flash partition (this may take some time)
fis create -f 0xa8030000 -l 0x006c0000  -e 0x00000000    rootfs

loading file:
load -r -b 0x80100000 -m tftp file_2

creating flash partition (this may take some time)
fis create -f 0xa86f0000 -l 0x000e0000  -e 0x80041000   -r 0x80041000   vmlinux.bin.l7

Setting boot_script_data...
fis load -l vmlinux.bin.l7
exec

Done. Restarting device..</pre>

Tested with OpenWRT Backfire 10.03.1 images.
</p>

</div>

<h3 class="sectionedit25" id="upgrading_openwrt_from_within_a_running_openwrt_installation">Upgrading OpenWrt from within a running OpenWrt installation</h3>
<div class="level3">

<p>
<strong>NOTE:</strong> Updating the kernel in this fashion only works if the new kernel is not larger than the old one.  Otherwise there won&#039;t be enough space in the FIS partition and you will have to reflash the entire memory (see above on how to do that).
<pre class="code">cd /tmp
scp host:/path/to/openwrt-atheros-vmlinux.lzma .
scp host:/path/to/openwrt-atheros-root.squashfs .
mtd -e vmlinux.bin.l7 write openwrt-atheros-vmlinux.lzma vmlinux.bin.l7
mtd -e rootfs write openwrt-atheros-root.squashfs rootfs
reboot</pre>

</p>

</div>

<h3 class="sectionedit26" id="basic_configuration">Basic configuration</h3>
<div class="level3">

<p>
→ <a href="../../doc/howto/configuration" class="wikilink1" title="doc:howto:basic.config">Basic condfiguration</a>
</p>

</div>

<h2 class="sectionedit27" id="the_fonera_pack_from_sven-olafon_mesh_network">The Fonera Pack (from sven-ola): FON + Mesh Network</h2>
<div class="level2">

</div>

<h3 class="sectionedit28" id="installation">Installation</h3>
<div class="level3">

<p>
After obtaining ssh and Redboot access, you can either use the manual install of Kamikaze described above or use <a href="http://download.berlin.freifunk.net/fonera/readme.txt" class="urlextern" title="http://download.berlin.freifunk.net/fonera/readme.txt"  rel="nofollow">sven-ola Freifunk upgrade</a> with &quot;EasyFlash&quot; that does all the dirty job by itself!!
</p>

<p>
This distribution allow to create Fonera&#039;s Mesh Networks as described <a href="http://blog.freifunk.net/2007/fonera-pack-story" class="urlextern" title="http://blog.freifunk.net/2007/fonera-pack-story"  rel="nofollow">here</a>
</p>

<p>
<pre class="code">1) Connect the Fonera to the ethernet jack. Use a cross linked cable.
2) Switch on the network card, and run update:
&gt; sudo ifconfig eth0 up
&gt; wget http://download.berlin.freifunk.net/fonera/ap51-flash-fonera-1.0-38
&gt; sudo ./ap51-flash-fonera-1.0-38 eth0
  rootfs(0x006a0000) + kernel(0x00100000) + nvram(0x00000000) sums up to 0x007a0000 bytes
  Peer MAC: 00:18:84:15:53:20
  Peer IP : 192.168.1.254
  Your MAC: 00:ba:be:ca:ff:ee
  Your IP : 192.168.1.0
  Setting IP address...
  Loading rootfs...
  Sending rootfs, 4608 blocks...
  Initializing partitions...
  Rootfs partition size now 0x006b0000
  Flashing rootfs...
          Loading kernel...
  Sending kernel, 2048 blocks...
  Flashing kernel...
  Setting boot_script_data...
  Done. Restarting device...</pre>

</p>

</div>

<h2 class="sectionedit29" id="software_hacks">Software Hacks</h2>
<div class="level2">

</div>

<h3 class="sectionedit30" id="disabling_serial_console">Disabling serial console</h3>
<div class="level3">

<p>
Easy hack to disable serial console without recompiling kernel, unpack vmlinuz.lzma, search for console= and replace with null and spaces using mfill in redboot. Also comment out /dev/ttyS0 in /etc/inittab. This is fconfig for Backfire 10.03.1 :
</p>

<p>
<pre class="code">RedBoot&gt; fconfig -l
Run script at boot: true
Boot script:
.. fis load -l vmlinux.bin.l7
.. mfill -b 0x802B3FF8 -l 4 -4 -p 0x6E756C6C
.. mfill -b 0x802B3FFc -l 6 -1 -p 0x20
.. exec
Boot script timeout (1000ms resolution): 10
Use BOOTP for network configuration: false
Gateway IP address: 0.0.0.0
Local IP address: 192.168.1.1
Local IP address mask: 255.255.255.0
Default server IP address: 192.168.1.10
Console baud rate: 9600
GDB connection port: 9000
Force console for special debug messages: false
Network debug at boot time: false</pre>

</p>

</div>

<h2 class="sectionedit31" id="hardware_hacks">Hardware Hacks</h2>
<div class="level2">

</div>

<h3 class="sectionedit32" id="second_antenna">Second antenna</h3>
<div class="level3">

</div>

<h4 id="fon21001">FON2100</h4>
<div class="level4">

<p>
The FON2100 PCB has a pad ready to solder a second antenna. With it you can use antenna diversity to increase your signal quality in environments with reflections (e.g. due to walls) and moving clients. Check the instructions on: <a href="http://www.dd-wrt.com/wiki/index.php/LaFonera_Hardware_Second-Antenna" class="urlextern" title="http://www.dd-wrt.com/wiki/index.php/LaFonera_Hardware_Second-Antenna"  rel="nofollow">http://www.dd-wrt.com/wiki/index.php/LaFonera_Hardware_Second-Antenna</a>
</p>

</div>

<h4 id="fon22001">FON2200</h4>
<div class="level4">

<p>
On the other hand FON2200 has the second antenna already etched into the PCB. Still, you can replace it with an external antenna to take further advantage of antenna diversity. Replacing the etched antenna by a regular omnidirectional external antenna like the Fonera stock one can get you more 4 dBm on antenna 2. However, this mod will only improve your link quality if antenna diversity is highly used, for instance due to moving clients. In other scenarios an unmodified FON2200 just selects antenna 1 (the best one) do to all the transmissions/receptions; adding a copy of it will improve nothing.
</p>

</div>

<h5 id="how_to_do_it">How to do it</h5>
<div class="level5">

<p>
<a href="../../_detail/media/toh/fon2200-pcb-front-highlighted.jpg?id=toh%253Afon%253Afonera" class="media" title="media:toh:fon2200-pcb-front-highlighted.jpg"><img src="../../_media/media/toh/fon2200-pcb-front-highlighted.jpg" class="mediacenter" title="fon2200-pcb-front-highlighted.jpg" alt="fon2200-pcb-front-highlighted.jpg" /></a>
The picture above shows an annotated photo of FON2200 PCB. On the downer right corner there are the antenna outputs, with antenna 1 highlighted in red and antenna 2 in yellow. As can be seen antenna 1 goes to the center of the coaxial cable leading to the external antenna. On the other hand antenna 2 goes to a via (through-hole path) which is then connected to ground. The etched antenna which can be seen on the upper right conner is connected to ground and thus to antenna 2 output.
</p>

<p>
In this scenario you can solder a RP-SMA pigtail connected to antenna 2 output in at least two different places.
</p>

</div>

<h5 id="place_1downer_right_corner_after_the_chip">Place 1: downer right corner, after the chip</h5>
<div class="level5">

<p>
<a href="../../_detail/media/toh/fon2200-after-chip-mod.jpg?id=toh%253Afon%253Afonera" class="media" title="media:toh:fon2200-after-chip-mod.jpg"><img src="../../_media/media/toh/fon2200-after-chip-mod.jpg" class="mediacenter" title="fon2200-after-chip-mod.jpg" alt="fon2200-after-chip-mod.jpg" /></a>
Take a look at the picture above. You need to:
</p>
<ol>
<li class="level1"><div class="li"> Cut the path which connects antenna 2 output to the via going to ground. Use a continuity tester connected between antenna 2 output and any ground point to make sure the cut was done properly.</div>
</li>
<li class="level1"><div class="li"> Scrape out the PCB varnish coating from the middle of the right-side long rectangular pad. Solder the center of the coaxial cable from the RP-SMA pigtail here.</div>
</li>
<li class="level1"><div class="li"> Solder the coaxial cable shield to ground. The easiest place to do so is along the rectangular copper line where FON2100 had its Faraday cage and cooler connected to ground. Along this line there are tinned points which should be used to facilitate the work.</div>
</li>
</ol>

<p>
Final result should look like the pictures below.
<a href="../../_detail/media/toh/fon2200-2nd-antenna-mod-soldering-detail.jpg?id=toh%253Afon%253Afonera" class="media" title="media:toh:fon2200-2nd-antenna-mod-soldering-detail.jpg"><img src="../../_media/media/toh/fon2200-2nd-antenna-mod-soldering-detail.jpg" class="mediacenter" title="fon2200-2nd-antenna-mod-soldering-detail.jpg" alt="fon2200-2nd-antenna-mod-soldering-detail.jpg" /></a>
<a href="../../_detail/media/toh/fon2200-2nd-antenna-mod.jpg?id=toh%253Afon%253Afonera" class="media" title="media:toh:fon2200-2nd-antenna-mod.jpg"><img src="../../_media/media/toh/fon2200-2nd-antenna-mod.jpg" class="mediacenter" title="fon2200-2nd-antenna-mod.jpg" alt="fon2200-2nd-antenna-mod.jpg" /></a>
</p>

<p>
Advantages: tested and working, easily reversible.
Disadvantages: difficult to solder the coaxial cable center on a point which does not come tinned from factory.
</p>

<p>
Original idea by Cardiak on <a href="http://foro.seguridadwireless.net/hardware/anadir-una-2a-antena-a-fonera-2200/" class="urlextern" title="http://foro.seguridadwireless.net/hardware/anadir-una-2a-antena-a-fonera-2200/"  rel="nofollow">Añadir una 2ª antena a fonera 2200 - Foro Seguridad Wireless</a>.
</p>

</div>

<h5 id="place_2upper_right_corner_before_the_etched_antenna">Place 2: upper right corner, before the etched antenna</h5>
<div class="level5">

<p>
<a href="../../_detail/media/toh/fon2200-before-ant-mod.jpg?id=toh%253Afon%253Afonera" class="media" title="media:toh:fon2200-before-ant-mod.jpg"><img src="../../_media/media/toh/fon2200-before-ant-mod.jpg" class="mediacenter" title="fon2200-before-ant-mod.jpg" alt="fon2200-before-ant-mod.jpg" /></a>
Take a look at the picture above. You need to:
</p>
<ol>
<li class="level1"><div class="li"> Desolder capacitor C146.</div>
</li>
<li class="level1"><div class="li"> Solder the center of the coaxial cable from the RP-SMA pigtail to the inferior pad of C146.</div>
</li>
<li class="level1"><div class="li"> Solder the shield of the coaxial cable to the left pad of the missing R159, which is connected to ground.</div>
</li>
</ol>

<p>
Advantages: easier to solder as all points are tinned.
Disadvantages: hardly reversible (you would have to resolder C146), not tested.
</p>

<p>
Original idea by radio3 on <a href="http://www.wifi-ita.com/forum/viewtopic.php?t=10451" class="urlextern" title="http://www.wifi-ita.com/forum/viewtopic.php?t=10451"  rel="nofollow">Fonera 2200 e 2° antenna - Forum WiFi-ITA.com</a>
</p>

</div>

<h3 class="sectionedit33" id="hardware_mp3_client">Hardware mp3 client</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <a href="http://www.phrozen.org/fonera.html" class="urlextern" title="http://www.phrozen.org/fonera.html"  rel="nofollow">Turning the Fonera into a hardware mp3 client</a></div>
</li>
</ul>

</div>

<h3 class="sectionedit34" id="spi_usagesdmmc_card_reader">SPI usage: SD/MMC card reader</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <a href="http://www.larsen-b.com/Article/262.html" class="urlextern" title="http://www.larsen-b.com/Article/262.html"  rel="nofollow">Fonera SD Card Hack</a></div>
</li>
</ul>

</div>

<h3 class="sectionedit35" id="spi_usagehoperf_rfm12_433_mhz_radio_module">SPI usage: HopeRF rfm12 433 MHz radio module</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <a href="http://switchsmart.org/wiki/index.php?title=La_Fonera" class="urlextern" title="http://switchsmart.org/wiki/index.php?title=La_Fonera"  rel="nofollow">Fonera 433 MHz rfm12 hack</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://phlegmatic-prototyping.tumblr.com/post/25323114258" class="urlextern" title="http://phlegmatic-prototyping.tumblr.com/post/25323114258"  rel="nofollow">Another rfm12 hack</a></div>
</li>
</ul>

</div>

<h3 class="sectionedit36" id="wire_bus">1-Wire Bus</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <a href="http://www.karosium.com/2010/03/fonera-1-wire-microlan-extension.html" class="urlextern" title="http://www.karosium.com/2010/03/fonera-1-wire-microlan-extension.html"  rel="nofollow">Fonera 1-Wire Interface</a></div>
</li>
</ul>

</div>

<h3 class="sectionedit37" id="i_c_bus">I²C Bus</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <a href="http://code.google.com/p/fonera-i2c/wiki/FoneraHacks" class="urlextern" title="http://code.google.com/p/fonera-i2c/wiki/FoneraHacks"  rel="nofollow">Fonera I²C bus with GPIO</a></div>
</li>
</ul>

</div>

<h3 class="sectionedit38" id="various_hardware_mods">Various hardware mods</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <a href="http://www.dd-wrt.com/wiki/index.php/Category:LaFonera_Hardware_%28en%29" class="urlextern" title="http://www.dd-wrt.com/wiki/index.php/Category:LaFonera_Hardware_%28en%29"  rel="nofollow"> Various hw mods on dd-wrt page (32 MB RAM, second antenna, etc.)</a></div>
</li>
</ul>

</div>

<h2 class="sectionedit39" id="resources">Resources</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="http://tech.am/2006/10/06/autopsy-of-a-fonera/" class="urlextern" title="http://tech.am/2006/10/06/autopsy-of-a-fonera/"  rel="nofollow">Autopsy of a Fonera</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://blog.blase16.de/index.php?url=2006/11/28/Hacking-Fonera" class="urlextern" title="http://blog.blase16.de/index.php?url=2006/11/28/Hacking-Fonera"  rel="nofollow">Get the SSH access to the Fonera</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://stefans.datenbruch.de/lafonera/" class="urlextern" title="http://stefans.datenbruch.de/lafonera/"  rel="nofollow">Hacking the La Fonera</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://forum.openwrt.org/viewtopic.php?pid=39251#p39251" class="urlextern" title="http://forum.openwrt.org/viewtopic.php?pid=39251#p39251"  rel="nofollow">OpenWrt development</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://jauzsi.hu/2006/10/13/inside-of-the-fonera" class="urlextern" title="http://jauzsi.hu/2006/10/13/inside-of-the-fonera"  rel="nofollow">Picture of serial</a> (pinout from fonera perspective: RX host→fonera)</div>
</li>
<li class="level1"><div class="li"> <a href="http://www.easy2design.de/bla/?page_id=98" class="urlextern" title="http://www.easy2design.de/bla/?page_id=98"  rel="nofollow">Debricking and more</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://ecos.sourceware.org/docs-latest/redboot/redboot-guide.html" class="urlextern" title="http://ecos.sourceware.org/docs-latest/redboot/redboot-guide.html"  rel="nofollow">RedBoot userguide</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://wiki.ninux.org/moin.cgi/La_Fonera" class="urlextern" title="http://wiki.ninux.org/moin.cgi/La_Fonera"  rel="nofollow">Misc Links (Italian language)</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.tldp.org/LDP/lkmpg/" class="urlextern" title="http://www.tldp.org/LDP/lkmpg/"  rel="nofollow">The Linux Kernel Module Programming Guide</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://karman.homelinux.net/blog/" class="urlextern" title="http://karman.homelinux.net/blog/"  rel="nofollow">Blog about Fonera</a> (Spanish)</div>
</li>
<li class="level1"><div class="li"> <a href="http://mrmuh.blogspot.com/2007/01/codename-kolofonium-realease-date.html" class="urlextern" title="http://mrmuh.blogspot.com/2007/01/codename-kolofonium-realease-date.html"  rel="nofollow">Blog about Hacking the 0.7.1r2 firmware</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://blog.extreme-networking.com/" class="urlextern" title="http://blog.extreme-networking.com/"  rel="nofollow">OpenWrt installation guide (Italian) and misc</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://wiki.freifunk-hannover.de/Fonera_mit_OLSR" class="urlextern" title="http://wiki.freifunk-hannover.de/Fonera_mit_OLSR"  rel="nofollow">The Fonera in the Freifunk project, German</a> <a href="http://wiki.freifunk.net/Fonera_with_OLSR_(English)" class="urlextern" title="http://wiki.freifunk.net/Fonera_with_OLSR_(English)"  rel="nofollow">English</a>: comprehensive guide to flashing la fonera with Kamikaze.</div>
</li>
<li class="level1"><div class="li"> <a href="http://www.fonerahacks.com" class="urlextern" title="http://www.fonerahacks.com"  rel="nofollow">Fonera Hacks - Numerous Tutorials and Guides</a> Detailed tutorials with screenshots on how to flash the Fonera, unlock SSH, access Redboot, and other goodies.</div>
</li>
<li class="level1"><div class="li"> <a href="http://echodittolabs.org/blog/2007/12/making-fon-router-speak-serial-arduino" class="urlextern" title="http://echodittolabs.org/blog/2007/12/making-fon-router-speak-serial-arduino"  rel="nofollow">making a FON router speak serial to Arduino</a></div>
</li>
</ul>

</div>

<h2 class="sectionedit40" id="tags">Tags</h2>
<div class="level2">

<p>
For some Help with the Tags, please have a look here: <a href="../../meta/tags" class="wikilink1" title="meta:tags">tags</a>
</p>
<div class="tags"><span>
	<a href="../../tag/fastethernet?do=showtag&amp;tag=FastEthernet" class="wikilink1" title="tag:fastethernet" rel="tag">FastEthernet</a>,
	<a href="../../tag/1nic?do=showtag&amp;tag=1NIC" class="wikilink1" title="tag:1nic" rel="tag">1NIC</a>,
	<a href="../../tag/no_switch?do=showtag&amp;tag=no_switch" class="wikilink1" title="tag:no_switch" rel="tag">no switch</a>,
	<a href="../../tag/serial?do=showtag&amp;tag=serial" class="wikilink1" title="tag:serial" rel="tag">serial</a>,
	<a href="../../tag/integrated?do=showtag&amp;tag=integrated" class="wikilink1" title="tag:integrated" rel="tag">integrated</a>,
	<a href="../../tag/802.11bg?do=showtag&amp;tag=802.11bg" class="wikilink1" title="tag:802.11bg" rel="tag">802.11bg</a>,
	<a href="../../tag/detachableantenna" class="wikilink1" title="tag:detachableantenna" rel="tag">DetachableAntenna</a>,
	<a href="../../tag/16ram?do=showtag&amp;tag=16RAM" class="wikilink1" title="tag:16ram" rel="tag">16RAM</a>,
	<a href="../../tag/8flash?do=showtag&amp;tag=8Flash" class="wikilink1" title="tag:8flash" rel="tag">8Flash</a>,
	<a href="../../tag/mips?do=showtag&amp;tag=MIPS" class="wikilink1" title="tag:mips" rel="tag">MIPS</a>,
	<a href="../../tag/4kec?do=showtag&amp;tag=4KEc" class="wikilink1" title="tag:4kec" rel="tag">4KEc</a>
</span></div>

</div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>toh/fon/fonera.txt</bdi> · Last modified: 2015/05/08 22:12 by <bdi>jonasbits</bdi></div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="fonera?do=edit"  class="action source" accesskey="v" rel="nofollow" title="Show pagesource [V]"><span>Show pagesource</span></a></li><li><a href="fonera?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="fonera?do=backlink"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="fonera#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license" class="urlextern">CC Attribution-Noncommercial-Share Alike 3.0 Unported</a></bdi></div>
    <div class="buttons">
        <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license"><img src="../../lib/images/license/button/cc-by-nc-sa.png" alt="CC Attribution-Noncommercial-Share Alike 3.0 Unported" /></a>        <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="../../lib/tpl/openwrt/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://www.php.net" title="Powered by PHP" ><img
            src="../../lib/tpl/openwrt/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="../../lib/tpl/openwrt/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="../../lib/tpl/openwrt/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="../../lib/tpl/openwrt/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="../../lib/exe/indexer.php?id=toh%253Afon%253Afonera&amp;1432266227" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->
</body>
</html>
