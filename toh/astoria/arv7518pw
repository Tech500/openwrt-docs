<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>Astoria networks ARV7518PW [OpenWrt Wiki]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="fastethernet,4port,usb,ath9k,64ram,4flash,mips,mips32,24k,adsl2,lantiq,danube,fxo"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../lib/exe/opensearch.php" title="OpenWrt Wiki"/>
<link rel="start" href="../../index.html"/>
<link rel="contents" href="arv7518pw?do=index" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Recent changes" href="../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="../../feed.php?mode=list&amp;ns=toh:astoria"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="../../_export/xhtml/toh/astoria/arv7518pw"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="../../_export/raw/toh/astoria/arv7518pw"/>
<link rel="canonical" href="arv7518pw"/>
<link rel="stylesheet" type="text/css" href="../../lib/exe/css.php?t=openwrt&amp;tseed=6f44f363dc87908d905dc56ff3acbfc4"/>
<script type="text/javascript">/*<![CDATA[*/var NS='toh:astoria';var JSINFO = {"id":"toh:astoria:arv7518pw","namespace":"toh:astoria"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../lib/exe/js.php?tseed=6f44f363dc87908d905dc56ff3acbfc4"></script>
<script type="text/javascript" charset="utf-8">/*<![CDATA[*/jQuery(function(){
	for ( i=0; i < document.forms.length; i++ ) {
		if (document.forms[i].method == 'post') {
			var myElement = document.createElement('input');
			myElement.setAttribute('type', 'hidden');
			myElement.name = 'bb2_screener_';
			myElement.value = '1432269479 166.182.3.249';
			document.forms[i].appendChild(myElement);
		}
	}
});
/*!]]>*/</script>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="../../lib/tpl/openwrt/images/favicon.ico" />
<link rel="apple-touch-icon" href="../../lib/tpl/openwrt/images/apple-touch-icon.png" />
    </head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_openwrt     ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="arv7518pw#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="../../start"  accesskey="h" title="[H]"><img src="../../lib/tpl/openwrt/images/logo.png" width="386" height="98" alt="" /> <span>OpenWrt Wiki</span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="arv7518pw?do=register"  class="action register" rel="nofollow" title="Register">Register</a></li><li><a href="arv7518pw?do=login&amp;sectok=382740b13d95f946eed36caa57076b4a"  class="action login" rel="nofollow" title="Login">Login</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="../../start" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="../../doku.php" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="toh:astoria:arv7518pw" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Show pagesource</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Login</option><option value="register">Register</option></optgroup></select><input type="submit" value="&gt;" /></div></form>            </div>
            <ul>
                <li><a href="arv7518pw?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a></li><li><a href="arv7518pw?do=media&amp;ns=toh%253Aastoria"  class="action media" rel="nofollow" title="Media Manager">Media Manager</a></li><li><a href="arv7518pw?do=index"  class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                            <div class="youarehere"><span class="bchead">You are here: </span><span class="home"><bdi><a href="../../start" class="wikilink1" title="start">OpenWrt Wiki</a></bdi></span> » <bdi><a href="../start" class="wikilink1" title="toh:start">Table of Hardware</a></bdi> » <bdi><a href="start" class="wikilink1" title="toh:astoria:start">Astoria</a></bdi> » <bdi><span class="curid"><a href="arv7518pw" class="wikilink1" title="toh:astoria:arv7518pw">Astoria networks ARV7518PW</a></span></bdi></div>
                                    <div class="plugin_multilingual">
        <ul>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/cz/toh/astoria/arv7518pw" class="media" title="cz:toh:astoria:arv7518pw"><img src="../../lib/exe/fetch.php?cache=&amp;tok=aff589&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fcz.gif" class="media" title="Čeština (Czech)" alt="Čeština (Czech)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/de/toh/astoria/arv7518pw" class="media" title="de:toh:astoria:arv7518pw"><img src="../../lib/exe/fetch.php?cache=&amp;tok=e24010&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fde.gif" class="media" title="Deutsch (German)" alt="Deutsch (German)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <span class="curid"><a href="arv7518pw" class="media" title="toh:astoria:arv7518pw"><img src="../../lib/exe/fetch.php?cache=&amp;tok=2a37ae&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fgb.gif" class="media" title="English" alt="English" /></a></span>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/es/toh/astoria/arv7518pw" class="media" title="es:toh:astoria:arv7518pw"><img src="../../lib/exe/fetch.php?cache=&amp;tok=46c004&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fmx.gif" class="media" title="Español (Spanish, Mexico)" alt="Español (Spanish, Mexico)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/fr/toh/astoria/arv7518pw" class="media" title="fr:toh:astoria:arv7518pw"><img src="../../lib/exe/fetch.php?cache=&amp;tok=a5beba&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ffr.gif" class="media" title="Français (French)" alt="Français (French)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/hu/toh/astoria/arv7518pw" class="media" title="hu:toh:astoria:arv7518pw"><img src="../../lib/exe/fetch.php?cache=&amp;tok=6b5470&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fhu.gif" class="media" title="Magyar (Hungarian)" alt="Magyar (Hungarian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/jp/toh/astoria/arv7518pw" class="media" title="jp:toh:astoria:arv7518pw"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f999fc&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fjp.gif" class="media" title="日本語 (Japanese)" alt="日本語 (Japanese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pl/toh/astoria/arv7518pw" class="media" title="pl:toh:astoria:arv7518pw"><img src="../../lib/exe/fetch.php?cache=&amp;tok=c805c0&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fpl.gif" class="media" title="Poliski (Polish)" alt="Poliski (Polish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pt-br/toh/astoria/arv7518pw" class="media" title="pt-br:toh:astoria:arv7518pw"><img src="../../lib/exe/fetch.php?cache=&amp;tok=13127d&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fbr.gif" class="media" title="Português brasileiro (Portuguese, Brasil)" alt="Português brasileiro (Portuguese, Brasil)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/ru/toh/astoria/arv7518pw" class="media" title="ru:toh:astoria:arv7518pw"><img src="../../lib/exe/fetch.php?cache=&amp;tok=66ab5e&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fru.gif" class="media" title="Русский (Russsian)" alt="Русский (Russsian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/tr/toh/astoria/arv7518pw" class="media" title="tr:toh:astoria:arv7518pw"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f4beed&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ftr.gif" class="media" title="Tϋrkçe (Turkish)" alt="Tϋrkçe (Turkish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-cn/toh/astoria/arv7518pw" class="media" title="zh-cn:toh:astoria:arv7518pw"><img src="../../lib/exe/fetch.php?cache=&amp;tok=93625a&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-cn.gif" class="media" title="官話/官话 (Chinese)" alt="官話/官话 (Chinese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-tw/toh/astoria/arv7518pw" class="media" title="zh-tw:toh:astoria:arv7518pw"><img src="../../lib/exe/fetch.php?cache=&amp;tok=b56198&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-tw.gif" class="media" title="臺灣華語 (Taiwanese)" alt="臺灣華語 (Taiwanese)" /></a>
              </div>
            </div>
          </li>
        </ul>
      </div>
        </div>
    
    
    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>toh:astoria:arv7518pw</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="arv7518pw#known_supported_versions">Known Supported Versions</a></div></li>
<li class="level1"><div class="li"><a href="arv7518pw#hardware_highlights">Hardware Highlights</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="arv7518pw#openwrt_status">Openwrt status</a></div></li>
<li class="level2"><div class="li"><a href="arv7518pw#flash_layout">Flash Layout</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="arv7518pw#hardware">Hardware</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="arv7518pw#info">Info</a></div></li>
<li class="level2"><div class="li"><a href="arv7518pw#photos">Photos</a></div></li>
<li class="level2"><div class="li"><a href="arv7518pw#leds">LEDS</a></div></li>
<li class="level2"><div class="li"><a href="arv7518pw#opening_the_case">Opening the case</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="arv7518pw#serial">Serial</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="arv7518pw#bootstrap_settings">Bootstrap settings</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="arv7518pw#uart">UART</a></div></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"><a href="arv7518pw#installation">Installation</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="arv7518pw#installationstep_by_step_via_serial_connector">Installation: Step by step via serial connector</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="arv7518pw#step_1get_serial_connection">Step 1: Get serial connection</a></div></li>
<li class="level3"><div class="li"><a href="arv7518pw#step_2enter_command_and_administrator_mode">Step 2: Enter command and administrator mode</a></div></li>
<li class="level3"><div class="li"><a href="arv7518pw#step_3backup">Step 3: Backup</a></div></li>
<li class="level3"><div class="li"><a href="arv7518pw#step_4u-boot">Step 4: u-boot</a></div></li>
<li class="level3"><div class="li"><a href="arv7518pw#step_5precautions">Step 5: Precautions</a></div></li>
<li class="level3"><div class="li"><a href="arv7518pw#step_6install_openwrt">Step 6: Install OpenWrt</a></div></li>
<li class="level3"><div class="li"><a href="arv7518pw#old_guide">Old guide</a></div></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"><a href="arv7518pw#tags">Tags</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="astoria_networks_arv7518pw">Astoria networks ARV7518PW</h1>
<div class="level1">

</div>

<h2 class="sectionedit2" id="known_supported_versions">Known Supported Versions</h2>
<div class="level2">
<div class="table sectionedit3"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Ver. </th><th class="col1"> OpenWrt Version Supported </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 leftalign"> r01a   </td><td class="col1 leftalign"> trunk  </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> r01a   </td><td class="col1 leftalign"> <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/lantiq/danube/" class="urlextern" title="http://downloads.openwrt.org/attitude_adjustment/12.09/lantiq/danube/"  rel="nofollow"> Attitude Adjustment 12.09 Final</a>  </td>
	</tr>
</table></div>

</div>

<h2 class="sectionedit4" id="hardware_highlights">Hardware Highlights</h2>
<div class="level2">
<div class="table sectionedit5"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> CPU </th><th class="col1"> Ram </th><th class="col2"> Flash </th><th class="col3"> Network </th><th class="col4"> USB </th><th class="col5"> Serial </th><th class="col6"> UART </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> Lantiq Xway Danube @333Mhz Dual Core </td><td class="col1"> 64MB </td><td class="col2"> 8MB </td><td class="col3"> 4 Ports </td><td class="col4"> Yes </td><td class="col5"> Yes </td><td class="col6"> Yes </td>
	</tr>
</table></div>

</div>

<h3 class="sectionedit6" id="openwrt_status">Openwrt status</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> ADSL modem is working with both Annex A &amp; Annex B supported.</div>
</li>
<li class="level1"><div class="li"> WiFi is working out of the box with trunk. (<em>ath9k</em>)</div>
</li>
<li class="level1"><div class="li"> FXS works and can be used with owsip daemon or <a href="http://code.google.com/p/danube-voip/" class="urlextern" title="http://code.google.com/p/danube-voip/"  rel="nofollow">danube-voip</a>.</div>
</li>
<li class="level1"><div class="li"> USB works (kmod-usb-dwc-otg or kmod-ltq-hcd-danube)</div>
</li>
</ul>

</div>

<h3 class="sectionedit7" id="flash_layout">Flash Layout</h3>
<div class="level3">

<p>
Please check out the article <a href="../../doc/techref/flash.layout" class="wikilink1" title="doc:techref:flash.layout">Flash.Layout</a>. It contains an example and a couple of explanations.
</p>
<div class="table sectionedit8"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 centeralign" colspan="5">  Modified Flash Layout  </th>
	</tr>
	<tr class="row1">
		<th class="col0"> partition </th><th class="col1"> start </th><th class="col2"> end </th><th class="col3"> size </th><th class="col4"> description </th>
	</tr>
	</thead>
	<tr class="row2">
		<td class="col0"> mtd0 </td><td class="col1"> 0x00000000 </td><td class="col2"> 0x00010000 </td><td class="col3"> 64KB </td><td class="col4"> u-boot </td>
	</tr>
	<tr class="row3">
		<td class="col0"> mtd1 </td><td class="col1"> 0x00010000 </td><td class="col2"> 0x00020000 </td><td class="col3"> 64KB </td><td class="col4"> u-boot environment </td>
	</tr>
	<tr class="row4">
		<td class="col0"> mtd2 </td><td class="col1"> 0x00020000 </td><td class="col2"> 0x007f0000 </td><td class="col3"> 8000KB </td><td class="col4"> linux </td>
	</tr>
	<tr class="row5">
		<td class="col0"> mtd3 </td><td class="col1"> 0x007f0000 </td><td class="col2"> 0x00800000 </td><td class="col3"> 64KB </td><td class="col4"> calibration data </td>
	</tr>
</table></div>

</div>

<h2 class="sectionedit9" id="hardware">Hardware</h2>
<div class="level2">

</div>

<h3 class="sectionedit10" id="info">Info</h3>
<div class="level3">
<div class="table sectionedit11"><table class="inline">
	<tr class="row0">
		<td class="col0 leftalign"> <strong><a href="http://en.wikipedia.org/wiki/Instruction set" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Instruction set">Architecture</a>:</strong>    </td><td class="col1"> <a href="http://en.wikipedia.org/wiki/MIPS architecture" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/MIPS architecture">MIPS</a> </td>
	</tr>
	<tr class="row1">
		<td class="col0"> <strong>Vendor:</strong> </td><td class="col1"><a href="http://en.wikipedia.org/wiki/Arcadyan" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Arcadyan">Arcadyan</a> </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> <strong><a href="../../doc/techref/bootloader.1" class="wikilink1" title="doc:techref:bootloader">Bootloader</a>:</strong>     </td><td class="col1"> <a href="../../doc/techref/bootloader/brnboot" class="wikilink1" title="doc:techref:bootloader:brnboot">brnboot</a> </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <strong>System-On-Chip:</strong>  </td><td class="col1"><a href="http://pdf.datasheetarchive.com/indexerfiles/Datasheets-UD3/DSAUD0055683.pdf" class="urlextern" title="http://pdf.datasheetarchive.com/indexerfiles/Datasheets-UD3/DSAUD0055683.pdf"  rel="nofollow">Lantiq Danube PSB 50702 E Rev 1.3 or 1.5 (MIPS 24Kec)</a></td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> <strong><a href="../../doc/hardware/cpu" class="wikilink1" title="doc:hardware:cpu">CPU</a>/Speed:</strong>        </td><td class="col1"> 333 Mhz Dual Core </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <strong>Flash-Chip:</strong> </td><td class="col1"><a href="http://www.macronix.com/QuickPlace/hq/PageLibrary4825740B00298A3B.nsf/h_Index/DBACA1C90564EBB248257639003A563A/$File/MX29LV640E%20T-B,%203V,%2064Mb,%20v1.7.pdf" class="urlextern" title="http://www.macronix.com/QuickPlace/hq/PageLibrary4825740B00298A3B.nsf/h_Index/DBACA1C90564EBB248257639003A563A/$File/MX29LV640E%20T-B,%203V,%2064Mb,%20v1.7.pdf"  rel="nofollow">Macronix MX29LV640EBTI-70G</a> </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <strong>Flash size:</strong> </td><td class="col1">8 MiB </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <strong>RAM:</strong> </td><td class="col1">64 MiB </td>
	</tr>
	<tr class="row8">
		<td class="col0"> <strong>RAM Chip:</strong> </td><td class="col1"><a href="http://www.zentel-europe.com/A4S12D40FTP_v1.1_Zentel.pdf" class="urlextern" title="http://www.zentel-europe.com/A4S12D40FTP_v1.1_Zentel.pdf"  rel="nofollow">Zentel A4S12D40FTP-G5</a></td>
	</tr>
	<tr class="row9">
		<td class="col0"> <strong>Wireless:</strong> </td><td class="col1">Atheros AR9223-AC1A b/g/n 2x2 </td>
	</tr>
	<tr class="row10">
		<td class="col0"> <strong>Ethernet:</strong> </td><td class="col1">Atheros AR8216-BH1A </td>
	</tr>
	<tr class="row11">
		<td class="col0"> <strong>Internet:</strong> </td><td class="col1">ADSL2+ (annex A and B) </td>
	</tr>
	<tr class="row12">
		<td class="col0"> <strong>USB:</strong> </td><td class="col1">Yes 1 x 2.0 </td>
	</tr>
	<tr class="row13">
		<td class="col0 leftalign"> <strong>Phone:</strong>  </td><td class="col1">2x FXS (TAE ports which provide POTS via a SIP gateway) </td>
	</tr>
	<tr class="row14">
		<td class="col0"> <strong>Serial:</strong> </td><td class="col1"><a href="arv7518pw#serial" title="toh:astoria:arv7518pw ↵" class="wikilink1">Yes</a> </td>
	</tr>
	<tr class="row15">
		<td class="col0"> <strong>JTAG:</strong> </td><td class="col1"><a href="arv7518pw#jtag" title="toh:astoria:arv7518pw ↵" class="wikilink1">Yes</a> </td>
	</tr>
	<tr class="row16">
		<td class="col0 leftalign"> <strong>Power:</strong>  </td><td class="col1">external PSU, 12V DC, 1A, polarity: -(+) </td>
	</tr>
</table></div>

<p>
<em class="u">Note: some units are very sensible to overvoltage, so take care you are using the right PSU</em>
</p>

<p>
CPU info:
<pre class="code">system type: Danube rev 1.5
processor: 0
cpu model: MIPS 24KEc V4.1
BogoMIPS: 221.18
wait instruction: yes
microsecond timers: yes
tlb_entries: 16
extra interrupt vector: yes
hardware watchpoint: yes, count: 4, address/irw mask: [0x0ffc, 0x0ffc, 0x0ffb, 0x0ffb]
ASEs implemented: mips16 dsp
shadow register sets: 1
kscratch registers: 0
core: 0
VCED exceptions: not available
VCEI exceptions: not available</pre>

</p>

</div>

<h3 class="sectionedit12" id="photos">Photos</h3>
<div class="level3">

<p>
PCB:<br/>

<a href="../../_detail/toh/astoria/dsc01058.jpg?id=toh%253Aastoria%253Aarv7518pw" class="media" title="toh:astoria:dsc01058.jpg"><img src="../../_media/toh/astoria/dsc01058.jpg?w=300&amp;tok=94c1f3" class="media" title="dsc01058.jpg" alt="dsc01058.jpg" width="300" /></a>
</p>

<p>
(More images @ <a href="../../lib/exe/mediamanager.php?ns=toh%253Aastoria" class="urlextern" title="http://wiki.openwrt.org/lib/exe/mediamanager.php?ns=toh%3Aastoria"  rel="nofollow">Astoria</a>)
</p>

</div>

<h3 class="sectionedit13" id="leds">LEDS</h3>
<div class="level3">
<div class="table sectionedit14"><table class="inline">
	<tr class="row0">
		<td class="col0">Name</td><td class="col1">Colour</td><td class="col2">Gpio</td>
	</tr>
	<tr class="row1">
		<td class="col0">Power</td><td class="col1"> red</td><td class="col2">7</td>
	</tr>
	<tr class="row2">
		<td class="col0">Power</td><td class="col1"> green</td><td class="col2">2</td>
	</tr>
	<tr class="row3">
		<td class="col0">Wifi</td><td class="col1"> green</td><td class="col2">6</td>
	</tr>
	<tr class="row4">
		<td class="col0">Adsl</td><td class="col1"> green</td><td class="col2">4</td>
	</tr>
	<tr class="row5">
		<td class="col0">Internet</td><td class="col1"> green</td><td class="col2">5</td>
	</tr>
	<tr class="row6">
		<td class="col0">Internet</td><td class="col1"> red</td><td class="col2">8</td>
	</tr>
	<tr class="row7">
		<td class="col0">Voip</td><td class="col1"> green</td><td class="col2">100</td>
	</tr>
	<tr class="row8">
		<td class="col0">Phone 1</td><td class="col1"> green</td><td class="col2">101</td>
	</tr>
	<tr class="row9">
		<td class="col0">Phone 2</td><td class="col1"> green</td><td class="col2">102</td>
	</tr>
	<tr class="row10">
		<td class="col0">Noname</td><td class="col1"> Orange</td><td class="col2">103</td>
	</tr>
	<tr class="row11">
		<td class="col0">USB</td><td class="col1"> green</td><td class="col2">19</td>
	</tr>
	<tr class="row12">
		<td class="col0">wps</td><td class="col1"> Orange</td><td class="col2">104</td>
	</tr>
	<tr class="row13">
		<td class="col0">wps</td><td class="col1"> Green</td><td class="col2">105</td>
	</tr>
	<tr class="row14">
		<td class="col0">wps</td><td class="col1"> Red</td><td class="col2">106</td>
	</tr>
</table></div>

</div>

<h3 class="sectionedit15" id="opening_the_case">Opening the case</h3>
<div class="level3">

<p>
<strong>Note:</strong> This will void your warranty!
</p>

<p>
To get to the board you need:
</p>
<ul>
<li class="level1"><div class="li"> unscrew 2 Phillips screws underneath the cover,</div>
</li>
<li class="level1"><div class="li"> pull the upper cover which is connected by click.</div>
</li>
</ul>

</div>

<h2 class="sectionedit16" id="serial">Serial</h2>
<div class="level2">

<p>
→ <a href="../../OpenWrtDocs/Customizing/Hardware/Serial_Console" class="wikilink1" title="doc:hardware:port.serial">port.serial</a>.
</p>

<p>
Board voltage is 3.3V so can use usb to serial adapters.<br/>

Pinout:<br/>

<a href="../../_detail/toh/astoria/serial.jpg?id=toh%253Aastoria%253Aarv7518pw" class="media" title="toh:astoria:serial.jpg"><img src="../../_media/toh/astoria/serial.jpg?w=200&amp;tok=0c24ae" class="media" title="serial.jpg" alt="serial.jpg" width="200" /></a>
</p>
<div class="table sectionedit17"><table class="inline">
	<tr class="row0">
		<td class="col0"> <img src="../../_media/meta/icons/tango/48px-emblem-important.svg.png" class="media" alt="" /> </td><td class="col1"> Don&#039;t connect Vcc if your serial adapter already has power(which is most of the cases) or it won&#039;t work </td>
	</tr>
</table></div>

</div>

<h3 class="sectionedit18" id="bootstrap_settings">Bootstrap settings</h3>
<div class="level3">

<p>
Bootstrap pin funcion table:
</p>
<div class="table sectionedit19"><table class="inline">
	<tr class="row0">
		<td class="col0"><code>	X = boot_sel2
	Y = boot_sel1
	Z = boot_sel0

	X	Y	Z	function
	===============================================================
	0 	0 	0  	External parallel flash
	0 	0 	1  	ROM &gt; external parallel flash (default)
	0 	1 	0  	ROM &gt; ethernet, MII0
	0 	1 	1  	ROM &gt; PCI
	1 	0 	0  	ROM &gt; UART1
	1 	0 	1  	ROM &gt; serial SPI
	1 	1 	0  	ROM &gt; NAND flash
	1 	1 	1  	ROM &gt; Reverse MII0
</code></td>
	</tr>
</table></div>

<p>
Value 1 = 3.3v is connected to that pin<br/>

Value 0 = Pin is connected to digital GND<br/>

</p>

<p>
boot_sel2, boot_sel0 pins location:<br/>

<a href="../../_detail/toh/astoria/bootsel0.jpg?id=toh%253Aastoria%253Aarv7518pw" class="media" title="toh:astoria:bootsel0.jpg"><img src="../../_media/toh/astoria/bootsel0.jpg?w=200&amp;tok=c2a494" class="media" title="bootsel0.jpg" alt="bootsel0.jpg" width="200" /></a><br/>

</p>

<p>
<a href="../../_detail/toh/astoria/bootlsel2.jpg?id=toh%253Aastoria%253Aarv7518pw" class="media" title="toh:astoria:bootlsel2.jpg"><img src="../../_media/toh/astoria/bootlsel2.jpg?w=200&amp;tok=328648" class="media" title="bootlsel2.jpg" alt="bootlsel2.jpg" width="200" /></a><br/>

Note: boot_sel2 and boot_sel1 are by default on 0 and boot_sel0 is on 1.
</p>

</div>

<h4 id="uart">UART</h4>
<div class="level4">
<div class="table sectionedit20"><table class="inline">
	<tr class="row0">
		<td class="col0"> <img src="../../_media/meta/icons/tango/48px-emblem-important.svg.png" class="media" alt="" /> </td><td class="col1"> UART mode is not necessary to install u-boot or openwrt, however it is the only way to recover from a bootloader error </td>
	</tr>
</table></div>

<p>
To enable uart mode, short pins at boot_sel2 (shortcut R80 pins, picture above) and connect boot_sel0 to 3.3V(Connect left R65 pin to serial port vcc on the motherboard from below), see picture above.
</p>

<p>
UART mode looks like this:
</p>

<p>
<pre class="code">ROM VER: 1.0.3
CFG 04
Read EEPROMX
 X
UART</pre>

</p>

</div>

<h5 id="recover_u-boot_using_uart">Recover u-boot using UART</h5>
<div class="level5">

<p>
In UART mode you can send an u-boot in ascii format(download <a href="http://www.cienti.com/arv4518pw/u-boot-asc-20120429.zip" class="urlextern" title="http://www.cienti.com/arv4518pw/u-boot-asc-20120429.zip"  rel="nofollow">here</a>) to serial port, which will be automatically loaded in the ram(it will be lost when you poweroff)<br/>

</p>

<p>
For example if your serial port is ttyUSB0 than do:
&quot;cat u-boot.asc &gt; /dev/ttyUSB0&quot;
</p>

<p>
When it finishes run:
<pre class="code"># minicom -s --device /dev/ttyUSB0</pre>

Then select &quot;Serial port setup&quot; configure it and select &quot;exit&quot; to quit from the configuration panel. Now you should get a command prompt.
</p>

<p>
If you want to install it in flash memory permanently, download u-boot in binary format from <a href="http://www.cienti.com/arv4518pw/u-boot-flash-20120511.zip" class="urlextern" title="http://www.cienti.com/arv4518pw/u-boot-flash-20120511.zip"  rel="nofollow">here</a> however you can install any u-boot you want, see <a href="arv7518pw#step4u-boot" title="toh:astoria:arv7518pw ↵" class="wikilink1"> Step 4: u-boot</a>. Now lets load it to ram:
<pre class="code">ARV4518 =&gt; loady 0x80500000</pre>

Now you have to send the u-boot.bin using ymodem protocol. If you are using minicom press &quot;ctrl+a&quot; and then &quot;s&quot;
</p>

<p>
<pre class="code">ARV4518 =&gt; crc32 ${ram_addr} ${filesize}</pre>

Make sure that the checksum matches that of the file that you just transferred from your computer, otherwise it could brick your router. If it matches install it to flash.
<pre class="code">ARV4518 =&gt; protect off 0xb0000000 0xb0020000
ARV4518 =&gt; era 0xb0000000 +${filesize}
ARV4518 =&gt; cp.b ${ram_addr} 0xb0000000 ${filesize}</pre>

</p>

<p>
Now reboot, if everything is alright you should boot into the u-boot you installed. If you want to protect u-boot from mistakes run:
<pre class="code">ARV4518 =&gt; protect on 0xb0000000 +10000</pre>

</p>
<div class="table sectionedit21"><table class="inline">
	<tr class="row0">
		<td class="col0"> <img src="../../_media/meta/icons/tango/48px-emblem-important.svg.png" class="media" alt="" /> </td><td class="col1"> Bear in mind that sometimes programs do not check/care if flash memory is set as writeable or not and still can overwrite it. Be careful </td>
	</tr>
</table></div>

</div>

<h2 class="sectionedit22" id="installation">Installation</h2>
<div class="level2">

<p>
For general information take a look at:
</p>
<ol>
<li class="level1"><div class="li"> → <a href="../../doc/howto/obtain.firmware" class="wikilink1" title="doc:howto:obtain.firmware">obtain.firmware</a></div>
</li>
<li class="level1"><div class="li"> → <a href="../../doc/howto/installing" class="wikilink1" title="doc:howto:generic.flashing">Install OpenWrt (generic explanation)</a> gives you general information but those examples don&#039;t apply to this model. It is just for orientation, attempting to blindly follow that guide will result in a brick.</div>
</li>
</ol>

<p>
Please read the following links for ARV4518. They will give you another point of view of the process: <br/>

</p>
<ul>
<li class="level1"><div class="li"> @aiayua post <a href="https://forum.openwrt.org/viewtopic.php?pid=167584#p167584" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?pid=167584#p167584"  rel="nofollow"> ARV4518 for Dummies</a> (Step 9 works only if you have Pteridium u-boot, because it requires tftp. U-boots compiled by cienti or openwrt.org don&#039;t have tftp working)</div>
</li>
<li class="level1"><div class="li"> @aiayua post <a href="https://forum.openwrt.org/viewtopic.php?pid=167513#p167513" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?pid=167513#p167513"  rel="nofollow"> Enable UART mode (Recover bricked/malfunction router)</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://forum.openwrt.org/viewtopic.php?pid=181952#p181952" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?pid=181952#p181952"  rel="nofollow"> Flashing OpenWrt image using loady</a></div>
</li>
</ul>

<p>
And buy the usb to ttl conversor suggested by pippolippi or build one yourself: <br/>

</p>
<ul>
<li class="level1"><div class="li"> The cheapest option: <a href="https://forum.openwrt.org/viewtopic.php?pid=172146#p172146" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?pid=172146#p172146"  rel="nofollow">https://forum.openwrt.org/viewtopic.php?pid=172146#p172146</a></div>
</li>
<li class="level1"><div class="li"> Build it yourself: <a href="https://forum.openwrt.org/viewtopic.php?pid=178898#p178898" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?pid=178898#p178898"  rel="nofollow">https://forum.openwrt.org/viewtopic.php?pid=178898#p178898</a></div>
</li>
</ul>

</div>

<h3 class="sectionedit23" id="installationstep_by_step_via_serial_connector">Installation: Step by step via serial connector</h3>
<div class="level3">

</div>

<h4 id="step_1get_serial_connection">Step 1: Get serial connection</h4>
<div class="level4">

<p>
Connect your serial adapter to the router as indicated above, <a href="arv7518pw#serial" class="urlextern" title="http://wiki.openwrt.org/toh/astoria/arv7518pw#serial"  rel="nofollow"> link</a>. There is no need to make any soldering for now, just enter to the default serial mode(UART is not needed). You can use any program, these are the settings:
</p>
<ol>
<li class="level1"><div class="li"> Speed: 115200 baud</div>
</li>
<li class="level2"><div class="li"> Data bits: 8</div>
</li>
<li class="level2"><div class="li"> Stop bits: 1</div>
</li>
<li class="level2"><div class="li"> Parity: None</div>
</li>
<li class="level2"><div class="li"> Flow control: None (No hardware and no software flow control)</div>
</li>
</ol>

<p>
Cutecom: In Cutecom, a gui for serial console, set &quot;No Line End&quot; and the device is /dev/ttyUSB0 if you are using a usb serial adapter.
</p>

<p>
Minicom: If you want to use minicom run as root:
<pre class="code"># minicom -s --device /dev/ttyUSB0</pre>

Then select &quot;Serial port setup&quot; configure it and select &quot;exit&quot; to quit from the configuration panel. 
</p>

</div>

<h4 id="step_2enter_command_and_administrator_mode">Step 2: Enter command and administrator mode</h4>
<div class="level4">

<p>
Turn on the router and you will see this
<pre class="code">ROM VER: 1.0.3
CFG 01
Read
ROM VER: 1.0.3
CFG 01
Read EEPROMX
 X



=======================================================================
Wireless ADSL Gateway DANUBE Loader 64M-V0.02 build Apr 24 2008 16:12:25
                    Arcadyan Technology Corporation
=======================================================================
MXIC MX29LV320ABTC bottom boot 16-bit mode found

Copying boot params.....DONE


Press Space Bar 3 times to enter command mode ...</pre>

</p>

<p>
Press repeatedly the spacebar to enter command mode, be quick. Once in command mode press &quot;!&quot; to access administrator mode.
</p>

<p>
This is the brnboot, the stock bootloader that we want to substitute with u-boot as it can&#039;t boot OpenWrt.
</p>

</div>

<h4 id="step_3backup">Step 3: Backup</h4>
<div class="level4">

<p>
This step is crucial. Backup your router twice and compare the results to ensure you have a correct backup. Use brntool from <a href="https://github.com/rvalles/brntool" class="urlextern" title="https://github.com/rvalles/brntool"  rel="nofollow">https://github.com/rvalles/brntool</a>.
</p>

<p>
Make sure that your router is in administrator mode and close your serial connection program(without powering off your router or unpluging your cable). Check that you have python installed and then run this command(Takes about 2 hours):
<pre class="code">./brntool.py --serial=/dev/ttyUSB0 --read=AR7518PW_whole.dump --addr=0xB0000000 --verbose --size=0x800000</pre>

Once finished do another backup:
<pre class="code">./brntool.py --serial=/dev/ttyUSB0 --read=AR7518PW_whole2.dump --addr=0xB0000000 --verbose --size=0x800000</pre>

Then do a checksum and make sure both hashes match:
<pre class="code">md5sum AR7518PW_whole.dump AR7518PW_whole2.dump</pre>

Save your backup in a safe place
</p>

<p>
Also make a backup of just wifi calibration data partition, which if lost would make your wifi unusable(takes a few minutes only).
<pre class="code">./brntool.py --serial=/dev/ttyUSB0 --read=AR7518PW_calibration.dump --addr=0xB07f0000 --verbose --size=0x00010000</pre>

Once finished do another backup:
<pre class="code">./brntool.py --serial=/dev/ttyUSB0 --read=AR7518PW_calibration2.dump --addr=0xB07f0000 --verbose --size=0x00010000</pre>

Then do a checksum and make sure both hashes match:
<pre class="code">md5sum AR7518PW_calibration.dump AR7518PW_calibration2.dump</pre>

Finally save your backup in a safe place
</p>

</div>

<h4 id="step_4u-boot">Step 4: u-boot</h4>
<div class="level4">

<p>
U-boot images for this router must be 64kb(or 128kb if u-boot environment is included). There are mainly 3 u-boot from which you have to choose one. Here is a brief description of each one.
</p>

</div>

<h5 id="cienti_u-boot">Cienti u-boot</h5>
<div class="level5">

<p>
Download u-boot compiled by cienti in binary format from <a href="http://www.cienti.com/arv4518pw/u-boot-flash-20120511.zip" class="urlextern" title="http://www.cienti.com/arv4518pw/u-boot-flash-20120511.zip"  rel="nofollow"> here</a>. It works well even though it is for arv4518. The command prompt of this u-boot is &quot;ARV4518 ⇒&quot; instead of &quot;ARV7518 ⇒&quot;
</p>

<p>
When using this centi u-boot, httpd and tftp don&#039;t work but it has loady and loadb and both work which makes possible to upload binaries over a serial connection.
</p>

</div>

<h5 id="pteridium_u-boot">Pteridium u-boot</h5>
<div class="level5">

<p>
<a href="http://www.mediafire.com/?4mvdn90l302nssn" class="urlextern" title="http://www.mediafire.com/?4mvdn90l302nssn"  rel="nofollow"> Pteridium uboot</a>(the one in the folder uboot-lantiq-arv7518PW_flash)(also see <a href="http://foro.seguridadwireless.net/openwrt/openwrt-para-roters-astoria-de-ya-com/msg256236/#msg256236" class="urlextern" title="http://foro.seguridadwireless.net/openwrt/openwrt-para-roters-astoria-de-ya-com/msg256236/#msg256236"  rel="nofollow"> this post</a>) for this router, arv7518, has both httpd and tftp working which makes uploading a OpenWrt image very easy, but it doesn&#039;t have loady or loadb. However if you wanted to upload binaries over serial it should still be possible using <a href="https://forum.openwrt.org/viewtopic.php?pid=183315#p183315" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?pid=183315#p183315"  rel="nofollow"> ubootwrite.py</a>(not tested by me).
</p>

</div>

<h5 id="u-boot_compiled_by_openwrtorg">u-boot compiled by openwrt.org</h5>
<div class="level5">

<p>
Whatever your choice is, <a href="http://downloads.openwrt.org/attitude_adjustment/12.09-rc1/lantiq/danube/" class="urlextern" title="http://downloads.openwrt.org/attitude_adjustment/12.09-rc1/lantiq/danube/"  rel="nofollow"> u-boots compiled by openwrt.org</a> are the worst because they don&#039;t have loady/loadb and most of the features like httpd and tfpt don&#039;t work. It is not recommended that you install them, if you have done so already and want to install another one see <a href="arv7518pw#recoveru-bootusinguart" title="toh:astoria:arv7518pw ↵" class="wikilink1"> Recover u-boot using UART</a>
</p>

</div>

<h5 id="flashing_u-boot">Flashing u-boot</h5>
<div class="level5">

<p>
Continuing from Step 3, reopen the serial connection. You should be in command mode, press &quot;!&quot; to access administrator mode and press &quot;u&quot; followed by &quot;0&quot; to upload the new bootloader. Confirm by pressing &quot;Y&quot;, then you should see someting like this:
</p>

<p>
<pre class="code">Starting XModem download...(press Enter to abort)
CCCCC</pre>

</p>

<p>
Now upload the u-boot binary using the XModem protocol. In minicom press &quot;ctrl+a&quot; and then &quot;s&quot; to upload a file.
</p>

<p>
Once uploaded, reboot your router. You should see this:
<pre class="code">ROM VER: 1.0.3
CFG 01
Readü
ROM VER: 1.0.3
CFG 01
Read EEPROMX
X 

U-Boot 2010.03 (May 16 2012 - 05:51:08)
Board: ARV4518PW
SoC: Danube/Twinpass/Vinax-VE V1.5, DDR Speed 166 MHz, CPU Speed 333 MHz
DRAM: 64 MB
Flash: 8 MB
*** Warning - bad CRC, using default environment 

Net: searching for rtl8306 switch ...
no known switch found ...
lq_cpe_eth

Hit any key to stop autoboot: 0
Wrong Image Format for bootm command
ERROR: can&#039;t get kernel image!
ARV4518 =&gt;</pre>

</p>

<p>
When prompted &quot;Hit any key to stop autoboot&quot; hit any key to enter command mode in u-boot.
</p>

</div>

<h4 id="step_5precautions">Step 5: Precautions</h4>
<div class="level4">

<p>
If you want to protect u-boot partition from mistakes run in u-boot command prompt:
<pre class="code">ARV4518 =&gt; protect on 0xb0000000 +10000</pre>

</p>

<p>
Also if you want to protect calibration partition from mistakes run:
<pre class="code">ARV4518 =&gt; protect on 0xb07f0000 +10000</pre>

</p>
<div class="table sectionedit24"><table class="inline">
	<tr class="row0">
		<td class="col0"> <img src="../../_media/meta/icons/tango/48px-emblem-important.svg.png" class="media" alt="" /> </td><td class="col1"> Bear in mind that sometimes programs do not check/care if flash memory is set as writeable or not and still can overwrite it. Be careful </td>
	</tr>
</table></div>

<p>
Addresses are in hex format even when they are not prefixed with &quot;0x&quot;. Check that your address variables are set correctly
<pre class="code">ARV7518PW =&gt; printenv kernel_addr ram_addr                                      
kernel_addr=0xb0020000                                                          
ram_addr=0x80500000</pre>

</p>

<p>
You can run just &quot;printenv&quot; to list all variables and their values. Some variables like &quot;filesize&quot; should be automatically set when you upload a file, while others are already set.
</p>

</div>

<h4 id="step_6install_openwrt">Step 6: Install OpenWrt</h4>
<div class="level4">

<p>
Download an OpenWrt image. For example <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/lantiq/danube/openwrt-lantiq-danube-ARV7518PW-squashfs.image" class="urlextern" title="http://downloads.openwrt.org/attitude_adjustment/12.09/lantiq/danube/openwrt-lantiq-danube-ARV7518PW-squashfs.image"  rel="nofollow"> this one</a>. See <a href="../../doc/howto/obtain.firmware" class="wikilink1" title="doc:howto:obtain.firmware">obtain.firmware</a>.
</p>

<p>
You have to unprotect the linux partition if it wasn&#039;t already. When finished installing, leave it also unprotected. Run in u-boot command prompt:
<pre class="code">ARV4518 =&gt; protect off 0xb0020000 +7D0000</pre>

</p>

<p>
There are several methods of installation depending on which u-boot you have flashed.
</p>

</div>

<h5 id="method_aloady_cienti_u-boot">Method A: loady (Cienti u-boot)</h5>
<div class="level5">

<p>
Enter command mode in u-boot and request to upload a openwrt image via YModem to the router&#039;s ram:
<pre class="code">ARV4518 =&gt; loady 0x80500000</pre>

In cutecom choose &quot;YModem&quot;, press &quot;Send file…&quot; and choose the file you&#039;ve downloaded. In minicom press &quot;ctrl+a&quot; and then &quot;s&quot; and select &quot;YModem&quot;.
</p>

<p>
It takes about 10 mins to upload the image. 
</p>

<p>
Do a checksum and make sure it matches the checksum of the image in your computer.
<pre class="code">ARV4518 =&gt; crc32 ${ram_addr} ${filesize}</pre>

</p>

<p>
Now install the image in the flash memory, you have to erase the flash portion before you copy the image to flash:
<pre class="code">ARV4518 =&gt; era ${kernel_addr} +${filesize}

............................................. done
Erased 45 sectors
ARV4518 =&gt; cp.b ${ram_addr} ${kernel_addr} ${filesize}
Copy to Flash... 9....8....7....6....5....4....3....2....1....done</pre>

</p>

<p>
Finally restart
<pre class="code">ARV4518 =&gt; run flash_flash</pre>

</p>

<p>
You have a log of the full loading process in <a href="https://forum.openwrt.org/viewtopic.php?pid=181952#p181952" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?pid=181952#p181952"  rel="nofollow">https://forum.openwrt.org/viewtopic.php?pid=181952#p181952</a>
</p>

<p>
OpenWRT is installed and running. Time to configure it. 
</p>

</div>

<h5 id="method_bhttpd_pteridium_u-boot">Method B: httpd (Pteridium u-boot)</h5>
<div class="level5">
<div class="table sectionedit25"><table class="inline">
	<tr class="row0">
		<td class="col0"> <img src="../../_media/meta/icons/tango/48px-emblem-important.svg.png" class="media" alt="" /> </td><td class="col1"> This hasn&#039;t be fully tested by me and may have things to complete </td>
	</tr>
</table></div>

<p>
Restart your router and u-boot will automatically detect that you don&#039;t have any working images and will automatically run httpd for you. But if you suspect it doesn&#039;t, enter u-boot command mode and run:
<pre class="code">ARV7518 =&gt; httpd</pre>

</p>

<p>
Connect your computer directly to the router by ethernet and change your network settings in your computer to this:
</p>
<ol>
<li class="level1"><div class="li"> Gateway: 192.168.1.1</div>
</li>
<li class="level1"><div class="li"> Netmask: 255.255.255.0</div>
</li>
<li class="level1"><div class="li"> IP address: 192.168.1.2</div>
</li>
</ol>

<p>
Now go to <a href="http://192.168.1.1" class="urlextern" title="http://192.168.1.1"  rel="nofollow">http://192.168.1.1</a> and upload OpenWrt image
</p>

</div>

<h5 id="method_ctftp_pteridium_u-boot">Method C: tftp (Pteridium u-boot)</h5>
<div class="level5">
<div class="table sectionedit26"><table class="inline">
	<tr class="row0">
		<td class="col0"> <img src="../../_media/meta/icons/tango/48px-emblem-important.svg.png" class="media" alt="" /> </td><td class="col1"> This hasn&#039;t been fully tested by me and may have things to complete </td>
	</tr>
</table></div>

<p>
You should have a tftp server running in your computer and correctly configured. Put the image you want to flash in the tftp folder.
</p>

<p>
Connect your computer directly to the router by ethernet and change your network settings in your computer to this:
</p>
<ol>
<li class="level1"><div class="li"> Gateway: 192.168.1.1</div>
</li>
<li class="level1"><div class="li"> Netmask: 255.255.255.0</div>
</li>
<li class="level1"><div class="li"> IP address: 192.168.1.2</div>
</li>
</ol>

<p>
On the router configure u-boot for tftp:
<pre class="code">ARV7518 =&gt; setenv ipaddr 192.168.1.1
ARV7518 =&gt; setenv serverip 192.168.1.2
ARV7518 =&gt; setenv bootfile name_of_openwrt_image</pre>

</p>

<p>
Then from the router download the image from the tftp server to ram
<pre class="code">ARV7518 =&gt; tftpboot 0x80500000 name_of_openwrt_image</pre>

</p>

<p>
It takes about 10 mins to upload the image.
</p>

<p>
Now open a serial connection to the router and do a checksum to check that the image transferred matches the image in your computer.
<pre class="code">ARV7518 =&gt; crc32 ${ram_addr} ${filesize}</pre>

</p>
<div class="table sectionedit27"><table class="inline">
	<tr class="row0">
		<td class="col0"> <img src="../../_media/meta/icons/tango/48px-emblem-important.svg.png" class="media" alt="" /> </td><td class="col1"> It could be the case that the variable filesize wasn&#039;t set. Then you should get and error, run &quot;printenv filesize&quot; to check it. Solution: TODO </td>
	</tr>
</table></div>

<p>
Now install the image in the flash memory, you have to erase the flash portion before you copy the image to flash:
<pre class="code">ARV7518 =&gt; era ${kernel_addr} +${filesize}

............................................. done
Erased 45 sectors
ARV7518 =&gt; cp.b ${ram_addr} ${kernel_addr} ${filesize}
Copy to Flash... 9....8....7....6....5....4....3....2....1....done</pre>

</p>

<p>
Finally restart
<pre class="code">ARV7518 =&gt; run flash_flash</pre>

</p>

</div>

<h5 id="method_dubootwritepy_all_u-boot">Method D: ubootwrite.py (All u-boot)</h5>
<div class="level5">
<div class="table sectionedit28"><table class="inline">
	<tr class="row0">
		<td class="col0"> <img src="../../_media/meta/icons/tango/48px-emblem-important.svg.png" class="media" alt="" /> </td><td class="col1"> TODO. Not tested </td>
	</tr>
</table></div>

<p>
Download <a href="https://forum.openwrt.org/viewtopic.php?pid=183315#p183315" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?pid=183315#p183315"  rel="nofollow"> ubootwrite.py</a> and enter command mode in u-boot. Close the serial connection program and run:
<pre class="code">ubootwrite.py --serial=/dev/ttyUSB0 --write=name_of_OpenWrt_image --addr=0x80500000</pre>

</p>

<p>
It takes about 10 mins to upload the image.
</p>

<p>
Now open a serial connection to the router and do a checksum to check that the image transferred matches the image in your computer.
<pre class="code">ARV7518 =&gt; crc32 ${ram_addr} ${filesize}</pre>

</p>
<div class="table sectionedit29"><table class="inline">
	<tr class="row0">
		<td class="col0"> <img src="../../_media/meta/icons/tango/48px-emblem-important.svg.png" class="media" alt="" /> </td><td class="col1"> It could be the case that the variable filesize wasn&#039;t set. Then you should get and error, run &quot;printenv filesize&quot; to check it. Solution: TODO </td>
	</tr>
</table></div>

<p>
Now install the image in the flash memory, you have to erase the flash portion before you copy the image to flash:
<pre class="code">ARV7518 =&gt; era ${kernel_addr} +${filesize}

............................................. done
Erased 45 sectors
ARV7518 =&gt; cp.b ${ram_addr} ${kernel_addr} ${filesize}
Copy to Flash... 9....8....7....6....5....4....3....2....1....done</pre>

</p>

<p>
Finally restart
<pre class="code">ARV7518 =&gt; run flash_flash</pre>

</p>

<p>
You have a log of the full loading process in <a href="https://forum.openwrt.org/viewtopic.php?pid=181952#p181952" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?pid=181952#p181952"  rel="nofollow">https://forum.openwrt.org/viewtopic.php?pid=181952#p181952</a>
</p>

<p>
OpenWRT is installed and running. Time to configure it. 
</p>

</div>

<h4 id="old_guide">Old guide</h4>
<div class="level4">

<p>
Steps:
</p>
<ol>
<li class="level1"><div class="li"> (about 2h) Backup your router twice and compare the results to ensure you have a correct backup. Use brntool from <a href="https://github.com/rvalles/brntool" class="urlextern" title="https://github.com/rvalles/brntool"  rel="nofollow">https://github.com/rvalles/brntool</a>. Command: &quot;./brntool.py –serial=/dev/ttyUSB0 –read=AR4518PW_whole2.dump –addr=0xB0000000 –verbose –size=0x800000&quot;</div>
</li>
<li class="level1"><div class="li"> download uboot for arv4518 (the one for 7518 has bug in its last versions, does not work for http/tftp and has no loady support) from <a href="http://www.cienti.com/arv4518pw/u-boot-flash-20120511.zip" class="urlextern" title="http://www.cienti.com/arv4518pw/u-boot-flash-20120511.zip"  rel="nofollow">http://www.cienti.com/arv4518pw/u-boot-flash-20120511.zip</a>. (If you need to enable UART for recovery purposes, not now, the asc file is in <a href="http://www.cienti.com/arv4518pw/u-boot-asc-20120429.zip" class="urlextern" title="http://www.cienti.com/arv4518pw/u-boot-asc-20120429.zip"  rel="nofollow">http://www.cienti.com/arv4518pw/u-boot-asc-20120429.zip</a> )</div>
</li>
<li class="level1"><div class="li"> I use cutecom, a gui for serial console. First step is to tell it that the device is /dev/ttyUSB0 and set &quot;No Line End&quot; </div>
<ol>
<li class="level2"><div class="li"> Speed: 115200 baud</div>
</li>
<li class="level2"><div class="li"> Data bits: 8</div>
</li>
<li class="level2"><div class="li"> Stop bits: 1</div>
</li>
<li class="level2"><div class="li"> Parity: None</div>
</li>
<li class="level2"><div class="li"> Flow control: None</div>
</li>
</ol>
</li>
<li class="level1"><div class="li"> Next step is very well explained in step 8 in <a href="https://forum.openwrt.org/viewtopic.php?pid=167584#p167584" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?pid=167584#p167584"  rel="nofollow">https://forum.openwrt.org/viewtopic.php?pid=167584#p167584</a>. Follow it step by step using file &quot;u-boot-flash-20120511.zip&quot; you downloaded before.</div>
</li>
<li class="level1"><div class="li"> Step 9 in <a href="https://forum.openwrt.org/viewtopic.php?pid=167584#p167584" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?pid=167584#p167584"  rel="nofollow">https://forum.openwrt.org/viewtopic.php?pid=167584#p167584</a> is not completely valid because tftp/http does not work, so you cannot use &quot;run update_openwrt&quot;. The correct steps instead of that one are shown in <a href="https://forum.openwrt.org/viewtopic.php?pid=181952#p181952" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?pid=181952#p181952"  rel="nofollow">https://forum.openwrt.org/viewtopic.php?pid=181952#p181952</a>, but first you have to download an image. In <a href="http://downloads.openwrt.org/attitude_adjustment/12.09-beta2/lantiq/danube/" class="urlextern" title="http://downloads.openwrt.org/attitude_adjustment/12.09-beta2/lantiq/danube/"  rel="nofollow">http://downloads.openwrt.org/attitude_adjustment/12.09-beta2/lantiq/danube/</a> there is no image for arv7518 today(31/10/2012) but there is one in <a href="http://downloads.openwrt.org/attitude_adjustment/12.09-beta/lantiq/danube/" class="urlextern" title="http://downloads.openwrt.org/attitude_adjustment/12.09-beta/lantiq/danube/"  rel="nofollow">http://downloads.openwrt.org/attitude_adjustment/12.09-beta/lantiq/danube/</a>, <a href="http://downloads.openwrt.org/attitude_adjustment/12.09-beta/lantiq/danube/openwrt-lantiq-danube-ARV7518PW-squashfs.image" class="urlextern" title="http://downloads.openwrt.org/attitude_adjustment/12.09-beta/lantiq/danube/openwrt-lantiq-danube-ARV7518PW-squashfs.image"  rel="nofollow">http://downloads.openwrt.org/attitude_adjustment/12.09-beta/lantiq/danube/openwrt-lantiq-danube-ARV7518PW-squashfs.image</a>. Download it. Now do:</div>
<ol>
<li class="level2"><div class="li"> request to upload via YModem: &quot;ARV4518 ⇒ loady 0x80500000&quot;</div>
</li>
<li class="level2"><div class="li"> choose in cutecom &quot;YModem&quot;, press &quot;Send file…&quot; and choose the file you&#039;ve download. It takes about 10 mins. The steps after uploading are:</div>
</li>
</ol>
</li>
</ol>

<p>
<pre class="code">ARV4518 =&gt; era ${kernel_addr} +${filesize}

............................................. done
Erased 45 sectors
ARV4518 =&gt; cp.b ${ram_addr} ${kernel_addr} ${filesize}
Copy to Flash... 9....8....7....6....5....4....3....2....1....done</pre>

</p>

<p>
Now reboot
<pre class="code">ARV4518 =&gt; run flash_flash</pre>

</p>

<p>
You have a log of the full loading process in <a href="https://forum.openwrt.org/viewtopic.php?pid=181952#p181952" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?pid=181952#p181952"  rel="nofollow">https://forum.openwrt.org/viewtopic.php?pid=181952#p181952</a>.
</p>

<p>
OpenWRT is installed and running. Time to configure it.
</p>

</div>

<h2 class="sectionedit30" id="tags">Tags</h2>
<div class="level2">
<div class="tags"><span>
	<a href="../../tag/fastethernet?do=showtag&amp;tag=FastEthernet" class="wikilink1" title="tag:fastethernet" rel="tag">FastEthernet</a>,
	<a href="../../tag/4port?do=showtag&amp;tag=4Port" class="wikilink1" title="tag:4port" rel="tag">4Port</a>,
	<a href="../../tag/usb?do=showtag&amp;tag=USB" class="wikilink1" title="tag:usb" rel="tag">USB</a>,
	<a href="../../tag/ath9k?do=showtag&amp;tag=ath9k" class="wikilink1" title="tag:ath9k" rel="tag">ath9k</a>,
	<a href="../../tag/64ram?do=showtag&amp;tag=64RAM" class="wikilink1" title="tag:64ram" rel="tag">64RAM</a>,
	<a href="../../tag/4flash?do=showtag&amp;tag=4Flash" class="wikilink1" title="tag:4flash" rel="tag">4Flash</a>,
	<a href="../../tag/mips?do=showtag&amp;tag=MIPS" class="wikilink1" title="tag:mips" rel="tag">MIPS</a>,
	<a href="../../tag/mips32?do=showtag&amp;tag=MIPS32" class="wikilink1" title="tag:mips32" rel="tag">MIPS32</a>,
	<a href="../../tag/24k?do=showtag&amp;tag=24K" class="wikilink1" title="tag:24k" rel="tag">24K</a>,
	<a href="../../tag/adsl2?do=showtag&amp;tag=ADSL2%252B" class="wikilink1" title="tag:adsl2" rel="tag">ADSL2+</a>,
	<a href="../../tag/lantiq?do=showtag&amp;tag=lantiq" class="wikilink1" title="tag:lantiq" rel="tag">lantiq</a>,
	<a href="../../tag/danube?do=showtag&amp;tag=danube" class="wikilink1" title="tag:danube" rel="tag">danube</a>,
	<a href="../../tag/fxo?do=showtag&amp;tag=fxo" class="wikilink1" title="tag:fxo" rel="tag">fxo</a>
</span></div>

</div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>toh/astoria/arv7518pw.txt</bdi> · Last modified: 2015/05/06 12:47 by <bdi>theoradicus</bdi></div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="arv7518pw?do=edit"  class="action source" accesskey="v" rel="nofollow" title="Show pagesource [V]"><span>Show pagesource</span></a></li><li><a href="arv7518pw?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="arv7518pw?do=backlink"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="arv7518pw#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license" class="urlextern">CC Attribution-Noncommercial-Share Alike 3.0 Unported</a></bdi></div>
    <div class="buttons">
        <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license"><img src="../../lib/images/license/button/cc-by-nc-sa.png" alt="CC Attribution-Noncommercial-Share Alike 3.0 Unported" /></a>        <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="../../lib/tpl/openwrt/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://www.php.net" title="Powered by PHP" ><img
            src="../../lib/tpl/openwrt/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="../../lib/tpl/openwrt/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="../../lib/tpl/openwrt/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="../../lib/tpl/openwrt/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="../../lib/exe/indexer.php?id=toh%253Aastoria%253Aarv7518pw&amp;1432269479" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->
</body>
</html>
