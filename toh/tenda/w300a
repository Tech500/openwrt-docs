<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>Tenda W300A [OpenWrt Wiki]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="ramips,rt2880"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../lib/exe/opensearch.php" title="OpenWrt Wiki"/>
<link rel="start" href="../../index.html"/>
<link rel="contents" href="http://wiki.openwrt.org/toh/tenda/w300a?do=index" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Recent changes" href="../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="../../feed.php?mode=list&amp;ns=toh:tenda"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="http://wiki.openwrt.org/_export/xhtml/toh/tenda/w300a"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="http://wiki.openwrt.org/_export/raw/toh/tenda/w300a"/>
<link rel="canonical" href="w300a"/>
<link rel="stylesheet" type="text/css" href="../../lib/exe/css.php?t=openwrt&amp;tseed=6f44f363dc87908d905dc56ff3acbfc4"/>
<script type="text/javascript">/*<![CDATA[*/var NS='toh:tenda';var JSINFO = {"id":"toh:tenda:w300a","namespace":"toh:tenda"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../lib/exe/js.php?tseed=6f44f363dc87908d905dc56ff3acbfc4"></script>
<script type="text/javascript" charset="utf-8">/*<![CDATA[*/jQuery(function(){
	for ( i=0; i < document.forms.length; i++ ) {
		if (document.forms[i].method == 'post') {
			var myElement = document.createElement('input');
			myElement.setAttribute('type', 'hidden');
			myElement.name = 'bb2_screener_';
			myElement.value = '1432284568 166.182.3.220';
			document.forms[i].appendChild(myElement);
		}
	}
});
/*!]]>*/</script>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="../../lib/tpl/openwrt/images/favicon.ico" />
<link rel="apple-touch-icon" href="../../lib/tpl/openwrt/images/apple-touch-icon.png" />
    </head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_openwrt     ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="w300a#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="../../start"  accesskey="h" title="[H]"><img src="../../lib/tpl/openwrt/images/logo.png" width="386" height="98" alt="" /> <span>OpenWrt Wiki</span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="http://wiki.openwrt.org/toh/tenda/w300a?do=register"  class="action register" rel="nofollow" title="Register">Register</a></li><li><a href="http://wiki.openwrt.org/toh/tenda/w300a?do=login&amp;sectok=382740b13d95f946eed36caa57076b4a"  class="action login" rel="nofollow" title="Login">Login</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="../../start" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="../../doku.php" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="toh:tenda:w300a" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Show pagesource</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Login</option><option value="register">Register</option></optgroup></select><input type="submit" value="&gt;" /></div></form>            </div>
            <ul>
                <li><a href="http://wiki.openwrt.org/toh/tenda/w300a?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a></li><li><a href="http://wiki.openwrt.org/toh/tenda/w300a?do=media&amp;ns=toh%3Atenda"  class="action media" rel="nofollow" title="Media Manager">Media Manager</a></li><li><a href="http://wiki.openwrt.org/toh/tenda/w300a?do=index"  class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                            <div class="youarehere"><span class="bchead">You are here: </span><span class="home"><bdi><a href="../../start" class="wikilink1" title="start">OpenWrt Wiki</a></bdi></span> » <bdi><a href="../start" class="wikilink1" title="toh:start">Table of Hardware</a></bdi> » <bdi><a href="start" class="wikilink1" title="toh:tenda:start">Tenda</a></bdi> » <bdi><span class="curid"><a href="w300a" class="wikilink1" title="toh:tenda:w300a">Tenda W300A</a></span></bdi></div>
                                    <div class="plugin_multilingual">
        <ul>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/cz/toh/tenda/w300a" class="media" title="cz:toh:tenda:w300a"><img src="../../lib/exe/fetch.php?cache=&amp;tok=aff589&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fcz.gif" class="media" title="Čeština (Czech)" alt="Čeština (Czech)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/de/toh/tenda/w300a" class="media" title="de:toh:tenda:w300a"><img src="../../lib/exe/fetch.php?cache=&amp;tok=e24010&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fde.gif" class="media" title="Deutsch (German)" alt="Deutsch (German)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <span class="curid"><a href="w300a" class="media" title="toh:tenda:w300a"><img src="../../lib/exe/fetch.php?cache=&amp;tok=2a37ae&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fgb.gif" class="media" title="English" alt="English" /></a></span>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/es/toh/tenda/w300a" class="media" title="es:toh:tenda:w300a"><img src="../../lib/exe/fetch.php?cache=&amp;tok=46c004&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fmx.gif" class="media" title="Español (Spanish, Mexico)" alt="Español (Spanish, Mexico)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/fr/toh/tenda/w300a" class="media" title="fr:toh:tenda:w300a"><img src="../../lib/exe/fetch.php?cache=&amp;tok=a5beba&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ffr.gif" class="media" title="Français (French)" alt="Français (French)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/hu/toh/tenda/w300a" class="media" title="hu:toh:tenda:w300a"><img src="../../lib/exe/fetch.php?cache=&amp;tok=6b5470&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fhu.gif" class="media" title="Magyar (Hungarian)" alt="Magyar (Hungarian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/jp/toh/tenda/w300a" class="media" title="jp:toh:tenda:w300a"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f999fc&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fjp.gif" class="media" title="日本語 (Japanese)" alt="日本語 (Japanese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pl/toh/tenda/w300a" class="media" title="pl:toh:tenda:w300a"><img src="../../lib/exe/fetch.php?cache=&amp;tok=c805c0&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fpl.gif" class="media" title="Poliski (Polish)" alt="Poliski (Polish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pt-br/toh/tenda/w300a" class="media" title="pt-br:toh:tenda:w300a"><img src="../../lib/exe/fetch.php?cache=&amp;tok=13127d&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fbr.gif" class="media" title="Português brasileiro (Portuguese, Brasil)" alt="Português brasileiro (Portuguese, Brasil)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/ru/toh/tenda/w300a" class="media" title="ru:toh:tenda:w300a"><img src="../../lib/exe/fetch.php?cache=&amp;tok=66ab5e&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fru.gif" class="media" title="Русский (Russsian)" alt="Русский (Russsian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/tr/toh/tenda/w300a" class="media" title="tr:toh:tenda:w300a"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f4beed&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ftr.gif" class="media" title="Tϋrkçe (Turkish)" alt="Tϋrkçe (Turkish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-cn/toh/tenda/w300a" class="media" title="zh-cn:toh:tenda:w300a"><img src="../../lib/exe/fetch.php?cache=&amp;tok=93625a&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-cn.gif" class="media" title="官話/官话 (Chinese)" alt="官話/官话 (Chinese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-tw/toh/tenda/w300a" class="media" title="zh-tw:toh:tenda:w300a"><img src="../../lib/exe/fetch.php?cache=&amp;tok=b56198&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-tw.gif" class="media" title="臺灣華語 (Taiwanese)" alt="臺灣華語 (Taiwanese)" /></a>
              </div>
            </div>
          </li>
        </ul>
      </div>
        </div>
    
    
    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>toh:tenda:w300a</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="w300a#hardware">Hardware</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="w300a#info">Info</a></div></li>
<li class="level2"><div class="li"><a href="w300a#serial_port">Serial Port</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="w300a#pinout">Pinout</a></div></li>
<li class="level3"><div class="li"><a href="w300a#u-boot">u-Boot</a></div></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"><a href="w300a#boot_messages">Boot messages</a></div></li>
<li class="level1"><div class="li"><a href="w300a#system_info">System info</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="w300a#version">Version</a></div></li>
<li class="level2"><div class="li"><a href="w300a#cpu_info">CPU info</a></div></li>
<li class="level2"><div class="li"><a href="w300a#devices">Devices</a></div></li>
<li class="level2"><div class="li"><a href="w300a#meminfo">Meminfo</a></div></li>
<li class="level2"><div class="li"><a href="w300a#mtd">MTD</a></div></li>
<li class="level2"><div class="li"><a href="w300a#interrupts">Interrupts</a></div></li>
<li class="level2"><div class="li"><a href="w300a#ps">PS</a></div></li>
<li class="level2"><div class="li"><a href="w300a#pci">PCI</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="w300a#openwrt">OpenWrt</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="w300a#customization_notes">Customization notes</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="w300a#phy">PHY</a></div></li>
<li class="level3"><div class="li"><a href="w300a#leds">LEDs</a></div></li>
<li class="level3"><div class="li"><a href="w300a#reset_button">Reset button</a></div></li>
<li class="level3"><div class="li"><a href="w300a#wifi_firmware">Wifi firmware</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="w300a#mtd1">MTD</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="w300a#stock_firmware">Stock firmware</a></div></li>
<li class="level3"><div class="li"><a href="w300a#openwrt1">OpenWrt</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="w300a#use">Use</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="w300a#flashing">Flashing</a></div></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"><a href="w300a#tags">Tags</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="tenda_w300a">Tenda W300A</h1>
<div class="level1">

<p>
 802.11 b/g/n MIMO access point (2T3R), 10/100/1000M eth., 802.3af PoE. Manufacturer <a href="http://www.tenda.cn/tendacn/product/show.aspx?productid=341&amp;type=0" class="urlextern" title="http://www.tenda.cn/tendacn/product/show.aspx?productid=341&amp;type=0"  rel="nofollow">link</a>.
</p>

</div>

<h2 class="sectionedit2" id="hardware">Hardware</h2>
<div class="level2">

</div>

<h3 class="sectionedit3" id="info">Info</h3>
<div class="level3">
<div class="table sectionedit4"><table class="inline">
	<tr class="row0">
		<td class="col0"> <strong>Architecture:</strong> MIPS </td>
	</tr>
	<tr class="row1">
		<td class="col0"> <strong>Vendor:</strong> Ralink </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <strong>Bootloader:</strong> u-Boot </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <strong>System-On-Chip:</strong> Ralink RT2880F </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <strong>CPU Speed:</strong> 266Mhz </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <strong>Flash-Chip:</strong> KH29LV320DBTC-70G </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <strong>Flash size:</strong> 4MB </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <strong>RAM:</strong> 2x HY57V641620FTP-7 (16MB total)</td>
	</tr>
	<tr class="row8">
		<td class="col0"> <strong>Wireless:</strong> Ralink RT2820L, 2T3R </td>
	</tr>
	<tr class="row9">
		<td class="col0"> <strong>Ethernet:</strong> Vitese VSC8601XKN (MAC)</td>
	</tr>
	<tr class="row10">
		<td class="col0"> <strong>USB:</strong> No </td>
	</tr>
	<tr class="row11">
		<td class="col0"> <strong>Serial:</strong> <a href="w300a#serial_port" title="toh:tenda:w300a ↵" class="wikilink1">Yes</a> </td>
	</tr>
	<tr class="row12">
		<td class="col0"> <strong>JTAG:</strong> ? </td>
	</tr>
	<tr class="row13">
		<td class="col0"> <strong>PoE</strong> 802.3af (TI TPS23750) </td>
	</tr>
</table></div>

</div>

<h3 class="sectionedit5" id="serial_port">Serial Port</h3>
<div class="level3">

</div>

<h4 id="pinout">Pinout</h4>
<div class="level4">

<p>
On the other side of the PCB there are 4 test points:
</p>
<ul>
<li class="level1"><div class="li"> TP1 GND</div>
</li>
<li class="level1"><div class="li"> TP2 ? (probably Vcc)</div>
</li>
<li class="level1"><div class="li"> TP3,4 serial console</div>
</li>
</ul>

<p>
The serial interface is 3.3V TTL levels (need USB cable and/or level converter to connect to a PC). Settings are 57k6 8N1 no flow control.
</p>

</div>

<h4 id="u-boot">u-Boot</h4>
<div class="level4">

<p>
For TFTP from u-Boot the AP <strong>has</strong> to bo connected to a 10/100M switch (does not work neither on a 10/100/1000M switch nor on a 10M hub).
</p>

<p>
For FW recovery use option 2 (<code>Load system code then write to Flash via TFTP.</code>) to download the original FW image (currently <a href="http://www.tenda.cn/pdtData/update_en/Firmware/wireless/W300A/U300A_EN_2.4.15.zip U300A_EN_2.4.15.zip" class="urlextern" title="http://www.tenda.cn/pdtData/update_en/Firmware/wireless/W300A/U300A_EN_2.4.15.zip U300A_EN_2.4.15.zip"  rel="nofollow">U300ARAEN_2.4.15.bin</a>, unzip first <img src="../../lib/images/smileys/icon_smile.gif" class="icon" alt=":-)" />).
</p>

</div>

<h2 class="sectionedit6" id="boot_messages">Boot messages</h2>
<div class="level2">

<p>
<pre class="code"> U-Boot 1.1.3 (Feb 22 2008 - 16:48:17)
 
 Board: RT2880 DRAM:  16 MB
 
  twe0 set to &lt;NULL&gt;
 
  toe0 set to &lt;NULL&gt;
 flash_protect ON: from 0xBF000000 to 0xBF02479B
 protect on 0
 protect on 1
 protect on 2
 flash_protect ON: from 0xBF030000 to 0xBF03FFFF
 protect on 3
 ============================================ 
 ASIC -VerB/C (MAC to 100PHY Mode)
 DRAM COMPONENT=64Mbits 
 DRAM BUS=32BIT 
 Total memory = 16Mbytes
 Date:Feb 22 2008  Time:16:48:17
 ============================================ 
 
  D-CACHE set to 4 way 
  I-CACHE set to 4 way 
 
  ##### The CPU freq = 266 MHZ #### 
 
  SDRAM bus set to 32 bit 
  SDRAM size =16 Mbytes
 
 Please choose the operation: 
    1: Load system code to SDRAM via TFTP. 
    2: Load system code then write to Flash via TFTP. 
    3: Boot system code via Flash (default).
    4: Entr boot command line interface.
    5: Load ucos code to SDRAM via TFTP. 
 
 
 3: System Boot system code via Flash.
 ## Booting image at bf050000 ...
    Image Name:   Linux Kernel Image
    Created:      2008-10-29  18:46:32 UTC
 System Control Status = 0x02910084 
    Image Type:   MIPS Linux Kernel Image (lzma compressed)
    Data Size:    2447621 Bytes =  2.3 MB
    Load Address: 88000000
    Entry Point:  88190040
    Verifying Checksum ... OK
    Uncompressing Kernel Image ... OK
 No initrd
 ## Transferring control to Linux (at address 88190040) ...
 ## Giving linux memsize in MB, 16
 
 
 Starting kernel ...
 
 
 
 THIS IS ASIC
 ramsize = 16 MBytes
 rambase not set, set to default (0x08000000)
 MEMORY DESCRIPTOR dump:
 [0,883d0b80]: base&lt;08000000&gt; size&lt;01000000&gt; type&lt;Free RAM memory&gt;
 
  The CPU feqenuce set to 266 MHz
 CPU revision is: 0001906c
 icache: sets:256, ways:4, linesz:16 ,total:16384, waybit:12, flags:0x0
 dcache: sets:256, ways:4, linesz:16 ,total:16384, waybit:12, flags:0x0
 i waysize = 4096, d waysize = 4096, i sets= 256, d sets=256
 Primary instruction cache 16kB, physically tagged, 4-way, linesize 16 bytes.
 Primary data cache 16kB, 4-way, linesize 16 bytes.
 [setup_scache]:1032
 Linux version 2.4.30 (root@linux-r3ht) (gcc version 3.3.6) #1 Thu Oct 30 02:42:35 CST 2008
 Determined physical RAM map:
  memory: 01000000 @ 08000000 (usable)
 Initial ramdisk at: 0x881c2000 (1855488 bytes)
 On node 0 totalpages: 36864
 zone(0): 36864 pages.
 zone(1): 0 pages.
 zone(2): 0 pages.
 Kernel command line: console=ttyS1,57600n8 root=/dev/ram0
 cause = e080804c, status = 1000ff00
 calculating r4koff... 0028b0aa(2666666)
 CPU frequency 266.67 MHz
 Using 133.333 MHz high precision timer.
 Calibrating delay loop... 266.24 BogoMIPS
 Memory: 10872k/16384k available (1585k kernel code, 5512k reserved, 1912k data, 92k init, 0k highmem)
 Dentry cache hash table entries: 32768 (order: 6, 262144 bytes)
 Inode cache hash table entries: 16384 (order: 5, 131072 bytes)
 Mount cache hash table entries: 512 (order: 0, 4096 bytes)
 Buffer cache hash table entries: 8192 (order: 3, 32768 bytes)
 Page-cache hash table entries: 65536 (order: 6, 262144 bytes)
 Checking for &#039;wait&#039; instruction...  unavailable.
 POSIX conformance testing by UNIFIX
 pci.c pcibios_init():840
 BAR0 at slot 0 = 8
 pci.c pcibios_fixup_resources():640
 bus = 0, dev = 0, fun = 0
 dev= 0x88564c00
 Linux NET4.0 for Linux 2.4
 Based upon Swansea University Computer Society NET3.039
 Initializing RT netlink socket
 Starting kswapd
 devfs: v1.12c (20020818) Richard Gooch (rgooch@atnf.csiro.au)
 devfs: boot_options: 0x1
 squashfs: version 3.1 (2006/08/19) Phillip Lougher
 pty: 256 Unix98 ptys configured
 Ralink RT2880 gpio driver start init
 SetGPIOType: id [12] type[0]
 SetGPIOType: id [11] type[0]
 SetGPIOType: id [13] type[1]
 SetGPIOType: id [0] type[1]
 Ralink RT2880 gpio driver initialized
 spidrv_major = 217
 Serial driver version 5.05c (2001-07-08) with MANY_PORTS SHARE_IRQ SERIAL_PCI enabled
 ttyS00 at 0x300500 (irq = 9) is a 16550A
 ttyS01 at 0x300c00 (irq = 8) is a 16550A
 HDLC line discipline: version $Revision: 1.1.1.1 $, maxframe=4096
 N_HDLC line discipline registered.
 RAMDISK driver initialized: 16 RAM disks of 8192K size 1024 blocksize
 GDMA1_MAC_ADRH -- : 0x00000000
 GDMA1_MAC_ADRL -- : 0x00000000
 Ralink APSoC Ethernet Driver Initilization. v1.60  256 rx/tx descriptors allocated, mtu = 1600!
 GDMA1_MAC_ADRH -- : 0x0000b848
 GDMA1_MAC_ADRL -- : 0x000c4328
 PROC INIT OK!
 rdm_major = 254
 FLASH_API: MAN_ID=C2 DEV_ID=22A8 SIZE=4MB
 physmap flash device: 400000 at bfc00000
  Amd/Fujitsu Extended Query Table v1.1 at 0x0040
 number of CFI chips: 1
 Region0: SectorSize=0x2000 SectorNum=8
 Region1: SectorSize=0x10000 SectorNum=63
 cfi_cmdset_0002: Using word write method.
 cfi_cmdset_0002: Disabling fast programming due to code brokenness.
 Using physmap partition definition
 Creating 4 MTD partitions on &quot;RT2880 SOC Physically mapped flash&quot;:
 0x00000000-0x00030000 : &quot;Bootloader&quot;
 mtd: Giving out device 0 to Bootloader
 0x00030000-0x00040000 : &quot;Config &quot;
 mtd: Giving out device 1 to Config 
 0x00040000-0x00050000 : &quot;Factory&quot;
 mtd: Giving out device 2 to Factory
 0x00050000-0x00400000 : &quot;Kernel&quot;
 mtd: Giving out device 3 to Kernel
 NET4: Linux TCP/IP 1.0 for NET4.0
 IP Protocols: ICMP, UDP, TCP, IGMP
 IP: routing cache hash table of 1024 buckets, 8Kbytes
 TCP: Hash tables configured (established 16384 bind 32768)
 GRE over IPv4 tunneling driver
 Linux IP multicast router 0.06 plus PIM-SM
 NET4: Unix domain sockets 1.0/SMP for Linux NET4.0.
 NET4: Ethernet Bridge 008 for NET4.0
 802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
 All bugs added by David S. Miller &lt;davem@redhat.com&gt;
 RAMDISK: Compressed image found at block 0
 Freeing initrd memory: 1812k freed
 VFS: Mounted root (squashfs filesystem) readonly.
 Mounted devfs on /dev
 Freeing prom memory: 0kb freed
 Freeing unused kernel memory: 92k freed
 console started
 trying to start /sbin/init
 Algorithmics/MIPS FPU Emulator v1.5
 
 init started: BusyBox v1.8.2 (2008-10-30 02:36:26 CST)
 
 starting pid 10, tty &#039;&#039;: &#039;/etc_ro/rcS&#039;&#039;&#039;
 mount: mounting devpts: called with bogus options
 none on /sys failed: No such device
 mount: mounting none on /proc/bus/usb failed: No such file or directory
 
 starting pid 16, tty &#039;/dev/console&#039;: &#039;/bin/sh&#039;
 
 
 BusyBox v1.8.2 (2008-10-30 02:36:26 CST) built-in shell (ash)
 Enter &#039;help&#039; for a list of built-in commands.
 
 # 
 
 Yes:
 
       ****** WeLoveLinux ****** 
 
  Welcome to ...
 kernel reg pid 14 success .
 
 httpd Reg gpio hook success .
 insmod rt2860v2_ap
 2860 version : 1.9.0.0 (Oct 30 2008)
 
 
 
 === pAd = c0507000, size = 484224 ===
 
 
 &lt;-- RTMPAllocAdapterBlock, Status=0
 ralink_init make_wireless_config rt2860
 ifconfig ra0 0.0.0.0
 RX DESC a8c4d000  size = 2048
 &lt;-- RTMPAllocTxRxRingMemory, Status=0
 1. Phy Mode = 9
 2. Phy Mode = 9
 3. Phy Mode = 9
 ...</pre>

</p>

</div>

<h2 class="sectionedit7" id="system_info">System info</h2>
<div class="level2">

</div>

<h3 class="sectionedit8" id="version">Version</h3>
<div class="level3">

<p>
<pre class="code"> # cat /proc/version
 Linux version 2.4.30 (root@linux-r3ht) (gcc version 3.3.6) #1 Thu Oct 30 02:42:35 CST 2008</pre>

</p>

</div>

<h3 class="sectionedit9" id="cpu_info">CPU info</h3>
<div class="level3">

<p>
<pre class="code"> # cat /proc/cpuinfo
 system type             : Palmchip Surfboard
 processor               : 0
 cpu model               : unknown V6.12
 BogoMIPS                : 266.24
 wait instruction        : no
 microsecond timers      : yes
 tlb_entries             : 16
 extra interrupt vector  : yes
 hardware watchpoint     : no
 VCED exceptions         : not available
 VCEI exceptions         : not available</pre>

</p>

</div>

<h3 class="sectionedit10" id="devices">Devices</h3>
<div class="level3">

<p>
<pre class="code"># cat /proc/devices
Character devices:
  1 mem
  2 pty/m%d
  3 pty/s%d
  4 tts/%d
  5 cua/%d
 10 misc
 36 netlink
 90 mtd
128 ptm
136 pts/%d
162 raw
200 flash0
217 spiS0
252 gpio
254 rdm0

Block devices:
  1 ramdisk
 31 mtdblock</pre>

</p>

</div>

<h3 class="sectionedit11" id="meminfo">Meminfo</h3>
<div class="level3">

<p>
<pre class="code"> # cat /proc/meminfo
         total:    used:    free:  shared: buffers:  cached:
 Mem:  13082624 10506240  2576384        0   897024  3710976
 Swap:        0        0        0
 MemTotal:        12776 kB
 MemFree:          2516 kB
 MemShared:           0 kB
 Buffers:           876 kB
 Cached:           3624 kB
 SwapCached:          0 kB
 Active:           2464 kB
 Inactive:         2044 kB
 HighTotal:           0 kB
 HighFree:            0 kB
 LowTotal:        12776 kB
 LowFree:          2516 kB
 SwapTotal:           0 kB
 SwapFree:            0 kB</pre>

</p>

</div>

<h3 class="sectionedit12" id="mtd">MTD</h3>
<div class="level3">

<p>
<pre class="code"> # cat /proc/mtd
 dev:    size   erasesize  name
 mtd0: 00030000 00010000 &quot;Bootloader&quot;
 mtd1: 00010000 00010000 &quot;Config &quot;
 mtd2: 00010000 00010000 &quot;Factory&quot;
 mtd3: 003b0000 00010000 &quot;Kernel&quot;</pre>

</p>

</div>

<h3 class="sectionedit13" id="interrupts">Interrupts</h3>
<div class="level3">

<p>
<pre class="code"> # cat /proc/interrupts
            CPU0
   3:       1269       Surfboard  eth2
   4:      12078       Surfboard  ra0
   6:      53928       Surfboard  timer
   8:        313       Surfboard  serial
 
 ERR:          0</pre>

</p>

</div>

<h3 class="sectionedit14" id="ps">PS</h3>
<div class="level3">

<p>
<pre class="code"># ps
   PID  Uid        VSZ Stat Command
     1 0          1608 S   init
     2 0               SW  [keventd]
     3 0               SWN [ksoftirqd_CPU0]
     4 0               SW  [kswapd]
     5 0               SW  [bdflush]
     6 0               SW  [kupdated]
     7 0               SW  [mtdblockd]
    14 0          1992 S   httpd
    16 0          1616 S   /bin/sh
    19 0               SW  [rtmpWscHandle]
   116 0          1608 S   udhcpc -i br0 -h W300A -s /etc_ro/udhcpc.script -p /v
   125 0          1992 S   httpd
   126 0          1992 S   httpd
   127 0           748 S   wins W300A 192.168.2.90
   134 0          1608 R   ps</pre>

</p>

</div>

<h3 class="sectionedit15" id="pci">PCI</h3>
<div class="level3">

<p>
<pre class="code"> # cat /proc/pci
 PCI devices found:
   Bus  0, device   0, function  0:
     Class 0080: PCI device 1814:0802 (rev 1).
       Master Capable.  Latency=255.
       Prefetchable 32 bit memory at 0x0 [0xfffffff].
 # cat /proc/bus/pci/devices
 0000    18140802        0       00000008        00000000        00000000         00000000        00000000        00000000        00000000        1000000000000000        00000000        00000000        00000000        00000000        00000000</pre>

</p>

</div>

<h2 class="sectionedit16" id="openwrt">OpenWrt</h2>
<div class="level2">

<p>
Available patch for trunk - see the <a href="https://lists.openwrt.org/pipermail/openwrt-devel/2012-April/014688.html" class="urlextern" title="https://lists.openwrt.org/pipermail/openwrt-devel/2012-April/014688.html"  rel="nofollow">mailing list</a> and also <a href="https://forum.openwrt.org/viewtopic.php?id=35726" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?id=35726"  rel="nofollow">discussion</a>
</p>

</div>

<h3 class="sectionedit17" id="customization_notes">Customization notes</h3>
<div class="level3">

</div>

<h4 id="phy">PHY</h4>
<div class="level4">

<p>
The AP uses PHY Vitesse VSC8601 - need libphy with Vitesse (plus the patch). PHY is controlled via MDIO (do not enable GPIO MDI on RT2880), PHY address 6. The dual color (orange/green) Link/activity LED is connected directly to the PHY.
</p>

</div>

<h4 id="leds">LEDs</h4>
<div class="level4">

<p>
Green WPS led is on GPIO 11, active low.
</p>

<p>
Green SYS led is on GPIO 12, active low.
</p>

<p>
WLAN LED is on wifi chip RT2820 (registered as rt2800pci-phy0::radio).
Note that the LED polarity is by default reversed. This is taken from the firmware copied from flash. Could be fixed by patching the /lib/firmware/RT288x.eeprom when copying from flash - do something like:
<pre class="code">rt2x00_eeprom_read(rt2x00dev, EEPROM_FREQ, &amp;word);
word |= 0x1000; /* swap polarity */
rt2x00_eeprom_write(rt2x00dev, EEPROM_FREQ, word);</pre>

Or put this into rt2800lib.c in <code>int rt2800_validate_eeprom(struct rt2x00_dev *rt2x00dev)</code> (which would be ugly).
</p>

<p>
Power LED seems to be connected directly to power.
</p>

</div>

<h4 id="reset_button">Reset button</h4>
<div class="level4">

<p>
Reset button is on GPIO 0, active low.
</p>

</div>

<h4 id="wifi_firmware">Wifi firmware</h4>
<div class="level4">

<p>
The radio firmware is (as in most similar routers/APs) at the beginning of the <code>factory</code> partition (used standard <code>rt2x00_eeprom_extract &quot;factory&quot; 0 272</code>).
</p>

</div>

<h3 class="sectionedit18" id="mtd1">MTD</h3>
<div class="level3">

</div>

<h4 id="stock_firmware">Stock firmware</h4>
<div class="level4">

<p>
<pre class="code"> dev:    size   erasesize  name
 mtd0: 00030000 00010000 &quot;Bootloader&quot;
 mtd1: 00010000 00010000 &quot;Config &quot;
 mtd2: 00010000 00010000 &quot;Factory&quot;
 mtd3: 003b0000 00010000 &quot;Kernel&quot;

 0x00000000-0x00030000 : &quot;Bootloader&quot;
 0x00030000-0x00040000 : &quot;Config &quot;
 0x00040000-0x00050000 : &quot;Factory&quot;
 0x00050000-0x00400000 : &quot;Kernel&quot;</pre>

</p>

</div>

<h4 id="openwrt1">OpenWrt</h4>
<div class="level4">

<p>
<pre class="code">mtdlayout_4M=192k(u-boot)ro,64k(u-boot-env)ro,64k(factory)ro,896k(kernel),2880k(rootfs),3776k@0x50000(firmware)

static struct mtd_partition w300a_partitions[] = {
    {
        .name   = &quot;u-boot&quot;,
        .offset = 0,
        .size   = 0x030000,              // 192KB = 196608 = 0x030000
        .mask_flags = MTD_WRITEABLE,
    }, {
        .name   = &quot;u-boot-env&quot;,
        .offset = 0x030000,
        .size   = 0x010000,             // 64KB = 65536 = 0x010000
        .mask_flags = MTD_WRITEABLE,
    }, {
        .name   = &quot;factory&quot;,
        .offset = 0x040000,
        .size   = 0x010000,            // 64KB = 65536 = 0x010000
        .mask_flags = MTD_WRITEABLE,
    }, {
        .name   = &quot;kernel&quot;,
        .offset = 0x050000,
        .size   = 0x0E0000,           // 896KB = 917504 = 0x0E0000
    } , {
        .name   = &quot;rootfs&quot;,
        .offset = 0x130000,          // 0x050000 + 0x0E0000 = 0x130000
        .size   = 0x2d0000,          // 2880KB = 2949120 = 2D0000, end=0x400000=4MB
    }, {
        .name   = &quot;firmware&quot;,
        .offset = 0x050000,
        .size   = 0x3b0000,          //3776KB = 3866624 = 0x3B0000
    }
}; </pre>

</p>

</div>

<h3 class="sectionedit19" id="use">Use</h3>
<div class="level3">

<p>
Getting FW - TBD/see discussion.
</p>

</div>

<h4 id="flashing">Flashing</h4>
<div class="level4">

<p>
So far only tested with the serial console. I.e. from the u-boot menu use 1 (boot from tftp) or 2 (flash from tftp).
Both running initramfs from tftp and flashing squashfs and then running from internal flash works fine. You can also flash back the original firmware (see above).
</p>

<p>
Have not checked the image format or hwo to prepare a &quot;factory&quot; version which could be flashed via the original web gui.
</p>

<p>
Tested basic AP use (wifi and eth in a bridge), managed to get 300M link on wifi (using the <code>noscan</code> option) and do data transfer through it.
</p>

<p>
Be careful when adding features. With 16MB of RAM you can easily run out of memory.
</p>

</div>

<h2 class="sectionedit20" id="tags">Tags</h2>
<div class="level2">

<p>
For some Help with the Tags, please have a look here: <a href="../../meta/tags" class="wikilink1" title="meta:tags">tags</a>
</p>
<div class="tags"><span>
	<a href="../../tag/ramips?do=showtag&amp;tag=ramips" class="wikilink1" title="tag:ramips" rel="tag">ramips</a>,
	<a href="../../tag/rt2880?do=showtag&amp;tag=rt2880" class="wikilink1" title="tag:rt2880" rel="tag">rt2880</a>
</span></div>

</div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>toh/tenda/w300a.txt</bdi> · Last modified: 2014/03/19 11:53 (external edit)</div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="http://wiki.openwrt.org/toh/tenda/w300a?do=edit"  class="action source" accesskey="v" rel="nofollow" title="Show pagesource [V]"><span>Show pagesource</span></a></li><li><a href="http://wiki.openwrt.org/toh/tenda/w300a?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="http://wiki.openwrt.org/toh/tenda/w300a?do=backlink"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="w300a#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license" class="urlextern">CC Attribution-Noncommercial-Share Alike 3.0 Unported</a></bdi></div>
    <div class="buttons">
        <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license"><img src="../../lib/images/license/button/cc-by-nc-sa.png" alt="CC Attribution-Noncommercial-Share Alike 3.0 Unported" /></a>        <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="../../lib/tpl/openwrt/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://www.php.net" title="Powered by PHP" ><img
            src="../../lib/tpl/openwrt/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="../../lib/tpl/openwrt/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="../../lib/tpl/openwrt/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="../../lib/tpl/openwrt/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="http://wiki.openwrt.org/lib/exe/indexer.php?id=toh%3Atenda%3Aw300a&amp;1432284568" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->
</body>
</html>
