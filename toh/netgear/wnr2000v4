<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>toh:netgear:wnr2000v4 [OpenWrt Wiki]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="toh,netgear,wnr2000v4"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../lib/exe/opensearch.php" title="OpenWrt Wiki"/>
<link rel="start" href="../../index.html"/>
<link rel="contents" href="wnr2000v4?do=index" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Recent changes" href="../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="../../feed.php?mode=list&amp;ns=toh:netgear"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="../../_export/xhtml/toh/netgear/wnr2000v4"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="../../_export/raw/toh/netgear/wnr2000v4"/>
<link rel="canonical" href="wnr2000v4"/>
<link rel="stylesheet" type="text/css" href="../../lib/exe/css.php?t=openwrt&amp;tseed=6f44f363dc87908d905dc56ff3acbfc4"/>
<script type="text/javascript">/*<![CDATA[*/var NS='toh:netgear';var JSINFO = {"id":"toh:netgear:wnr2000v4","namespace":"toh:netgear"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../lib/exe/js.php?tseed=6f44f363dc87908d905dc56ff3acbfc4"></script>
<script type="text/javascript" charset="utf-8">/*<![CDATA[*/jQuery(function(){
	for ( i=0; i < document.forms.length; i++ ) {
		if (document.forms[i].method == 'post') {
			var myElement = document.createElement('input');
			myElement.setAttribute('type', 'hidden');
			myElement.name = 'bb2_screener_';
			myElement.value = '1432278951 166.182.3.101';
			document.forms[i].appendChild(myElement);
		}
	}
});
/*!]]>*/</script>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="../../lib/tpl/openwrt/images/favicon.ico" />
<link rel="apple-touch-icon" href="../../lib/tpl/openwrt/images/apple-touch-icon.png" />
    </head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_openwrt     ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="wnr2000v4#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="../../start"  accesskey="h" title="[H]"><img src="../../lib/tpl/openwrt/images/logo.png" width="386" height="98" alt="" /> <span>OpenWrt Wiki</span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="wnr2000v4?do=register"  class="action register" rel="nofollow" title="Register">Register</a></li><li><a href="wnr2000v4?do=login&amp;sectok=382740b13d95f946eed36caa57076b4a"  class="action login" rel="nofollow" title="Login">Login</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="../../start" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="../../doku.php" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="toh:netgear:wnr2000v4" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Show pagesource</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Login</option><option value="register">Register</option></optgroup></select><input type="submit" value="&gt;" /></div></form>            </div>
            <ul>
                <li><a href="wnr2000v4?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a></li><li><a href="wnr2000v4?do=media&amp;ns=toh%253Anetgear"  class="action media" rel="nofollow" title="Media Manager">Media Manager</a></li><li><a href="wnr2000v4?do=index"  class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                            <div class="youarehere"><span class="bchead">You are here: </span><span class="home"><bdi><a href="../../start" class="wikilink1" title="start">OpenWrt Wiki</a></bdi></span> » <bdi><a href="../start" class="wikilink1" title="toh:start">Table of Hardware</a></bdi> » <bdi><a href="start" class="wikilink1" title="toh:netgear:start">Netgear</a></bdi> » <bdi><span class="curid"><a href="wnr2000v4" class="wikilink1" title="toh:netgear:wnr2000v4">wnr2000v4</a></span></bdi></div>
                                    <div class="plugin_multilingual">
        <ul>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/cz/toh/netgear/wnr2000v4" class="media" title="cz:toh:netgear:wnr2000v4"><img src="../../lib/exe/fetch.php?cache=&amp;tok=aff589&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fcz.gif" class="media" title="Čeština (Czech)" alt="Čeština (Czech)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/de/toh/netgear/wnr2000v4" class="media" title="de:toh:netgear:wnr2000v4"><img src="../../lib/exe/fetch.php?cache=&amp;tok=e24010&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fde.gif" class="media" title="Deutsch (German)" alt="Deutsch (German)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <span class="curid"><a href="wnr2000v4" class="media" title="toh:netgear:wnr2000v4"><img src="../../lib/exe/fetch.php?cache=&amp;tok=2a37ae&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fgb.gif" class="media" title="English" alt="English" /></a></span>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/es/toh/netgear/wnr2000v4" class="media" title="es:toh:netgear:wnr2000v4"><img src="../../lib/exe/fetch.php?cache=&amp;tok=46c004&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fmx.gif" class="media" title="Español (Spanish, Mexico)" alt="Español (Spanish, Mexico)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/fr/toh/netgear/wnr2000v4" class="media" title="fr:toh:netgear:wnr2000v4"><img src="../../lib/exe/fetch.php?cache=&amp;tok=a5beba&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ffr.gif" class="media" title="Français (French)" alt="Français (French)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/hu/toh/netgear/wnr2000v4" class="media" title="hu:toh:netgear:wnr2000v4"><img src="../../lib/exe/fetch.php?cache=&amp;tok=6b5470&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fhu.gif" class="media" title="Magyar (Hungarian)" alt="Magyar (Hungarian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/jp/toh/netgear/wnr2000v4" class="media" title="jp:toh:netgear:wnr2000v4"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f999fc&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fjp.gif" class="media" title="日本語 (Japanese)" alt="日本語 (Japanese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pl/toh/netgear/wnr2000v4" class="media" title="pl:toh:netgear:wnr2000v4"><img src="../../lib/exe/fetch.php?cache=&amp;tok=c805c0&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fpl.gif" class="media" title="Poliski (Polish)" alt="Poliski (Polish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pt-br/toh/netgear/wnr2000v4" class="media" title="pt-br:toh:netgear:wnr2000v4"><img src="../../lib/exe/fetch.php?cache=&amp;tok=13127d&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fbr.gif" class="media" title="Português brasileiro (Portuguese, Brasil)" alt="Português brasileiro (Portuguese, Brasil)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/ru/toh/netgear/wnr2000v4" class="media" title="ru:toh:netgear:wnr2000v4"><img src="../../lib/exe/fetch.php?cache=&amp;tok=66ab5e&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fru.gif" class="media" title="Русский (Russsian)" alt="Русский (Russsian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/tr/toh/netgear/wnr2000v4" class="media" title="tr:toh:netgear:wnr2000v4"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f4beed&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ftr.gif" class="media" title="Tϋrkçe (Turkish)" alt="Tϋrkçe (Turkish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-cn/toh/netgear/wnr2000v4" class="media" title="zh-cn:toh:netgear:wnr2000v4"><img src="../../lib/exe/fetch.php?cache=&amp;tok=93625a&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-cn.gif" class="media" title="官話/官话 (Chinese)" alt="官話/官话 (Chinese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-tw/toh/netgear/wnr2000v4" class="media" title="zh-tw:toh:netgear:wnr2000v4"><img src="../../lib/exe/fetch.php?cache=&amp;tok=b56198&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-tw.gif" class="media" title="臺灣華語 (Taiwanese)" alt="臺灣華語 (Taiwanese)" /></a>
              </div>
            </div>
          </li>
        </ul>
      </div>
        </div>
    
    
    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>toh:netgear:wnr2000v4</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    
<p>
WNR2000v4 specifications
</p>

<p>
cat /proc/cpuinfo shows
</p>
<pre class="code">system type             : Atheros AR934x
processor               : 0
cpu model               : MIPS 74Kc V4.12
BogoMIPS                : 267.26
wait instruction        : yes
microsecond timers      : yes
tlb_entries             : 32
extra interrupt vector  : yes
hardware watchpoint     : yes, count: 4, address/irw mask: [0x0000, 0x0ff8, 0x0013, 0x0830]
ASEs implemented        : mips16 dsp
shadow register sets    : 1
core                    : 0
VCED exceptions         : not available
VCEI exceptions         : not available</pre>

<p>
cat /proc/athversion shows:
</p>
<pre class="code">9.2.0_U10.1020</pre>

<p>
cat /proc/buddyinfo shows:
</p>
<pre class="code">Node 0, zone   Normal      8     21      9      8      4      2      2      2      1      1      1</pre>

<p>
cat /proc/devices shows:
</p>
<pre class="code">Character devices:
1   mem
4   ttyS
5   /dev/tty
5   /dev/console
5   /dev/ptmx
10  misc
77  ATH_GPIOC
90  mtd
108 ppp
128 ptm
136 pts
240 atherosgpio</pre>
<pre class="code">Block devices:
  259 blkext
   31 mtdblock</pre>

<p>
cat /proc/mtd shows:
</p>
<pre class="code">dev:   size     erasesize     name
mtd0:  00030000 00010000      &quot;u-boot&quot;
mtd1:  00010000 00010000      &quot;u-boot-env&quot;
mtd2:  000d0000 00010000      &quot;kernel&quot;
mtd3:  00290000 00010000      &quot;rootfs&quot;
mtd4:  00060000 00010000      &quot;rootfs_data&quot;
mtd5:  00020000 00010000      &quot;language&quot;
mtd6:  00010000 00010000      &quot;pot&quot;
mtd7:  00010000 00010000      &quot;traffic_meter&quot;
mtd8:  00010000 00010000      &quot;config&quot;
mtd9:  00010000 00010000      &quot;art&quot;
mtd10: 00360000 00010000      &quot;firmware&quot;</pre>

<p>
cat /proc/partitions shows:
</p>
<pre class="code">major minor  #blocks  name
31    0       192     mtdblock0
31    1       64      mtdblock1
31    2       832     mtdblock2
31    3       2624    mtdblock3
31    4       384     mtdblock4
31    5       128     mtdblock5
31    6       64      mtdblock6
31    7       64      mtdblock7
31    8       64      mtdblock8
31    9       64      mtdblock9
31    10      3456    mtdblock10</pre>

<p>
cat /proc/mounts shows:
</p>
<pre class="code">rootfs / rootfs rw 0 0
/dev/root / squashfs ro,relatime 0 0
proc /proc proc rw,relatime 0 0
sysfs /sys sysfs rw,relatime 0 0
tmpfs /tmp tmpfs rw,nosuid,nodev,relatime 0 0
tmpfs /dev tmpfs rw,relatime,size=512k 0 0
devpts /dev/pts devpts rw,relatime,mode=600 0 0
root /tmp/root tmpfs rw,relatime 0 0
/dev/root /mnt squashfs ro,relatime 0 0
root /mnt tmpfs rw,relatime 0 0</pre>

<p>
In Linux there&#039;s a python-script that you run to enable access to telnet with.
</p>

<p>
Begin with downloading this telnetenable archive.
As normal user in a terminal window, do:
</p>

<p>
wget <a href="https://netgear-telnetenable.googlecode.com/files/netgear-telnetenable-0.1.zip" class="urlextern" title="https://netgear-telnetenable.googlecode.com/files/netgear-telnetenable-0.1.zip"  rel="nofollow">https://netgear-telnetenable.googlecode.com/files/netgear-telnetenable-0.1.zip</a>
</p>

<p>
Then do:
</p>
<pre class="code">unzip netgear-telnetenable-0.1.zip</pre>

<p>
No you need to give your username root privileges, to do so you type
</p>
<pre class="code">su</pre>

<p>
Type your user password when prompted.
</p>

<p>
To make your python-file readable and executable you do:
</p>
<pre class="code">chmod a+x telnetenable.py</pre>

<p>
Assuming that your routers internal IP-adress is 192.168.1.1 you can now copy and paste the full string into the terminal and press Enter/Return/Execute-button:
</p>
<pre class="code">python telnetenable.py 192.168.1.1 $(arp -n | awk &quot;/192.168.1.1/&quot;&#039;  { gsub(/:/, &quot;&quot;, $3); print toupper($3)}&#039;) Gearguy Geardog</pre>

<p>
To enter the shell via telnet you type
</p>
<pre class="code">telnet 192.168.1.1</pre>

<p>
Now backup both U-boot and art by pasting these commands:
</p>
<pre class="code">dd if=/dev/mtdblock0 of=/tmp/u-boot.orig.bin

dd if=/dev/mtdblock9 of=/tmp/ART.orig.bin</pre>

<p>
Now you transfer u-boot.orig.bin and ART.orig.bin by using
</p>
<pre class="code">tftp -p /tmp/u-boot.orig.bin 192.168.1.X 24</pre>

<p>
where the X is replaced with what number you have in the end of your IP-adress.
</p>
<pre class="code">tftp -p /tmp/u-boot.orig.bin 192.168.1.X 24</pre>

<p>
where the X is replaced with what number you have in the end of your IP-adress.
</p>

<p>
Assuming that you&#039;ve built OpenWRT from source you&#039;ll see a binary to flash in your router, you do so by typing:
</p>
<pre class="code">ftpget --user=&lt;username&gt; --password=&lt;password&gt; --verbose 192.168.1.1 u-boot.bin</pre>

<p>
Now write the binary to the block by typing:
</p>
<pre class="code">mtd -e mtd0 write u-boot.bin mtd0</pre>

<p>
Output from starting in Boot-mode:
</p>
<pre class="code">U-Boot 1.1.4 (Nov 26 2012 - 15:58:42)                                                  </pre>
<pre class="code">DNI HW ID: 29763904 flash 4MB RAM 32MB U-boot dni29 V0.5                     
DRAM:                                       
sri                                         
Wasp 1.3                                    
wasp_ddr_initial_config(281): Wasp (16bit) ddr1 init
Tap value selected = 0xf [0x0 - 0x1f]       
32 MB                                       
Top of RAM usable for U-Boot at: 82000000
Reserving 218k for U-Boot at: 81fc8000
Reserving 192k for malloc() at: 81f98000
Reserving 44 Bytes for Board Info at: 81f97fd4
Reserving 36 Bytes for Global Data at: 81f97fb0
Reserving 128k for boot params() at: 81f77fb0
Stack Pointer at: 81f77f98
Now running in RAM - U-Boot at: 81fc8000
Flash Manuf Id 0xc2, DeviceId0 0x20, DeviceId1 0x16
flash size 4MB, sector count = 64
Flash:  4 MB
*** Warning - bad CRC, using default environment
In:    serial
Out:   serial
Err:   serial
Net:   ag934x_enet_initialize...
Fetching MAC Address from 0x81fecd38
Fetching MAC Address from 0x81fecd38
wasp  reset mask:c03300 
WASP ----&gt; S27 PHY 
: cfg1 0x80000000 cfg2 0x7114
eth0: c4:04:15:8d:dc:65
s27 reg init 
athrs27_phy_setup ATHR_PHY_CONTROL 4 :1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 4 :10
eth0 up
WASP ----&gt; S27 PHY 
: cfg1 0xf cfg2 0x7214
eth1: c4:04:15:8d:dc:64
s27 reg init lan 
ATHRS27: resetting s27
ATHRS27: s27 reset done
athrs27_phy_setup ATHR_PHY_CONTROL 0 :1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 0 :10
athrs27_phy_setup ATHR_PHY_CONTROL 1 :1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 1 :10
athrs27_phy_setup ATHR_PHY_CONTROL 2 :1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 2 :10
athrs27_phy_setup ATHR_PHY_CONTROL 3 :1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 3 :10
eth1 up
eth0, eth1
Hit any key to stop autoboot:  0
ar7240&gt; help
?       - alias for &#039;help&#039;
autoscr - run script from memory
base    - print or set address offset
bdinfo  - print Board Info structure
board_hw_id_set         - set board_hw_id
board_hw_id_show        - Show board_hw_id
board_model_id_set      - set board_model_id
board_model_id_show     - Show board_model_id
board_passphrase_set    - set passphrase on board
board_passphrase_show   - Show board_passphrase
board_ssid_set  - set ssid on board
board_ssid_show         - Show board_ssid
boot    - boot default, i.e., run &#039;bootcmd&#039;
bootd   - boot default, i.e., run &#039;bootcmd&#039;
bootm   - boot application image from memory
bootp   - boot image via network using BootP/TFTP protocol
cmp     - memory compare
coninfo - print console devices and information
cp      - memory copy
crc32   - checksum calculation
dhcp    - invoke DHCP client to obtain IP/boot params
echo    - echo args to console
erase   - erase FLASH memory
ethreg    - S26 PHY Reg rd/wr  utility
exit    - exit script
flinfo  - print FLASH memory information
fw_recovery - start tftp server to recovery dni firmware image.
go      - start application at address &#039;addr&#039;
help    - print online help
iminfo  - print header information for application image
imls    - list all images found in flash
itest   - return true/false on integer compare
loop    - infinite loop on address range
macset - Set ethernet MAC address
macshow - Show ethernet MAC addresses
md      - memory display
mii     - MII utility commands
mm      - memory modify (auto-incrementing)
mtest   - simple RAM test
mw      - memory write (fill)
nm      - memory modify (constant address)
nmrp - start nmrp mechanism to upgrade firmware-image or string-table.
nor_fw_integrity_check - verify firmware checksum in NOR
nor_two_part_fw_integrity_check - verify firmware checksum in NOR
pci     - list and access PCI Configuration Space
ping    - send ICMP ECHO_REQUEST to network host
pll cpu-pll dither ddr-pll dither - Set to change CPU &amp; DDR speed
pll erase
pll get
printenv- print environment variables
progmac - Set ethernet MAC addresses
protect - enable or disable FLASH write protection
rarpboot- boot image via network using RARP/TFTP protocol
reset   - Perform RESET of the CPU
rnset   - set region number
rnshow  - Show Region Number on Board
run     - run commands in an environment variable
saveenv - save environment variables to persistent storage
setenv  - set environment variables
sleep   - delay execution for some time
snset   - set serial number
sntp    - synchronize RTC via network
srifpll cpu-pll ddr-pll - To change CPU &amp; DDR speed through srif
srifpll erase
srifpll get
test    - minimal test like /bin/sh
tftpboot- boot image via network using TFTP protocol
version - print monitor version
wmacset - Set wlan MAC address
wpspinset - set wpspin number
ar7240&gt; printenv
bootargs=console=ttyS0,115200 root=31:02 rootfstype=jffs2 init=/sbin/init mtdparts=ath-nor0:256k(u-boot),64k(u-boot-env),6336k(rootfs),1408k(uIma)
bootcmd=sleep 1; nmrp; nor_two_part_fw_integrity_check 0x9f040000; bootm 0x9f040000
bootdelay=1
baudrate=115200
ethaddr=0x00:0xaa:0xbb:0xcc:0xdd:0xee
ipaddr=192.168.1.1
serverip=192.168.1.10
dir=
lu=tftp 0x80060000 ${dir}u-boot.bin&amp;&amp;erase 0x9f000000 +$filesize;cp.b $fileaddr 0x9f000000 $filesize
lf=tftp 0x80060000 ${dir}db12x${bc}-jffs2&amp;&amp;erase 0x9f050000 +0x630000;cp.b $fileaddr 0x9f050000 $filesize
lk=tftp 0x80060000 ${dir}vmlinux${bc}.lzma.uImage&amp;&amp;erase 0x9f680000 +$filesize;cp.b $fileaddr 0x9f680000 $filesize
stdin=serial
stdout=serial
stderr=serial
ethact=eth0</pre>

<p>
 Environment size: 739/65532 bytes
</p>

<p>
Installing OpenWrt onto a RAMdisk on WNR2000v1
</p>

<p>
The original U-Boot bootloader runs a CRC check on the flash before it executes the bootcmd command.
This prevents OpenWrt from being run from flash.
As long as you do not replace the OEM bootloader, you can only create an OpenWrt ramdisk image and load it via tftp.
This requires access to the serial console which you can get by doing the following:
</p>
<pre class="code">  configure the NIC of a PC with a tftp server at 192.168.1.12
  copy openwrt-ar71xx-uImage-initramfs-lzma.bin into the directory of the tftp server (e.g. /tftpboot)</pre>

<p>
On the WNR2000v4 serial console:
</p>
<pre class="code">  press any key after Hit any key to stop autoboot: to stop autoboot
  tftpboot 0x81000000 openwrt-ar71xx-uImage-initramfs-lzma.bin - this should print a couple of # signs
  setenv bootargs board=WNR2000v4
  bootm - boots the kernel</pre>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>toh/netgear/wnr2000v4.txt</bdi> · Last modified: 2015/05/17 02:53 by <bdi>Umeaboy</bdi></div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="wnr2000v4?do=edit"  class="action source" accesskey="v" rel="nofollow" title="Show pagesource [V]"><span>Show pagesource</span></a></li><li><a href="wnr2000v4?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="wnr2000v4?do=backlink"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="wnr2000v4#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license" class="urlextern">CC Attribution-Noncommercial-Share Alike 3.0 Unported</a></bdi></div>
    <div class="buttons">
        <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license"><img src="../../lib/images/license/button/cc-by-nc-sa.png" alt="CC Attribution-Noncommercial-Share Alike 3.0 Unported" /></a>        <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="../../lib/tpl/openwrt/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://www.php.net" title="Powered by PHP" ><img
            src="../../lib/tpl/openwrt/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="../../lib/tpl/openwrt/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="../../lib/tpl/openwrt/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="../../lib/tpl/openwrt/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="../../lib/exe/indexer.php?id=toh%253Anetgear%253Awnr2000v4&amp;1432278951" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->
</body>
</html>
