<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>Huawei EchoLife HG556a [OpenWrt Wiki]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="bcm63xx,bcm6358,fastethernet,4port,hwvlan,3usb,ath9k,802.11bgn,nondetachableantenna,2ant,64ram,16flash,mips,mips32"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../lib/exe/opensearch.php" title="OpenWrt Wiki"/>
<link rel="start" href="../../index.html"/>
<link rel="contents" href="hg556a?do=index" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Recent changes" href="../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="../../feed.php?mode=list&amp;ns=toh:huawei"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="../../_export/xhtml/toh/huawei/hg556a"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="../../_export/raw/toh/huawei/hg556a"/>
<link rel="canonical" href="hg556a"/>
<link rel="stylesheet" type="text/css" href="../../lib/exe/css.php?t=openwrt&amp;tseed=6f44f363dc87908d905dc56ff3acbfc4"/>
<script type="text/javascript">/*<![CDATA[*/var NS='toh:huawei';var JSINFO = {"id":"toh:huawei:hg556a","namespace":"toh:huawei"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../lib/exe/js.php?tseed=6f44f363dc87908d905dc56ff3acbfc4"></script>
<script type="text/javascript" charset="utf-8">/*<![CDATA[*/jQuery(function(){
	for ( i=0; i < document.forms.length; i++ ) {
		if (document.forms[i].method == 'post') {
			var myElement = document.createElement('input');
			myElement.setAttribute('type', 'hidden');
			myElement.name = 'bb2_screener_';
			myElement.value = '1432266278 166.182.3.99';
			document.forms[i].appendChild(myElement);
		}
	}
});
/*!]]>*/</script>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="../../lib/tpl/openwrt/images/favicon.ico" />
<link rel="apple-touch-icon" href="../../lib/tpl/openwrt/images/apple-touch-icon.png" />
    </head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_openwrt     ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="hg556a#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="../../start"  accesskey="h" title="[H]"><img src="../../lib/tpl/openwrt/images/logo.png" width="386" height="98" alt="" /> <span>OpenWrt Wiki</span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="hg556a?do=register"  class="action register" rel="nofollow" title="Register">Register</a></li><li><a href="hg556a?do=login&amp;sectok=382740b13d95f946eed36caa57076b4a"  class="action login" rel="nofollow" title="Login">Login</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="../../start" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="../../doku.php" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="toh:huawei:hg556a" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Show pagesource</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Login</option><option value="register">Register</option></optgroup></select><input type="submit" value="&gt;" /></div></form>            </div>
            <ul>
                <li><a href="hg556a?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a></li><li><a href="hg556a?do=media&amp;ns=toh%253Ahuawei"  class="action media" rel="nofollow" title="Media Manager">Media Manager</a></li><li><a href="hg556a?do=index"  class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                            <div class="youarehere"><span class="bchead">You are here: </span><span class="home"><bdi><a href="../../start" class="wikilink1" title="start">OpenWrt Wiki</a></bdi></span> » <bdi><a href="../start" class="wikilink1" title="toh:start">Table of Hardware</a></bdi> » <bdi><a href="start" class="wikilink1" title="toh:huawei:start">Huawei</a></bdi> » <bdi><span class="curid"><a href="hg556a" class="wikilink1" title="toh:huawei:hg556a">Huawei EchoLife HG556a</a></span></bdi></div>
                                    <div class="plugin_multilingual">
        <ul>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/cz/toh/huawei/hg556a" class="media" title="cz:toh:huawei:hg556a"><img src="../../lib/exe/fetch.php?cache=&amp;tok=aff589&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fcz.gif" class="media" title="Čeština (Czech)" alt="Čeština (Czech)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/de/toh/huawei/hg556a" class="media" title="de:toh:huawei:hg556a"><img src="../../lib/exe/fetch.php?cache=&amp;tok=e24010&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fde.gif" class="media" title="Deutsch (German)" alt="Deutsch (German)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <span class="curid"><a href="hg556a" class="media" title="toh:huawei:hg556a"><img src="../../lib/exe/fetch.php?cache=&amp;tok=2a37ae&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fgb.gif" class="media" title="English" alt="English" /></a></span>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/es/toh/huawei/hg556a" class="media" title="es:toh:huawei:hg556a"><img src="../../lib/exe/fetch.php?cache=&amp;tok=46c004&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fmx.gif" class="media" title="Español (Spanish, Mexico)" alt="Español (Spanish, Mexico)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/fr/toh/huawei/hg556a" class="media" title="fr:toh:huawei:hg556a"><img src="../../lib/exe/fetch.php?cache=&amp;tok=a5beba&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ffr.gif" class="media" title="Français (French)" alt="Français (French)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/hu/toh/huawei/hg556a" class="media" title="hu:toh:huawei:hg556a"><img src="../../lib/exe/fetch.php?cache=&amp;tok=6b5470&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fhu.gif" class="media" title="Magyar (Hungarian)" alt="Magyar (Hungarian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/jp/toh/huawei/hg556a" class="media" title="jp:toh:huawei:hg556a"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f999fc&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fjp.gif" class="media" title="日本語 (Japanese)" alt="日本語 (Japanese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pl/toh/huawei/hg556a" class="media" title="pl:toh:huawei:hg556a"><img src="../../lib/exe/fetch.php?cache=&amp;tok=c805c0&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fpl.gif" class="media" title="Poliski (Polish)" alt="Poliski (Polish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pt-br/toh/huawei/hg556a" class="media" title="pt-br:toh:huawei:hg556a"><img src="../../lib/exe/fetch.php?cache=&amp;tok=13127d&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fbr.gif" class="media" title="Português brasileiro (Portuguese, Brasil)" alt="Português brasileiro (Portuguese, Brasil)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/ru/toh/huawei/hg556a" class="media" title="ru:toh:huawei:hg556a"><img src="../../lib/exe/fetch.php?cache=&amp;tok=66ab5e&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fru.gif" class="media" title="Русский (Russsian)" alt="Русский (Russsian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/tr/toh/huawei/hg556a" class="media" title="tr:toh:huawei:hg556a"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f4beed&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ftr.gif" class="media" title="Tϋrkçe (Turkish)" alt="Tϋrkçe (Turkish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-cn/toh/huawei/hg556a" class="media" title="zh-cn:toh:huawei:hg556a"><img src="../../lib/exe/fetch.php?cache=&amp;tok=93625a&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-cn.gif" class="media" title="官話/官话 (Chinese)" alt="官話/官话 (Chinese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-tw/toh/huawei/hg556a" class="media" title="zh-tw:toh:huawei:hg556a"><img src="../../lib/exe/fetch.php?cache=&amp;tok=b56198&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-tw.gif" class="media" title="臺灣華語 (Taiwanese)" alt="臺灣華語 (Taiwanese)" /></a>
              </div>
            </div>
          </li>
        </ul>
      </div>
        </div>
    
    
    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>toh:huawei:hg556a</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="hg556a#supported_versions">Supported Versions</a></div></li>
<li class="level1"><div class="li"><a href="hg556a#hardware_highlights">Hardware Highlights</a></div></li>
<li class="level1"><div class="li"><a href="hg556a#installation">Installation</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="hg556a#flash_layout">Flash Layout</a></div></li>
<li class="level2"><div class="li"><a href="hg556a#oem_easy_installation">OEM easy installation</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="hg556a#get_the_firmware">Get the firmware</a></div></li>
<li class="level3"><div class="li"><a href="hg556a#installation1">Installation</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="hg556a#oem_installation_using_the_tftp_method">OEM installation using the TFTP method</a></div></li>
<li class="level2"><div class="li"><a href="hg556a#upgrading_openwrt">Upgrading OpenWrt</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="hg556a#luci_web_upgrade_process">LuCI Web Upgrade Process</a></div></li>
<li class="level3"><div class="li"><a href="hg556a#terminal_upgrade_process">Terminal Upgrade Process</a></div></li>
<li class="level3"><div class="li"><a href="hg556a#cfe_upgrade_process">CFE Upgrade Process</a></div></li>
<li class="level3"><div class="li"><a href="hg556a#cleaning_old_garbage">Cleaning old garbage</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="hg556a#original_firmware">Original firmware</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="hg556a#basic_configuration">Basic configuration</a></div></li>
<li class="level1"><div class="li"><a href="hg556a#specific_configuration">Specific Configuration</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="hg556a#interfaces">Interfaces</a></div></li>
<li class="level2"><div class="li"><a href="hg556a#basic_internet_configuration">Basic internet configuration</a></div></li>
<li class="level2"><div class="li"><a href="hg556a#switch_ports_for_vlans">Switch Ports (for VLANs)</a></div></li>
<li class="level2"><div class="li"><a href="hg556a#main_core">Main Core</a></div></li>
<li class="level2"><div class="li"><a href="hg556a#failsafe_mode">Failsafe mode</a></div></li>
<li class="level2"><div class="li"><a href="hg556a#buttons">Buttons</a></div></li>
<li class="level2"><div class="li"><a href="hg556a#leds">Leds</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="hg556a#hardware">Hardware</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="hg556a#info">Info</a></div></li>
<li class="level2"><div class="li"><a href="hg556a#photos">Photos</a></div></li>
<li class="level2"><div class="li"><a href="hg556a#opening_the_case">Opening the case</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="hg556a#photo_of_pcb">Photo of PCB</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="hg556a#serial">Serial</a></div></li>
<li class="level2"><div class="li"><a href="hg556a#jtag">JTAG</a></div></li>
<li class="level2"><div class="li"><a href="hg556a#spi">SPI</a></div></li>
<li class="level2"><div class="li"><a href="hg556a#voip">VoIP</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="hg556a#debricking">Debricking</a></div></li>
<li class="level1"><div class="li"><a href="hg556a#cfe_bootloader">CFE Bootloader</a></div></li>
<li class="level1"><div class="li"><a href="hg556a#hardware_mods">Hardware mods</a></div></li>
<li class="level1"><div class="li"><a href="hg556a#firmware_mods">Firmware mods</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="hg556a#backports">Backports</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="hg556a#bootlogs">BOOTLOGS</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="hg556a#oem_bootlog">OEM bootlog:</a></div></li>
<li class="level2"><div class="li"><a href="hg556a#openwrt_bootlog">Openwrt bootlog:</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="hg556a#notes">Notes</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="hg556a#cal_data">cal_data</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="hg556a#tags">Tags</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="huawei_echolife_hg556a">Huawei EchoLife HG556a</h1>
<div class="level1">

<p>
Supported since <a href="https://dev.openwrt.org/changeset/35011" class="urlextern" title="https://dev.openwrt.org/changeset/35011"  rel="nofollow">R35011</a>.
</p>

<p>
The HG556A is an adsl wifi router mainly distributed by Vodafone to their customers.
</p>

<p>
<img src="../../lib/images/smileys/icon_exclaim.gif" class="icon" alt=":!:" /> It&#039;s a good idea to backup the <a href="hg556a#cal_data" title="toh:huawei:hg556a ↵" class="wikilink1">cal_data</a> area at the flash-chip. The WLAN calibration data is specific for your device.  If you wipe it accidentally it will be difficult to restore, it cannot be restored by flashing back a vendor firmware.
</p>

</div>

<h2 class="sectionedit2" id="supported_versions">Supported Versions</h2>
<div class="level2">
<div class="table sectionedit3"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Board model </th><th class="col1"> Wifi chip </th><th class="col2"> Vdf Version * </th><th class="col3"> Serial number (first 5 digits) </th><th class="col4 centeralign">  OpenWrt file (≥CC)  </th><th class="col5">Flash chip erasesize ** </th><th class="col6"> cal_data offset </th><th class="col7"> Supported </th><th class="col8"> Notes </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0" rowspan="2"> <strong>HG55VDFA VER.C</strong> </td><td class="col1" rowspan="2"> Atheros AR9223 </td><td class="col2 centeralign">  HG556<strong><span style='color:crimson; '>A</span></strong>VDFA  </td><td class="col3"> 30462, 30562, 30605, 30608 </td><td class="col4 centeralign">  <strong>A</strong>  </td><td class="col5 leftalign"> 0x10000  </td><td class="col6"> 0xf7e000 </td><td class="col7 leftalign" rowspan="2"> <strong>Yes</strong>  </td><td class="col8 leftalign" rowspan="3"><span style='color:crimson; '>ADSL not supported<br/>
VoiP not supported </span>  </td>
	</tr>
	<tr class="row2">
		<td class="col0 centeralign">  HG556<strong><span style='color:crimson; '>B</span></strong>VDFA  </td><td class="col1"> 30634, 30692, 30693, 31110, 31300 </td><td class="col2 centeralign">  <strong>B</strong>  </td><td class="col3 leftalign"> 0x20000  </td><td class="col4"> 0xefe000 </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <strong>HG56BZRB VER.A</strong>  </td><td class="col1"> Ralink RT3062F </td><td class="col2 centeralign">  HG556<strong><span style='color:crimson; '>C</span></strong>VDFA  </td><td class="col3"> 30695, 30694, 31301, 31507, 30555, 31525, 31935, 31901, 31902 </td><td class="col4 centeralign">  <strong>C</strong>  </td><td class="col5 leftalign"> 0x20000  </td><td class="col6"> 0xeffe00 </td><td class="col7 leftalign"> <strong>Yes</strong>  </td>
	</tr>
</table></div>

<p>
*)You can check the version from the OEM firmware executing the command: <em>hwversion show</em>
</p>

<p>
**)You can check the flash memory chip erasesize with the command (in openwrt): <em>cat /proc/mtd</em>
</p>
<ul>
<li class="level1"><div class="li"> 0x20000 = 128 KiB </div>
</li>
<li class="level1"><div class="li"> 0x10000 = 64 KiB</div>
</li>
</ul>
<div class="wrap_center wrap_round wrap_info plugin_wrap" style="width: 60%;">
<p>
The important parameters for choosing the correct OpenWrt file firmware are the flash chip <strong>erasesize</strong>, and <strong>cal_data offset</strong>
</p>
</div>
</div>

<h2 class="sectionedit6" id="hardware_highlights">Hardware Highlights</h2>
<div class="level2">
<div class="table sectionedit7"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> SoC </th><th class="col1"> Ram </th><th class="col2"> Flash </th><th class="col3"> Network </th><th class="col4"> USB </th><th class="col5"> Serial </th><th class="col6"> JTag </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> Broadcom 6358 </td><td class="col1"> 64MiB </td><td class="col2"> 16MiB </td><td class="col3"> 4 x 1</td><td class="col4"> Yes </td><td class="col5"> Yes </td><td class="col6"> Yes </td>
	</tr>
</table></div>

</div>

<h2 class="sectionedit8" id="installation">Installation</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> → <a href="../../doc/howto/obtain.firmware" class="wikilink1" title="doc:howto:obtain.firmware">obtain.firmware</a></div>
</li>
<li class="level1"><div class="li"> → <a href="../../doc/howto/installing" class="wikilink1" title="doc:howto:generic.flashing">Install OpenWrt</a></div>
</li>
</ol>

</div>

<h3 class="sectionedit9" id="flash_layout">Flash Layout</h3>
<div class="level3">

<p>
Please check out the article <a href="../../doc/techref/flash.layout" class="wikilink1" title="doc:techref:flash.layout">Flash.Layout</a>. It contains an example and a couple of explanations.
</p>
<div class="table sectionedit10"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> partition </th><th class="col1"> name </th><th class="col2"> filesystem </th><th class="col3"> description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> mtd0 </td><td class="col1"> <strong>CFE</strong> </td><td class="col2"> n/a </td><td class="col3"> bootloader </td>
	</tr>
	<tr class="row2">
		<td class="col0"> n/a </td><td class="col1"> n/a </td><td class="col2"> n/a </td><td class="col3"> firmware tag </td>
	</tr>
	<tr class="row3">
		<td class="col0"> mtd1 </td><td class="col1"> <strong>kernel</strong> </td><td class="col2"> RAM executable </td><td class="col3"> kernel </td>
	</tr>
	<tr class="row4">
		<td class="col0"> mtd2 </td><td class="col1"> <strong>rootfs</strong> </td><td class="col2"> squashfs </td><td class="col3"> root </td>
	</tr>
	<tr class="row5">
		<td class="col0"> mtd3 </td><td class="col1"> <strong>rootfs_data</strong> </td><td class="col2"> jffs2 </td><td class="col3"> configuration, install new packages </td>
	</tr>
	<tr class="row6">
		<td class="col0"> mtd4 </td><td class="col1"> <strong>cal_data</strong> </td><td class="col2"> n/a </td><td class="col3"> wifi calibration data </td>
	</tr>
	<tr class="row7">
		<td class="col0"> mtd5 </td><td class="col1"> <strong>nvram</strong> </td><td class="col2"> n/a </td><td class="col3"> OEM configuration data </td>
	</tr>
	<tr class="row8">
		<td class="col0"> mtd6 </td><td class="col1"> <strong>linux</strong> </td><td class="col2"> n/a </td><td class="col3"> OpenWrt upgrade </td>
	</tr>
</table></div>

</div>

<h3 class="sectionedit11" id="oem_easy_installation">OEM easy installation</h3>
<div class="level3">

<p>
This section deals with how you install OpenWrt from the device freshly opened. 
</p>

</div>

<h4 id="get_the_firmware">Get the firmware</h4>
<div class="level4">
<div class="table sectionedit12"><table class="inline">
	<tr class="row0">
		<td class="col0"> <strong>Version</strong> </td><td class="col1"> Release date </td><td class="col2"> <strong>firmware link</strong> </td><td class="col3"> <strong>Notes</strong> </td>
	</tr>
	<tr class="row1">
		<td class="col0"> <strong>Trunk</strong> (unstable) </td><td class="col1"> continuously </td><td class="col2"> <a href="https://downloads.openwrt.org/snapshots/trunk/brcm63xx/generic/openwrt-HG556a_A-squashfs-cfe.bin" class="urlextern" title="https://downloads.openwrt.org/snapshots/trunk/brcm63xx/generic/openwrt-HG556a_A-squashfs-cfe.bin"  rel="nofollow">openwrt-HG556a_A-squashfs-cfe.bin</a><br/>
<a href="https://downloads.openwrt.org/snapshots/trunk/brcm63xx/generic/openwrt-HG556a_B-squashfs-cfe.bin" class="urlextern" title="https://downloads.openwrt.org/snapshots/trunk/brcm63xx/generic/openwrt-HG556a_B-squashfs-cfe.bin"  rel="nofollow">openwrt-HG556a_B-squashfs-cfe.bin</a><br/>
<a href="https://downloads.openwrt.org/snapshots/trunk/brcm63xx/generic/openwrt-HG556a_C-squashfs-cfe.bin" class="urlextern" title="https://downloads.openwrt.org/snapshots/trunk/brcm63xx/generic/openwrt-HG556a_C-squashfs-cfe.bin"  rel="nofollow">openwrt-HG556a_C-squashfs-cfe.bin</a> </td><td class="col3"> See <a href="hg556a#supported_versions" title="toh:huawei:hg556a ↵" class="wikilink1">supported versions</a>. USB and wireless drivers <strong>NOT</strong> included. LuCI web interface <strong>NOT</strong> included.<br/>
Development version ↔ BUGS, updates </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <strong>Barrier Breaker</strong> </td><td class="col1"> 2014-10-02 </td><td class="col2"> <a href="https://downloads.openwrt.org/barrier_breaker/14.07/brcm63xx/generic/openwrt-HW556-squashfs-cfe.bin" class="urlextern" title="https://downloads.openwrt.org/barrier_breaker/14.07/brcm63xx/generic/openwrt-HW556-squashfs-cfe.bin"  rel="nofollow">openwrt-HW556-squashfs-cfe.bin</a> </td><td class="col3"> All versions, LuCI included, USB and wireless drivers <strong>NOT</strong> included </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <strong>Attitude Adjustment</strong> </td><td class="col1"> 2013-04-25 </td><td class="col2"> <a href="https://docs.google.com/uc?export=download&amp;id=0B-EMoBe-_OdBdU5VTHc5Q2o2aEU" class="urlextern" title="https://docs.google.com/uc?export=download&amp;id=0B-EMoBe-_OdBdU5VTHc5Q2o2aEU"  rel="nofollow">hg556a_backport_12.09.zip</a> </td><td class="col3"> all versions, unofficial backport, LuCI included, USB and wireless drivers included </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <strong>Backfire</strong> </td><td class="col1"> 2011-12-21 </td><td class="col2"> <a href="https://docs.google.com/uc?export=download&amp;id=0B-EMoBe-_OdBSGRHSjlDb3pjOWM" class="urlextern" title="https://docs.google.com/uc?export=download&amp;id=0B-EMoBe-_OdBSGRHSjlDb3pjOWM"  rel="nofollow">hg556a_ath_backport_10.03.1.zip</a> </td><td class="col3"> only <strong>VER.C</strong> boards, unofficial backport, USB and wireless drivers included </td>
	</tr>
</table></div>

</div>

<h4 id="installation1">Installation</h4>
<div class="level4">

<p>
With this procedure you will flash the firmware using the <a href="../../doc/techref/bootloader.1" class="wikilink1" title="doc:techref:bootloader">bootloader</a> web interface (foolproof)
</p>
<ul>
<li class="level1"><div class="li">Set a <strong>static IP</strong> on your computer, use 192.168.1.35 (or any compatible), and connect the ethernet cable to the router.</div>
</li>
<li class="level1"><div class="li">Unplug the router&#039;s power cord</div>
</li>
<li class="level1"><div class="li">Press the button labeled as <em>RESTART</em>, don&#039;t release it yet!</div>
</li>
<li class="level1"><div class="li">Plug the power cord</div>
</li>
<li class="level1"><div class="li">Wait 12 seconds or more</div>
</li>
<li class="level1"><div class="li">Release the <em>RESTART</em> button</div>
</li>
<li class="level1"><div class="li">Browse to <a href="http://192.168.1.1" class="urlextern" title="http://192.168.1.1"  rel="nofollow">http://192.168.1.1</a> and you should see this screen: <a href="../../_detail/media/doc/cfe63xx_web-upgrade.png?id=toh%253Ahuawei%253Ahg556a" class="media" title="media:doc:cfe63xx_web-upgrade.png"><img src="../../_media/media/doc/cfe63xx_web-upgrade.png?w=150&amp;tok=c92a35" class="media" alt="" width="150" /></a></div>
</li>
<li class="level1"><div class="li">Select .bin firmware</div>
</li>
<li class="level1"><div class="li">Press <em>Update Software</em> to start the firmware update process</div>
</li>
<li class="level1"><div class="li">Wait for it to reboot</div>
</li>
<li class="level1"><div class="li">Telnet to 192.168.1.1 and set a root password, or browse to <a href="http://192.168.1.1" class="urlextern" title="http://192.168.1.1"  rel="nofollow">http://192.168.1.1</a> if LuCI is installed.</div>
</li>
</ul>

</div>

<h3 class="sectionedit13" id="oem_installation_using_the_tftp_method">OEM installation using the TFTP method</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Connect the <a href="hg556a#serial" title="toh:huawei:hg556a ↵" class="wikilink1">serial</a> TTL cable to send commands to CFE for loading the firmware via tftp.</div>
</li>
<li class="level1"><div class="li"> Start a TFTP server in your PC. Copy the <em><strong>openwrt-HW556-squashfs-cfe.bin</strong></em> firmware to the server.</div>
</li>
<li class="level1"><div class="li"> Set the IP at your pc to 192.168.1.35 (or any compatible), and connect the ethernet cable to the router.</div>
</li>
</ul>

<p>
This is a session of flashing via TFTP:
</p>

<p style="padding: 10px;border:1px solid grey;height:350px;font:11px/12px Georgia, Garamond, Serif;overflow:Auto;background-color:#DEE4E7">
<code>CFE> f 192.168.1.35:openwrt-HW556-squashfs-cfe.bin
Loading 192.168.1.35:openwrt-HW556-squashfs-cfe.bin ...

Finished loading 2883588 bytes


Flashing root file system and kernel at 0xbe020000: 
 ~~~~~~~Flag: 3 

baseAddr 0xbe000000 

kernelAddr 0xbe020100 

rootfsAddr 0xbe020100 

tagFs 0x80800000 


.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.


.

Backup flag . 

 ~~~~~~~Flag: 1 

.
*** Image flash done *** !
Resetting board...

</code>
</p>
<div class="wrap_center wrap_round wrap_info plugin_wrap" style="width: 60%;">
<p>
Firmwares &gt; 8MB size return an error about CRC check:<br/>

<code> Finished loading 8388608 bytes
 Illegal image ! Image crc failed.</code><br/>

CFE web interface should be used in this case.
</p>
</div>
</div>

<h3 class="sectionedit16" id="upgrading_openwrt">Upgrading OpenWrt</h3>
<div class="level3">

<p>
→  <a href="../../doc/howto/generic.sysupgrade" class="wikilink1" title="doc:howto:generic.sysupgrade">generic.sysupgrade</a>
</p>

<p>
If you have already installed OpenWrt and like to reflash for e.g. upgrading to a new OpenWrt version you can upgrade using the mtd command line tool. It is important that you put the firmware image into the ramdisk (/tmp) before you start flashing.
</p>

</div>

<h4 id="luci_web_upgrade_process">LuCI Web Upgrade Process</h4>
<div class="level4">
<ul>
<li class="level1"><div class="li"> Browse to <a href="http://192.168.1.1/cgi-bin/luci/mini/system/upgrade/" class="urlextern" title="http://192.168.1.1/cgi-bin/luci/mini/system/upgrade/"  rel="nofollow">http://192.168.1.1/cgi-bin/luci/mini/system/upgrade/</a> LuCI Upgrade <abbr title="Uniform Resource Locator">URL</abbr></div>
</li>
<li class="level1"><div class="li"> Upload image file for sysupgrade to LuCI</div>
</li>
<li class="level1"><div class="li"> Wait for reboot</div>
</li>
</ul>

</div>

<h4 id="terminal_upgrade_process">Terminal Upgrade Process</h4>
<div class="level4">
<ul>
<li class="level1"><div class="li"> Login as root via SSH on 192.168.1.1</div>
</li>
<li class="level1"><div class="li"> Use the following commands to upgrade.</div>
</li>
</ul>

<p>
<pre class="code">cd /tmp/
wget http://downloads.openwrt.org/snapshots/trunk/brcm63xx/openwrt-HW556-squashfs-cfe.bin
sysupgrade /tmp/openwrt-HW556-squashfs-cfe.bin</pre>

</p>
<ul>
<li class="level1"><div class="li">If sysupgrade does not support this router, use the following commands.</div>
</li>
</ul>

<p>
<pre class="code">cd /tmp/
wget http://downloads.openwrt.org/snapshots/trunk/brcm63xx/openwrt-HW556-squashfs-cfe.bin
mtd write /tmp/openwrt-HW556-squashfs-cfe.bin linux &amp;&amp; reboot</pre>

</p>

</div>

<h4 id="cfe_upgrade_process">CFE Upgrade Process</h4>
<div class="level4">

<p>
This is a clean and safe upgrade, using the booloader web interface. Just use the <a href="hg556a#oem_easy_installation" title="toh:huawei:hg556a ↵" class="wikilink1">OEM installation</a> procedure.
</p>

</div>

<h4 id="cleaning_old_garbage">Cleaning old garbage</h4>
<div class="level4">
<div class="wrap_left wrap_round wrap_important plugin_wrap">
<p>
If after upgrading OpenWrt you get the message: <pre class="code">jffs2: Cowardly refusing to erase blocks on filesystem with no valid JFFS2 nodes </pre>
 And you can&#039;t save changes. Or you are unsure if old data is messing your new firmware. Enter OpenWrt <a href="hg556a#failsafe_mode" title="toh:huawei:hg556a ↵" class="wikilink1">failsafe</a> mode if needed. Then execute this command:<br/>
<pre class="code">mtd erase -r rootfs_data</pre>

</p>
</div>
</div>

<h3 class="sectionedit19" id="original_firmware">Original firmware</h3>
<div class="level3">

<p>
These are the default administrator passwords in the OEM firmware
</p>
<div class="table sectionedit20"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Firmware </th><th class="col1"> user </th><th class="col2"> password </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> new firmwares </td><td class="col1"> advanced </td><td class="col2"> advanced </td>
	</tr>
	<tr class="row2">
		<td class="col0"> all </td><td class="col1"> emtest </td><td class="col2"> zbbtest </td>
	</tr>
	<tr class="row3">
		<td class="col0"> spanish versions </td><td class="col1"> admin </td><td class="col2"> VF-EShg556 </td>
	</tr>
	<tr class="row4">
		<td class="col0"> irish versions </td><td class="col1"> admin </td><td class="col2"> VF-IRhg556 </td>
	</tr>
	<tr class="row5">
		<td class="col0"> kiwi versions </td><td class="col1"> admin </td><td class="col2"> VF-NZhg556 </td>
	</tr>
</table></div>

<p>
If you want back to the OEM firmware, once you installed OpenWrt, you can use the OpenWrt Luci web interface for flashing it as a regular firmware.
</p>

</div>

<h2 class="sectionedit21" id="basic_configuration">Basic configuration</h2>
<div class="level2">

<p>
→ <a href="../../doc/howto/configuration" class="wikilink1" title="doc:howto:basic.config">Basic configuration</a> After flashing, proceed with this.<br/>

Set up your Internet connection, configure wireless, configure USB port, etc.
</p>

<p>
As default some firmware versions doesn&#039;t include wireless drivers. For installing these drivers first give OpenWrt internet access (see <a href="hg556a#basic_internet_configuration" title="toh:huawei:hg556a ↵" class="wikilink1">Basic_internet_configuration</a> or <a href="hg556a#switch_ports_for_vlans" title="toh:huawei:hg556a ↵" class="wikilink1">switch_ports_for_vlans</a>) and execute:
</p>
<ul>
<li class="level1"><div class="li"> if your router has an Atheros wifi chip: <pre class="code">opkg update
opkg install kmod-ath9k</pre>
</div>
</li>
<li class="level1"><div class="li"> or, if your router version has a Ralink wifi chip <pre class="code">opkg update
opkg install kmod-rt2800-pci</pre>
</div>
</li>
<li class="level1"><div class="li"> you may also want to install USB drivers<pre class="code">opkg install kmod-usb-ohci kmod-usb2</pre>
</div>
</li>
<li class="level1"><div class="li"> If you are using a trunk version, you may want to install luci: <pre class="code">opkg install luci
/etc/init.d/uhttpd enable</pre>
</div>
</li>
</ul>

</div>

<h2 class="sectionedit22" id="specific_configuration">Specific Configuration</h2>
<div class="level2">

</div>

<h3 class="sectionedit23" id="interfaces">Interfaces</h3>
<div class="level3">

<p>
The default network configuration is:
</p>
<div class="table sectionedit24"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Interface Name </th><th class="col1"> Description </th><th class="col2"> Default configuration </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> br-lan </td><td class="col1"> <abbr title="Local Area Network">LAN</abbr> &amp; WiFi </td><td class="col2"> 192.168.1.1/24 </td>
	</tr>
	<tr class="row2">
		<td class="col0"> eth0 </td><td class="col1"> <abbr title="Local Area Network">LAN</abbr> ports (1 to 4) </td><td class="col2"> bridged </td>
	</tr>
	<tr class="row3">
		<td class="col0"> wlan0 </td><td class="col1"> WiFi </td><td class="col2"> bridged (disabled) </td>
	</tr>
</table></div>

</div>

<h3 class="sectionedit25" id="basic_internet_configuration">Basic internet configuration</h3>
<div class="level3">

<p>
You can set a basic internet configuration with uci commands. Assuming your main router (gateway) has the IP 192.168.1.1 (the most common). Follow these steps.
</p>
<ol>
<li class="level1"><div class="li"> Connect only the ethernet cable from the HG556a to your computer, and telnet it or ssh.</div>
</li>
<li class="level1"><div class="li"> Execute these commands <pre class="code">uci set network.lan.ipaddr=192.168.1.254
uci set network.lan.netmask=255.255.255.0
uci set network.lan.gateway=192.168.1.1
uci set network.lan.dns=&#039;8.8.8.8 192.168.1.1&#039;
uci commit network</pre>
</div>
</li>
<li class="level1"><div class="li"> You may also need to disable the dhcp server <pre class="code">/etc/init.d/dnsmasq disable</pre>
</div>
</li>
<li class="level1"><div class="li"> Reboot the HG556a and connect the ethernet cable to the main router (gateway).</div>
</li>
<li class="level1"><div class="li"> Now the HG556a IP is 192.168.254, telnet or ssh it.</div>
</li>
<li class="level1"><div class="li"> Ping any internet address, or install a package <pre class="code">opkg update
opkg install luci</pre>
</div>
</li>
</ol>

</div>

<h3 class="sectionedit26" id="switch_ports_for_vlans">Switch Ports (for VLANs)</h3>
<div class="level3">

<p>
This is an example to configure the switch: numbers 0-2 will be lan, labeled as Ports 1-3 on the unit, number 3 (LAN4) will be the Internet (WAN), 5 is the internal connection to the router itself. Don&#039;t be fooled: vlan0 = eth0.0, vlan1 = eth0.1 and so on.
</p>
<div class="table sectionedit27"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Port label</th><th class="col1"> Switch port </th><th class="col2"> Mode </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 centeralign">  LAN1  </td><td class="col1 centeralign">  0  </td><td class="col2"> lan </td>
	</tr>
	<tr class="row2">
		<td class="col0 centeralign">  LAN2  </td><td class="col1 centeralign">  1  </td><td class="col2"> lan </td>
	</tr>
	<tr class="row3">
		<td class="col0 centeralign">  LAN3  </td><td class="col1 centeralign">  2  </td><td class="col2"> lan </td>
	</tr>
	<tr class="row4">
		<td class="col0 centeralign">  LAN4  </td><td class="col1 centeralign">  3  </td><td class="col2"> Internet (WAN) </td>
	</tr>
	<tr class="row5">
		<td class="col0 centeralign">  n/a  </td><td class="col1 centeralign">  5t  </td><td class="col2"> to CPU </td>
	</tr>
</table></div>

<p style="padding: 10px;border:1px dashed grey;height:400px;font:9px/11px Georgia, Garamond, Serif;overflow:Auto">
<code># path: /etc/config/network
# LAN4 = WAN

config interface loopback
        option ifname   lo
        option proto    static
        option ipaddr   127.0.0.1
        option netmask  255.0.0.0

config interface lan
        option type     bridge
        option ifname   eth0.1
        option proto    static
        option ipaddr   192.168.1.1
        option netmask  255.255.255.0

config interface wan
        option ifname 	eth0.2
        option proto 	dhcp 

config switch eth0
	option enable	1
	option reset	1
	option enable_vlan 1

config switch_vlan
	option device 	eth0
	option vlan 	1
	option ports 	"0 1 2 5t"

config switch_vlan
	option device 	eth0
	option vlan 	2
	option ports 	"3 5t"
</code></p>

</div>

<h3 class="sectionedit28" id="main_core">Main Core</h3>
<div class="level3">

<p>
The BCM6358 SoC has two CPU cores. Unfortunately Linux kernel can only manage one core. The TLB is shared  between the two cores, and there isn&#039;t code to deal with this problem.
</p>

<p>
As default the second core is the main. Since the cores in BCM6358 have different features, with double icache in the first one, we may want to use it as the main one → <strong>more icache = better performance</strong>. The problem for using the core0 is the initialization, this task is made by the bootloader, not OpenWrt.
</p>

<p>
We can manually hex-edit the bootloader to force initialization of the first core as the Main thread. Or just use this utility in OpenWrt:
</p>
<div class="wrap_center wrap_round wrap_download plugin_wrap" style="width: 60%;">
<p>
<a href="https://drive.google.com/uc?export=download&amp;id=0B-EMoBe-_OdBREU4TTc2MWZZQVk" class="urlextern" title="https://drive.google.com/uc?export=download&amp;id=0B-EMoBe-_OdBREU4TTc2MWZZQVk"  rel="nofollow">tp0set_1.0-1_brcm63xx.ipk</a><br/>

(looks like the binary is only compatible with Barrier Breaker or earlier versions of OpenWrt). Tested dozen times with success.
</p>
</div>
<p>
Just install it and execute: <pre class="code">tp0set 0</pre>
 then reboot the router.
</p>

<p>
This is a session of installing and executing <strong>tp0set</strong>
<pre class="code">root@OpenWrt:/tmp# opkg install tp0set_1.0-1_brcm63xx.ipk 
Installing tp0set (1.0-1) to root...
Configuring tp0set.
root@OpenWrt:/tmp# tp0set 0
setting TP0 main core
MTD Type: 3
MTD total size: 20000 bytes
MTD erase size: 20000 bytes
Eraseing Block 0
Writting to /dev/mtd0...
Done!!
root@OpenWrt:/tmp#</pre>

</p>

<p>
This is what you will see in dmesg:
</p>
<ul>
<li class="level1"><div class="li"> Before: <code>[    0.000000] Primary instruction cache 16kB, VIPT, 2-way, linesize 16 bytes.</code></div>
</li>
<li class="level1"><div class="li"> After: <code>[    0.000000] Primary instruction cache 32kB, VIPT, 2-way, linesize 16 bytes.</code></div>
</li>
</ul>

<p>
<span class="wrap_hi ">Some people reported +15∼20% extra performance with this change.</span>
</p>

<p>
And this is the source code of <em>tp0set</em>
<pre class="code C"><span class="co2">#include &lt;stdio.h&gt;</span>
<span class="co2">#include &lt;fcntl.h&gt;</span>
<span class="co2">#include &lt;sys/ioctl.h&gt;</span>
<span class="co2">#include &lt;mtd/mtd-user.h&gt;</span>
<span class="co2">#include &lt;string.h&gt;</span>
&nbsp;
<span class="co2">#define DATA_OFFSET 20</span>
<span class="co2">#define RAWBYTES_LEN 4</span>
&nbsp;
<span class="kw4">int</span> main<span class="br0">&#40;</span><span class="kw4">int</span> argc<span class="sy0">,</span> <span class="kw4">char</span> <span class="sy0">*</span>argv<span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    mtd_info_t mtd_info<span class="sy0">;</span>           <span class="co1">// the MTD structure</span>
    erase_info_t ei<span class="sy0">;</span>               <span class="co1">// the erase block structure</span>
    <span class="kw4">int</span> m<span class="sy0">;</span>
    <span class="kw4">unsigned</span> <span class="kw4">int</span> rawBytes<span class="sy0">;</span> <span class="co1">//the bytes we want to write</span>
&nbsp;
    <span class="kw1">if</span> <span class="br0">&#40;</span>argc <span class="sy0">!=</span> <span class="nu0">2</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span class="kw3">printf</span></a><span class="br0">&#40;</span><span class="st0">&quot;Usage: tp0set [0/1]<span class="es1">\n</span>&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
            <span class="kw1">return</span> <span class="nu0">1</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    m <span class="sy0">=</span> <a href="http://www.opengroup.org/onlinepubs/009695399/functions/atoi.html"><span class="kw3">atoi</span></a><span class="br0">&#40;</span>argv<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">//convert argument to integer</span>
    <span class="kw1">if</span><span class="br0">&#40;</span> m <span class="sy0">==</span> <span class="nu0">1</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        rawBytes <span class="sy0">=</span> <span class="nu12">0x10000000</span><span class="sy0">;</span>
	<a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span class="kw3">printf</span></a><span class="br0">&#40;</span><span class="st0">&quot;setting TP1 main core<span class="es1">\n</span>&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>         
    <span class="br0">&#125;</span>
    <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">&#40;</span> m <span class="sy0">==</span> <span class="nu0">0</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span>
        rawBytes <span class="sy0">=</span> <span class="nu12">0x00000000</span><span class="sy0">;</span>
	<a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span class="kw3">printf</span></a><span class="br0">&#40;</span><span class="st0">&quot;setting TP0 main core<span class="es1">\n</span>&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>         
    <span class="br0">&#125;</span>
    <span class="kw1">else</span> <span class="br0">&#123;</span>
	     <a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span class="kw3">printf</span></a><span class="br0">&#40;</span><span class="st0">&quot;only 0 or 1 allowed<span class="es1">\n</span>&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
	     <span class="kw1">return</span> <span class="nu0">1</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw4">unsigned</span> <span class="kw4">char</span> read_buf<span class="br0">&#91;</span><span class="nu12">0x20000</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="br0">&#123;</span><span class="nu12">0x00</span><span class="br0">&#125;</span><span class="sy0">;</span>    <span class="co1">// empty array for reading </span>
&nbsp;
    <span class="kw4">int</span> fd <span class="sy0">=</span> open<span class="br0">&#40;</span><span class="st0">&quot;/dev/mtd0&quot;</span><span class="sy0">,</span> O_RDWR<span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">// open the mtd device for reading and </span>
                                        <span class="co1">// writing. Note you want mtd0 not mtdblock0</span>
                                        <span class="co1">// also you probably need to open permissions</span>
                                        <span class="co1">// to the dev (sudo chmod 777 /dev/mtd0)</span>
&nbsp;
    ioctl<span class="br0">&#40;</span>fd<span class="sy0">,</span> MEMGETINFO<span class="sy0">,</span> <span class="sy0">&amp;</span>mtd_info<span class="br0">&#41;</span><span class="sy0">;</span>   <span class="co1">// get the device info</span>
&nbsp;
    <span class="co1">// dump it for a sanity check, should match what's in /proc/mtd</span>
    <a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span class="kw3">printf</span></a><span class="br0">&#40;</span><span class="st0">&quot;MTD Type: %x<span class="es1">\n</span>MTD total size: %x bytes<span class="es1">\n</span>MTD erase size: %x bytes<span class="es1">\n</span>&quot;</span><span class="sy0">,</span>
         mtd_info.<span class="me1">type</span><span class="sy0">,</span> mtd_info.<span class="me1">size</span><span class="sy0">,</span> mtd_info.<span class="me1">erasesize</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    lseek<span class="br0">&#40;</span>fd<span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> SEEK_SET<span class="br0">&#41;</span><span class="sy0">;</span>               <span class="co1">// go to the first block</span>
    read<span class="br0">&#40;</span>fd<span class="sy0">,</span> read_buf<span class="sy0">,</span> <span class="kw4">sizeof</span><span class="br0">&#40;</span>read_buf<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">// read and store CFE in read_buf</span>
    <a href="http://www.opengroup.org/onlinepubs/009695399/functions/memcpy.html"><span class="kw3">memcpy</span></a><span class="br0">&#40;</span>read_buf <span class="sy0">+</span> DATA_OFFSET<span class="sy0">,</span> <span class="br0">&#40;</span><span class="kw4">unsigned</span> <span class="kw4">char</span><span class="sy0">*</span><span class="br0">&#41;</span><span class="sy0">&amp;</span>rawBytes<span class="sy0">,</span> RAWBYTES_LEN<span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">//write some bytes to CFE</span>
&nbsp;
    ei.<span class="me1">length</span> <span class="sy0">=</span> mtd_info.<span class="me1">erasesize</span><span class="sy0">;</span>   <span class="co1">//set the erase block size</span>
    <span class="kw1">for</span><span class="br0">&#40;</span>ei.<span class="me1">start</span> <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> ei.<span class="me1">start</span> <span class="sy0">&lt;</span> mtd_info.<span class="me1">size</span><span class="sy0">;</span> ei.<span class="me1">start</span> <span class="sy0">+=</span> ei.<span class="me1">length</span><span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        ioctl<span class="br0">&#40;</span>fd<span class="sy0">,</span> MEMUNLOCK<span class="sy0">,</span> <span class="sy0">&amp;</span>ei<span class="br0">&#41;</span><span class="sy0">;</span>
         <a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span class="kw3">printf</span></a><span class="br0">&#40;</span><span class="st0">&quot;Eraseing Block %#x<span class="es1">\n</span>&quot;</span><span class="sy0">,</span> ei.<span class="me1">start</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">// show the blocks erasing</span>
                                                  <span class="co1">// warning, this might print a lot!</span>
        ioctl<span class="br0">&#40;</span>fd<span class="sy0">,</span> MEMERASE<span class="sy0">,</span> <span class="sy0">&amp;</span>ei<span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span class="kw3">printf</span></a><span class="br0">&#40;</span><span class="st0">&quot;Writting to /dev/mtd0...<span class="es1">\n</span>&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">// </span>
    lseek<span class="br0">&#40;</span>fd<span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> SEEK_SET<span class="br0">&#41;</span><span class="sy0">;</span>        <span class="co1">// go back to first block's start</span>
    write<span class="br0">&#40;</span>fd<span class="sy0">,</span> read_buf<span class="sy0">,</span>  <span class="kw4">sizeof</span><span class="br0">&#40;</span>read_buf<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">// write our modified CFE</span>
&nbsp;
    close<span class="br0">&#40;</span>fd<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <a href="http://www.opengroup.org/onlinepubs/009695399/functions/printf.html"><span class="kw3">printf</span></a><span class="br0">&#40;</span><span class="st0">&quot;Done!!<span class="es1">\n</span>&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="kw1">return</span> <span class="nu0">0</span><span class="sy0">;</span>
<span class="br0">&#125;</span> </pre>

</p>

<p>
The changes survives forever, no matter if we install a new firmware, even erasing totally the previous firmware, since this setting is stored in CFE itself.
</p>

<p>
<strong>Note</strong>: You can&#039;t use the first core as the Main thread with the OEM firmware, it will cause hardware failure when initializating VoIP hardware stuff.
</p>

</div>

<h3 class="sectionedit31" id="failsafe_mode">Failsafe mode</h3>
<div class="level3">

<p>
→ <a href="../../doc/howto/generic.failsafe" class="wikilink1" title="doc:howto:generic.failsafe">generic.failsafe</a>
</p>

<p>
<strong>Openwrt failsafe:</strong> Power on the router, press the button <em>RESTART</em> repeatedly to enter failsafe mode (the power led starts blinking very fast)
</p>

<p>
<strong>CFE failsafe:</strong> This is for entering in the bootloader command line. Use a <a href="hg556a#serial" title="toh:huawei:hg556a ↵" class="wikilink1">serial</a> cable and press any key while loading CFE.
</p>

</div>

<h3 class="sectionedit32" id="buttons">Buttons</h3>
<div class="level3">

<p>
→<a href="../../doc/howto/hardware.button" class="wikilink1" title="doc:howto:hardware.button">hardware.button</a>
</p>

<p>
The HG556a has four buttons.
</p>
<div class="table sectionedit33"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> BUTTON label </th><th class="col1"> Event (OEM) </th><th class="col2"> GPIO </th><th class="col3"> Openwrt name </th><th class="col4"> Openwrt code </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> ? </td><td class="col1"> diagnostic </td><td class="col2 centeralign">  8  </td><td class="col3 centeralign">  <strong>help</strong>  </td><td class="col4"> KEY_HELP </td>
	</tr>
	<tr class="row2">
		<td class="col0"> ((i))</td><td class="col1"> wifi on/off </td><td class="col2 centeralign">  9  </td><td class="col3 centeralign">  <strong>wlan</strong>  </td><td class="col4 leftalign"> KEY_WLAN  </td>
	</tr>
	<tr class="row3">
		<td class="col0"> RESTART </td><td class="col1"> reboot </td><td class="col2 centeralign">  10  </td><td class="col3 centeralign">  <strong>restart</strong>  </td><td class="col4"> KEY_RESTART </td>
	</tr>
	<tr class="row4">
		<td class="col0"> RESET </td><td class="col1"> reset </td><td class="col2 centeralign">  11  </td><td class="col3 centeralign">  <strong>reset</strong>  </td><td class="col4"> KEY_CONFIG </td>
	</tr>
</table></div>

</div>

<h3 class="sectionedit34" id="leds">Leds</h3>
<div class="level3">

<p>
→<a href="../../doc/uci/system#leds" class="wikilink1" title="doc:uci:system">System configuration: Leds</a>
</p>
<div class="table sectionedit35"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 centeralign" colspan="4">  HG55VDFA VER.C  </th>
	</tr>
	<tr class="row1">
		<th class="col0" colspan="2"> Label </th><th class="col2"> description </th><th class="col3"> GPIO </th>
	</tr>
	</thead>
	<tr class="row2">
		<td class="col0 centeralign" colspan="2">  <img src="../../_media/media/toh/huawei/led-message_red.png?w=22&amp;tok=199245" class="media" alt="" width="22" />  </td><td class="col2 leftalign"> message  </td><td class="col3 centeralign">  0  </td>
	</tr>
	<tr class="row3">
		<td class="col0 centeralign" colspan="2">  <img src="../../_media/media/toh/huawei/led-hspa_red.png?w=22&amp;tok=86261c" class="media" alt="" width="22" />     </td><td class="col2 leftalign"> hspa     </td><td class="col3 centeralign">  1  </td>
	</tr>
	<tr class="row4">
		<td class="col0 centeralign" colspan="2">  <img src="../../_media/media/toh/huawei/led-wifi_red.png?w=22&amp;tok=f96fcd" class="media" alt="" width="22" />     </td><td class="col2 leftalign"> wifi     </td><td class="col3"> n/a </td>
	</tr>
	<tr class="row5">
		<td class="col0 centeralign" colspan="2">  <img src="../../_media/media/toh/huawei/led-dsl_red.png?w=22&amp;tok=d9b246" class="media" alt="" width="22" />      </td><td class="col2 leftalign"> dsl      </td><td class="col3 centeralign">  2  </td>
	</tr>
	<tr class="row6">
		<td class="col0 centeralign" colspan="2">  <img src="../../_media/media/toh/huawei/led-power_red.png?w=22&amp;tok=4d339e" class="media" alt="" width="22" />    </td><td class="col2 leftalign"> power    </td><td class="col3 centeralign">  3  </td>
	</tr>
	<tr class="row7">
		<td class="col0 centeralign" colspan="2">  n/a                                                  </td><td class="col2 leftalign"> all      </td><td class="col3 centeralign">  6  </td>
	</tr>
	<tr class="row8">
		<td class="col0" rowspan="2"> LAN1 </td><td class="col1"> <img src="../../_media/media/toh/huawei/led-dot_green.png?w=22&amp;tok=ab8b62" class="media" alt="" width="22" /> </td><td class="col2 leftalign">  </td><td class="col3 centeralign">  12  </td>
	</tr>
	<tr class="row9">
		<td class="col0 leftalign"> <img src="../../_media/media/toh/huawei/led-dot_red.png?w=22&amp;tok=132904" class="media" alt="" width="22" />   </td><td class="col1 leftalign">  </td><td class="col2 centeralign">  13  </td>
	</tr>
	<tr class="row10">
		<td class="col0" rowspan="2"> LAN2 </td><td class="col1"> <img src="../../_media/media/toh/huawei/led-dot_green.png?w=22&amp;tok=ab8b62" class="media" alt="" width="22" /> </td><td class="col2 leftalign">  </td><td class="col3 centeralign">  15  </td>
	</tr>
	<tr class="row11">
		<td class="col0 leftalign"> <img src="../../_media/media/toh/huawei/led-dot_red.png?w=22&amp;tok=132904" class="media" alt="" width="22" />   </td><td class="col1 leftalign">  </td><td class="col2 centeralign">  22  </td>
	</tr>
	<tr class="row12">
		<td class="col0" rowspan="2"> LAN3 </td><td class="col1"> <img src="../../_media/media/toh/huawei/led-dot_green.png?w=22&amp;tok=ab8b62" class="media" alt="" width="22" /> </td><td class="col2 leftalign">  </td><td class="col3 centeralign">  23  </td>
	</tr>
	<tr class="row13">
		<td class="col0 leftalign"> <img src="../../_media/media/toh/huawei/led-dot_red.png?w=22&amp;tok=132904" class="media" alt="" width="22" />   </td><td class="col1 leftalign">  </td><td class="col2 centeralign">  26  </td>
	</tr>
	<tr class="row14">
		<td class="col0" rowspan="2"> LAN4 </td><td class="col1"> <img src="../../_media/media/toh/huawei/led-dot_green.png?w=22&amp;tok=ab8b62" class="media" alt="" width="22" /> </td><td class="col2 leftalign">  </td><td class="col3 centeralign">  27  </td>
	</tr>
	<tr class="row15">
		<td class="col0 leftalign"> <img src="../../_media/media/toh/huawei/led-dot_red.png?w=22&amp;tok=132904" class="media" alt="" width="22" />   </td><td class="col1 leftalign">  </td><td class="col2 centeralign">  28  </td>
	</tr>
</table></div>
<div class="table sectionedit36"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 centeralign" colspan="4">  HG56BZRB VER.A  </th>
	</tr>
	<tr class="row1">
		<th class="col0" colspan="2"> Label </th><th class="col2"> description </th><th class="col3"> GPIO </th>
	</tr>
	</thead>
	<tr class="row2">
		<td class="col0 centeralign" colspan="2">  <img src="../../_media/media/toh/huawei/led-message_red.png?w=22&amp;tok=199245" class="media" alt="" width="22" />  </td><td class="col2 leftalign"> message  </td><td class="col3 centeralign">  12  </td>
	</tr>
	<tr class="row3">
		<td class="col0 centeralign" colspan="2">  <img src="../../_media/media/toh/huawei/led-hspa_red.png?w=22&amp;tok=86261c" class="media" alt="" width="22" />     </td><td class="col2 leftalign"> hspa     </td><td class="col3 centeralign">  15  </td>
	</tr>
	<tr class="row4">
		<td class="col0 centeralign" colspan="2">  <img src="../../_media/media/toh/huawei/led-wifi_red.png?w=22&amp;tok=f96fcd" class="media" alt="" width="22" />     </td><td class="col2 leftalign"> wifi     </td><td class="col3"> n/a </td>
	</tr>
	<tr class="row5">
		<td class="col0 centeralign" colspan="2">  <img src="../../_media/media/toh/huawei/led-dsl_red.png?w=22&amp;tok=d9b246" class="media" alt="" width="22" />      </td><td class="col2 leftalign"> dsl      </td><td class="col3 centeralign">  2  </td>
	</tr>
	<tr class="row6">
		<td class="col0 centeralign" colspan="2">  <img src="../../_media/media/toh/huawei/led-power_red.png?w=22&amp;tok=4d339e" class="media" alt="" width="22" />    </td><td class="col2 leftalign"> power    </td><td class="col3 centeralign">  3  </td>
	</tr>
	<tr class="row7">
		<td class="col0" rowspan="2"> LAN1 </td><td class="col1"> <img src="../../_media/media/toh/huawei/led-dot_green.png?w=22&amp;tok=ab8b62" class="media" alt="" width="22" /> </td><td class="col2 leftalign">  </td><td class="col3 centeralign">  0   </td>
	</tr>
	<tr class="row8">
		<td class="col0 leftalign"> <img src="../../_media/media/toh/huawei/led-dot_red.png?w=22&amp;tok=132904" class="media" alt="" width="22" />   </td><td class="col1 leftalign">  </td><td class="col2 centeralign">  13  </td>
	</tr>
	<tr class="row9">
		<td class="col0" rowspan="2"> LAN2 </td><td class="col1"> <img src="../../_media/media/toh/huawei/led-dot_green.png?w=22&amp;tok=ab8b62" class="media" alt="" width="22" /> </td><td class="col2 leftalign">  </td><td class="col3 centeralign">  1   </td>
	</tr>
	<tr class="row10">
		<td class="col0 leftalign"> <img src="../../_media/media/toh/huawei/led-dot_red.png?w=22&amp;tok=132904" class="media" alt="" width="22" />   </td><td class="col1 leftalign">  </td><td class="col2 centeralign">  22  </td>
	</tr>
	<tr class="row11">
		<td class="col0" rowspan="2"> LAN3 </td><td class="col1"> <img src="../../_media/media/toh/huawei/led-dot_green.png?w=22&amp;tok=ab8b62" class="media" alt="" width="22" /> </td><td class="col2 leftalign">  </td><td class="col3 centeralign">  23  </td>
	</tr>
	<tr class="row12">
		<td class="col0 leftalign"> <img src="../../_media/media/toh/huawei/led-dot_red.png?w=22&amp;tok=132904" class="media" alt="" width="22" />   </td><td class="col1 leftalign">  </td><td class="col2 centeralign">  26  </td>
	</tr>
	<tr class="row13">
		<td class="col0" rowspan="2"> LAN4 </td><td class="col1"> <img src="../../_media/media/toh/huawei/led-dot_green.png?w=22&amp;tok=ab8b62" class="media" alt="" width="22" /> </td><td class="col2 leftalign">  </td><td class="col3 centeralign">  27  </td>
	</tr>
	<tr class="row14">
		<td class="col0 leftalign"> <img src="../../_media/media/toh/huawei/led-dot_red.png?w=22&amp;tok=132904" class="media" alt="" width="22" />   </td><td class="col1 leftalign">  </td><td class="col2 centeralign">  28  </td>
	</tr>
</table></div>

</div>

<h2 class="sectionedit37" id="hardware">Hardware</h2>
<div class="level2">

</div>

<h3 class="sectionedit38" id="info">Info</h3>
<div class="level3">
<div class="table sectionedit39"><table class="inline">
	<thead>
	<tr class="row0">
		<td class="col0"> </td><th class="col1"> HG556a A, B (HG55VDFA VER.C) </th><th class="col2"> HG556a C (HG56BZRB VER.A) </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <strong><a href="http://en.wikipedia.org/wiki/Instruction set" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Instruction set">Instruction set</a>:</strong> </td><td class="col1" colspan="2"> <a href="http://en.wikipedia.org/wiki/MIPS architecture" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/MIPS architecture">MIPS</a> </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> <strong>Vendor:</strong>          </td><td class="col1" colspan="2"> <a href="http://en.wikipedia.org/wiki/Broadcom" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Broadcom">Broadcom</a> </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <strong><a href="../../doc/techref/bootloader.1" class="wikilink1" title="doc:techref:bootloader">Bootloader</a>:</strong>     </td><td class="col1" colspan="2"> <a href="../../doc/techref/bootloader/cfe" class="wikilink1" title="doc:techref:bootloader:cfe">CFE</a> </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> <strong>Board Id:</strong>  </td><td class="col1" colspan="2"> HW556 </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> <strong><a href="../../doc/hardware/soc.1" class="wikilink1" title="doc:hardware:soc">System-On-Chip</a>:</strong>  </td><td class="col1" colspan="2"> BCM6358KFBG </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> <strong><a href="../../doc/hardware/cpu" class="wikilink1" title="doc:hardware:cpu">CPU</a> @Frq</strong>        </td><td class="col1" colspan="2"> BMIPS4350 V1.0 @300 Mhz  <a href="../../doc/hardware/soc/soc.broadcom.bcm63xx/smp" class="wikilink1" title="doc:hardware:soc:soc.broadcom.bcm63xx:smp">BMIPS Dual Core</a> </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> <strong>Flash-Chip:</strong>      </td><td class="col1"> Macronix MX29GL128EH <br/>
Macronix MX29LV128DB <br/>
Spansion S29GL128P10 </td><td class="col2"> MX29GL128EHT2I-90G </td>
	</tr>
	<tr class="row8">
		<td class="col0 leftalign"> <strong>Flash size:</strong>      </td><td class="col1" colspan="2"> 16 MiB </td>
	</tr>
	<tr class="row9">
		<td class="col0 leftalign"> <strong>RAM:</strong>             </td><td class="col1 leftalign"> <a href="http://www.hynix.com/datasheet/pdf/dram/HY5DU124(8,16)22D(L)TP(Rev0.1).pdf" class="urlextern" title="http://www.hynix.com/datasheet/pdf/dram/HY5DU124(8,16)22D(L)TP(Rev0.1).pdf"  rel="nofollow">HY5DU121622DTP-J</a> / DDR-333  </td><td class="col2"> ? </td>
	</tr>
	<tr class="row10">
		<td class="col0 leftalign"> <strong>RAM size:</strong>        </td><td class="col1 leftalign" colspan="2"> 64 MiB   </td>
	</tr>
	<tr class="row11">
		<td class="col0 leftalign"> <strong>Wireless:</strong>        </td><td class="col1"> Atheros AR9223 802.11b/g/n (onboard) </td><td class="col2"> Ralink RT3062F 802.11b/g/n (onboard) </td>
	</tr>
	<tr class="row12">
		<td class="col0 leftalign"> <strong>Antenna:</strong>	       </td><td class="col1" colspan="2"> 2x, onboard, non detachable </td>
	</tr>
	<tr class="row13">
		<td class="col0 leftalign"> <strong><a href="../../doc/hardware/switch" class="wikilink1" title="doc:hardware:switch">Switch</a>:</strong>        </td><td class="col1" colspan="2"> Broadcom  <a href="../../_media/toh/bcm5325_pinout.png" class="urlextern" title="http://wiki.openwrt.org/_media/toh/bcm5325_pinout.png"  rel="nofollow">BCM5325E</a> w/ vlan support <a href="../../doc/uci/network#swconfig" class="wikilink1" title="doc:uci:network">swconfig</a> </td>
	</tr>
	<tr class="row14">
		<td class="col0 leftalign"> <strong>Internet:</strong>        </td><td class="col1" colspan="2"> ADSL2+, not supported in OpenWrt </td>
	</tr>
	<tr class="row15">
		<td class="col0 leftalign"> <strong>VoIP:</strong>            </td><td class="col1" colspan="2"> Zarlink Le88266DLC → drivers <a href="https://github.com/pgid69/bcm63xx-phone" class="urlextern" title="https://github.com/pgid69/bcm63xx-phone"  rel="nofollow">https://github.com/pgid69/bcm63xx-phone</a> </td>
	</tr>
	<tr class="row16">
		<td class="col0 leftalign" rowspan="2"> <strong>USB:</strong>             </td><td class="col1"> 1x2.0 SoC → 2x2.0 SMSC HUB <a href="http://www.smsc.com/index.php?tid=295&amp;pid=19" class="urlextern" title="http://www.smsc.com/index.php?tid=295&amp;pid=19"  rel="nofollow">USB2502-AEZG</a> </td><td class="col2"> 1x2.0 SoC → 2x2.0 Genesys HUB <a href="http://www.genesyslogic.com/en/product_view.php?show=21" class="urlextern" title="http://www.genesyslogic.com/en/product_view.php?show=21"  rel="nofollow">GL850G</a> </td>
	</tr>
	<tr class="row17">
		<td class="col0"> + 1x 2.0 SoC </td><td class="col1"> + 1x 2.0 SoC </td>
	</tr>
	<tr class="row18">
		<td class="col0 leftalign"> <strong>Power adapter:</strong> 	</td><td class="col1" colspan="2"> 12V DC 2A / APS24W-12V2A-EU </td>
	</tr>
	<tr class="row19">
		<td class="col0 leftalign"> <strong><a href="../../OpenWrtDocs/Customizing/Hardware/Serial_Console" class="wikilink1" title="doc:hardware:port.serial">Serial</a>:</strong>          </td><td class="col1" colspan="2"> <a href="hg556a#serial" title="toh:huawei:hg556a ↵" class="wikilink1">Yes</a> </td>
	</tr>
	<tr class="row20">
		<td class="col0 leftalign"> <strong><a href="../../doc/hardware/port.jtag" class="wikilink1" title="doc:hardware:port.jtag">JTAG</a>:</strong>            </td><td class="col1 leftalign"> <a href="hg556a#jtag" title="toh:huawei:hg556a ↵" class="wikilink1">Yes</a>  </td><td class="col2"> <img src="../../lib/images/smileys/icon_question.gif" class="icon" alt=":?:" /> </td>
	</tr>
</table></div>

</div>

<h3 class="sectionedit40" id="photos">Photos</h3>
<div class="level3">

<p>
Photo of front and back of the casing:<br/>

<a href="../../_detail/media/toh/huawei/hg556a-front.jpg?id=toh%253Ahuawei%253Ahg556a" class="media" title="media:toh:huawei:hg556a-front.jpg"><img src="../../_media/media/toh/huawei/hg556a-front.jpg?w=300&amp;h=300&amp;tok=0e4601" class="media" alt="" width="300" height="300" /></a><a href="../../_detail/media/toh/huawei/hg556a-back.jpg?id=toh%253Ahuawei%253Ahg556a" class="media" title="media:toh:huawei:hg556a-back.jpg"><img src="../../_media/media/toh/huawei/hg556a-back.jpg?w=300&amp;h=300&amp;tok=d21699" class="media" alt="" width="300" height="300" /></a>
</p>

</div>

<h3 class="sectionedit41" id="opening_the_case">Opening the case</h3>
<div class="level3">

<p>
<strong>Note:</strong> This will void your warranty!
</p>
<ul>
<li class="level1"><div class="li">To remove the cover:</div>
</li>
</ul>
<div class="table sectionedit42"><table class="inline">
	<tr class="row0">
		<td class="col0"> <a href="../../_detail/media/toh/huawei/hg556a_rcase0.jpg?id=toh%253Ahuawei%253Ahg556a" class="media" title="media:toh:huawei:hg556a_rcase0.jpg"><img src="../../_media/media/toh/huawei/hg556a_rcase0.jpg?w=200&amp;h=150&amp;tok=bb7981" class="media" alt="" width="200" height="150" /></a> </td><td class="col1"> remove the screw hidden under the label at the back of the router </td>
	</tr>
	<tr class="row1">
		<td class="col0"> <a href="../../_detail/media/toh/huawei/hg556a_rcase1.jpg?id=toh%253Ahuawei%253Ahg556a" class="media" title="media:toh:huawei:hg556a_rcase1.jpg"><img src="../../_media/media/toh/huawei/hg556a_rcase1.jpg?w=200&amp;h=150&amp;tok=88088a" class="media" alt="" width="200" height="150" /></a> </td><td class="col1"> remove the router&#039;s foot </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <a href="../../_detail/media/toh/huawei/hg556a_rcase2.jpg?id=toh%253Ahuawei%253Ahg556a" class="media" title="media:toh:huawei:hg556a_rcase2.jpg"><img src="../../_media/media/toh/huawei/hg556a_rcase2.jpg?w=200&amp;h=150&amp;tok=2af012" class="media" alt="" width="200" height="150" /></a> </td><td class="col1"> carefully separate both parts of the casing </td>
	</tr>
</table></div>

</div>

<h4 id="photo_of_pcb">Photo of PCB</h4>
<div class="level4">
<div class="sortable"><div class="table sectionedit43"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> HG55VDFA VER.C </th><th class="col1"> HG56BZRB VER.A </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 centeralign">  <strong>Top view</strong>  </td><td class="col1 centeralign">  <strong>Top view</strong>  </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <a href="../../_detail/toh/huawei/hg556a_board_a.jpg?id=toh%253Ahuawei%253Ahg556a" class="media" title="toh:huawei:hg556a_board_a.jpg"><img src="../../_media/toh/huawei/hg556a_board_a.jpg?w=400&amp;tok=988e9d" class="media" alt="" width="400" /></a> </td><td class="col1"> <a href="../../_detail/toh/huawei/hg556a-board_ralink.jpg?id=toh%253Ahuawei%253Ahg556a" class="media" title="toh:huawei:hg556a-board_ralink.jpg"><img src="../../_media/toh/huawei/hg556a-board_ralink.jpg?w=400&amp;tok=95a78f" class="media" alt="" width="400" /></a> </td>
	</tr>
	<tr class="row3">
		<td class="col0 centeralign">  <strong>Bottom view</strong>  </td><td class="col1 centeralign">  <strong>Bottom view</strong>  </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <a href="../../_detail/toh/huawei/hg556a_board_b.jpg?id=toh%253Ahuawei%253Ahg556a" class="media" title="toh:huawei:hg556a_board_b.jpg"><img src="../../_media/toh/huawei/hg556a_board_b.jpg?w=400&amp;tok=b5960b" class="media" alt="" width="400" /></a> </td><td class="col1"> <a href="../../_detail/toh/huawei/hg556a-board_ralink_b.jpg?id=toh%253Ahuawei%253Ahg556a" class="media" title="toh:huawei:hg556a-board_ralink_b.jpg"><img src="../../_media/toh/huawei/hg556a-board_ralink_b.jpg?w=400&amp;tok=968202" class="media" alt="" width="400" /></a></td>
	</tr>
</table></div>
</div>
</div>

<h3 class="sectionedit44" id="serial">Serial</h3>
<div class="level3">

<p>
→ <a href="../../OpenWrtDocs/Customizing/Hardware/Serial_Console" class="wikilink1" title="doc:hardware:port.serial">port.serial</a> general information about the serial port, serial port cable, etc.
</p>

<p>
How to connect to the Serial Port of this specific device:
</p>
<div class="table sectionedit45"><table class="inline">
	<tr class="row0">
		<td class="col0"> <a href="../../_detail/doc/hardware/usbtors232.ttl.jpeg?id=toh%253Ahuawei%253Ahg556a" class="media" title="doc:hardware:usbtors232.ttl.jpeg"><img src="../../_media/doc/hardware/usbtors232.ttl.jpeg?w=100&amp;tok=6033c9" class="media" alt="" width="100" /></a> </td><td class="col1"> Use a <a href="../../OpenWrtDocs/Customizing/Hardware/Serial_Console#usbtors232ttlconvertermodule" class="wikilink1" title="doc:hardware:port.serial">serial TTL</a> adapter to connect your PC with HG556a. Only connect TX, RX and GND. </td>
	</tr>
</table></div>

<p>
<strong>Settings:</strong>
</p>
<ul>
<li class="level1"><div class="li"> Baudrate: 115200</div>
</li>
<li class="level1"><div class="li"> Data bits: 8</div>
</li>
<li class="level1"><div class="li"> Parity: None</div>
</li>
<li class="level1"><div class="li"> Stop bits: 1</div>
</li>
</ul>

<p>
<strong>Photo of PCB with markings</strong>
</p>

<p>
<a href="../../_detail/toh/huawei/hg556a_serial_ttl.jpg?id=toh%253Ahuawei%253Ahg556a" class="media" title="toh:huawei:hg556a_serial_ttl.jpg"><img src="../../_media/toh/huawei/hg556a_serial_ttl.jpg?w=400&amp;tok=7663a0" class="media" alt="" width="400" /></a>
</p>

<p>
With <a href="http://cutecom.sourceforge.net/" class="urlextern" title="http://cutecom.sourceforge.net/"  rel="nofollow">Cutecom</a> (or other serial console software), open <span style='color:blue; '>/dev/ttyUSB0</span> (you must have right permissions).
</p>

</div>

<h3 class="sectionedit46" id="jtag">JTAG</h3>
<div class="level3">

<p>
→ <a href="../../doc/hardware/port.jtag" class="wikilink1" title="doc:hardware:port.jtag">port.jtag</a> general information about the JTAG port, JTAG cable, etc.
</p>

<p>
10 pin header marked J400 (see back of board picture below). Uses <a href="http://www.jtagtest.com/pinouts/avr" class="urlextern" title="http://www.jtagtest.com/pinouts/avr"  rel="nofollow">AVR JTAG</a> layout. Broadcom CPU recognised by TJTAG version 3.0.1
</p>

<p>
<strong>Photo of PCB with markings (VER.C)</strong>
</p>

<p>
<a href="../../_detail/media/toh/huawei/hg556ac_jtag_j400.jpg?id=toh%253Ahuawei%253Ahg556a" class="media" title="media:toh:huawei:hg556ac_jtag_j400.jpg"><img src="../../_media/media/toh/huawei/hg556ac_jtag_j400.jpg?w=400&amp;h=250&amp;tok=4bf0e8" class="media" alt="" width="400" height="250" /></a>
</p>

<p>
There are several utilities that support BCM6358 for flashing via JTAG cable. In our examples we will use <strong>zJTAG</strong> (ver 1.8) with a <strong>WIGGLER</strong> buffered cable. It is also possible to use a <strong>DLC5</strong> unbuffered cable, but not longer than 15 cm.
</p>
<ul>
<li class="level1"><div class="li"> A command to check if our CPU is recognized:<br/>
<pre class="code">./zjtag -probeonly /window:1e000000 /nompi /BE /wiggler</pre>
</div>
</li>
<li class="level1"><div class="li"> A session of bootloader backup:
<p style="padding: 10px;border:1px solid grey;height:350px;font:11px/12px Georgia, Garamond, Serif;overflow:Auto;background-color:#DEE4E7">
<code># ./zjtag -backup:custom /window:1e000000 /start:1e000000 /length:20000 /nompi /wiggler /BE
                                                                                                                                            
        ==============================================                                                                                      
               zJTAG EJTAG Debrick Utility v1.8 RC3                                                                                         
        ==============================================                                                                                      
                                                                                                                                            
cable=wiggler, cabletype=3                                                                                                                  
                                                                                                                                            
Detected IR chain length = 32                                                                                                               
                                                                                                                                            
There are 1 device(s) in the JTAG chain                                                                                                     
 IDCODE for device 1 is 0x0635817F (IR length:1)                                                                                            
                                                                                                                                            
Probing bus ... Done                                                                                                                        
                                                                                                                                            
Defined IR Length is 5 bits                                                                                                                 
                                                                                                                                            
CPU assumed running under BIG endian                                                                                                        
                                                                                                                                            
CPU Chip ID: 00000110001101011000000101111111 (0x0635817F)                                                                                  
*** Found a Broadcom manufactured BCM6358 REV 01 CPU ***                                                                                    
                                                                                                                                            
    - EJTAG IMPCODE ....... : 00000000100000011000100100000100 (0x00818904)                                                                 
    - EJTAG Version ....... : 1 or 2.0                                                                                                      
    - EJTAG DMA Support ... : Yes                                                                                                           
    - EJTAG Implementation flags: R4k MIPS16 MIPS32                                                                                         
                                                                                                                                            
Issuing Processor / Peripheral Reset ... Done                                                                                               
Enabling Memory Writes ... Done                                                                                                             
Halting Processor ... <Processor did NOT enter Debug Mode!> ... Done                                                                        
Clearing Watchdog ... Done                                                                                                                  
Loading CPU Configuration Code ... Skipped                                                                                                  

Probing Flash at Address: 0x1E000000 ...
Detected Chip ID (VenID:DevID = C27E : 2101)
*** Found a CFI Compatiable Flash Chip from Macronix

    - Flash Chip Window Start .... : 1E000000
    - Flash Chip Window Length ... : 01000000
    - Selected Area Start ........ : 1E000000
    - Selected Area Length ....... : 00020000

*** You Selected to Backup the CUSTOM.BIN ***

=========================
Backup Routine Started
=========================

Saving CUSTOM.BIN.SAVED_20150207_145734 to Disk...
Done  (CUSTOM.BIN.SAVED_20150207_145734 saved to Disk OK)

bytes written: 131072
=========================
Backup Routine Complete
=========================
elapsed time: 35 seconds


 *** REQUESTED OPERATION IS COMPLETE ***</code>
</p>
</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> A session of restoring CFE
<p style="padding: 10px;border:1px solid grey;height:350px;font:11px/12px Georgia, Garamond, Serif;overflow:Auto;background-color:#DEE4E7">
<code># ./zjtag -flash:custom /window:1e000000 /start:1e000000 /length:20000 /wiggler /BE

        ==============================================
               zJTAG EJTAG Debrick Utility v1.8 RC3
        ==============================================

cable=wiggler, cabletype=3

Detected IR chain length = 32

There are 1 device(s) in the JTAG chain
 IDCODE for device 1 is 0x0635817F (IR length:1)

Probing bus ... Done

Defined IR Length is 5 bits

CPU assumed running under BIG endian

CPU Chip ID: 00000110001101011000000101111111 (0x0635817F)
*** Found a Broadcom manufactured BCM6358 REV 01 CPU ***

    - EJTAG IMPCODE ....... : 00000000100000011000100100000100 (0x00818904)
    - EJTAG Version ....... : 1 or 2.0
    - EJTAG DMA Support ... : Yes
    - EJTAG Implementation flags: R4k MIPS16 MIPS32

Issuing Processor / Peripheral Reset ... Done
Enabling Memory Writes ... Done
Halting Processor ... <Processor Entered Debug Mode!> ... Done
Clearing Watchdog ... Done
Loading CPU Configuration Code ... Skipped
Detecting Flash Base Address...
Read MPI register value : 1E00000C
MPI register show Flash Access Base Addr : 1E000000

Probing Flash at Address: 0x1E000000 ...
Detected Chip ID (VenID:DevID = C27E : 2101)
*** Found a CFI Compatiable Flash Chip from Macronix

    - Flash Chip Window Start .... : 1E000000
    - Flash Chip Window Length ... : 01000000
    - Selected Area Start ........ : 1E000000
    - Selected Area Length ....... : 00020000

*** You Selected to Flash the CUSTOM.BIN ***

=========================
Flashing Routine Started
=========================
Total Blocks to Erase: 1

Erasing block: 1 (addr = 1E000000)...Done

Loading CUSTOM.BIN to Flash Memory...
Done  (CUSTOM.BIN loaded into Flash Memory OK)

=========================
Flashing Routine Complete
=========================
elapsed time: 174 seconds


 *** REQUESTED OPERATION IS COMPLETE *** </code>
</p>
</div>
</li>
<li class="level1"><div class="li"> Backup the whole flash: <code>./zjtag -backup:custom /window:1e000000 /start:1e000000 /length:1000000 /wiggler /BE</code></div>
</li>
<li class="level1"><div class="li"> Backup the calibration data: <code>./zjtag -backup:custom /window:1e000000 /start:1EEFE000 /length:2000 /wiggler /BE</code><br/>
or for the flash chip MX29LV128DB:  <code>./zjtag -backup:custom /window:1e000000 /start:1EF7E000 /length:2000 /wiggler /BE</code></div>
</li>
</ul>

<p>
It&#039;s also possible to use <strong>UrJTAG</strong>. It&#039;s faster compared with HairyDairymaid based software. Sometimes it fails to enter debug mode, but after several attempts, once entered debug mode, it works totally ok. Probably deleting the bootloader before using UrJTAG would help to enter debug mode. Using the nTRST pin would also help to enter debug mode.
</p>
<ul>
<li class="level1"><div class="li"> The following is a session of flashing the bootloader using UrJTAG, it only took one minute included the verification:
<p style="padding: 10px;border:1px solid grey;height:350px;font:11px/12px Georgia, Garamond, Serif;overflow:Auto;background-color:#DEE4E7">
<code>
# jtag       

UrJTAG 0.10 #2051
Copyright (C) 2002, 2003 ETC s.r.o.
Copyright (C) 2007, 2008, 2009 Kolja Waschk and the respective authors

UrJTAG is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
There is absolutely no warranty for UrJTAG.

warning: UrJTAG may damage your hardware!
Type "quit" to exit, "help" for help.

jtag> cable wiggler ppdev /dev/parport0
Initializing ppdev port /dev/parport0
jtag> detect           
IR length: 5
Chain length: 1
Device Id: 00000110001101011000000101111111 (0x0635817F)
  Manufacturer: Broadcom (0x17F)
  Part(0):      BCM6358 (0x6358)
  Stepping:     V1
  Filename:     /usr/share/urjtag/broadcom/bcm6358/bcm6358
jtag> endian big 
jtag> initbus ejtag_dma
ImpCode=00000110001101011000000101111111
EJTAG version: <= 2.0
EJTAG Implementation flags: R4k ASID_6 MIPS16 DMA MIPS64
Clear memory protection bit in DCR
Clear Watchdog
Potential flash base address: [0x0], [0x1e00000c]
Processor successfully switched in debug mode.
jtag> detectflash 0x1e000000
Query identification string:
        Primary Algorithm Command Set and Control Interface ID Code: 0x0002 (AMD/Fujitsu Standard Command Set)
        Alternate Algorithm Command Set and Control Interface ID Code: 0x0000 (null)
Query system interface information:
        Vcc Logic Supply Minimum Write/Erase or Write voltage: 2700 mV
        Vcc Logic Supply Maximum Write/Erase or Write voltage: 3600 mV
        Vpp [Programming] Supply Minimum Write/Erase voltage: 0 mV
        Vpp [Programming] Supply Maximum Write/Erase voltage: 0 mV
        Typical timeout per single byte/word program: 8 us
        Typical timeout for maximum-size multi-byte program: 64 us
        Typical timeout per individual block erase: 512 ms
        Typical timeout for full chip erase: 524288 ms
        Maximum timeout for byte/word program: 64 us
        Maximum timeout for multi-byte program: 2048 us
        Maximum timeout per individual block erase: 4096 ms
        Maximum timeout for chip erase: 2097152 ms
Device geometry definition:
        Device Size: 16777216 B (16384 KiB, 16 MiB)
        Flash Device Interface Code description: 0x0002 (x8/x16)
        Maximum number of bytes in multi-byte program: 64
        Number of Erase Block Regions within device: 1
        Erase Block Region Information:
                Region 0:
                        Erase Block Size: 131072 B (128 KiB)
                        Number of Erase Blocks: 128
Primary Vendor-Specific Extended Query:
        Major version number: 1
        Minor version number: 3
        Address Sensitive Unlock: Required
        Process Technology: Bad value
        Erase Suspend: Read/write
        Sector Protect: 1 sectors per group
        Sector Temporary Unprotect: Supported
        Sector Protect/Unprotect Scheme: Bad value
        Simultaneous Operation: Not supported
        Burst Mode Type: Supported
        Page Mode Type: 8 word Page
        ACC (Acceleration) Supply Minimum: 9500 mV
        ACC (Acceleration) Supply Maximum: 10500 mV
        Top/Bottom Sector Flag: Uniform top boot device
        Program Suspend: Not supported
jtag> flashmem 0x1e000000 cfe6358-nvr.bin
Chip: AMD Flash
        Manufacturer: Macronix
        Chip: Unknown (ID 0x227e)
        Protected: 0000
program:
flash_unlock_block 0x1E000000 IGNORE

block 0 unlocked
flash_erase_block 0x1E000000
flash_erase_block 0x1E000000 DONE
erasing block 0: 0
addr: 0x1E00F6EA
verify:
addr: 0x1E00F6EA
Done.
jtag>
</code>
</p>
</div>
</li>
</ul>

</div>

<h3 class="sectionedit47" id="spi">SPI</h3>
<div class="level3">

<p>
<strong><a href="http://en.wikipedia.org/wiki/Serial_Peripheral_Interface_Bus" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Serial_Peripheral_Interface_Bus">Serial Peripheral Interface</a></strong>
</p>

<p>
The BCM6358 SoC has a <a href="../../doc/hardware/soc/soc.broadcom.bcm63xx#spi" class="wikilink1" title="doc:hardware:soc:soc.broadcom.bcm63xx">SPI</a> controller. The HG556a SPI pins are exposed on the board, at the place for a <strong>Si3050</strong> chip which isn&#039;t soldered. We can use this SPI interface for connecting our own SPI stuff, but we need to build the kernel with the drivers and proper platform data code for registering the SPI device. This is the pinout:
</p>

<p>
<a href="../../_detail/media/toh/huawei/hg556a-spi.jpg?id=toh%253Ahuawei%253Ahg556a" class="media" title="media:toh:huawei:hg556a-spi.jpg"><img src="../../_media/media/toh/huawei/hg556a-spi.jpg?w=500&amp;h=300&amp;tok=00ca98" class="media" alt="" width="500" height="300" /></a>
</p>

<p>
This SPI interface is also connected to the <strong>Le88266</strong> VoiP chip, but using the Slave Select 2 (GPIO32):
</p>

<p>
<a href="../../_detail/media/toh/huawei/hg556a-spi_le88266.jpg?id=toh%253Ahuawei%253Ahg556a" class="media" title="media:toh:huawei:hg556a-spi_le88266.jpg"><img src="../../_media/media/toh/huawei/hg556a-spi_le88266.jpg?w=500&amp;h=300&amp;tok=a7621f" class="media" alt="" width="500" height="300" /></a> <a href="../../_media/media/toh/huawei/le88286-pinout.png" class="media" title="media:toh:huawei:le88286-pinout.png"><img src="../../_media/media/toh/huawei/le88286-pinout.png?w=350&amp;h=300&amp;tok=6b5a27" class="media" alt="" width="350" height="300" /></a>
</p>

<p>
Kernel code example for <strong>spidev</strong> kernel module, the added code is highlighted in green:
</p>

<pre class="code" style="font:11px/12px monospace">
<font color="green">static struct spi_board_info hw556_spi_info[] = {
	{
		.bus_num	= 0,
		.chip_select	= 1,
		.mode		= 0,
		.max_speed_hz	= 781000,
		.modalias	= "spidev",
	},
};</font>

static struct board_info __initdata board_HW556 = {
	.name					= "HW556",
	.expected_cpu_id			= 0x6358,

	.has_uart0				= 1,
	.has_pci				= 1,
	.has_ohci0				= 1,
	.has_ehci0				= 1,
	.num_usbh_ports				= 2,

	.has_caldata				= 1,
	.caldata = {
		{
			.caldata_offset		= 0xe00000,
		},
	},

	.has_enet1				= 1,
	.enet1 = {
		.has_phy			= 1,
		.phy_id				= 0,
		.force_speed_100		= 1,
		.force_duplex_full		= 1,
	},

	.leds = {
		{
			.name			= "HW556:red:message",
			.gpio			= 0,
			.active_low		= 1,
		},
		{
			.name			= "HW556:red:hspa",
			.gpio			= 1,
			.active_low		= 1,
		},
		{
			.name			= "HW556:red:dsl",
			.gpio			= 2,
			.active_low		= 1,
		},
		{
			.name			= "HW556:red:power",
			.gpio			= 3,
			.active_low		= 1,
			.default_trigger	= "default-on",
		},
		{
			.name			= "HW556:red:all",
			.gpio			= 6,
			.active_low		= 1,
			.default_trigger	= "default-on",
		},
	},

	.buttons = {
		{
			.desc			= "help",
			.gpio			= 8,
			.active_low		= 1,
			.type			= EV_KEY,
			.code			= KEY_HELP,
			.debounce_interval	= BCM963XX_KEYS_DEBOUNCE_INTERVAL,
		},
		{
			.desc			= "wlan",
			.gpio			= 9,
			.active_low		= 1,
			.type			= EV_KEY,
			.code			= KEY_WLAN,
			.debounce_interval	= BCM963XX_KEYS_DEBOUNCE_INTERVAL,
		},
		{
			.desc			= "restart",
			.gpio			= 10,
			.active_low		= 1,
			.type			= EV_KEY,
			.code			= KEY_RESTART,
			.debounce_interval	= BCM963XX_KEYS_DEBOUNCE_INTERVAL,
		},
		{
			.desc			= "reset",
			.gpio			= 11,
			.active_low		= 1,
			.type			= EV_KEY,
			.code			= KEY_CONFIG,
			.debounce_interval	= BCM963XX_KEYS_DEBOUNCE_INTERVAL,
		},
	},
<font color="green">	.spis = hw556_spi_info,
	.num_spis = ARRAY_SIZE(hw556_spi_info),</font>
};
</pre>

<p>
The SPI controller is able to work with these speeds (kHz): 20000, 12500, 6250, 3125, 1563, 781(default), 391
</p>
<ul>
<li class="level1"><div class="li"> Demo video connecting a SPI display, (781 kHz):<br/>
<iframe width="560" height="315" src="http://www.youtube.com/embed/3BNs52wyl1s" frameborder="0" allowfullscreen></iframe>
<p>
<br/>
using 20 <abbr title="Megahertz">MHz</abbr>:<br/>

</p>
<iframe width="560" height="315" src="http://www.youtube.com/embed/9LltQ8kO2b0" frameborder="0" allowfullscreen></iframe></div>
</li>
</ul>

</div>

<h3 class="sectionedit48" id="voip">VoIP</h3>
<div class="level3">

<p>
The HG556a has two FXS ports for connecting a phone, allowing to use VoIP features. The board has <strong>Le88266</strong> VoiP chip, connected via SPI interface and using the Slave Select 2 (GPIO32), the RESET# pin is connected to the GPIO24.
</p>

<p>
<a href="../../_detail/media/toh/huawei/hg556a-spi_le88266.jpg?id=toh%253Ahuawei%253Ahg556a" class="media" title="media:toh:huawei:hg556a-spi_le88266.jpg"><img src="../../_media/media/toh/huawei/hg556a-spi_le88266.jpg?w=500&amp;h=300&amp;tok=a7621f" class="media" alt="" width="500" height="300" /></a> <a href="../../_media/media/toh/huawei/le88286-pinout.png" class="media" title="media:toh:huawei:le88286-pinout.png"><img src="../../_media/media/toh/huawei/le88286-pinout.png?w=350&amp;h=300&amp;tok=6b5a27" class="media" alt="" width="350" height="300" /></a>
</p>

<p>
Not officially supported, but some drivers are available (not tested):
</p>

<p>
<a href="https://github.com/pgid69/bcm63xx-phone" class="urlextern" title="https://github.com/pgid69/bcm63xx-phone"  rel="nofollow">https://github.com/pgid69/bcm63xx-phone</a>
</p>

</div>

<h2 class="sectionedit49" id="debricking">Debricking</h2>
<div class="level2">

<p>
→ <a href="../../doc/howto/generic.debrick" class="wikilink1" title="doc:howto:generic.debrick">generic.debrick</a>
</p>

</div>

<h2 class="sectionedit50" id="cfe_bootloader">CFE Bootloader</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> you could read about <a href="../../doc/techref/bootloader.1" class="wikilink1" title="doc:techref:bootloader">bootloader</a> in general</div>
</li>
</ol>

<p>
With a serial console we can get some interesting info
</p>

<p>
About the version and build:
</p>
<div class="table sectionedit51"><table class="inline">
	<tr class="row0">
		<td class="col0"> <pre class="code"> CFE version cfe.d081.5003 for BCM96358 (32bit,SP,BE)
Build Date: Wed Nov 11 10:36:35 CST 2009 (Lihua_68693)</pre>
 </td>
	</tr>
</table></div>

<p>
And about the possible boards compatible with this CFE:
</p>
<div class="table sectionedit52"><table class="inline">
	<tr class="row0">
		<td class="col0"> <pre class="code">CFE&gt; 
b
Press:  &lt;enter&gt; to use current value

        &#039;-&#039; to go previous parameter

        &#039;.&#039; to clear the current value

        &#039;x&#039; to exit this command

Board Id Name (0-11) 
HW6358GW_A       -------  0
HW6358GW_B       -------  1
HW550            -------  2
HW550_FXO        -------  3
HW553            -------  4
HW556            -------  5
HW556aV2         -------  6
96358VW2         -------  7
96358VW-16       -------  8
96358GW          -------  9
96358GW-16       ------- 10
96358M           ------- 11       :  5  </pre>
 </td>
	</tr>
</table></div>
<div class="wrap_round wrap_important plugin_wrap">
<p>
<strong>Borked Board ID:</strong><br/>

If you play with the CFE settings you may end with messed Board ID which OpenWrt doesn&#039;t recognize, spite CFE itself is able to read it correctly
</p>
</div>
<p style="padding: 10px;border:1px solid grey;height:350px;font:11px/12px Georgia, Garamond, Serif;overflow:Auto;background-color:#DEE4E7">
<code>CFE version cfe.d081.5003 for BCM96358 (32bit,SP,BE)
Build Date: Wed Nov 11 10:36:35 CST 2009 (Lihua_68693)
Copyright (C) 2006 Huawei Technologies Co. Ltd.


Boot Address 0xbe000000

Initializing Arena.
Initializing Devices.

@w45260: Flash Manufacture id :c2

@w45260Flash Device id :2201

@w45260flipCFIGeometry:1
Parallel flash device: name , id 0x2201, size 16384KB
*** GetHG556aBoardVersion = <0> ***

CPU type 0x2A010: 300MHz, Bus: 133MHz, Ref: 64MHz
Total memory: 67108864 bytes (64MB)

Total memory used by CFE:  0x80401000 - 0x8052A510 (1217808)
Initialized Data:          0x8041F3C0 - 0x80421B60 (10144)
BSS Area:                  0x80421B60 - 0x80428510 (27056)
Local Heap:                0x80428510 - 0x80528510 (1048576)
Stack Area:                0x80528510 - 0x8052A510 (8192)
Text (code) segment:       0x80401000 - 0x8041F3B4 (123828)
Boot area (physical):      0x0052B000 - 0x0056B000
Relocation Factor:         I:00000000 - D:00000000

*** GetHG556aBoardVersion = <0> ***

Board IP address                  : 192.168.1.1  
Host IP address                   : 192.168.1.100  
Gateway IP address                :   
Run from flash/host (f/h)         : f  
Default host run file name        : vmlinux  
Default host flash file name      : bcm963xx_fs_kernel  
Boot delay (0-9 seconds)          : 1  
Board Id Name                     : HW556  
Psi size in KB                    : 64
Number of MAC Addresses (1-32)    : 14  
Base MAC Address                  : 64:16:f0:dd:f1:fa  
Ethernet PHY Type                 : Internal
Memory size in MB                 : 64
CMT Thread Number                 : 1

*** Press any key to stop auto run (1 seconds) ***
Auto run second count down: 1\0x081\0x080
boot kernel from be020100
Code Address: 0x80010000, Entry Address: 0x80010000
Decompression OK!
Entry at 0x80010000
Closing network.
Starting program at 0x80010000
[    0.000000] Linux version 3.3.8 (dani@tool) (gcc version 4.6.3 20120201 (prerelease) (Linaro GCC 4.6-2012.02) ) #2 Mon Feb 9 16:10:39 CET 2015
[    0.000000] Detected Broadcom 0x6358 CPU revision a1
[    0.000000] CPU frequency is 300 MHz
[    0.000000] 64MB of RAM installed
[    0.000000] registering 40 GPIOs
[    0.000000] gpiochip_add: registered GPIOs 0 to 39 on device: bcm63xx-gpio
[    0.000000] board_bcm963xx: Resetting USB PLL...  done
[    0.000000] board_bcm963xx: Boot address 0xbe000000
[    0.000000] board_bcm963xx: CFE version: 100.48.56-49.46
[    0.000000] board_bcm963xx: unknown bcm963xx board: HW556_CW_B
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 0002a010 (Broadcom BMIPS4350)
[    0.000000] Kernel panic - not syncing: unable to detect bcm963xx board
</code>
</p>

<p>
To solve it, enter in the CFE command line and first change the board ID to <strong>96358GW</strong>, then reboot and change it again to <strong>HW556</strong>.
</p>

<p>
see → <a href="https://dev.openwrt.org/ticket/14063" class="urlextern" title="https://dev.openwrt.org/ticket/14063"  rel="nofollow">https://dev.openwrt.org/ticket/14063</a>
</p>

</div>

<h2 class="sectionedit55" id="hardware_mods">Hardware mods</h2>
<div class="level2">

<p>
 → as a beginner, you really should inform yourself about <a href="../../doc/hardware/soldering" class="wikilink1" title="doc:hardware:soldering">soldering</a> in general and then obtain some practical experience!
</p>

<p>
No mods yet.
</p>

</div>

<h2 class="sectionedit56" id="firmware_mods">Firmware mods</h2>
<div class="level2">

</div>

<h3 class="sectionedit57" id="backports">Backports</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Backfire backport (<strong>10.03.1</strong>). Only HG55VDFA VER.C boards:<br/>
<a href="https://docs.google.com/uc?export=download&amp;id=0B-EMoBe-_OdBSGRHSjlDb3pjOWM" class="urlextern" title="https://docs.google.com/uc?export=download&amp;id=0B-EMoBe-_OdBSGRHSjlDb3pjOWM"  rel="nofollow">hg556a_ath_backport_10.03.1.zip</a></div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> Attitude Adjustment backport (<strong>12.09</strong>):<br/>
<a href="https://docs.google.com/uc?export=download&amp;id=0B-EMoBe-_OdBdU5VTHc5Q2o2aEU" class="urlextern" title="https://docs.google.com/uc?export=download&amp;id=0B-EMoBe-_OdBdU5VTHc5Q2o2aEU"  rel="nofollow">hg556a_backport_12.09.zip</a></div>
</li>
</ul>

</div>

<h2 class="sectionedit58" id="bootlogs">BOOTLOGS</h2>
<div class="level2">

</div>

<h3 class="sectionedit59" id="oem_bootlog">OEM bootlog:</h3>
<div class="level3">

<p style="padding: 10px;border:1px solid grey;height:600px;font:12px/14px Georgia, Garamond, Serif;overflow:Auto;background-color:#FFFFFF">
<code>CFE version cfe.d081.5003 for BCM96358 (32bit,SP,BE)
Build Date: Wed Nov 11 10:36:35 CST 2009 (Lihua_68693)
Copyright (C) 2006 Huawei Technologies Co. Ltd.


Boot Address 0xbe000000

Initializing Arena.
Initializing Devices.

@w45260: Flash Manufacture id :c2
@w45260Flash Device id :2201
@w45260flipCFIGeometry:1

Parallel flash device: name , id 0x2201, size 16384KB
*** GetHG556aBoardVersion = <0> ***

CPU type 0x2A010: 300MHz, Bus: 133MHz, Ref: 64MHz
Total memory: 67108864 bytes (64MB)

Total memory used by CFE:  0x80401000 - 0x8052A510 (1217808)
Initialized Data:          0x8041F3C0 - 0x80421B60 (10144)
BSS Area:                  0x80421B60 - 0x80428510 (27056)
Local Heap:                0x80428510 - 0x80528510 (1048576)
Stack Area:                0x80528510 - 0x8052A510 (8192)
Text (code) segment:       0x80401000 - 0x8041F3B4 (123828)
Boot area (physical):      0x0052B000 - 0x0056B000
Relocation Factor:         I:00000000 - D:00000000

*** GetHG556aBoardVersion = <0> ***

Board IP address                  : 192.168.1.1  
Host IP address                   : 192.168.1.100  
Gateway IP address                :   
Run from flash/host (f/h)         : f  
Default host run file name        : vmlinux  
Default host flash file name      : bcm963xx_fs_kernel  
Boot delay (0-9 seconds)          : 1  
Board Id Name                     : HW556  
Psi size in KB                    : 64
Number of MAC Addresses (1-32)    : 14  
Base MAC Address                  : 5c:4c:a9:6e:4a:a2  
Ethernet PHY Type                 : Internal
Memory size in MB                 : 64
CMT Thread Number                 : 1

*** Press any key to stop auto run (1 seconds) ***
Auto run second count down: 110
boot kernel from be9b2100
Code Address: 0x80010000, Entry Address: 0x8022a018
Decompression OK!
Entry at 0x8022a018
Closing network.
Starting program at 0x8022a018
Linux version 2.6.8.1 (root@IBM_x346) (gcc version 3.4.2) #2 Wed Jun 9 14:58:23 CST 2010


@w45260: Flash Manufacture id :c2
@w45260Flash Device id :2201
@w45260flipCFIGeometry:1

Parallel flash device: name , id 0x2201, size 16384KB
Total Flash size: 16384K with 128 sectors


Board id is set HW556, ucHardwareType 0

fInfo.flash_wlanparam_start_blk = 119
fInfo.flash_wlanparam_number_blk = 1
fInfo.flash_wlanparam_length = 0x2000
fInfo.flash_wlanparam_blk_offset = 0x1e000


HW556 prom init
CPU revision is: 0002a010
Determined physical RAM map:
 memory: 03f91920 @ 00000000 (usable)
On node 0 totalpages: 16273
  DMA zone: 16273 pages, LIFO batch:3
  Normal zone: 0 pages, LIFO batch:1
  HighMem zone: 0 pages, LIFO batch:1
Built 1 zonelists
Kernel command line: root=31:0 ro noinitrd
brcm mips: enabling icache and dcache...
Primary instruction cache 16kB, physically tagged, 2-way, linesize 16 bytes.
Primary data cache 16kB 2-way, linesize 16 bytes.
PID hash table entries: 256 (order 8: 2048 bytes)
Using 150.000 MHz high precision timer.
Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)
Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)

Allocating memory for DSP module core and initialization code
Allocated DSP module memory - CORE=0x81099cc0 SIZE=732896, INIT=0x0 SIZE=0

Memory: 61212k/65092k available (1828k kernel code, 3816k reserved, 319k data, 76k init, 0k highmem)
Calibrating delay loop... 299.00 BogoMIPS
Mount-cache hash table entries: 512 (order: 0, 4096 bytes)
Checking for 'wait' instruction...  unavailable.
softirq policy:0
softirq nice:0, prio:120
NET: Registered protocol family 16
Can't analyze prologue code at 801d7a94
SCSI subsystem initialized
usbcore: registered new driver usbfs
usbcore: registered new driver hub
NTFS driver 2.1.15 [Flags: R/O].
Initializing Cryptographic API
PPP generic driver version 2.4.2
NET: Registered protocol family 24
Using noop io scheduler
bcm963xx_mtd driver v1.0

PCI: Enabling device 0000:00:0a.0 (0000 -> 0002)
ehci_hcd 0000:00:0a.0: EHCI Host Controller
PCI: Setting latency timer of device 0000:00:0a.0 to 64
ehci_hcd 0000:00:0a.0: irq 18, pci mem c0000300
ehci_hcd 0000:00:0a.0: new USB bus registered, assigned bus number 1
PCI: cache line size of 32 is not supported by device 0000:00:0a.0
ehci_hcd 0000:00:0a.0: USB f.f enabled, EHCI 1.00, driver 2004-May-10
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 2 ports detected
ohci_hcd: 2004 Feb 02 USB 1.1 'Open' Host Controller (OHCI) Driver (PCI)
ohci_hcd: block sizes: ed 64 td 64
PCI: Enabling device 0000:00:09.0 (0000 -> 0002)
ohci_hcd 0000:00:09.0: OHCI Host Controller
PCI: Setting latency timer of device 0000:00:09.0 to 64
ohci_hcd 0000:00:09.0: irq 13, pci mem c0002400
ohci_hcd 0000:00:09.0: new USB bus registered, assigned bus number 2
hub 2-0:1.0: USB hub found
hub 2-0:1.0: 2 ports detected
usbcore: registered new driver usblp
drivers/usb/class/usblp.c: v0.13: USB Printer Device Class driver
Initializing USB Mass Storage driver...
usbcore: registered new driver usb-storage
USB Mass Storage support registered.
drivers/usb/serial/usb-serial.c: USB Serial support registered for Generic
usbcore: registered new driver usbserial_generic
usbcore: registered new driver usbserial
drivers/usb/serial/usb-serial.c: USB Serial Driver core v2.0
brcmboard: brcm_board_init entry

SES: Button GPIO 0x8009 is enabled
SES: LED GPIO 0x8009 is enabled
@@Board@@ GetHarewareType = 0x0
bcm963xx_serial driver v2.0
u32 classifier
NET: Registered protocol family 2
IP: routing cache hash table of 512 buckets, 4Kbytes
TCP: Hash tables configured (established 4096 bind 8192)
Initializing IPsec netlink socket
NET: Registered protocol family 1
NET: Registered protocol family 17
NET: Registered protocol family 15
Ebtables v2.0 registered
NET: Registered protocol family 8
NET: Registered protocol family 20
802.1Q VLAN Support v1.8 Ben Greear <greearb@candelatech.com>
All bugs added by David S. Miller <davem@redhat.com>
cfi_flash_sched_init!!!
VFS: Mounted root (squashfs filesystem) readonly.
Freeing unused kernel memory: 76k freed
usb 1-1: new high speed USB device using address 2
hub 1-1:1.0: USB hub found
hub 1-1:1.0: 2 ports detected

init started:  BusyBox v1.00 (2010.06.09-07:05+0000) multi-call binary
Algorithmics/MIPS FPU Emulator v1.5

BusyBox v1.00 (2010.06.09-07:05+0000) Built-in shell (msh)
Enter 'help' for a list of built-in commands.

Loading drivers and kernel modules... 
fuse init (API version 7.8)
fuse distribution version: 2.7.3
atmapi: module license 'Proprietary' taints kernel.
blaadd: blaa_detect entry
adsl: adsl_init entry
Broadcom BCMPROCFS v1.0 initialized
Broadcom BCM6358A1 Ethernet Network Device v0.3 Jul 14 2010 19:38:55
Config Ethernet Switch Through MDIO Pseudo PHY Interface
dgasp: kerSysRegisterDyingGaspHandler: eth0 registered 

eth0: MAC Address: 5C:4C:A9:6E:4A:A2

DSP Driver: DSP init stub

Endpoint: endpoint_init entry
BOS: Enter bosInit 
Enter bosAppInit 
Exit bosAppInit 
BOS: Exit bosInit 
Endpoint: GetHarewareType <0>
Endpoint: endpoint_init COMPLETED
drivers/usb/serial/usb-serial.c: USB Serial support registered for option1
usbcore: registered new driver option
drivers/usb/serial/option.c: USB Driver for GSM modems: v0.7.1
147
eth0 Link UP.

ip is  192.168.0.1mask is  255.255.255.0, ipbegin is  192.168.0.192, ipend is  192.168.0.254
===7163=attrvalue is 2 set to 104
===7163=attrvalue is 2 set to 104
xmlGetDhcpHostNameNode(appName dhcphostname, objName Entry, attrName option12, attrValue Huawei-HG556a
==MTU:psixml.cpp:xmlStartPppObjNode:14260:Mtu is 1492==
xmlEndIgmpProxyNode(calling cfm to get appName igmpproxy, objName proxy_node)
==MTU:psixml.cpp:xmlStartPppObjNode:14260:Mtu is 1492==
==IpExt:psixml.cpp:xmlGetPppAttr:14204:mac is ==
value  is  0
BcmDb_setSecEnblCfg :fw_enable 0, inflt 0, outflt 0, macflt 0, macmngr 0, nat_enable 1
===7163=attrvalue is 2 set to 104
===7163=attrvalue is 2 set to 104
xmlGetDhcpHostNameNode(appName dhcphostname, objName Entry, attrName option12, attrValue Huawei-HG556a
==MTU:psixml.cpp:xmlStartPppObjNode:14260:Mtu is 1492==
xmlEndIgmpProxyNode(calling cfm to get appName igmpproxy, objName proxy_node)
==MTU:psixml.cpp:xmlStartPppObjNode:14260:Mtu is 1492==
==IpExt:psixml.cpp:xmlGetPppAttr:14204:mac is ==
value  is  0
BcmAdsl_Initialize=0xC0066438, g_pFnNotifyCallback=0xC007F3F4
AnnexCParam=0x7FFF7EA8 AnnexAParam=0x00003987 adsl2=0x00000003
pSdramPHY=0xA3FFFFF8, 0x150EA5 0xDEADBEEF
AdslCoreHwReset: AdslOemDataAddr = 0xA3FFBB64
AnnexCParam=0x7FFF7EA8 AnnexAParam=0x00003987 adsl2=0x00000003
dgasp: kerSysRegisterDyingGaspHandler: dsl0 registered 
atmapi: prioritize receive packets
ip_tables: (C) 2000-2002 Netfilter core team
ip_conntrack version 2.1 (508 buckets, 0 max) - 368 bytes per conntrack
ip_conntrack_pptp version 2.1 loaded
ip_nat_pptp version 2.0 loaded

==>   Bcm963xx Software Version: V100R001C10B050SP01   <==

device eth0 entered promiscuous mode
br0: port 1(eth0) entering learning state
br0: topology change detected, propagating
br0: port 1(eth0) entering forwarding state
*******go there ,the pOption66 is *******:
*******go there the pOption67 is ********:
*******go there the pOption160 is *******:
getopt returned char k
setIndexName3
pvc2684d: Interface "nas_0_44" created sucessfully
setIndexName3
pvc2684d: Communicating over ATM 0.0.44, encapsulation: LLC
setIndexName3
pvc2684d: Interface "ipa_0_34" created sucessfully
setIndexName3
pvc2684d: Communicating over ATM 0.0.34, encapsulation: LLC

Open file fail in Function: BcmNtwk_initWandevice eth0 left promiscuous mode
br0: port 1(eth0) entering disabled state
device eth0 entered promiscuous mode
br0: port 1(eth0) entering learning state
br0: topology change detected, propagating
br0: port 1(eth0) entering forwarding state
in bcmmac_init
acbuf is null
init syslog is end

Sean@WLAN CHIP Vendor=<Atheros>, ProductId=<0xff1d>
ath_hal: 0.9.14.25 (<7>AR5212<7>, AR5416<7>, RF5111<7>, RF5112<7>, RF2413<7>, RF5413<7>, DEBUG<7>)
ath_dfs: Version 2.0.0
Copyright (c) 2005-2006 Atheros Communications, Inc. All Rights Reserved
wlan: 0.8.4.2 (Atheros/multi-bss)
ath_rate_atheros: Version 2.0.1
Copyright (c) 2001-2004 Atheros Communications, Inc, All Rights Reserved
ath_pci: 0.9.4.5 (Atheros/multi-bss)
ath_pci: CR-LSDK-1.3.1.71

PCI: Enabling device 0000:00:01.0 (0000 -> 0002)

Chan  Freq  RegPwr  HT   CTL CTL_U CTL_L DFS
   1  2412n     20  HT20  1    0    1     N
   1  2412n     20  HT40  1    0    1     N
   2  2417n     20  HT40  1    0    1     N
   3  2422n     20  HT40  1    1    1     N
   4  2427n     20  HT40  1    1    1     N
   5  2432n     20  HT40  1    1    1     N
   6  2437n     20  HT40  1    1    1     N
   7  2442n     20  HT40  1    1    1     N
   8  2447n     20  HT40  1    1    1     N
   9  2452n     20  HT40  1    1    1     N
  10  2457n     20  HT40  1    1    1     N
  11  2462n     20  HT40  1    1    1     N
  12  2467n     20  HT40  1    1    0     N
  13  2472n     20  HT40  1    1    0     N
dfs_init_radar_filters: dfs->dfs_rinfo.rn_numradars: 0
DFS min filter rssiThresh = 21
DFS max pulse dur = 131 ticks
wifi0: 11ng rates: 1Mbps 2Mbps 5.5Mbps 11Mbps 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps
wifi0: 11ng MCS:  0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
wifi0: mac 47.2 phy 13.0<7> radio 12.0<7>
wifi0: Use hw queue 1 for WME_AC_BE traffic
wifi0: Use hw queue 0 for WME_AC_BK traffic
wifi0: Use hw queue 2 for WME_AC_VI traffic
wifi0: Use hw queue 3 for WME_AC_VO traffic
wifi0: Use hw queue 8 for CAB traffic
wifi0: Use hw queue 9 for beacons
wifi0: Use hw queue 7 for UAPSD
wifi0: Atheros 5416 Owl emulation: mem=0x10000000, irq=39 hw_base=0xb0000000
wlan: mac acl policy registered

WlanSetupAll start
killall: hostapd: no process killed
SIOCGIFFLAGS: No such device
wlanconfig: ioctl: No such device
wlNBwCap[1]wlNCtrlsb[-1]
Set WLAN Radio = 1
==DEBUG==Atheros_SetupOneVAP,4427==bWpaPskMode:1,m_wlMssidVar[AthIndex].wlWep:disabled.
2xMaxPowerLevel: 30 (LEG)
2xMaxPowerLevel: 28 (LEG)
ath0
Setting Max Stations:33
2xMaxPowerLevel: 28 (LEG)
2xMaxPowerLevel: 28 (LEG)
ath_newstate: Resetting VAP dfswait_run
2xMaxPowerLevel: 28 (LEG)
ath_chan_set: Changing to channel 2412, Flags 10080, PF 0
device ath0 entered promiscuous mode
br0: port 2(ath0) entering learning state
br0: topology change detected, propagating
br0: port 2(ath0) entering forwarding state
2xMaxPowerLevel: 28 (LEG)
ath_chan_set: Changing to channel 2412, Flags 30080, PF 0
2xMaxPowerLevel: 28 (LEG)
ath_chan_set: Changing to channel 2417, Flags 30082, PF 0
2xMaxPowerLevel: 28 (LEG)
ath_chan_set: Changing to channel 2422, Flags 30082, PF 0
br0: port 2(ath0) entering disabled state
Send SIG(1) to pid 402 on eth down
2xMaxPowerLevel: 28 (LEG)
ath_newstate: Resetting VAP dfswait_run
br0: port 2(ath0) entering learning state
2xMaxPowerLevel: 28 (LEG)
ath_chan_set: Changing to channel 2412, Flags 10080, PF 0
br0: topology change detected, propagating
br0: port 2(ath0) entering forwarding state

E+E+E+E+E+hostapd is running.
2xMaxPowerLevel: 28 (LEG)

ath_chan_set: Changing to channel 2412, Flags 30080, PF 0

register normal.
SIP: can't Retrieve psi object 11 in app Voice when DialPlan table size loading, errno 3
SIP: can't Retrieve psi object 13 in app Voice when CallForward table size loading, errno 3
2xMaxPowerLevel: 28 (LEG)

ath_chan_set: Changing to channel 2417, Flags 30082, PF 0
iptables: Bad rule (does a matching rule exist in that chain?)
iptables: Bad rule (does a matching rule exist in that chain?)
2xMaxPowerLevel: 28 (LEG)
ath_chan_set: Changing to channel 2422, Flags 30082, PF 0
original call init_spanish_mib
iptables: Bad rule (does a matching rule exist in that chain?)
iptables: Bad rule (does a matching rule exist in that chain?)
2xMaxPowerLevel: 28 (LEG)
ath_chan_set: Changing to channel 2427, Flags 30082, PF 0
2xMaxPowerLevel: 28 (LEG)
ath_chan_set: Changing to channel 2432, Flags 30082, PF 0
2xMaxPowerLevel: 28 (LEG)
ath_chan_set: Changing to channel 2437, Flags 30082, PF 0
2xMaxPowerLevel: 28 (LEG)
ath_chan_set: Changing to channel 2442, Flags 30082, PF 0
BOS: Enter bosInit 
bosTimerInit
2xMaxPowerLevel: 28 (LEG)
ath_chan_set: Changing to channel 2447, Flags 30082, PF 0
Enter bosAppInit 
Exit bosAppInit 
BOS: Exit bosInit 
2xMaxPowerLevel: 28 (LEG)
ath_chan_set: Changing to channel 2452, Flags 30082, PF 0
2xMaxPowerLevel: 28 (LEG)
ath_chan_set: Changing to channel 2457, Flags 30082, PF 0
2xMaxPowerLevel: 28 (LEG)
ath_chan_set: Changing to channel 2462, Flags 30082, PF 0
[DMM]:Endpoit(3) receives an error digitmap string!, file = Dmm.c, line = 2371

 UNSPT


^

2xMaxPowerLevel: 28 (LEG)
ath_chan_set: Changing to channel 2467, Flags 30082, PF 0

SipMsgThread MsgThread pid=605
------------------------------------------------------------
 at 946684845.994999     *** Received signal 18 on thread with PID 601
------------------------------------------------------------
------------------------------------------------------------
 at 946684846.059999     *** Received signal 18 on thread with PID 601
------------------------------------------------------------
------------------------------------------------------------
 at 946684846.124999     *** Received signal 18 on thread with PID 601
------------------------------------------------------------
2xMaxPowerLevel: 28 (LEG)

ath_chan_set: Changing to channel 2472, Flags 30082, PF 0

------------------------------------------------------------
 at 946684846.199999     *** Received signal 18 on thread with PID 601
------------------------------------------------------------
Process[voice] set voip status to [1]Process[voice] set voip status to [0]<7>ath_newstate: Resetting VAP dfswait_run

2xMaxPowerLevel: 28 (LEG)

ath_chan_set: Changing to channel 2412, Flags 10080, PF 0

kernel::endpoint_open

kernel::endpoint_open COMPLETED

PstnInit Success!Created queue HDSP 
00:00:46 CALLCLIENT: Initializing endpoints callSipClientMain
voipqosapi: sendto returned -1
sipConfig: sipzParamp=0x7fff7150 sipzParamp->regname= line 59 file  hsip.c
sipConfig: sipzParamp=0x7fff7150line 69 file  hsip.c
sipConfig: &mgscb=0x1000e9f0line 82 file  hsip.c
00:00:46 CALLCLIENT: Initializing endpoints
00:00:46 Endpoint will be initialized for country ESP (country code = 17)

00:00:46 Endpoint Event task started with pid 628...

00:00:46 Endpoint Packet task started with pid 629 ...

Enter bosStartApp

bosAppRootTask() - Is it morning already? Spawning app task (epoch #0)...
bosAppRootTask() - Is it morning already? Spawning app task (epoch #0)...


Enter TaskCreate aoAP
TaskCreate - spawn new task aoAP
Exit TaskCreate 
AppResetDetectionEnable() - Enabled reset detection.
Exit bosStartApp
PLL init completed. PLL registers set to:

PCM->pcm_pll_ctrl1       = 0x00020001 
PCM->pcm_pll_ctrl2       = 0x0008492B 
PCM->pcm_pll_ctrl3       = 0x00001E1C 

Set up PCM registers
Channel 0 assigned to timeslot 0
Channel 1 assigned to timeslot 8
Channel 2 assigned to timeslot 1
Channel 3 assigned to timeslot 9
Channel 4 assigned to timeslot 2

Tx Desc (0xA29DE000): chan 0, buf 0, sts 0xe000, len 1280, bufp 0x29f4000 
Tx Desc (0xA29DE008): chan 0, buf 1, sts 0x7000, len 1280, bufp 0x29f4510 
Rx Desc (0xA28FF000): chan 0, buf 0, sts 0x8000, len 1280, bufp 0x36b7000 
Rx Desc (0xA28FF008): chan 0, buf 1, sts 0x9000, len 1280, bufp 0x36b7510 

initIudma: chan 0, descBase 0xa28ff000, descBaseIudma 0x28ff000
initIudma: chan 1, descBase 0xa29de000, descBaseIudma 0x29de000

PCM ENABLE INFO: DMA0 IRQ STATUS  0x00000000
PCM ENABLE INFO: DMA0 IRQ MASK    0x00000005
PCM ENABLE INFO: DMA1 IRQ STATUS  0x00000000
PCM ENABLE INFO: DMA1 IRQ MASK    0x00000005
PCM ENABLE INFO: PCM  IRQ MASK    0x00000003
PCM ENABLE INFO: PCM  IRQ PENDING 0x00000007

Enter TaskCreate CMT_EXCEPTION_IST

TaskCreate - spawn new task CMT_EXCEPTION_IST

Exit TaskCreate 

regStatus (reg 12 sel 0)    = 0x10008501 
regStatus (reg 12 sel 7)    = 0x00000101 
regCause  (reg 13 sel 0)    = 0x00000000 
regCause  (reg 13 sel 7)    = 0x00808000 
regCMT    (reg 22 sel 0)    = 0xe30e1006 
regCMT    (reg 22 sel 1)    = 0xe8008003 

Kicking off secondary thread processor at entry point 0x81099D00...
Secondary thread processor entry point at 0x81099d00
Thread processor handshake. Secondary app initialized properly.

Enter TaskCreate HTSK

TaskCreate - spawn new task HTSK
Exit TaskCreate 

SUCCESS: Took semaphore
SUCCESS: Gave semaphore

INFO: MSPI POLLING MODE
INFO: IRQ MASK 0xa0020424
INFO: IRQ STATUS 0x400000
INFO: BLOCK ENABLES 0x3e0320

MSPI INITIALIZED

HG55VDFA DoControlRelayStatus: disconnect PSTN relay

#########slicLe88221CalDcDc=CH[0]

Read data from Rev ID register: 0x04, 0xB3

@@@@@@@@@@@@SWcal=[0x1]

####normalChan0Cal: 0x08  normalChan1Cal: 0x08

DAA rstGpioPin=25, rlyGpioPin=14

     DAA DBG: DAA read failed!!! 

 DAA DBG: ISOCAP lock count = 0 

Si3050 SLAC Initialised, Line side device = Si: 3010 (0xf)
System dev rev: 0xf, Line dev rev: 0xf
Line dev status: FDT:0x1, LCS: 0x1f
DAA initialized with country code 17
Detect FXO Chip Failed...
Skip daa6358Si3050SetFlyMode due to Not Si3050 Detected.
DAA Device Init completed...[19:38:34]
Initialized DAA driver functions at location 0xc0205968
boardHalInit6358: Initialization complete.
boardHalInit completed
Enter TaskCreate HRTBEAT
TaskCreate - spawn new task HRTBEAT
Exit TaskCreate 
HEARTBEAT: Initialized!
g_iRtcpInterval = 3000
bosMsgQCreate: Created message queue VRGEVQ at address 0x6000c 
Enter TaskCreate VRGEVPR
TaskCreate - spawn new task VRGEVPR
Exit TaskCreate 
Enter TaskCreate HCAS
TaskCreate - spawn new task HCAS
Exit TaskCreate 
Enter TaskCreate DMAW
TaskCreate - spawn new task DMAW
Exit TaskCreate 
*** gStartRxDesc[0] = 0xA28FF000 
*** gBufferSizeBytes = 1280 
*** gStartTxDesc[0] = 0xA29DE000 
hal6358PcmInit 263 nextTxDesc = 0xA29DE000 
hal6358PcmInit 263 nextTxDesc = 0xA29DE008 
hal6358PcmInit 267 Ownership for TX desc not set. Use this buffer. 
PERF->IrqMask   = 0xA0020424 
PERF->IrqMask1  = 0x00800000 
Default value for provItemId '226' did not exist


ENDPT: hdspVhdOpen Secondary Connection VHD success. DSP 0, VHD (0x50) of type: 0x0
ENDPT: Setting T.38 error correction mode for vhd 80 to 0x104
ENDPT: hdspVhdOpen Secondary Connection VHD success. DSP 0, VHD (0x51) of type: 0x0
ENDPT: Setting T.38 error correction mode for vhd 81 to 0x104
ENDPT: hdspVhdOpen Secondary Connection VHD success. DSP 0, VHD (0x52) of type: 0x0
ENDPT: Setting T.38 error correction mode for vhd 82 to 0x104
ENDPT: hdspVhdOpen Secondary Connection VHD success. DSP 0, VHD (0x53) of type: 0x0
ENDPT: Setting T.38 error correction mode for vhd 83 to 0x104

bosMsgQCreate: Created message queue PSTN_CTL_EVQ at address 0x6800d 

Enter TaskCreate PSTN
TaskCreate - spawn new task PSTN
Exit TaskCreate 

pstnCtlInit successful

dgasp: kerSysRegisterDyingGaspHandler: endpoint registered 

@@DoVrgEndptInit reInjecitonMode=<0x0>.

00:00:50 
Enter vrgEndptCasTimeParamControl... minHookFlash = 80, maxHookFlash = 250.

ENDPT: EPTYPE_FXS
ENDPT: hdspVhdOpen Line VHD success. DSP 0, VHD (0x54) of type: 0x7

Default value for provItemId '74' did not exist
Default value for provItemId '75' did not exist


minHookFlash = 80.
maxHookFlash = 250.

Default value for provItemId '217' did not exist
Default value for provItemId '41' did not exist
Default value for provItemId '66' did not exist
Default value for provItemId '58' did not exist
Default value for provItemId '219' did not exist

ENDPT: Initialization completed successfully for endpt 0

00:00:50 SIGNAL: endpt 0, cnx -1, evt 111 (TxGain), value 0
00:00:50 SIGNAL: endpt 0, cnx -1, evt 112 (RxGain), value 0
ENDPT: EPTYPE_FXS

ENDPT: hdspVhdOpen Line VHD success. DSP 0, VHD (0x55) of type: 0x7

Default value for provItemId '74' did not exist
Default value for provItemId '75' did not exist

minHookFlash = 80.
maxHookFlash = 250.

Default value for provItemId '217' did not exist
Default value for provItemId '41' did not exist
Default value for provItemId '66' did not exist
Default value for provItemId '58' did not exist
Default value for provItemId '219' did not exist

ENDPT: Initialization completed successfully for endpt 1


00:00:51 SIGNAL: endpt 1, cnx -1, evt 111 (TxGain), value 0
00:00:51 SIGNAL: endpt 1, cnx -1, evt 112 (RxGain), value 0
ENDPT: EPTYPE_PSTN
ENDPT: hdspVhdOpen PSTN VHD success. DSP 0, VHD (0x56) of type: 0x6
ENDPT: hdspVhdOpen Line VHD success. DSP 0, VHD (0x57) of type: 0x7

Default value for provItemId '74' did not exist
Default value for provItemId '75' did not exist

minHookFlash = 80.
maxHookFlash = 250.

Default value for provItemId '217' did not exist

DAA driver * for chan 2 is c0244f90
Default value for provItemId '58' did not exist
Default value for provItemId '219' did not exist
DAA driver * for chan 2 is c0244f90
DAA driver * for chan 2 is c0244f90
DAA: Skip cmd[1] due to on the fly <0>,<0>...
ENDPT: Initialization completed successfully for endpt 2


00:00:51  RTP read thread started with pid 639 
00:00:51  RTP read thread started with pid 640 
00:00:51  RTP read thread started with pid 641 
00:00:51  RTP read thread started with pid 642 
00:00:51  RTCP thread started with pid 643 
00:00:51 rtpInit: RTCP task created, taskId = 14351
00:00:51 ccPstnInit: Init PSTN module with dial-plan =  
00:00:51 gwPstnSignal: signal-67, action-0x1, value--1 

ENDPT: Enable PSTN EC. 
ENDPT: ECAN Enabled for endpt 2

00:00:51 gwPstnSignal (call setup): value =  
00:00:51 gwPstnSignal: signal-63, action-0x554890, value--1 

vrgEndptSignal (EPSIG_PSTNCALLSETUP) 

00:00:51 gwPstnSignal: signal-66, action-0x1, value--1 
CMTD_CTL: Using default settings

CMTD_CTL: setFilterCoeff: filtSize79



Seized PSTN line 2
ConnectSB: connecting line2 and line0 
DAA: Skip cmd[2] due to on the fly <0>,<0>...
00:00:51 gwPstnSignal: signal-68, action-0x1, value--1 
ENDPT: Disable PSTN EC. 
ENDPT: ECAN disabled for endpt 2

00:00:51 gwPstnSignal: signal-65, action-0x1, value--1 
Released PSTN line 2

DisconnectSB: disconnecting line0 and line2 
DAA: Skip cmd[0] due to on the fly <0>,<0>...
00:00:51 CALLCLIENT: Initialization complete callSipClientMain
00:00:51 ccPublishSipEventCB: event 0 
PSTN_CTL: cmtdCtlConfigFilter success vhd=0x56
Enter TaskCreate TM56
TaskCreate - spawn new task TM56
Exit TaskCreate 
PSTN_CTL: timerTaskMain timer task started, timeout = 5000

Get Resource file size = [779725]
@@@@Voice@@@FXO Chip Dectected result = <0>.
00:00:53 
 ====== HSPA voice Read Thread start ====== 

======start No voice process 10 times=====
mkdir: Cannot create directory `/var/mnt/USBDisk_1/twonkymedia.db': No such file or directory
DLNA:syscall.c:startDlna:5682:twonkymedia.db can't be created![10]
initDeviceAssociation(entry): BcmCfm_ManageableDeviceTbl 0
initDeviceAssociation(): fopen /var/udhcpd/manageable.device failed): return error
kill: Could not kill pid '65535': No such process
Scratch pad is not initialized.

Enter TaskEnterShutdown (task=TM56) 
Exit TaskEnterShutdown (task=TM56) 
Enter bosTaskDestoryR, taskId = 82a38928
PSTN_CTL: cmtdCtlDisable success vhd=0x56
PstnEventCallback: PSTN_CTL_EVT_CPTONE_TIMEOUT
No scratch pad found.  Initialize scratch pad...

telnet function started!
==DHCPD:files.c:write_dnsconf:498:==
==DHCPD:files.c:write_dnsconf:523:BUF[address=/#/192.168.0.1
]==
Can't get dns's pid
URL Filer: open rule file failed!
==DNS:option.c:read_opts:2064:conffile is /var/dnsmasq.conf==
==DNS:option.c:one_file:1870file is /var/dnsmasq.conf:==
==DNS:option.c:one_opt:968:arg is /#/192.168.0.1==
BcmWL_createAutoCfgSwTsk Called...
BcmWL_createAutoCfgSwTsk Success[1026]...
Sean@WLAN CHIP Vendor=<Atheros>, ProductId=<0xff1d>
==HTTPD:httpd.c:webmain:2996:ATHEROS:VHG==
==MTU:ifcuiweb.cpp:BcmWeb_getWanConInfo:1350:1492,1492,==
NTWK_INTF wanObjIndex=2, attachToIndex=1
IFC_ATM_VCC =255/65535
NTWK_INTF wanObjIndex=3, attachToIndex=2
IFC_ATM_VCC =0/44
NTWK_INTF wanObjIndex=4, attachToIndex=3
IFC_ATM_VCC =0/34
Flash Write confliction, wait...

Flash Write confliction, wait...


<TR064>Line:150=====start up mac=5c:4c:a9:6e:4a:a2

<TR064>Line:153=====syspwd=VF-EShg556
Flash Write confliction, wait...

Flash Write confliction, wait...

NTWK_INTF wanObjIndex=5, attachToIndex=4
IFC_ATM_VCC =0/33
Flash Write confliction, wait...

Flash Write confliction, wait...

language option, user:es_ES admin:en_US
IFC_ATM_VCC =255/65535
IFC_ATM_VCC =0/44
IFC_ATM_VCC =0/34
IFC_ATM_VCC =0/33
SSDP server socket OK!

Found INET

Found INET
Device=br0
nmbd: not found
Init  port is  80
bcmIsDataPvc: ppp_255_65535_1 data ifc

Cwmp initing...
paraattribute  name  is    HG553VF
bcmIsDataPvc: nas_0_44 data ifc(Data)

PPP@WLAN CHIP Vendor=<Atheros>, ProductId=<0xff1d>
Voice channel  Query
[CwmpReadLoadInfoFromFlash,230]=======acTmp:ÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿ========
[CwmpReadLoadInfoFromFlash,245]=======pulErrCode:0,pcCmdkey:========
==DEBUG==BcmSipRegisterQuery 7426==stsOld:0,stsHspa:0,iHspaDomain:0,usVoiceChannel:1,iSipChannel:0,iVoiceRegister:0,glbAdslRegState:0,glbHspaRegState:0
sDeviceCount  is  0 sSimExist is  -1
Voice channel  Query
==DEBUG==BcmSipRegisterQuery 7426==stsOld:0,stsHspa:0,iHspaDomain:0,usVoiceChannel:1,iSipChannel:0,iVoiceRegister:0,glbAdslRegState:0,glbHspaRegState:0
sDeviceCount  is  0 sSimExist is  -1
sigWanDownProcess
cDataMode   is  0
AdslCoreEcUpdTmr: timeMs=1800225 ecUpdMask=0x40000

</code>
</p>

</div>

<h3 class="sectionedit60" id="openwrt_bootlog">Openwrt bootlog:</h3>
<div class="level3">

<p style="padding: 10px;border:1px solid grey;height:600px;font:12px/14px Georgia, Garamond, Serif;overflow:Auto;background-color:#FFFFFF">
<code>CFE version cfe.d081.5003 for BCM96358 (32bit,SP,BE)
Build Date: Wed Nov 11 10:36:35 CST 2009 (Lihua_68693)
Copyright (C) 2006 Huawei Technologies Co. Ltd.


Boot Address 0xbe000000

Initializing Arena.
Initializing Devices.

@w45260: Flash Manufacture id :c2

@w45260Flash Device id :2201

@w45260flipCFIGeometry:1
Parallel flash device: name , id 0x2201, size 16384KB
*** GetHG556aBoardVersion = <0> ***

CPU type 0x2A010: 300MHz, Bus: 133MHz, Ref: 64MHz
Total memory: 67108864 bytes (64MB)

Total memory used by CFE:  0x80401000 - 0x8052A510 (1217808)
Initialized Data:          0x8041F3C0 - 0x80421B60 (10144)
BSS Area:                  0x80421B60 - 0x80428510 (27056)
Local Heap:                0x80428510 - 0x80528510 (1048576)
Stack Area:                0x80528510 - 0x8052A510 (8192)
Text (code) segment:       0x80401000 - 0x8041F3B4 (123828)
Boot area (physical):      0x0052B000 - 0x0056B000
Relocation Factor:         I:00000000 - D:00000000

*** GetHG556aBoardVersion = <0> ***

Board IP address                  : 192.168.1.1  
Host IP address                   : 192.168.1.35  
Gateway IP address                :   
Run from flash/host (f/h)         : h  
Default host run file name        : vmlinux  
Default host flash file name      : bcm963xx_fs_kernel  
Boot delay (0-9 seconds)          : 1  
Board Id Name                     : HW556  
Psi size in KB                    : 64
Number of MAC Addresses (1-32)    : 14  
Base MAC Address                  : 5c:4c:a9:6e:4a:a2  
Ethernet PHY Type                 : Internal
Memory size in MB                 : 64
CMT Thread Number                 : 1

*** Press any key to stop auto run (1 seconds) ***
Auto run second count down: 110
0x80010000/2739096 0x802acb98/159768 Entry at 0x8021e9f0
Closing network.
Starting program at 0x8021e9f0
[    0.000000] Linux version 2.6.39.4 (dani@tool) (gcc version 4.5.4 20110808 (prerelease) (Linaro GCC 4.5-2011.08) ) #22 Sat Dec 31 02:13:30 CET 2011
[    0.000000] Detected Broadcom 0x6358 CPU revision a1
[    0.000000] CPU frequency is 300 MHz
[    0.000000] 64MB of RAM installed
[    0.000000] registering 40 GPIOs
[    0.000000] board_bcm963xx: Boot address 0xbe000000
[    0.000000] board_bcm963xx: CFE version: 100.48.56-49.46
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 0002a010 (Broadcom BMIPS4350)
[    0.000000] board_bcm963xx: board name: HW556
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 04000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone PFN ranges:
[    0.000000]   Normal   0x00000000 -> 0x00004000
[    0.000000] Movable zone start PFN for each node
[    0.000000] early_node_map[1] active PFN ranges
[    0.000000]     0: 0x00000000 -> 0x00004000
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
[    0.000000] Kernel command line:  root=/dev/mtdblock2 rootfstype=squashfs,jffs2 noinitrd console=ttyS0,115200
[    0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)
[    0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Primary instruction cache 16kB, VIPT, 2-way, linesize 16 bytes.
[    0.000000] Primary data cache 16kB, 2-way, VIPT, cache aliases, linesize 16 bytes
[    0.000000] Memory: 62016k/65536k available (2144k kernel code, 3520k reserved, 369k data, 160k init, 0k highmem)
[    0.000000] NR_IRQS:128
[    0.000000] Calibrating delay loop... 299.26 BogoMIPS (lpj=598528)
[    0.036000] pid_max: default: 32768 minimum: 301
[    0.040000] Mount-cache hash table entries: 512
[    0.052000] NET: Registered protocol family 16
[    0.068000] changed ath9k regdomain to 0xff
[    0.072000] registering PCI controller with io_map_base unset
[    0.084000] bio: create slab <bio-0> at 0
[    0.092000] pci 0000:00:01.0: fixup device configuration
[    0.096000] pci-ath9k-fixup: Writing 0x0029168c to register 0x6000
[    0.100000] pci-ath9k-fixup: Writing 0x02800001 to register 0x6008
[    0.104000] pci-ath9k-fixup: Writing 0x2091168c to register 0x602c
[    0.108000] pci-ath9k-fixup: Writing 0x002a168c to register 0x5000
[    0.112000] pci-ath9k-fixup: Writing 0x02800001 to register 0x5008
[    0.116000] pci-ath9k-fixup: Writing 0x2091168c to register 0x502c
[    0.120000] pci-ath9k-fixup: Writing 0x05040cc0 to register 0x5064
[    0.124000] pci-ath9k-fixup: Writing 0x00033811 to register 0x506c
[    0.128000] pci-ath9k-fixup: Writing 0x0040073b to register 0x4004
[    0.132000] pci-ath9k-fixup: Writing 0x00000003 to register 0x4074
[    0.136000] pci-ath9k-fixup: Writing 0x01c20000 to register 0x4000
[    0.140000] pci-ath9k-fixup: Writing 0x00000044 to register 0x6034
[    0.144000] pci-ath9k-fixup: Device vendor 0x168c, id 0x0029
[    0.164000] pci 0000:00:01.0: BAR 0: assigned [mem 0x30000000-0x3000ffff]
[    0.168000] pci 0000:00:01.0: BAR 0: set to [mem 0x30000000-0x3000ffff] (PCI address [0x30000000-0x3000ffff])
[    0.172000] Switching to clocksource MIPS
[    0.184000] NET: Registered protocol family 2
[    0.188000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.196000] TCP established hash table entries: 2048 (order: 2, 16384 bytes)
[    0.204000] TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
[    0.212000] TCP: Hash tables configured (established 2048 bind 2048)
[    0.216000] TCP reno registered
[    0.220000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.228000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.236000] NET: Registered protocol family 1
[    0.240000] audit: initializing netlink socket (disabled)
[    0.248000] type=2000 audit(0.248:1): initialized
[    0.256000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.260000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.272000] msgmni has been set to 121
[    0.276000] io scheduler noop registered
[    0.280000] io scheduler deadline registered (default)
[    0.288000] bcm63xx_uart.0: ttyS0 at MMIO 0xfffe0100 (irq = 10) is a bcm63xx_uart
[    0.296000] console [ttyS0] enabled, bootconsole disabled
[    0.296000] console [ttyS0] enabled, bootconsole disabled
[    0.312000] bcm963xx-flash bcm963xx-flash.0: 0x02000000 at 0x1e000000
[    0.316000] bcm963xx: Found 1 x16 devices at 0x0 in 16-bit bank. Manufacturer ID 0x0000c2 Chip ID 0x00227e
[    0.328000] Amd/Fujitsu Extended Query Table at 0x0040
[    0.332000]   Amd/Fujitsu Extended Query version 1.3.
[    0.340000] Using buffer write method
[    0.340000]   Silicon revision: 10
[    0.344000]   Address sensitive unlock: Required
[    0.352000]   Erase Suspend: Read/write
[    0.356000]   Block protection: 1 sectors per group
[    0.360000]   Temporary block unprotect: Not supported
[    0.364000]   Block protect/unprotect scheme: 8
[    0.368000]   Number of simultaneous operations: 0
[    0.376000]   Burst mode: Not supported
[    0.376000]   Page mode: 8 word page
[    0.380000]   Vpp Supply Minimum Program/Erase Voltage: 9.5 V
[    0.388000]   Vpp Supply Maximum Program/Erase Voltage: 10.5 V
[    0.392000]   Top/Bottom Boot Block: Uniform, Top WP
[    0.400000] number of CFI chips: 1
[    0.404000] bcm963xx_flash: Read Signature value of CFE1CFE1
[    0.408000] bcm963xx-flash bcm963xx-flash.0: CFE bootloader detected
[    0.416000] bcm963xx_flash: CFE boot tag found with version 8 and board type HW556
[    0.424000] bcm963xx_flash: Partition 0 is CFE offset 0 and length 20000
[    0.428000] bcm963xx_flash: Partition 1 is kernel offset 20100 and length dff00
[    0.436000] bcm963xx_flash: Partition 2 is rootfs offset 100000 and length d00000
[    0.444000] bcm963xx_flash: Partition 3 is ath_data offset e00000 and length 1e0000
[    0.452000] bcm963xx_flash: Partition 4 is nvram offset fe0000 and length 20000
[    0.460000] bcm963xx_flash: Partition 5 is linux offset 20000 and length de0000
[    0.468000] bcm963xx_flash: Spare partition is 340000 offset and length ac0000
[    0.476000] Creating 6 MTD partitions on "bcm963xx":
[    0.480000] 0x000000000000-0x000000020000 : "CFE"
[    0.488000] mtd: Giving out device 0 to CFE
[    0.492000] 0x000000020100-0x000000100000 : "kernel"
[    0.500000] mtd: partition "kernel" must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.512000] mtd: Giving out device 1 to kernel
[    0.520000] 0x000000100000-0x000000e00000 : "rootfs"
[    0.528000] mtd: Giving out device 2 to rootfs
[    0.532000] mtd: partition "rootfs" set to be root filesystem
[    0.540000] mtd: partition "rootfs_data" created automatically, ofs=340000, len=AC0000 
[    0.548000] 0x000000340000-0x000000e00000 : "rootfs_data"
[    0.556000] mtd: Giving out device 3 to rootfs_data
[    0.564000] 0x000000e00000-0x000000fe0000 : "ath_data"
[    0.568000] mtd: Giving out device 4 to ath_data
[    0.576000] 0x000000fe0000-0x000001000000 : "nvram"
[    0.584000] mtd: Giving out device 5 to nvram
[    0.588000] 0x000000020000-0x000000e00000 : "linux"
[    0.596000] mtd: Giving out device 6 to linux
[    0.608000] bcm63xx-wdt bcm63xx-wdt.0:  started, timer margin: 30 sec
[    0.624000] TCP westwood registered
[    0.624000] NET: Registered protocol family 17
[    0.632000] 802.1Q VLAN Support v1.8 Ben Greear <greearb@candelatech.com>
[    0.636000] All bugs added by David S. Miller <davem@redhat.com>
[    0.648000] mtdblock_open
[    0.652000] ok
^@[    0.660000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
[    0.668000] Freeing unused kernel memory: 160k freed
awk: /proc/cpuinfo: No such file or directory
[    3.508000] roboswitch: Probing device eth0: found a 5325! It's a 5350.
[    4.576000] There is already a switch registered on the device 'eth0'
- preinit -
Press the [f] key and hit [enter] to enter failsafe mode
- regular preinit -
[    9.076000] mtdblock_open
[    9.080000] ok
[    9.088000] mtdblock_release
[    9.092000] ok
[    9.172000] MTDSB: lookup_bdev() returned 0
[    9.176000] MTDSB: New superblock for device 3 ("rootfs_data")
[    9.224000] JFFS2 notice: (317) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (0 unchecked, 0 orphan) and 5 of xref (0 dead, 2 orphan) found.
[    9.256000] MTD_open
[    9.256000] MTD_ioctl
[    9.260000] MTD_ioctl
[    9.260000] MTD_close
switching to jffs2
- init -
^@
Please press Enter to activate this console. [   12.756000] Compat-wireless backport release: compat-wireless-2011-11-29
[   12.760000] Backport based on wireless-testing.git master-2011-12-01
[   12.984000] cfg80211: Calling CRDA to update world regulatory domain
[   13.812000] cfg80211: World regulatory domain updated:
[   13.816000] cfg80211:     (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[   13.824000] cfg80211:     (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   13.832000] cfg80211:     (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[   13.844000] cfg80211:     (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[   13.852000] cfg80211:     (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   13.860000] cfg80211:     (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   14.532000] SCSI subsystem initialized
[   14.632000] There is already a switch registered on the device 'eth0'
[   15.028000] usbcore: registered new interface driver usbfs
[   15.036000] usbcore: registered new interface driver hub
[   15.048000] usbcore: registered new device driver usb
[   16.632000] PCI: Enabling device 0000:00:01.0 (0000 -> 0002)
[   16.640000] board_bcm963xx: Setting device platform data
[   16.652000] ath: eeprom contains invalid mac address: ff:ff:ff:ff:ff:ff
[   16.660000] ath: random mac address will be used: 66:94:cc:56:b8:3c
[   16.680000] ieee80211 phy0: Atheros AR9280 Rev:2 mem=0xc02e0000, irq=39
[   16.692000] cfg80211: Calling CRDA for country: JP
[   16.852000] cfg80211: Regulatory domain changed to country: JP
[   16.860000] cfg80211:     (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[   16.868000] cfg80211:     (2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 2000 mBm)
[   16.876000] cfg80211:     (2457000 KHz - 2482000 KHz @ 20000 KHz), (N/A, 2000 mBm)
[   16.884000] cfg80211:     (2474000 KHz - 2494000 KHz @ 20000 KHz), (N/A, 2000 mBm)
[   16.892000] cfg80211:     (4910000 KHz - 4930000 KHz @ 10000 KHz), (N/A, 2300 mBm)
[   16.900000] cfg80211:     (4910000 KHz - 4990000 KHz @ 40000 KHz), (N/A, 2300 mBm)
[   16.908000] cfg80211:     (4930000 KHz - 4950000 KHz @ 10000 KHz), (N/A, 2300 mBm)
[   16.916000] cfg80211:     (5030000 KHz - 5045000 KHz @ 10000 KHz), (N/A, 2300 mBm)
[   16.924000] cfg80211:     (5030000 KHz - 5090000 KHz @ 40000 KHz), (N/A, 2300 mBm)
[   16.932000] cfg80211:     (5050000 KHz - 5060000 KHz @ 10000 KHz), (N/A, 2300 mBm)
[   16.940000] cfg80211:     (5170000 KHz - 5250000 KHz @ 40000 KHz), (N/A, 2000 mBm)
[   16.948000] cfg80211:     (5250000 KHz - 5330000 KHz @ 40000 KHz), (N/A, 2000 mBm)
[   16.956000] cfg80211:     (5490000 KHz - 5710000 KHz @ 40000 KHz), (N/A, 2300 mBm)
[   16.996000] Button Hotplug driver version 0.4.1
[   17.972000] NTFS driver 2.1.30 [Flags: R/O MODULE].
[   18.520000] PPP generic driver version 2.4.2
[   18.752000] ip_tables: (C) 2000-2006 Netfilter Core Team
[   19.076000] NET: Registered protocol family 24
[   19.324000] ehci_hcd: USB 2.0 'Enhanced' Host Controller (EHCI) Driver
[   19.328000] bcm63xx_ehci bcm63xx_ehci.0: BCM63XX integrated EHCI controller
[   19.336000] bcm63xx_ehci bcm63xx_ehci.0: new USB bus registered, assigned bus number 1
[   19.368000] bcm63xx_ehci bcm63xx_ehci.0: irq 18, io mem 0xfffe1300
[   19.384000] bcm63xx_ehci bcm63xx_ehci.0: USB 2.0 started, EHCI 1.00, overcurrent ignored
[   19.392000] hub 1-0:1.0: USB hub found
[   19.396000] hub 1-0:1.0: 2 ports detected
[   19.712000] nf_conntrack version 0.5.0 (971 buckets, 3884 max)
[   19.832000] usb 1-1: new high speed USB device number 2 using bcm63xx_ehci
[   20.220000] hub 1-1:1.0: USB hub found
[   20.232000] hub 1-1:1.0: 2 ports detected
[   20.636000] ohci_hcd: USB 1.1 'Open' Host Controller (OHCI) Driver
[   20.640000] bcm63xx_ohci bcm63xx_ohci.0: BCM63XX integrated OHCI controller
[   20.648000] bcm63xx_ohci bcm63xx_ohci.0: new USB bus registered, assigned bus number 2
[   20.656000] bcm63xx_ohci bcm63xx_ohci.0: irq 13, io mem 0xfffe1400
[   20.724000] hub 2-0:1.0: USB hub found
[   20.728000] hub 2-0:1.0: 1 port detected
[   21.008000] Initializing USB Mass Storage driver...
[   21.016000] usbcore: registered new interface driver usb-storage
[   21.020000] USB Mass Storage support registered.
[   21.232000] input: gpio-buttons as /devices/platform/gpio-buttons.0/input/input0
[   23.260000] eth0: link forced UP - 100/full - flow control off/off
[   23.692000] device eth0 entered promiscuous mode
[   23.780000] br-lan: port 1(eth0) entering forwarding state
[   23.788000] br-lan: port 1(eth0) entering forwarding state
[   27.972000] device wlan0 entered promiscuous mode
[   27.980000] br-lan: port 2(wlan0) entering forwarding state
[   27.984000] br-lan: port 2(wlan0) entering forwarding state
[   30.392000] device wlan0 left promiscuous mode
[   30.396000] br-lan: port 2(wlan0) entering forwarding state
[   30.688000] device wlan0 entered promiscuous mode
[   30.692000] br-lan: port 2(wlan0) entering forwarding state
[   30.696000] br-lan: port 2(wlan0) entering forwarding state
BusyBox v1.19.3 (2011-12-25 13:56:35 CET) built-in shell (ash)
Enter 'help' for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 ATTITUDE ADJUSTMENT (bleeding edge, r29606) ----------
  * 1/4 oz Vodka      Pour all ingredients into mixing
  * 1/4 oz Gin        tin with ice, strain into glass.
  * 1/4 oz Amaretto
  * 1/4 oz Triple sec
  * 1/4 oz Peach schnapps
  * 1/4 oz Sour mix
  * 1 splash Cranberry juice
 -----------------------------------------------------
root@OpenWrt:/# 

</code>
</p>

</div>

<h2 class="sectionedit61" id="notes">Notes</h2>
<div class="level2">

</div>

<h3 class="sectionedit62" id="cal_data">cal_data</h3>
<div class="level3">

<p>
In this table we can see the different geometry of flash chips:
</p>
<div class="table sectionedit63"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> GEOMETRY </th><th class="col1"> S29GL128P10 </th><th class="col2"> MX29GL128EH </th><th class="col3 centeralign" colspan="2">  MX29LV128DB   </th>
	</tr>
	</thead>
	<tr class="row1">
		<th class="col0"> Boot Block </th><td class="col1 centeralign">  Uniform, Top WP  </td><td class="col2 centeralign">  Uniform, Top WP  </td><td class="col3 centeralign" colspan="2">  Bottom boot  </td>
	</tr>
	<tr class="row2">
		<th class="col0"> region </th><td class="col1 centeralign">  1  </td><td class="col2 centeralign">  1  </td><td class="col3 centeralign">  1  </td><td class="col4 centeralign">  2  </td>
	</tr>
	<tr class="row3">
		<th class="col0"> sectors </th><td class="col1 centeralign">  1 - 128  </td><td class="col2 centeralign">  1 - 128  </td><td class="col3 centeralign">  1 - 8  </td><td class="col4 centeralign">  9 - 263  </td>
	</tr>
	<tr class="row4">
		<th class="col0"> erasesize </th><td class="col1 centeralign">  0x20000  </td><td class="col2 centeralign">  0x20000  </td><td class="col3"> 0x2000 </td><td class="col4"> 0x10000 </td>
	</tr>
</table></div>

<p>
The WIFI calibration data location (starts with 0xA55A) is displayed on bootup. . The fInfo.* values appear to be embedded in the kernel <img src="../../lib/images/smileys/icon_question.gif" class="icon" alt=":?:" />
</p>

<p>
Boot log reports:
</p>
<hr />

<p>
<strong>MX29GL128EH | S29GL128P10</strong>
</p>
<pre class="code">...
Total Flash size: 16384K with 128 sectors
Board id is set HW556, ucHardwareType 0
fInfo.flash_wlanparam_start_blk = 119
fInfo.flash_wlanparam_number_blk = 1
fInfo.flash_wlanparam_length = 0x2000
fInfo.flash_wlanparam_blk_offset = 0x1e000</pre>

<p>
Based on the geometry in the above table let&#039;s calculate the offset:
</p>

<p>
<strong><em>119*0x20000+0x1e000 = 0xEFE000</em></strong>
</p>

<p>
If we make a backup of whole flash via JTAG we see it&#039;s exactly located at the offset 0xEFE000
</p>
<hr />

<p>
<strong>MX29LV128DB</strong>
</p>
<pre class="code">...
Total Flash size: 16384K with 263 sectors
Board id is set HW556, ucHardwareType 0
fInfo.flash_wlanparam_start_blk = 254
fInfo.flash_wlanparam_number_blk = 1
fInfo.flash_wlanparam_length = 0x2000
fInfo.flash_wlanparam_blk_offset = 0xe000</pre>

<p>
Based on the geometry in the above table let&#039;s calculate the offset again:
</p>

<p>
<strong><em>8*0x2000+(254-8)*0x10000+0xe000 = 0xF7E000</em></strong>
</p>

</div>

<h2 class="sectionedit64" id="tags">Tags</h2>
<div class="level2">

<p>
For some Help with the Tags, please have a look here: <a href="../../meta/tags" class="wikilink1" title="meta:tags">tags</a>
</p>
<div class="tags"><span>
	<a href="../../tag/bcm63xx?do=showtag&amp;tag=bcm63xx" class="wikilink1" title="tag:bcm63xx" rel="tag">bcm63xx</a>,
	<a href="../../tag/bcm6358?do=showtag&amp;tag=bcm6358" class="wikilink1" title="tag:bcm6358" rel="tag">bcm6358</a>,
	<a href="../../tag/fastethernet?do=showtag&amp;tag=FastEthernet" class="wikilink1" title="tag:fastethernet" rel="tag">FastEthernet</a>,
	<a href="../../tag/4port?do=showtag&amp;tag=4Port" class="wikilink1" title="tag:4port" rel="tag">4Port</a>,
	<a href="../../tag/hwvlan?do=showtag&amp;tag=hwVLAN" class="wikilink1" title="tag:hwvlan" rel="tag">hwVLAN</a>,
	<a href="../../tag/3usb?do=showtag&amp;tag=3USB" class="wikilink1" title="tag:3usb" rel="tag">3USB</a>,
	<a href="../../tag/ath9k?do=showtag&amp;tag=ath9k" class="wikilink1" title="tag:ath9k" rel="tag">ath9k</a>,
	<a href="../../tag/802.11bgn?do=showtag&amp;tag=802.11bgn" class="wikilink1" title="tag:802.11bgn" rel="tag">802.11bgn</a>,
	<a href="../../tag/nondetachableantenna?do=showtag&amp;tag=NonDetachableAntenna" class="wikilink1" title="tag:nondetachableantenna" rel="tag">NonDetachableAntenna</a>,
	<a href="../../tag/2ant?do=showtag&amp;tag=2Ant" class="wikilink1" title="tag:2ant" rel="tag">2Ant</a>,
	<a href="../../tag/64ram?do=showtag&amp;tag=64RAM" class="wikilink1" title="tag:64ram" rel="tag">64RAM</a>,
	<a href="../../tag/16flash?do=showtag&amp;tag=16Flash" class="wikilink1" title="tag:16flash" rel="tag">16Flash</a>,
	<a href="../../tag/mips?do=showtag&amp;tag=MIPS" class="wikilink1" title="tag:mips" rel="tag">MIPS</a>,
	<a href="../../tag/mips32?do=showtag&amp;tag=MIPS32" class="wikilink1" title="tag:mips32" rel="tag">MIPS32</a>
</span></div>

</div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>toh/huawei/hg556a.txt</bdi> · Last modified: 2015/04/29 14:07 by <bdi>danitool</bdi></div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="hg556a?do=edit"  class="action source" accesskey="v" rel="nofollow" title="Show pagesource [V]"><span>Show pagesource</span></a></li><li><a href="hg556a?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="hg556a?do=backlink"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="hg556a#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license" class="urlextern">CC Attribution-Noncommercial-Share Alike 3.0 Unported</a></bdi></div>
    <div class="buttons">
        <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license"><img src="../../lib/images/license/button/cc-by-nc-sa.png" alt="CC Attribution-Noncommercial-Share Alike 3.0 Unported" /></a>        <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="../../lib/tpl/openwrt/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://www.php.net" title="Powered by PHP" ><img
            src="../../lib/tpl/openwrt/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="../../lib/tpl/openwrt/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="../../lib/tpl/openwrt/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="../../lib/tpl/openwrt/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="../../lib/exe/indexer.php?id=toh%253Ahuawei%253Ahg556a&amp;1432266278" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->
</body>
</html>
