<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>TP-Link TL-WDR4300 [OpenWrt Wiki]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="gigabitethernet,2nic,2wnic,5port,usb,2usb,jtag,802.11bgn,ath9k,ar9344,ar9580,802.11abgn simultan,3ant,detachableantenna,128ram,8flash,mips,mips32,74kc,db120"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../lib/exe/opensearch.php" title="OpenWrt Wiki"/>
<link rel="start" href="../../index.html"/>
<link rel="contents" href="tl-wdr4300?do=index" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Recent changes" href="../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="../../feed.php?mode=list&amp;ns=toh:tp-link"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="../../_export/xhtml/toh/tp-link/tl-wdr4300"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="../../_export/raw/toh/tp-link/tl-wdr4300"/>
<link rel="canonical" href="tl-wdr4300"/>
<link rel="stylesheet" type="text/css" href="../../lib/exe/css.php?t=openwrt&amp;tseed=6f44f363dc87908d905dc56ff3acbfc4"/>
<script type="text/javascript">/*<![CDATA[*/var NS='toh:tp-link';var JSINFO = {"id":"toh:tp-link:tl-wdr4300","namespace":"toh:tp-link"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../lib/exe/js.php?tseed=6f44f363dc87908d905dc56ff3acbfc4"></script>
<script type="text/javascript" charset="utf-8">/*<![CDATA[*/jQuery(function(){
	for ( i=0; i < document.forms.length; i++ ) {
		if (document.forms[i].method == 'post') {
			var myElement = document.createElement('input');
			myElement.setAttribute('type', 'hidden');
			myElement.name = 'bb2_screener_';
			myElement.value = '1432267580 166.182.3.170';
			document.forms[i].appendChild(myElement);
		}
	}
});
/*!]]>*/</script>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="../../lib/tpl/openwrt/images/favicon.ico" />
<link rel="apple-touch-icon" href="../../lib/tpl/openwrt/images/apple-touch-icon.png" />
    </head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_openwrt     ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="tl-wdr4300#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="../../start"  accesskey="h" title="[H]"><img src="../../lib/tpl/openwrt/images/logo.png" width="386" height="98" alt="" /> <span>OpenWrt Wiki</span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="tl-wdr4300?do=register"  class="action register" rel="nofollow" title="Register">Register</a></li><li><a href="tl-wdr4300?do=login&amp;sectok=382740b13d95f946eed36caa57076b4a"  class="action login" rel="nofollow" title="Login">Login</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="../../start" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="../../doku.php" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="toh:tp-link:tl-wdr4300" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Show pagesource</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Login</option><option value="register">Register</option></optgroup></select><input type="submit" value="&gt;" /></div></form>            </div>
            <ul>
                <li><a href="tl-wdr4300?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a></li><li><a href="tl-wdr4300?do=media&amp;ns=toh%253Atp-link"  class="action media" rel="nofollow" title="Media Manager">Media Manager</a></li><li><a href="tl-wdr4300?do=index"  class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                            <div class="youarehere"><span class="bchead">You are here: </span><span class="home"><bdi><a href="../../start" class="wikilink1" title="start">OpenWrt Wiki</a></bdi></span> » <bdi><a href="../start" class="wikilink1" title="toh:start">Table of Hardware</a></bdi> » <bdi><a href="start" class="wikilink1" title="toh:tp-link:start">TP-Link</a></bdi> » <bdi><span class="curid"><a href="tl-wdr4300" class="wikilink1" title="toh:tp-link:tl-wdr4300">TP-Link TL-WDR4300</a></span></bdi></div>
                                    <div class="plugin_multilingual">
        <ul>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/cz/toh/tp-link/tl-wdr4300" class="media" title="cz:toh:tp-link:tl-wdr4300"><img src="../../lib/exe/fetch.php?cache=&amp;tok=aff589&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fcz.gif" class="media" title="Čeština (Czech)" alt="Čeština (Czech)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/de/toh/tp-link/tl-wdr4300" class="media" title="de:toh:tp-link:tl-wdr4300"><img src="../../lib/exe/fetch.php?cache=&amp;tok=e24010&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fde.gif" class="media" title="Deutsch (German)" alt="Deutsch (German)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <span class="curid"><a href="tl-wdr4300" class="media" title="toh:tp-link:tl-wdr4300"><img src="../../lib/exe/fetch.php?cache=&amp;tok=2a37ae&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fgb.gif" class="media" title="English" alt="English" /></a></span>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/es/toh/tp-link/tl-wdr4300" class="media" title="es:toh:tp-link:tl-wdr4300"><img src="../../lib/exe/fetch.php?cache=&amp;tok=46c004&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fmx.gif" class="media" title="Español (Spanish, Mexico)" alt="Español (Spanish, Mexico)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/fr/toh/tp-link/tl-wdr4300" class="media" title="fr:toh:tp-link:tl-wdr4300"><img src="../../lib/exe/fetch.php?cache=&amp;tok=a5beba&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ffr.gif" class="media" title="Français (French)" alt="Français (French)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/hu/toh/tp-link/tl-wdr4300" class="media" title="hu:toh:tp-link:tl-wdr4300"><img src="../../lib/exe/fetch.php?cache=&amp;tok=6b5470&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fhu.gif" class="media" title="Magyar (Hungarian)" alt="Magyar (Hungarian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/jp/toh/tp-link/tl-wdr4300" class="media" title="jp:toh:tp-link:tl-wdr4300"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f999fc&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fjp.gif" class="media" title="日本語 (Japanese)" alt="日本語 (Japanese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pl/toh/tp-link/tl-wdr4300" class="media" title="pl:toh:tp-link:tl-wdr4300"><img src="../../lib/exe/fetch.php?cache=&amp;tok=c805c0&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fpl.gif" class="media" title="Poliski (Polish)" alt="Poliski (Polish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pt-br/toh/tp-link/tl-wdr4300" class="media" title="pt-br:toh:tp-link:tl-wdr4300"><img src="../../lib/exe/fetch.php?cache=&amp;tok=13127d&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fbr.gif" class="media" title="Português brasileiro (Portuguese, Brasil)" alt="Português brasileiro (Portuguese, Brasil)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/ru/toh/tp-link/tl-wdr4300" class="media" title="ru:toh:tp-link:tl-wdr4300"><img src="../../lib/exe/fetch.php?cache=&amp;tok=66ab5e&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fru.gif" class="media" title="Русский (Russsian)" alt="Русский (Russsian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/tr/toh/tp-link/tl-wdr4300" class="media" title="tr:toh:tp-link:tl-wdr4300"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f4beed&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ftr.gif" class="media" title="Tϋrkçe (Turkish)" alt="Tϋrkçe (Turkish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-cn/toh/tp-link/tl-wdr4300" class="media" title="zh-cn:toh:tp-link:tl-wdr4300"><img src="../../lib/exe/fetch.php?cache=&amp;tok=93625a&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-cn.gif" class="media" title="官話/官话 (Chinese)" alt="官話/官话 (Chinese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-tw/toh/tp-link/tl-wdr4300" class="media" title="zh-tw:toh:tp-link:tl-wdr4300"><img src="../../lib/exe/fetch.php?cache=&amp;tok=b56198&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-tw.gif" class="media" title="臺灣華語 (Taiwanese)" alt="臺灣華語 (Taiwanese)" /></a>
              </div>
            </div>
          </li>
        </ul>
      </div>
        </div>
    
    
    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>toh:tp-link:tl-wdr4300</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="tl-wdr4300#supported_versions">Supported Versions</a></div></li>
<li class="level1"><div class="li"><a href="tl-wdr4300#quick_start_guide">Quick Start Guide</a></div></li>
<li class="level1"><div class="li"><a href="tl-wdr4300#hardware_highlights">Hardware Highlights</a></div></li>
<li class="level1"><div class="li"><a href="tl-wdr4300#installation">Installation</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="tl-wdr4300#flashing_via_tftp">Flashing via TFTP</a></div></li>
<li class="level2"><div class="li"><a href="tl-wdr4300#upgrading_openwrt">Upgrading OpenWrt</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="tl-wdr4300#flash_overwrite">Flash Overwrite</a></div></li>
<li class="level3"><div class="li"><a href="tl-wdr4300#generic_sysupgrade">Generic Sysupgrade</a></div></li>
<li class="level3"><div class="li"><a href="tl-wdr4300#mtd-utils">mtd-utils</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="tl-wdr4300#flash_layout">Flash Layout</a></div></li>
<li class="level2"><div class="li"><a href="tl-wdr4300#failsafe_mode">Failsafe mode</a></div></li>
<li class="level2"><div class="li"><a href="tl-wdr4300#back_to_original_firmware">Back to original firmware</a></div></li>
<li class="level2"><div class="li"><a href="tl-wdr4300#de-brick_or_oem_installation_using_the_tftp_recovery">de-brick or OEM installation using the TFTP recovery</a></div></li>
<li class="level2"><div class="li"><a href="tl-wdr4300#de-brick_or_oem_installation_using_the_tftp_and_rs232_serial_method">de-brick or OEM installation using the TFTP and RS232 (serial) method</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="tl-wdr4300#specific_configuration">Specific Configuration</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="tl-wdr4300#interfaces">Interfaces</a></div></li>
<li class="level2"><div class="li"><a href="tl-wdr4300#switch_ports_for_vlans">Switch Ports (for VLANs)</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="tl-wdr4300#bootloader_mods">Bootloader Mods</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="tl-wdr4300#u-boot_114_modification_for_routers">U-Boot 1.1.4 modification for routers</a></div></li>
<li class="level2"><div class="li"><a href="tl-wdr4300#original_bootloader_settings">Original bootloader settings</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="tl-wdr4300#hardware">Hardware</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="tl-wdr4300#info">Info</a></div></li>
<li class="level2"><div class="li"><a href="tl-wdr4300#power">Power</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="tl-wdr4300#psu_power_supply">PSU (power supply)</a></div></li>
<li class="level3"><div class="li"><a href="tl-wdr4300#gpio">GPIO</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="tl-wdr4300#hardware_modifications">Hardware Modifications</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="tl-wdr4300#usb_modification">USB Modification</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="tl-wdr4300#photos">Photos</a></div></li>
<li class="level2"><div class="li"><a href="tl-wdr4300#opening_the_case_v_11">Opening The Case (V 1.1)</a></div></li>
<li class="level2"><div class="li"><a href="tl-wdr4300#de-brick_using_in-system-programming">de-brick using in-system-programming</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="tl-wdr4300#serial_console">Serial console</a></div></li>
<li class="level1"><div class="li"><a href="tl-wdr4300#tp-link_tl-wdr4310_version_10_forum_thread">TP-Link TL-WDR4310 Version 1.0 forum thread</a></div></li>
<li class="level1"><div class="li"><a href="tl-wdr4300#add-ons_of_the_router_tl-wdr4300">Add-ons of the Router TL-WDR4300</a></div></li>
<li class="level1"><div class="li"><a href="tl-wdr4300#performance_test_with_trunkr35995">Performance test with trunk/r35995</a></div></li>
<li class="level1"><div class="li"><a href="tl-wdr4300#tags">Tags</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="tp-link_tl-wdr4300">TP-Link TL-WDR4300</h1>
<div class="level1">

<p>
Dual Band (concurrent) and Gigabit Ethernet.
Advertised as 750 Mbps it is Dual-Stream (2x2) on the 2.4 Ghz Band and Triple-Stream (3x3) on the 5 Ghz Band. Same as the TL-WDR4310 Released earlier this year in China. 
FCC ID = TE7WDR4300.
</p>

<p>
Related to TL-WDR3600, which has only two instead of three antennas.
</p>

<p>
Manufacturer product page is <a href="http://www.tplink.com/en/products/details/?categoryid=2166&amp;model=TL-WDR4300" class="urlextern" title="http://www.tplink.com/en/products/details/?categoryid=2166&amp;model=TL-WDR4300"  rel="nofollow">here</a>, while the support download page is <a href="http://www.tplink.com/en/support/download/?model=TL-WDR4300&amp;version=V1#tbl_j" class="urlextern" title="http://www.tplink.com/en/support/download/?model=TL-WDR4300&amp;version=V1#tbl_j"  rel="nofollow">here</a>.
</p>

<p>
<img src="../../_media/meta/icons/tango/dialog-warning.png" class="medialeft" title="Warning!" alt="Warning!" /><strong>WARNING:</strong> Security warning: unpatched http/tftp backdoor in <strong>original</strong> firmware: <a href="http://sekurak.pl/tp-link-httptftp-backdoor/" class="urlextern" title="http://sekurak.pl/tp-link-httptftp-backdoor/"  rel="nofollow">http://sekurak.pl/tp-link-httptftp-backdoor/</a>
</p>

</div>

<h2 class="sectionedit2" id="supported_versions">Supported Versions</h2>
<div class="level2">

<p>
The latest firmware available is the release build of <a href="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/" class="urlextern" title="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/"  rel="nofollow">Barrier Breaker 14.07</a>, with working ethernet and dual-band wireless (disabled by default), webUI, and support for all hardware revisions through at least 1.7.
</p>
<div class="table sectionedit3"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Version/Model </th><th class="col1"> S/N </th><th class="col2"> Board ID </th><th class="col3"> Release Date </th><th class="col4"> OpenWrt Version Supported </th><th class="col5"> Model Specific Notes </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> v1.0 </td><td class="col1"> - </td><td class="col2"> - </td><td class="col3"> 2012/02 </td><td class="col4 leftalign"> <a href="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-factory.bin" class="urlextern" title="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-factory.bin"  rel="nofollow"> Barrier Breaker - 14.07</a>  </td><td class="col5"> <a href="tl-wdr4310" class="wikilink1" title="toh:tp-link:tl-wdr4310">TP-Link TL-WDR4310</a>.</td>
	</tr>
	<tr class="row2">
		<td class="col0"> v1.1 </td><td class="col1"> - </td><td class="col2"> - </td><td class="col3"> 2012/06 </td><td class="col4"> <a href="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-factory.bin" class="urlextern" title="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-factory.bin"  rel="nofollow"> Barrier Breaker - 14.07</a> </td><td class="col5"> Similar to <a href="tl-wdr4310" class="wikilink1" title="toh:tp-link:tl-wdr4310">TP-Link TL-WDR4310</a></td>
	</tr>
	<tr class="row3">
		<td class="col0"> v1.2 </td><td class="col1"> - </td><td class="col2"> - </td><td class="col3"> 2012/11 </td><td class="col4"> <a href="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-factory.bin" class="urlextern" title="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-factory.bin"  rel="nofollow"> Barrier Breaker - 14.07</a> </td><td class="col5"> - </td>
	</tr>
	<tr class="row4">
		<td class="col0"> v1.3 </td><td class="col1"> - </td><td class="col2"> - </td><td class="col3"> 2012/11 </td><td class="col4"> <a href="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-factory.bin" class="urlextern" title="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-factory.bin"  rel="nofollow"> Barrier Breaker - 14.07</a> </td><td class="col5"> - </td>
	</tr>
	<tr class="row5">
		<td class="col0"> v1.4 </td><td class="col1"> - </td><td class="col2"> - </td><td class="col3"> 2013/04 </td><td class="col4"> <a href="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-factory.bin" class="urlextern" title="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-factory.bin"  rel="nofollow"> Barrier Breaker - 14.07</a> </td><td class="col5"> - </td>
	</tr>
	<tr class="row6">
		<td class="col0"> v1.5 </td><td class="col1"> - </td><td class="col2"> - </td><td class="col3"> 2013/? </td><td class="col4"> <a href="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-factory.bin" class="urlextern" title="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-factory.bin"  rel="nofollow"> Barrier Breaker - 14.07</a> </td><td class="col5"> - </td>
	</tr>
	<tr class="row7">
		<td class="col0"> v1.6 </td><td class="col1"> - </td><td class="col2"> - </td><td class="col3"> 2013/08 </td><td class="col4"> <a href="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-factory.bin" class="urlextern" title="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-factory.bin"  rel="nofollow"> Barrier Breaker - 14.07</a> </td><td class="col5"> - </td>
	</tr>
	<tr class="row8">
		<td class="col0"> v1.7 </td><td class="col1"> - </td><td class="col2"> 2050500272 rev 1.3 </td><td class="col3"> 2014/01 </td><td class="col4"> <a href="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-factory.bin" class="urlextern" title="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-factory.bin"  rel="nofollow"> Barrier Breaker - 14.07</a> </td><td class="col5"> - </td>
	</tr>
</table></div>

<p>
<strong>NOTE:</strong> The ethernet switch in this device, AR8327N, is working fine with the OpenWRT default configuration. But some of the more advanced functions of the switch are is not yet fully supported by the driver in 12.09. Most notably, a port cannot be tagged in some VLAN&#039;s and untagged in another, see <a href="https://dev.openwrt.org/ticket/12181" class="urlextern" title="https://dev.openwrt.org/ticket/12181"  rel="nofollow">Bug 12181</a>. The fix had been merged into trunk with <a href="https://dev.openwrt.org/changeset/42652" class="urlextern" title="https://dev.openwrt.org/changeset/42652"  rel="nofollow">r42652</a> and <a href="https://dev.openwrt.org/changeset/42653" class="urlextern" title="https://dev.openwrt.org/changeset/42653"  rel="nofollow">r42653</a> but it hadn&#039;t been backported to BB yet. (Should be fixed in upcoming Chaos Calmer release)
</p>

<p>
If your wireless cannot be enabled when using wide channel modes, this may be due to the friendly neighbour &quot;feature&quot; that prohibits operation of such a mode and you may have to use the standard modes before wireless can be enabled.
</p>

</div>

<h2 class="sectionedit4" id="quick_start_guide">Quick Start Guide</h2>
<div class="level2">

<p>
Barrier Breaker 14.07 provides full support for this router and has Luci (webUI) built-in.
</p>
<ul>
<li class="level1"><div class="li"> Download <a href="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-factory.bin" class="urlextern" title="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-factory.bin"  rel="nofollow"> openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-**factory**.bin</a></div>
</li>
<li class="level1"><div class="li"> connect your PC to a <abbr title="Local Area Network">LAN</abbr> port of the TP-link via ethernet.  Login to the TP-link web administration webpage.  Under &#039;System Tools&#039; select &#039;Firmware Upgrade&#039;.  Browse to the previously downloaded *.bin file.  Click Upgrade.</div>
</li>
<li class="level1"><div class="li"> Connect to <a href="http://192.168.1.1" class="urlextern" title="http://192.168.1.1"  rel="nofollow">http://192.168.1.1</a> with your web browser</div>
</li>
<li class="level1"><div class="li"> Set your password and configure the router through the web UI.  <a href="../../doc/howto/configuration" class="urlextern" title="http://wiki.openwrt.org/doc/howto/basic.config"  rel="nofollow">Basic Config</a></div>
</li>
</ul>

<p>
<strong>Note</strong>: Factory default IP address range is 192.168.0.1 while OpenWrt uses 192.168.1.1 by default. If you have trouble accessing your router after initial flash, check that you have a 192.168.1.x IP address on your PC.
</p>

</div>

<h2 class="sectionedit5" id="hardware_highlights">Hardware Highlights</h2>
<div class="level2">
<div class="table sectionedit6"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> CPU </th><th class="col1"> Flash </th><th class="col2"> RAM </th><th class="col3"> Network </th><th class="col4"> WAN </th><th class="col5"> USB </th><th class="col6"> Serial </th><th class="col7"> JTag </th><th class="col8"> VLANs </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 leftalign"> Atheros AR9344@560MHz  </td><td class="col1"> 8MB </td><td class="col2"> 128MB </td><td class="col3"> 4x1 GigE </td><td class="col4"> 1x1 GigE WAN</td><td class="col5"> x2 v2.0</td><td class="col6"> Yes </td><td class="col7"> Yes </td><td class="col8"> 128 </td>
	</tr>
</table></div>

</div>

<h2 class="sectionedit7" id="installation">Installation</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> It is recommended to update to stock firmware 3.13.33(130617) before installation. This firmware features bootloader with handy TFTP recovery mode → <a href="tl-wdr4300#flashingviatftp" title="toh:tp-link:tl-wdr4300 ↵" class="wikilink1">flashing.via.tftp</a>, <a href="tl-wdr4300#de-brickoroeminstallationusingthetftprecovery" title="toh:tp-link:tl-wdr4300 ↵" class="wikilink1">de-brick.or.oem.installation.using.the.tftp.recovery</a></div>
</li>
<li class="level1"><div class="li"> <a href="../../doc/howto/obtain.firmware" class="wikilink1" title="doc:howto:obtain.firmware">obtain.firmware</a> Download a pre-compiled release image <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/" class="urlextern" title="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/"  rel="nofollow">Attitude Adjustment 12.09</a>, <a href="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/" class="urlextern" title="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/"  rel="nofollow">Barrier Breaker 14.07</a>, or trunk image <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/" class="urlextern" title="http://downloads.openwrt.org/snapshots/trunk/ar71xx/"  rel="nofollow">Chaos Calmer</a>, look for openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-<strong>factory</strong>.bin. The precompiled images does not activate the wireless feature by default (you will have to use ethernet for the initial configuration).</div>
</li>
</ol>

<p>
<strong>NOTE:</strong> Trunk images dont have luci you must install manually <a href="../../doc/luci" class="wikilink1" title="doc:howto:luci.essentials">luci.essentials</a>
</p>

<p>
<strong>NOTE:</strong> Images with &quot;-il-&quot; in the name is specialised for devices sold in Israel, e.g. openwrt-ar71xx-generic-tl-wdr4300-v1-il-squashfs-factory.bin. For devices in Israel, try flashing the original image first, in most cases it will work just fine. Devices that require the Israeli firmware will show a warning on the Firmware Update page. If you see this warning, fallback to the &quot;-il-&quot; image. The Israeli firmware differs only in the Hardware ID, in order to enable flashing from the original firmware interface. There is no difference between the images otherwise. See <a href="http://www.mail-archive.com/openwrt-devel@lists.openwrt.org/msg17573.html" class="urlextern" title="http://www.mail-archive.com/openwrt-devel@lists.openwrt.org/msg17573.html"  rel="nofollow">this thread</a> for details.
</p>
<ol>
<li class="level1"><div class="li"> <a href="../../doc/howto/installing" class="wikilink1" title="doc:howto:generic.flashing">generic.flashing</a> Now write this firmware-file onto the flash-chip of your device</div>
</li>
</ol>

<p>
(For a brand new router, you could just use the vendor web UI to flash the .bin image)
</p>
<ul>
<li class="level1"><div class="li"> To use wifi, you need to activate wifi in the configuration, see <a href="../../doc/uci/wireless" class="wikilink1" title="doc:uci:wireless">wireless configuration</a>.</div>
</li>
<li class="level1"><div class="li"> You can always <a href="../../doc/howto/imagegenerator" class="wikilink1" title="doc:howto:obtain.firmware.generate">build</a> your own image based on Attitude Adjustment/ trunk. Choose Atheros AR71xx/AT7240/AR913x platform and use the &quot;TP-LINK TL-WDR4300 board support&quot; profile.</div>
</li>
</ul>

<p>
Images for the TP-Link 3600 are largely compatible with a simple modification to the header of the firmware image. The PCB for both models is identical, or close to identical. The third external antenna on the 4300 is on the PCB of the 3600, but not connected to an external antenna.
</p>

<p>
<strong>WARNING:</strong> Do not flash the sysupgrade firmware via the vendor firmware web interface - only the &#039;factory&#039; images should be flashed from the vendor firmware.
</p>

</div>

<h3 class="sectionedit8" id="flashing_via_tftp">Flashing via TFTP</h3>
<div class="level3">

<p>
Pressing the WPS/Reset button during powerup makes the bootstrap loader enter the TFTP recovery mode. The procedure can be used to transfer a firmware image:
</p>
<ol>
<li class="level1"><div class="li"> assign 192.168.0.66 to your local network interface (the router uses 192.168.0.86)</div>
</li>
<li class="level1"><div class="li"> publish a firmware image via tftp: <code>cp openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-factory.bin /srv/tftp/wdr4300v1_tp_recovery.bin</code></div>
</li>
<li class="level1"><div class="li"> configure your tftp server</div>
</li>
<li class="level1"><div class="li"> wait for the firmware transfer and subsequent reboot</div>
</li>
</ol>

</div>

<h3 class="sectionedit9" id="upgrading_openwrt">Upgrading OpenWrt</h3>
<div class="level3">

<p>
If OpenWrt is already installed and you wish to upgrade to a newer version, you have two methods available:
</p>
<ol>
<li class="level1"><div class="li"> Flash Overwrite</div>
</li>
<li class="level1"><div class="li"> Generic Sysupgrade</div>
</li>
</ol>

<p>
(prior to actual flashing given availability of a serial console it&#039;s a nice idea to do dry runs, by ad-hoc RAM booting a factory.bin from a TFTP host server, via uboot &quot;tftp&quot; + &quot;bootm&quot;, served via WDR3600&#039;s default 6F01A8C0.img filename).
</p>

</div>

<h4 id="flash_overwrite">Flash Overwrite</h4>
<div class="level4">
<ul>
<li class="level1"><div class="li"> Login as root via SSH</div>
</li>
<li class="level1"><div class="li"> Check memory usage with the <em>free</em> or <em>top</em> commands. The image can be up to 8MB, so only proceed if you have as much free RAM as the image size plus 6-8MB; this should not be a problem on a device with 128 <abbr title="Megabyte">MB</abbr> RAM.</div>
</li>
<li class="level1"><div class="li"> An easy way to free up some RAM is to delete the symlinks to <em>/etc/modules.d/20-cfg80211</em>, <em>/etc/modules.d/21-mac80211</em>,  <em>/etc/modules.d/2*-ath*</em> and <em>/etc/modules.d/[4-9]*-*</em> and reboot. Drop caches can be useful too:</div>
</li>
</ul>

<p>
<pre class="code">echo 3 &gt; /proc/sys/vm/drop_caches</pre>

</p>
<ul>
<li class="level1"><div class="li"> wget or scp the new firmware build to /tmp/</div>
</li>
<li class="level1"><div class="li"> And finally:</div>
</li>
</ul>

<p>
<pre class="code">cd /tmp
wget http://domain.tld/openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-factory.bin
mtd -r write /tmp/openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-factory.bin firmware</pre>

</p>

</div>

<h4 id="generic_sysupgrade">Generic Sysupgrade</h4>
<div class="level4">

<p>
Alternately, you can follow the <a href="../../doc/howto/generic.sysupgrade" class="wikilink1" title="doc:howto:generic.sysupgrade">generic.sysupgrade</a> procedure. Don&#039;t forget to populate your <code>/etc/sysupgrade.conf</code> first.
</p>

</div>

<h4 id="mtd-utils">mtd-utils</h4>
<div class="level4">

<p>
For systems where OpenWrt mtd is not available, mtd-utils commands need to be used (subsequent commands boldly assume that it&#039;s mtd5 which equals the &quot;firmware&quot; mtd partition name - cat /proc/mtd to verify!!):
<pre class="code">flash_eraseall /dev/mtd5
nandwrite /dev/mtd5 /tmp/openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-factory.bin</pre>

(write operation will take about 5 minutes to complete)
</p>

<p>
Note that output of newer mtd-utils flash_eraseall recommends using &quot;flash_erase &lt;dev&gt; 0 0&quot; instead (did not test it).
</p>

</div>

<h3 class="sectionedit10" id="flash_layout">Flash Layout</h3>
<div class="level3">

<p>
Please read the article <a href="../../doc/techref/flash.layout" class="wikilink1" title="doc:techref:flash.layout">Flash.Layout</a> for a better understanding. It contains a couple of explanations. Then let&#039;s have a quick view at flash layout of this particular device:
</p>
<div class="table sectionedit11"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 centeralign" colspan="6">   TP-Link WDR4300  Flash Layout stock firmware           </th>
	</tr>
	</thead>
	<tr class="row1">
		<th class="col0 leftalign"> Layer0       </th><td class="col1 centeralign" colspan="5">                       m25p80 <a href="http://en.wikipedia.org/wiki/Serial Peripheral Interface Bus" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Serial Peripheral Interface Bus">spi</a>0.0: s25fl064k      8192KiB                                                                      </td>
	</tr>
	<tr class="row2">
		<th class="col0 leftalign"> Layer1       </th><td class="col1 centeralign">  mtd0            </td><td class="col2 centeralign" colspan="3">  mtd1                            </td><td class="col5 centeralign">  mtd3         </td>
	</tr>
	<tr class="row3">
		<th class="col0 leftalign"> Size in KiB  </th><td class="col1 centeralign">  128KiB          </td><td class="col2 centeralign" colspan="3">  8000KiB                         </td><td class="col5 centeralign">  64KiB        </td>
	</tr>
	<tr class="row4">
		<th class="col0 leftalign"> Name         </th><td class="col1 centeralign">  <strong><em>u-boot</em></strong>  </td><td class="col2 centeralign" colspan="3">  <strong><em>firmware</em></strong>                </td><td class="col5 centeralign">  <strong><em>art</em></strong>  </td>
	</tr>
	<tr class="row5">
		<th class="col0 leftalign"> mountpoint   </th><td class="col1 centeralign">  none            </td><td class="col2 centeralign" colspan="3">  /                               </td><td class="col5 centeralign">  none         </td>
	</tr>
	<tr class="row6">
		<th class="col0 leftalign"> filesystem   </th><td class="col1 centeralign">  none            </td><td class="col2 centeralign" colspan="3">  SquashFS-LZMA 4.0               </td><td class="col5 centeralign">  none         </td>
	</tr>
	<tr class="row7">
		<th class="col0 centeralign" colspan="6">   TP-Link WDR4300  Flash Layout           </th>
	</tr>
	<tr class="row8">
		<th class="col0 leftalign"> Layer0       </th><td class="col1 centeralign" colspan="5">                       m25p80 <a href="http://en.wikipedia.org/wiki/Serial Peripheral Interface Bus" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Serial Peripheral Interface Bus">spi</a>0.0: s25fl064k      8192KiB                                                                      </td>
	</tr>
	<tr class="row9">
		<th class="col0 leftalign"> Layer1       </th><td class="col1 centeralign">  mtd0 <strong><em>u-boot</em></strong> 128KiB  </td><td class="col2 centeralign" colspan="3">  mtd5 <strong><em>firmware</em></strong> 8000KiB                                      </td><td class="col5 centeralign">    mtd4 <strong><em>art</em></strong> 64KiB  </td>
	</tr>
	<tr class="row10">
		<th class="col0 leftalign"> Layer2       </th><td class="col1 leftalign">                              </td><td class="col2 centeralign">  mtd1 <strong><em>kernel</em></strong>          </td><td class="col3 centeralign" colspan="2">  mtd2 <strong><em>rootfs</em></strong>                                   </td><td class="col5 leftalign">          </td>
	</tr>
	<tr class="row11">
		<th class="col0 leftalign"> <span style='color:magenta; '>mountpoint</span>   </th><td class="col1 leftalign">                              </td><td class="col2 leftalign">                               </td><td class="col3 centeralign" colspan="2">  <span style='color:magenta; '><code>/</code></span>                          </td><td class="col5 leftalign">          </td>
	</tr>
	<tr class="row12">
		<th class="col0 leftalign"> filesystem   </th><td class="col1 leftalign">                              </td><td class="col2 leftalign">                               </td><td class="col3 centeralign" colspan="2">  overlayfs           </td><td class="col5 leftalign">          </td>
	</tr>
	<tr class="row13">
		<th class="col0 leftalign"> Layer3       </th><td class="col1 leftalign">                              </td><td class="col2 leftalign">                               </td><td class="col3 leftalign">                 </td><td class="col4 centeralign">  mtd3 <strong><em>rootfs_data</em></strong>             </td><td class="col5 leftalign">          </td>
	</tr>
	<tr class="row14">
		<th class="col0 leftalign"> Size in KiB  </th><td class="col1 centeralign">  128KiB                      </td><td class="col2 leftalign">                               </td><td class="col3 leftalign">                 </td><td class="col4 leftalign">                                       </td><td class="col5 centeralign">   64KiB  </td>
	</tr>
	<tr class="row15">
		<th class="col0 leftalign"> Name         </th><td class="col1 centeralign">  <strong><em>u-boot</em></strong>              </td><td class="col2 centeralign">  <strong><em>kernel</em></strong>               </td><td class="col3 leftalign">                 </td><td class="col4 centeralign">  <strong><em>rootfs_data</em></strong>             </td><td class="col5 centeralign">  <strong><em>art</em></strong>  </td>
	</tr>
	<tr class="row16">
		<th class="col0 leftalign"> <span style='color:magenta; '>mountpoint</span>   </th><td class="col1 centeralign">  <em>none</em>                    </td><td class="col2 centeralign">  <em>none</em>                     </td><td class="col3 centeralign">  <span style='color:magenta; '><code>/rom</code></span>  </td><td class="col4 centeralign">  <span style='color:magenta; '><code>/overlay</code></span>   </td><td class="col5 centeralign">  <em>none</em>  </td>
	</tr>
	<tr class="row17">
		<th class="col0 leftalign"> filesystem   </th><td class="col1 centeralign">  <em>none</em>                    </td><td class="col2 centeralign">  <em>none</em>                     </td><td class="col3 centeralign">  <a href="../../doc/techref/filesystems#squashfs" class="wikilink1" title="doc:techref:filesystems">SquashFS</a>  </td><td class="col4 centeralign">  <a href="../../doc/techref/filesystems#jffs2" class="wikilink1" title="doc:techref:filesystems">JFFS2</a>  </td><td class="col5 centeralign">  <em>none</em>  </td>
	</tr>
</table></div>

<p>
ART = Atheros Radio Test - it contains mac addresses and calibration data for the wifi (EEPROM). If it is missing or corrupt, ath9k won&#039;t come up anymore.<br/>

</p>

</div>

<h3 class="sectionedit12" id="failsafe_mode">Failsafe mode</h3>
<div class="level3">

<p>
Power up your router. When the &#039;SYS&#039; light (asterisk symbol right of the power light) starts to blink, immediately push the WPS/Reset button on the back-left of the router for a short time (&gt;1 sec). The &#039;SYS&#039; light should now start to blink very fast.
</p>

<p>
On a TL-WDR4300 Ver 1.6 and Barrier Breaker Bleeding Edge, r39211, the above instructions were not terribly successful. The only way that I was able to get the router into failsafe mode was to quickly and repeatedly press the WPS/Reset button <em>starting before the front panel &quot;star&quot; LED started flashing. </em>When that LED finally lit, it appeared to go directly into the rapid-flashing &quot;failsafe&quot; indication. If the WPS LED lights (rightmost, &quot;yin-yang arrows&quot;), it may be that you started clicking the button a little early in the boot sequence.
</p>

<p>
For what you can do in failsafe, go to the <a href="../../doc/howto/generic.failsafe" class="wikilink1" title="doc:howto:generic.failsafe">OpenWrt Failsafe Mode</a> page.
</p>

</div>

<h3 class="sectionedit13" id="back_to_original_firmware">Back to original firmware</h3>
<div class="level3">

<p>
<img src="../../lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> (untested) 
</p>

<p>
<strong>DON&#039;T TRY to flash wdr4300 with wdr4310 firmware and vice-versa!</strong>
</p>

</div>
<div class="plugin_include_content plugin_include__meta:infobox:dangerous" id="plugin_include__meta__infobox__dangerous">
<div class="level3">

<p>

<table class="inline" style="width:70%; margin-left:15%">
  <tr>
    <td style="border-left:6px solid #cd0505; vertical-align:middle">
      <img src="../../_media/meta/icons/tango/48px-dialog-warning.svg.png" alt="" style="float:left; margin-right:0.5em" />
      <strong>Warning!</strong><br />
      This section describes actions that might damage your device or firmware. Proceed with care!
    </td>
  </tr>
</table>

</p>

</div>
</div>
<div class="level3">

<p>
The stock firmware is obtained from the OEM: <a href="http://www.tplink.com/en/support/download/?model=TL-WDR4300" class="urlextern" title="http://www.tplink.com/en/support/download/?model=TL-WDR4300"  rel="nofollow">http://www.tplink.com/en/support/download/?model=TL-WDR4300</a>
As with the WR1043ND router, there is a also a catch with the WDR4300!!
</p>
<ul>
<li class="level1"><div class="li"> in case the file name of this firmware file does not contain the word <strong><em>&quot;boot&quot;</em></strong> in it, you can simply revert back to original firmware. → <a href="../../doc/howto/generic.uninstall" class="wikilink1" title="doc:howto:generic.uninstall">generic.uninstall</a></div>
</li>
<li class="level1"><div class="li"> in case the file name of this firmware file does contain the word <strong><em>&quot;boot&quot;</em></strong> in it, you need to cut off parts of the image file <em>before</em> flashing it</div>
</li>
</ul>

<p>
An example of an image file with the word &quot;boot&quot; in it is <code>wdr4300v1_en_3_13_17_up_boot(120426).bin</code>. 
</p>

<p>
Cut the first 0x20200 (that is 131,584 = 257*512) Bytes from original firmware: (1*512 Vendor-info + 256*512 U-Boot)
</p>

<p>
If you want to find an image that does not contain the word &quot;boot&quot; from the OEM, try downloading smaller zip-files first.
<pre class="code">wget or scp the stock firmware file to /tmp/
cd /tmp
dd if=orig.bin of=tplink.bin skip=257 bs=512</pre>

(Note: File size should now be exactly: 8,126,464 Bytes)
</p>

<p>
Other caveats (from vendor web UI):
</p>
<ul>
<li class="level1"><div class="li"> If the firmware path is too short, it will fail with the incorrect error &#039;firmware path too long&#039;. For instance, flashing c:\openwrt.bin will not work.</div>
</li>
<li class="level1"><div class="li"> If the firmware path is too long, it will fail with the error &#039;firmware path too long&#039;.</div>
</li>
</ul>

<p>
Now follow → <a href="../../doc/howto/generic.uninstall" class="wikilink1" title="doc:howto:generic.uninstall">generic.uninstall</a>
</p>

</div>

<h3 class="sectionedit16" id="de-brick_or_oem_installation_using_the_tftp_recovery">de-brick or OEM installation using the TFTP recovery</h3>
<div class="level3">

<p>
The stock firware (3.13.33(130617)) features a TFTP recovery client in bootloader. To activate it press and hold WPS/Reset Button during powering on until WPS LED turns on. Connect computer to LAN1. Using TCPdump, you should see ARP requests from router having address 192.168.0.86 looking for address 192.168.0.66.
</p>

<p>
<pre class="code"># tcpdump -ni eth0 arp
ARP, Request who-has 192.168.0.66 tell 192.168.0.86, length 46</pre>

</p>

<p>
Set up your computer to address 192.168.0.66, netmask /24 (255.255.255.0).
</p>

<p>
<pre class="code"># ip addr add dev eth0 192.168.0.66/24</pre>

</p>

<p>
Using TCPdump, you should now see request for new firmware image:
</p>

<p>
<pre class="code"># tcpdump -npi eth0 udp
IP 192.168.0.86.2195 &gt; 192.168.0.66.69:  44 RRQ &quot;wdr4300v1_tp_recovery.bin&quot; octet timeout 5</pre>

</p>

<p>
Rename factory image to given name and put it into TFTP server root. 
→ <a href="../../doc/howto/tftp" class="wikilink1" title="doc:howto:generic.flashing.tftp">generic.flashing.tftp</a>
</p>

<p>
<img src="../../lib/images/smileys/icon_exclaim.gif" class="icon" alt=":!:" /> In case you are flashing back original firmware, make sure original firmware image name does not contain word <code><strong>boot</strong></code> → <a href="tl-wdr4300#backtooriginalfirmware" title="toh:tp-link:tl-wdr4300 ↵" class="wikilink1">back.to.original.firmware</a>.
</p>

<p>
<pre class="code"># cp openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-factory.bin wdr4300v1_tp_recovery.bin
# atftpd --no-fork --daemon .</pre>

</p>

<p>
After downloading, the flashing starts immediately. After cca. 1 minute, the router reboots automatically.
</p>

</div>

<h3 class="sectionedit17" id="de-brick_or_oem_installation_using_the_tftp_and_rs232_serial_method">de-brick or OEM installation using the TFTP and RS232 (serial) method</h3>
<div class="level3">

<p>
If you want to de-brick/upgrade your router using TFTP you follow these steps:
</p>

<p>
Pre-requisits:
</p>
<ul>
<li class="level1"><div class="li"> serial RS232 connected from your machine to TL-WDR4300 &amp; terminal program (e.g. minicom, screen) set to <strong>115200 8N1</strong>, no flow control, 3,3V</div>
</li>
<li class="level1"><div class="li"> copy a working &amp; full OpenWrt firmware image into your tftp server folder (e.g: openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-factory.bin)</div>
</li>
</ul>

<p>
    (in case you want to flash the original TPLink firmware it migth needed to delete the first 200 Bytes from this firmware bevor flashing, plz check Video Flash Steps!)
</p>
<ul>
<li class="level1"><div class="li"> start a tftpd server on your local machine on <abbr title="Local Area Network">LAN</abbr> address 192.168.1.100/24 and connect your <abbr title="Local Area Network">LAN</abbr>-port to one of the routers <abbr title="Local Area Network">LAN</abbr> ports</div>
</li>
</ul>

<p>
Video Flash Procedure: <a href="http://www.youtube.com/watch?v=Ng5chUjgkkE&amp;feature=youtu.be" class="urlextern" title="http://www.youtube.com/watch?v=Ng5chUjgkkE&amp;feature=youtu.be"  rel="nofollow">How to debrick TL-WDR4300</a>
</p>

<p>
Written Flash Procedure:
</p>
<ol>
<li class="level1"><div class="li"> router should be unplugged &amp; your serial line connected &amp; terminal open &amp; tftp server installed not yet running</div>
</li>
<li class="level1"><div class="li"> copy your desired openwrt image for the tplink-4300 into your tftp server folder and rename it into openwrt.bin (to save some typing within the flash procedure)</div>
</li>
<li class="level1"><div class="li"> first goal is to get the command prompt from the u-boot bootloader on your router </div>
</li>
<li class="level1"><div class="li"> you should only plug in the serial into the router&#039;s serial port AFTER it initialises for a split second after powering on BUT BEFORE Autobooting starts otherwise it might hang at the initialisation process</div>
</li>
<li class="level1"><div class="li"> plug in your router and be ready to type <code>tpl</code> &amp; hit ENTER after you see the line <code>Autobooting in 1 seconds</code>:</div>
</li>
</ol>

<p>
<pre class="code">U-Boot 1.1.4 (Apr 25 2012 - 18:29:12)

U-boot DB120


DRAM:  128 MB
id read 0x100000ff
flash size 8MB, sector count = 128
Flash:  8 MB
Using default environment

In:    serial
Out:   serial
Err:   serial
Net:   ag934x_enet_initialize...
No valid address in Flash. Using fixed address
 wasp  reset mask:c03300 
WASP  ----&gt; S17 PHY *
: cfg1 0x7 cfg2 0x7114
eth0: ba:be:fa:ce:08:41
athrs17_reg_init: complete
eth0 up
eth0
Autobooting in 1 seconds</pre>

</p>
<ol>
<li class="level1"><div class="li"> in case you failed the right timing just reboot again until the prompt appears</div>
</li>
</ol>

<p>
<pre class="code">db12x&gt;</pre>

</p>
<ol>
<li class="level1"><div class="li"> now lets check what kind of parameters the u-boot loader expects (e.g file name of firmware via TFPT &amp; Load Adress)</div>
</li>
<li class="level1"><div class="li"> type <code>tftpboot</code> &amp; press ENTER …</div>
</li>
</ol>

<p>
<pre class="code">db12x&gt; tftpboot

dup 1 speed 1000
 Warning: no boot file name; using &#039;6F01A8C0.img&#039;
Using eth0 device
TFTP from server 192.168.1.100; our IP address is 192.168.1.111
Filename &#039;6F01A8C0.img&#039;.
Load address: 0x81000000
Log: *
TFTP error: &#039;Access violation&#039; (2)
Starting again</pre>

</p>
<ol>
<li class="level1"><div class="li"> as you can see, uboot expects a firmware image file name &quot;6F01A8C0.img&quot; at tftp server address 192.168.1.100 </div>
</li>
<li class="level1"><div class="li"> just change you local ip into 192.168.1.100 and start your tftp server</div>
</li>
<li class="level1"><div class="li"> start the uboots tftpclient to download the image from your local machine by typing: tftpboot 0x81000000 openwrt.bin + ENTER</div>
</li>
</ol>

<p>
<pre class="code">db12x&gt; tftpboot 0x81000000 openwrt.bin

Using eth0 device
TFTP from server 192.168.1.100; our IP address is 192.168.1.111
Filename &#039;openwrt.bin&#039;.
Load address: 0x81000000
Lg: #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         ############################
done
Bytes transferred = 8126464 (7c0000 hex)</pre>

</p>
<ol>
<li class="level1"><div class="li"> the last line needs to show a size of <code>7c0000 hex</code> otherwise your image is unsuitable</div>
</li>
<li class="level1"><div class="li"> now we need to erase parts of the flash memory to be able to copy your fresh loaded firmware into it</div>
</li>
<li class="level1"><div class="li"> just type in the promt <code>erase 0x9f020000 +7c0000</code> and wait for the promt to come back</div>
</li>
</ol>

<p>
<pre class="code">db12x&gt; erase 0x9f020000 +7c0000

First 0x2 last 0x7d sector size 0x10000                                                                                                                                                                                                  125
Erased 124 sectors</pre>

</p>
<ol>
<li class="level1"><div class="li"> now just copy the image to the rigth place by typing <code>cp.b 0x81000000 0x9f020000 0x7c0000</code></div>
</li>
</ol>

<p>
<pre class="code">db12x&gt; cp.b 0x81000000 0x9f020000 0x7c0000

Copy to Flash... write addr: 9f020000
done</pre>

</p>
<ol>
<li class="level1"><div class="li"> so .. you, in case your image is the correct one, your are just a single reboot away from having a working TL-WRD4300 back on your desk</div>
</li>
<li class="level1"><div class="li"> type <code>reset</code> or just un-plug and re-plug the power of your router and watch the boot process</div>
</li>
</ol>

<p>
<pre class="code">db12x&gt; reset</pre>

</p>

</div>

<h2 class="sectionedit18" id="specific_configuration">Specific Configuration</h2>
<div class="level2">

</div>

<h3 class="sectionedit19" id="interfaces">Interfaces</h3>
<div class="level3">

<p>
The default network configuration is:
</p>
<div class="table sectionedit20"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Interface Name </th><th class="col1"> Description </th><th class="col2"> Default configuration </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> br-lan </td><td class="col1"> <abbr title="Local Area Network">LAN</abbr> &amp; WiFi </td><td class="col2"> 192.168.1.1/24 </td>
	</tr>
	<tr class="row2">
		<td class="col0"> vlan0 (eth0.0) </td><td class="col1"> <abbr title="Local Area Network">LAN</abbr> ports (1 to 4) </td><td class="col2"> None </td>
	</tr>
	<tr class="row3">
		<td class="col0"> vlan1 (eth0.1) </td><td class="col1"> WAN port </td><td class="col2"> DHCP </td>
	</tr>
	<tr class="row4">
		<td class="col0"> ? </td><td class="col1"> WiFi </td><td class="col2"> Disabled </td>
	</tr>
</table></div>

</div>

<h3 class="sectionedit21" id="switch_ports_for_vlans">Switch Ports (for VLANs)</h3>
<div class="level3">

<p>
Numbers 2-5 are Ports 1-4 as labeled on the unit, number 1 is the Internet (WAN) on the unit, 0 is the internal connection to the router itself.
</p>
<div class="table sectionedit22"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Port </th><th class="col1"> Switch port </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 leftalign"> CPU   </td><td class="col1"> 0 </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> WAN   </td><td class="col1"> 1 </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <abbr title="Local Area Network">LAN</abbr> 1 </td><td class="col1"> 2 </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <abbr title="Local Area Network">LAN</abbr> 2 </td><td class="col1"> 3 </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <abbr title="Local Area Network">LAN</abbr> 3 </td><td class="col1"> 4 </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <abbr title="Local Area Network">LAN</abbr> 4 </td><td class="col1"> 5 </td>
	</tr>
	<tr class="row7">
		<td class="col0"> (not used) </td><td class="col1"> 6 </td>
	</tr>
</table></div>

<p>
The switch ports may turn out to be not properly bridged in a default bootup config, causing connection failure.
In this case you need to setup /etc/config/network or do manual swconfig setup - see <a href="../buffalo/wbmr-hp-g300h#wired.stations.cannot.ping.each.other" class="urlextern" title="http://wiki.openwrt.org/toh/buffalo/wbmr-hp-g300h#wired.stations.cannot.ping.each.other"  rel="nofollow">http://wiki.openwrt.org/toh/buffalo/wbmr-hp-g300h#wired.stations.cannot.ping.each.other</a> and <a href="../../doc/uci/network/switch" class="urlextern" title="http://wiki.openwrt.org/doc/uci/network/switch"  rel="nofollow">http://wiki.openwrt.org/doc/uci/network/switch</a> for advice.
</p>

</div>

<h2 class="sectionedit23" id="bootloader_mods">Bootloader Mods</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> you could read about <a href="../../doc/techref/bootloader.1" class="wikilink1" title="doc:techref:bootloader">bootloader</a> in general and about <a href="../../doc/techref/bootloader/uboot" class="wikilink1" title="doc:techref:bootloader:uboot">Das U-Boot</a> in particular.</div>
</li>
</ol>

</div>

<h3 class="sectionedit24" id="u-boot_114_modification_for_routers">U-Boot 1.1.4 modification for routers</h3>
<div class="level3">

<p>
Forum member <a href="https://forum.openwrt.org/profile.php?id=72549" class="urlextern" title="https://forum.openwrt.org/profile.php?id=72549"  rel="nofollow">pepe2k</a> made a modification of <strong>U-Boot 1.1.4</strong> for <strong>Qualcomm Atheros</strong> SoCs based devices (the project is still being developed, so new devices and SoCs will be supported in the future). Up to date information, binary images and sources can be found on official <a href="https://github.com/pepe2k/u-boot_mod" class="urlextern" title="https://github.com/pepe2k/u-boot_mod"  rel="nofollow">GitHub repository</a>.
</p>

<p>
This modification started from <a href="http://code.google.com/p/wr703n-uboot-with-web-failsafe/" class="urlextern" title="http://code.google.com/p/wr703n-uboot-with-web-failsafe/"  rel="nofollow">wr703n-uboot-with-web-failsafe</a> project, but supports more devices, all modern web browsers, has a lot of improvements and other modifications (like U-Boot NetConsole, custom commands, overclocking possibilities etc.).
</p>

<p>
More information:
</p>
<ul>
<li class="level1"><div class="li"> Official repository on GitHub: <a href="https://github.com/pepe2k/u-boot_mod" class="urlextern" title="https://github.com/pepe2k/u-boot_mod"  rel="nofollow">U-Boot 1.1.4 modification for routers</a></div>
</li>
<li class="level1"><div class="li"> Discussion about this project on <a href="https://forum.openwrt.org/viewtopic.php?id=43237" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?id=43237"  rel="nofollow">OpenWrt forum</a></div>
</li>
<li class="level1"><div class="li"> An article (in Polish) about one of the first version of this project on <a href="http://www.tech-blog.pl/2013/03/29/zmodyfikowany-u-boot-dla-routerow-tp-link-z-atheros-ar9331-z-trybem-aktualizacji-oprogramowania-przez-www-i-konsola-sieciowa-netconsole/" class="urlextern" title="http://www.tech-blog.pl/2013/03/29/zmodyfikowany-u-boot-dla-routerow-tp-link-z-atheros-ar9331-z-trybem-aktualizacji-oprogramowania-przez-www-i-konsola-sieciowa-netconsole/"  rel="nofollow">www.tech-blog.pl</a></div>
</li>
</ul>

</div>

<h3 class="sectionedit25" id="original_bootloader_settings">Original bootloader settings</h3>
<div class="level3">

<p>
(for 1.7, at least)
<pre class="code">db12x&gt; printenv
bootargs=console=ttyS0,115200 root=31:02 rootfstype=squashfs init=/sbin/init mtdparts=ath-nor0:256k(u-boot),64k(u-boot-env),6336k(rootfs),1408k(uImage),64k(mib0),64k(ART)
bootcmd=bootm 0x9f020000
bootdelay=1
baudrate=115200
ethaddr=0xXX:0xXX:0xXX:0xXX:0xXX:0xXX
ipaddr=192.168.1.111
serverip=192.168.1.100
dir=
lu=tftp 0x80060000 ${dir}u-boot.bin&amp;&amp;erase 0x9f000000 +$filesize;cp.b $fileaddr 0x9f000000 $filesize
lf=tftp 0x80060000 ${dir}db12x${bc}-jffs2&amp;&amp;erase 0x9f050000 +0x630000;cp.b $fileaddr 0x9f050000 $filesize
lk=tftp 0x80060000 ${dir}vmlinux${bc}.lzma.uImage&amp;&amp;erase 0x9f680000 +$filesize;cp.b $fileaddr 0x9f680000 $filesize
stdin=serial
stdout=serial
stderr=serial
ethact=eth0

Environment size: 686/65532 bytes
db12x&gt; </pre>

</p>

<p>
Changing variables through <code>&#039;setenv</code>&#039; doesn&#039;t seem to make the changes stick, unfortunately.
</p>

</div>

<h2 class="sectionedit26" id="hardware">Hardware</h2>
<div class="level2">

</div>

<h3 class="sectionedit27" id="info">Info</h3>
<div class="level3">
<div class="table sectionedit28"><table class="inline">
	<tr class="row0">
		<td class="col0 leftalign"> <strong><a href="http://en.wikipedia.org/wiki/Instruction set" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Instruction set">Instruction set</a>:</strong>    </td><td class="col1"> <a href="http://en.wikipedia.org/wiki/MIPS architecture" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/MIPS architecture">MIPS</a> MIPS 74Kc </td>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> <strong>Vendor:</strong>                    </td><td class="col1"> <a href="http://en.wikipedia.org/wiki/Qualcomm Atheros" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Qualcomm Atheros">Qualcomm Atheros</a> </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> <strong><a href="../../doc/techref/bootloader.1" class="wikilink1" title="doc:techref:bootloader">Bootloader</a>:</strong>     </td><td class="col1"> <a href="../../doc/techref/bootloader/uboot" class="wikilink1" title="doc:techref:bootloader:uboot">U-Boot</a> </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <strong><a href="../../doc/hardware/soc.1" class="wikilink1" title="doc:hardware:soc">System-On-Chip</a>:</strong>  </td><td class="col1"> AR9344 (MIPS) </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> <strong><a href="../../doc/hardware/cpu" class="wikilink1" title="doc:hardware:cpu">CPU</a>/Speed</strong>        </td><td class="col1"> 560 <abbr title="Megahertz">MHz</abbr> </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> <strong>Flash-Chip:</strong>               </td><td class="col1"> Spansion FL064KIF <a href="http://www.spansion.com/Products/memory/Serial-Flash/Pages/Spansion%20FL.aspx" class="urlextern" title="http://www.spansion.com/Products/memory/Serial-Flash/Pages/Spansion%20FL.aspx"  rel="nofollow">docs</a> </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> <strong>Flash size:</strong>               </td><td class="col1"> 8192 KiB </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> <strong>RAM:</strong>                      </td><td class="col1 leftalign"> 128 MiB   </td>
	</tr>
	<tr class="row8">
		<td class="col0 leftalign"> <strong>Wireless No1:</strong>             </td><td class="col1 leftalign"> SoC-integrated: Atheros AR9340 2x2 MIMO for 2.4GHz 802.11b/g/n   </td>
	</tr>
	<tr class="row9">
		<td class="col0 leftalign"> <strong>Wireless No2:</strong>             </td><td class="col1 leftalign"> separate Chip: Atheros AR9580 3x3 MIMO for 5GHz 802.11a/n  </td>
	</tr>
	<tr class="row10">
		<td class="col0 leftalign"> <strong><a href="../../doc/hardware/switch" class="wikilink1" title="doc:hardware:switch">Switch</a>:</strong>  </td><td class="col1 leftalign"> Atheros AR8327N  </td>
	</tr>
	<tr class="row11">
		<td class="col0 leftalign"> <strong>USB:</strong>             </td><td class="col1 leftalign"> Yes 2 x 2.0 (GL850G chip - 4 ports capable)    </td>
	</tr>
	<tr class="row12">
		<td class="col0 leftalign"> <strong><a href="../../OpenWrtDocs/Customizing/Hardware/Serial_Console" class="wikilink1" title="doc:hardware:port.serial">Serial</a>:</strong>          </td><td class="col1"> <a href="tl-wdr4300#serial" title="toh:tp-link:tl-wdr4300 ↵" class="wikilink1">Yes</a> </td>
	</tr>
	<tr class="row13">
		<td class="col0 leftalign"> <strong><a href="../../doc/hardware/port.jtag" class="wikilink1" title="doc:hardware:port.jtag">JTAG</a>:</strong>            </td><td class="col1 leftalign"> <a href="tl-wdr4300#jtag" title="toh:tp-link:tl-wdr4300 ↵" class="wikilink1">Yes</a>  </td>
	</tr>
</table></div>

</div>

<h3 class="sectionedit29" id="power">Power</h3>
<div class="level3">

</div>

<h4 id="psu_power_supply">PSU (power supply)</h4>
<div class="level4">

<p>
The TL-WDR4300 DE (v1.1) comes bundled with the following PSU:
</p>

<p>
<a href="../../_detail/toh/tp-link/tl-wr1043nd-dev10-psu.jpg?id=toh%253Atp-link%253Atl-wdr4300" class="media" title="toh:tp-link:tl-wr1043nd-dev10-psu.jpg"><img src="../../_media/toh/tp-link/tl-wr1043nd-dev10-psu.jpg?w=250&amp;tok=d0dc76" class="media" title="tl-wr1043nd-dev10-psu.jpg" alt="tl-wr1043nd-dev10-psu.jpg" width="250" /></a>
</p>

<p>
Specifications:
</p>
<div class="table sectionedit30"><table class="inline">
	<tr class="row0">
		<td class="col0"> <strong>Brand/Model</strong> </td><td class="col1"> Leader Electronics Inc / LEI F7 </td>
	</tr>
	<tr class="row1">
		<td class="col0"> <strong>Input</strong> </td><td class="col1"> 100-240V~ (50/60Hz, 0.6A) </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <strong>Output</strong> </td><td class="col1"> 12.0V 1.5A </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <strong>Measured output</strong> </td><td class="col1"> 12.15V </td>
	</tr>
	<tr class="row4">
		<td class="col0" colspan="2"> The plug (on the router side) has the following specifications: </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <strong>Outer diameter</strong> </td><td class="col1"> 5.5mm </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <strong>Inner diameter</strong></td><td class="col1"> 2.1mm </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <strong>Length of the shaft</strong> </td><td class="col1"> 9.5mm </td>
	</tr>
</table></div>

</div>

<h4 id="gpio">GPIO</h4>
<div class="level4">

<p>
→ <a href="../../doc/hardware/port.gpio" class="wikilink1" title="doc:hardware:port.gpio">port.GPIO</a>
The AR933x platform provides 30 GPIOs. Some of them are used by the router for status LEDs, buttons and other stuff. The table below shows the results of some investigation:
</p>
<div class="table sectionedit31"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 leftalign">        </th><th class="col1 leftalign">               </th><th class="col2 leftalign">            </th><th class="col3 centeralign" colspan="2">  Voltage level at GPIO in output-mode  </th><th class="col5 rightalign" colspan="3">  gpioX/value in input-mode when GPIO is: </th>
	</tr>
	<tr class="row1">
		<th class="col0 centeralign">  GPIO  </th><th class="col1 centeralign">  Common Name  </th><th class="col2 centeralign">  PCB Name  </th><th class="col3 centeralign">  gpioX/value=1  </th><th class="col4 leftalign"> gpioX/value=0         </th><th class="col5 centeralign">  Floating  </th><th class="col6 centeralign">  Pulled to GND  </th><th class="col7 centeralign">  Pulled to Vcc  </th>
	</tr>
	</thead>
	<tr class="row2">
		<td class="col0 rightalign">      0 </td><td class="col1 leftalign">       </td><td class="col2"> JP1-9 </td><td class="col3 leftalign">                 </td><td class="col4 leftalign">                       </td><td class="col5 leftalign">            </td><td class="col6 leftalign">                 </td><td class="col7 leftalign">                  </td>
	</tr>
	<tr class="row3">
		<td class="col0 rightalign">      1 </td><td class="col1 leftalign">               </td><td class="col2 leftalign"> JP1-3           </td><td class="col3 leftalign">                 </td><td class="col4 leftalign">                       </td><td class="col5 leftalign">            </td><td class="col6 leftalign">                 </td><td class="col7 leftalign">                  </td>
	</tr>
	<tr class="row4">
		<td class="col0 rightalign">      2 </td><td class="col1 leftalign">               </td><td class="col2 leftalign"> JP1-5           </td><td class="col3 leftalign">                 </td><td class="col4 leftalign">                       </td><td class="col5 leftalign">            </td><td class="col6 leftalign">                 </td><td class="col7 leftalign">                  </td>
	</tr>
	<tr class="row5">
		<td class="col0 rightalign">      3 </td><td class="col1 leftalign">               </td><td class="col2 leftalign"> JP1-7           </td><td class="col3 leftalign">                 </td><td class="col4 leftalign">                       </td><td class="col5 leftalign">            </td><td class="col6 leftalign">                 </td><td class="col7 leftalign">                  </td>
	</tr>
	<tr class="row6">
		<td class="col0 rightalign">      4 </td><td class="col1 leftalign">               </td><td class="col2 leftalign">            </td><td class="col3 leftalign">                 </td><td class="col4 leftalign">                       </td><td class="col5 leftalign">            </td><td class="col6 leftalign">                 </td><td class="col7 leftalign">                  </td>
	</tr>
	<tr class="row7">
		<td class="col0 rightalign">      5 </td><td class="col1 leftalign">               </td><td class="col2 leftalign">            </td><td class="col3 leftalign">                 </td><td class="col4 leftalign">                       </td><td class="col5 leftalign">            </td><td class="col6 leftalign">                 </td><td class="col7 leftalign">                  </td>
	</tr>
	<tr class="row8">
		<td class="col0 rightalign">      6 </td><td class="col1 leftalign">               </td><td class="col2 leftalign">            </td><td class="col3 leftalign">                 </td><td class="col4 leftalign">                       </td><td class="col5 leftalign">            </td><td class="col6 leftalign">                 </td><td class="col7 leftalign">                  </td>
	</tr>
	<tr class="row9">
		<td class="col0 rightalign">      7 </td><td class="col1 leftalign">               </td><td class="col2 leftalign">   </td><td class="col3 leftalign">                 </td><td class="col4 leftalign">                       </td><td class="col5 leftalign">            </td><td class="col6 leftalign">                 </td><td class="col7 leftalign">                  </td>
	</tr>
	<tr class="row10">
		<td class="col0 rightalign">      8 </td><td class="col1 leftalign">    </td><td class="col2"> </td><td class="col3 leftalign">                 </td><td class="col4 leftalign">                       </td><td class="col5 leftalign">            </td><td class="col6 leftalign">                 </td><td class="col7 leftalign">                  </td>
	</tr>
	<tr class="row11">
		<td class="col0 rightalign">      9 </td><td class="col1 leftalign">               </td><td class="col2 leftalign">            </td><td class="col3 leftalign">                 </td><td class="col4 leftalign">                       </td><td class="col5 leftalign">            </td><td class="col6 leftalign">                 </td><td class="col7 leftalign">                  </td>
	</tr>
	<tr class="row12">
		<td class="col0 rightalign">     10 </td><td class="col1 leftalign">               </td><td class="col2 leftalign">            </td><td class="col3 leftalign">                 </td><td class="col4 leftalign">                       </td><td class="col5 leftalign">            </td><td class="col6 leftalign">                 </td><td class="col7 leftalign">                  </td>
	</tr>
	<tr class="row13">
		<td class="col0 rightalign">     11 </td><td class="col1 leftalign"> LED USB1    </td><td class="col2 leftalign"> DS8,R313           </td><td class="col3 leftalign">                 </td><td class="col4 leftalign">                       </td><td class="col5 leftalign">            </td><td class="col6 leftalign">                 </td><td class="col7 leftalign">                  </td>
	</tr>
	<tr class="row14">
		<td class="col0 rightalign">     12 </td><td class="col1 leftalign"> LED USB2    </td><td class="col2 leftalign"> DS8,R314           </td><td class="col3 leftalign">                 </td><td class="col4 leftalign">                       </td><td class="col5 leftalign">            </td><td class="col6 leftalign">                 </td><td class="col7 leftalign">                  </td>
	</tr>
	<tr class="row15">
		<td class="col0 rightalign">     13 </td><td class="col1 leftalign"> LED WLAN2G  </td><td class="col2 leftalign"> DS6           </td><td class="col3 leftalign">                 </td><td class="col4 leftalign">                       </td><td class="col5 leftalign">            </td><td class="col6 leftalign">                 </td><td class="col7 leftalign">                  </td>
	</tr>
	<tr class="row16">
		<td class="col0 rightalign">     14 </td><td class="col1 leftalign"> LED System  </td><td class="col2 leftalign"> DS4           </td><td class="col3 leftalign">                 </td><td class="col4 leftalign">                       </td><td class="col5 leftalign">            </td><td class="col6 leftalign">                 </td><td class="col7 leftalign">                  </td>
	</tr>
	<tr class="row17">
		<td class="col0 rightalign">     15 </td><td class="col1 leftalign"> LED QSS     </td><td class="col2 leftalign"> DS5           </td><td class="col3 leftalign">                 </td><td class="col4 leftalign">                       </td><td class="col5 leftalign">            </td><td class="col6 leftalign">                 </td><td class="col7 leftalign">                  </td>
	</tr>
	<tr class="row18">
		<td class="col0 rightalign">     16 </td><td class="col1 leftalign"> WPS Button  </td><td class="col2 leftalign">            </td><td class="col3 leftalign">                 </td><td class="col4 leftalign">                       </td><td class="col5 leftalign">            </td><td class="col6 leftalign">                 </td><td class="col7 leftalign">                  </td>
	</tr>
	<tr class="row19">
		<td class="col0 rightalign">     17 </td><td class="col1 leftalign"> WiFi Switch  </td><td class="col2 leftalign">            </td><td class="col3 leftalign">                 </td><td class="col4 leftalign">                       </td><td class="col5 leftalign">            </td><td class="col6 leftalign">                 </td><td class="col7 leftalign">                  </td>
	</tr>
	<tr class="row20">
		<td class="col0 rightalign">     18 </td><td class="col1"> External LNA0 </td><td class="col2 leftalign">            </td><td class="col3 leftalign">                 </td><td class="col4 leftalign">                       </td><td class="col5 leftalign">            </td><td class="col6 leftalign">                 </td><td class="col7 leftalign">                  </td>
	</tr>
	<tr class="row21">
		<td class="col0 rightalign">     19 </td><td class="col1"> External LNA1 </td><td class="col2 leftalign">            </td><td class="col3 leftalign">                 </td><td class="col4 leftalign">                       </td><td class="col5 leftalign">            </td><td class="col6 leftalign">                 </td><td class="col7 leftalign">                  </td>
	</tr>
	<tr class="row22">
		<td class="col0 rightalign">     20 </td><td class="col1 leftalign">                </td><td class="col2 leftalign">            </td><td class="col3 leftalign">                 </td><td class="col4 leftalign">                       </td><td class="col5 leftalign">            </td><td class="col6 leftalign">                 </td><td class="col7 leftalign">                  </td>
	</tr>
	<tr class="row23">
		<td class="col0 rightalign">     21 </td><td class="col1 centeralign">   USB2 Power   </td><td class="col2 leftalign">            </td><td class="col3 leftalign">                 </td><td class="col4 leftalign">                       </td><td class="col5 leftalign">            </td><td class="col6 leftalign">                 </td><td class="col7 leftalign">                  </td>
	</tr>
	<tr class="row24">
		<td class="col0 rightalign">     22 </td><td class="col1 centeralign">   USB1 Power   </td><td class="col2 leftalign">            </td><td class="col3 leftalign">                 </td><td class="col4 leftalign">                       </td><td class="col5 leftalign">            </td><td class="col6 leftalign">                 </td><td class="col7 leftalign">                  </td>
	</tr>
</table></div>

<p>
To make the GPIOs available via sysfs, the required ones have to be exported to userspace, as it is explained on a page of the <a href="http://squidge.sourceforge.net/gpio/" class="urlextern" title="http://squidge.sourceforge.net/gpio/"  rel="nofollow">Squidge-Project</a>. Kernel modules occupying that resource need to be removed before (e.g. &quot;leds-gpio&quot; and &quot;gpio-buttons&quot;). In output-mode, voltage levels of the GPIOs were measured against GND, after the value 1 or 0 had been written to /sys/class/gpio/gpioX/value. In input-mode, the value of the file /sys/class/gpio/gpioX/value was read when the GPIO was floating (initial state), pulled to GND or pulled to Vcc.
</p>

<p>
The 5GHz LED seems not to be controlled via GPIO.
</p>

</div>

<h3 class="sectionedit32" id="hardware_modifications">Hardware Modifications</h3>
<div class="level3">

</div>

<h4 id="usb_modification">USB Modification</h4>
<div class="level4">

<p>
The task was to make ext-root without using the default ports.
</p>

<p>
It turns out that the GL850G chipset used by the TP-Link in WDR3600/4300/4900 models can handle up to four ports.
</p>

<p>
<a href="../../_detail/media/gl850g.png?id=toh%253Atp-link%253Atl-wdr4300" class="media" title="media:gl850g.png"><img src="../../_media/media/gl850g.png" class="media" alt="" /></a>
</p>

<p>
Analysing the router&#039;s PCB it appears that pins 8(D-), 9(D+), 11(D-) and 12(D+) are unused.  
Aditionaly each factory USB port has separate power section.
</p>

<p>
GND is at the TP7 pin point. +5 V was taken directly from the MOSFET.
</p>

<p>
<a href="../../_detail/media/tplinkwrd3600-usbmod-small.jpg?id=toh%253Atp-link%253Atl-wdr4300" class="media" title="media:tplinkwrd3600-usbmod-small.jpg"><img src="../../_media/media/tplinkwrd3600-usbmod-small.jpg" class="media" alt="" /></a>
<a href="../../_detail/media/tplinkwrd3600-usbmod1-small.jpg?id=toh%253Atp-link%253Atl-wdr4300" class="media" title="media:tplinkwrd3600-usbmod1-small.jpg"><img src="../../_media/media/tplinkwrd3600-usbmod1-small.jpg" class="media" alt="" /></a>
</p>

</div>

<h3 class="sectionedit33" id="photos">Photos</h3>
<div class="level3">

<p>
<a href="../../_detail/toh/tp-link/tplink-4300_with-serial.jpg?id=toh%253Atp-link%253Atl-wdr4300" class="media" title="toh:tp-link:tplink-4300_with-serial.jpg"><img src="../../_media/toh/tp-link/tplink-4300_with-serial.jpg" class="media" alt="" /></a>
</p>

</div>

<h3 class="sectionedit34" id="opening_the_case_v_11">Opening The Case (V 1.1)</h3>
<div class="level3">

<p>
Remove the 4 screws on the bottom of the case.
</p>

<p>
The top is clipped to the bottom of the case at 9 attachment points:
3 on each side of the case, 1 on the back, and 2 on the front.
Each attachment point consists of two pins which fit into holes in tabs
which protrude from the other half of the case.  All of the tabs are
on the bottom of the case, with the exception of the case back, where the
single tab is in the center of the top of the case. 
</p>

<p>
One method known to
work, once, is to start at one of the rear corners.  The corner by 
the ethernet ports seems to work best.  Gently flex the
case and slightly separate the top from the bottom at the 
corner by lifting on, or 
inserting a fingernail or other thin object into, the crack 
above the antenna.  While doing this insert the tip of a knife
blade (upward, given the geometry as the unit normally sits) into the 
crack between the two halves along the side of the case toward the rear.  
This will force the pins in the top of the case outward, flex the tab
protruding from the bottom of the case inward, and free the pins
from the tab.  If necessary the knife tip may be levered slightly toward
the case interior after insertion.  Due to the force 
separating the top of the case from the 
bottom near the antenna, the pins should pop out of the tab located
on the case side near the rear, lift slightly upward, and remain free.
</p>

<p>
Continue to free the other tabs, first working from the rear corner toward the front of the case, then across the front of the case, and finally from the front of the case toward the rear along the opposite side.  The two halves of the case will then separate without having to work at freeing the last attachment point at the rear of the case.
</p>

<p>
With care, this method leaves no marks on the case.
</p>

</div>

<h3 class="sectionedit35" id="de-brick_using_in-system-programming">de-brick using in-system-programming</h3>
<div class="level3">

<p>
<img src="../../_media/meta/icons/tango/dialog-warning.png" class="medialeft" title="Warning!" alt="Warning!" /><strong>WARNING:</strong> risk of frying your hardware. only do this when you understand basic electric engineering.
</p>
<hr />

<p>
When the bootloader was trashed as well, and none of the above recovery methods work, you can de-brick the thing using flashrom,
see <a href="http://flashrom.org/ISP" class="urlextern" title="http://flashrom.org/ISP"  rel="nofollow">http://flashrom.org/ISP</a>.
</p>

<p>
If you don&#039;t have one of those fancy SOIC clips, desolder the flash chip (google for SOIC desoldering for your favorite method)<a href="../../_detail/media/wdr4300-desoldered-flash.jpg?id=toh%253Atp-link%253Atl-wdr4300" class="media" title="media:wdr4300-desoldered-flash.jpg"><img src="../../_media/media/wdr4300-desoldered-flash.jpg" class="media" alt="" /></a>
</p>

</div>

<h2 class="sectionedit36" id="serial_console">Serial console</h2>
<div class="level2">

<p>
Serial console is available on the J1 (1.7) connector, 3.3v signals.
</p>

<p>
1 = TX out <br/>

2 = RX in <br/>

3 = GND <br/>

4 = VCC 3.3V <br/>

<strong>DO NOT CONNECT VCC</strong>. Use only TX/RX/GND.
</p>

<p>
Baud Rate: 115200<br/>

Data Bits: 8<br/>

Parity: No<br/>

Stop Bits: 1<br/>

</p>

<p>
To break bootstrap sequence, type <code>&#039;tpl</code>&#039; during the 1-second boot delay.
</p>

<p>
Factory firmware login credentials are not known at this time (it&#039;s not root/5up as with other tp-link models).
</p>

</div>

<h2 class="sectionedit37" id="tp-link_tl-wdr4310_version_10_forum_thread">TP-Link TL-WDR4310 Version 1.0 forum thread</h2>
<div class="level2">

<p>
<a href="https://forum.openwrt.org/viewtopic.php?id=36534" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?id=36534"  rel="nofollow">https://forum.openwrt.org/viewtopic.php?id=36534</a>
</p>

</div>

<h2 class="sectionedit38" id="add-ons_of_the_router_tl-wdr4300">Add-ons of the Router TL-WDR4300</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="http://nixorids.blogspot.com/2013/03/installing-packages-into-usb-on-tl.html" class="urlextern" title="http://nixorids.blogspot.com/2013/03/installing-packages-into-usb-on-tl.html"  rel="nofollow">Installing packages into the USB storage</a></div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <a href="http://nixorids.blogspot.com/2013/03/wireless-adapter-tl-wn7200nd-with.html" class="urlextern" title="http://nixorids.blogspot.com/2013/03/wireless-adapter-tl-wn7200nd-with.html"  rel="nofollow">Adding a USB wireless adapter to the router</a></div>
</li>
</ul>

</div>

<h2 class="sectionedit39" id="performance_test_with_trunkr35995">Performance test with trunk/r35995</h2>
<div class="level2">

<p>
Tested with |<em class="u">http over nginx</em>|←<em>wan</em>-|<em class="u">wdr4300</em>|←<em>lan</em>-|<em class="u">Client</em>|
</p>
<div class="table sectionedit40"><table class="inline">
	<tr class="row0">
		<td class="col0"> mbit </td><td class="col1"> mode </td>
	</tr>
	<tr class="row1">
		<td class="col0"> ~880 </td><td class="col1"> switched </td>
	</tr>
	<tr class="row2">
		<td class="col0"> ~400 </td><td class="col1"> routed </td>
	</tr>
	<tr class="row3">
		<td class="col0"> ~300 </td><td class="col1"> nat </td>
	</tr>
</table></div>

</div>

<h2 class="sectionedit41" id="tags">Tags</h2>
<div class="level2">
<div class="tags"><span>
	<a href="../../tag/gigabitethernet?do=showtag&amp;tag=GigabitEthernet" class="wikilink1" title="tag:gigabitethernet" rel="tag">GigabitEthernet</a>,
	<a href="../../tag/2nic?do=showtag&amp;tag=2NIC" class="wikilink1" title="tag:2nic" rel="tag">2NIC</a>,
	<a href="../../tag/2wnic?do=showtag&amp;tag=2WNIC" class="wikilink1" title="tag:2wnic" rel="tag">2WNIC</a>,
	<a href="../../tag/5port?do=showtag&amp;tag=5Port" class="wikilink1" title="tag:5port" rel="tag">5Port</a>,
	<a href="../../tag/usb?do=showtag&amp;tag=USB" class="wikilink1" title="tag:usb" rel="tag">USB</a>,
	<a href="../../tag/2usb?do=showtag&amp;tag=2USB" class="wikilink1" title="tag:2usb" rel="tag">2USB</a>,
	<a href="../../tag/jtag?do=showtag&amp;tag=JTAG" class="wikilink1" title="tag:jtag" rel="tag">JTAG</a>,
	<a href="../../tag/802.11bgn?do=showtag&amp;tag=802.11bgn" class="wikilink1" title="tag:802.11bgn" rel="tag">802.11bgn</a>,
	<a href="../../tag/ath9k?do=showtag&amp;tag=ath9k" class="wikilink1" title="tag:ath9k" rel="tag">ath9k</a>,
	<a href="../../tag/ar9344?do=showtag&amp;tag=AR9344" class="wikilink1" title="tag:ar9344" rel="tag">AR9344</a>,
	<a href="../../tag/ar9580?do=showtag&amp;tag=AR9580" class="wikilink1" title="tag:ar9580" rel="tag">AR9580</a>,
	<a href="../../tag/802.11abgn_simultan?do=showtag&amp;tag=802.11abgn_simultan" class="wikilink1" title="tag:802.11abgn_simultan" rel="tag">802.11abgn simultan</a>,
	<a href="../../tag/3ant?do=showtag&amp;tag=3Ant" class="wikilink1" title="tag:3ant" rel="tag">3Ant</a>,
	<a href="../../tag/detachableantenna" class="wikilink1" title="tag:detachableantenna" rel="tag">DetachableAntenna</a>,
	<a href="../../tag/128ram?do=showtag&amp;tag=128RAM" class="wikilink1" title="tag:128ram" rel="tag">128RAM</a>,
	<a href="../../tag/8flash?do=showtag&amp;tag=8Flash" class="wikilink1" title="tag:8flash" rel="tag">8Flash</a>,
	<a href="../../tag/mips?do=showtag&amp;tag=MIPS" class="wikilink1" title="tag:mips" rel="tag">MIPS</a>,
	<a href="../../tag/mips32?do=showtag&amp;tag=MIPS32" class="wikilink1" title="tag:mips32" rel="tag">MIPS32</a>,
	<a href="../../tag/74kc?do=showtag&amp;tag=74Kc" class="wikilink1" title="tag:74kc" rel="tag">74Kc</a>,
	<a href="../../tag/db120?do=showtag&amp;tag=DB120" class="wikilink1" title="tag:db120" rel="tag">DB120</a>
</span></div>

</div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>toh/tp-link/tl-wdr4300.txt</bdi> · Last modified: 2015/05/21 03:53 by <bdi>mandrawes</bdi></div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="tl-wdr4300?do=edit"  class="action source" accesskey="v" rel="nofollow" title="Show pagesource [V]"><span>Show pagesource</span></a></li><li><a href="tl-wdr4300?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="tl-wdr4300?do=backlink"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="tl-wdr4300#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license" class="urlextern">CC Attribution-Noncommercial-Share Alike 3.0 Unported</a></bdi></div>
    <div class="buttons">
        <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license"><img src="../../lib/images/license/button/cc-by-nc-sa.png" alt="CC Attribution-Noncommercial-Share Alike 3.0 Unported" /></a>        <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="../../lib/tpl/openwrt/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://www.php.net" title="Powered by PHP" ><img
            src="../../lib/tpl/openwrt/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="../../lib/tpl/openwrt/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="../../lib/tpl/openwrt/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="../../lib/tpl/openwrt/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="../../lib/exe/indexer.php?id=toh%253Atp-link%253Atl-wdr4300&amp;1432267580" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->
</body>
</html>
