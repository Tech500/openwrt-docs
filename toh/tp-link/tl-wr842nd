<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>TP-Link TL-WR842ND [OpenWrt Wiki]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="2011nov,fastethernet,5port,usb,1usb,usb2.0,serial,integrated,802.11bgn,1wnic,ar9287,ath9k,2ant,detachableantenna,32ram,8flash,mips,mips32,24kc,ar7241"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../lib/exe/opensearch.php" title="OpenWrt Wiki"/>
<link rel="start" href="../../index.html"/>
<link rel="contents" href="tl-wr842nd?do=index" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Recent changes" href="../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="../../feed.php?mode=list&amp;ns=toh:tp-link"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="../../_export/xhtml/toh/tp-link/tl-wr842nd"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="../../_export/raw/toh/tp-link/tl-wr842nd"/>
<link rel="canonical" href="tl-wr842nd"/>
<link rel="stylesheet" type="text/css" href="../../lib/exe/css.php?t=openwrt&amp;tseed=6f44f363dc87908d905dc56ff3acbfc4"/>
<script type="text/javascript">/*<![CDATA[*/var NS='toh:tp-link';var JSINFO = {"id":"toh:tp-link:tl-wr842nd","namespace":"toh:tp-link"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../lib/exe/js.php?tseed=6f44f363dc87908d905dc56ff3acbfc4"></script>
<script type="text/javascript" charset="utf-8">/*<![CDATA[*/jQuery(function(){
	for ( i=0; i < document.forms.length; i++ ) {
		if (document.forms[i].method == 'post') {
			var myElement = document.createElement('input');
			myElement.setAttribute('type', 'hidden');
			myElement.name = 'bb2_screener_';
			myElement.value = '1432268150 166.182.3.13';
			document.forms[i].appendChild(myElement);
		}
	}
});
/*!]]>*/</script>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="../../lib/tpl/openwrt/images/favicon.ico" />
<link rel="apple-touch-icon" href="../../lib/tpl/openwrt/images/apple-touch-icon.png" />
    </head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_openwrt     ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="tl-wr842nd#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="../../start"  accesskey="h" title="[H]"><img src="../../lib/tpl/openwrt/images/logo.png" width="386" height="98" alt="" /> <span>OpenWrt Wiki</span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="tl-wr842nd?do=register"  class="action register" rel="nofollow" title="Register">Register</a></li><li><a href="tl-wr842nd?do=login&amp;sectok=382740b13d95f946eed36caa57076b4a"  class="action login" rel="nofollow" title="Login">Login</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="../../start" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="../../doku.php" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="toh:tp-link:tl-wr842nd" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Show pagesource</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Login</option><option value="register">Register</option></optgroup></select><input type="submit" value="&gt;" /></div></form>            </div>
            <ul>
                <li><a href="tl-wr842nd?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a></li><li><a href="tl-wr842nd?do=media&amp;ns=toh%253Atp-link"  class="action media" rel="nofollow" title="Media Manager">Media Manager</a></li><li><a href="tl-wr842nd?do=index"  class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                            <div class="youarehere"><span class="bchead">You are here: </span><span class="home"><bdi><a href="../../start" class="wikilink1" title="start">OpenWrt Wiki</a></bdi></span> » <bdi><a href="../start" class="wikilink1" title="toh:start">Table of Hardware</a></bdi> » <bdi><a href="start" class="wikilink1" title="toh:tp-link:start">TP-Link</a></bdi> » <bdi><span class="curid"><a href="tl-wr842nd" class="wikilink1" title="toh:tp-link:tl-wr842nd">TP-Link TL-WR842ND</a></span></bdi></div>
                                    <div class="plugin_multilingual">
        <ul>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/cz/toh/tp-link/tl-wr842nd" class="media" title="cz:toh:tp-link:tl-wr842nd"><img src="../../lib/exe/fetch.php?cache=&amp;tok=aff589&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fcz.gif" class="media" title="Čeština (Czech)" alt="Čeština (Czech)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/de/toh/tp-link/tl-wr842nd" class="media" title="de:toh:tp-link:tl-wr842nd"><img src="../../lib/exe/fetch.php?cache=&amp;tok=e24010&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fde.gif" class="media" title="Deutsch (German)" alt="Deutsch (German)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <span class="curid"><a href="tl-wr842nd" class="media" title="toh:tp-link:tl-wr842nd"><img src="../../lib/exe/fetch.php?cache=&amp;tok=2a37ae&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fgb.gif" class="media" title="English" alt="English" /></a></span>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/es/toh/tp-link/tl-wr842nd" class="media" title="es:toh:tp-link:tl-wr842nd"><img src="../../lib/exe/fetch.php?cache=&amp;tok=46c004&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fmx.gif" class="media" title="Español (Spanish, Mexico)" alt="Español (Spanish, Mexico)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/fr/toh/tp-link/tl-wr842nd" class="media" title="fr:toh:tp-link:tl-wr842nd"><img src="../../lib/exe/fetch.php?cache=&amp;tok=a5beba&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ffr.gif" class="media" title="Français (French)" alt="Français (French)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/hu/toh/tp-link/tl-wr842nd" class="media" title="hu:toh:tp-link:tl-wr842nd"><img src="../../lib/exe/fetch.php?cache=&amp;tok=6b5470&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fhu.gif" class="media" title="Magyar (Hungarian)" alt="Magyar (Hungarian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/jp/toh/tp-link/tl-wr842nd" class="media" title="jp:toh:tp-link:tl-wr842nd"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f999fc&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fjp.gif" class="media" title="日本語 (Japanese)" alt="日本語 (Japanese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pl/toh/tp-link/tl-wr842nd" class="media" title="pl:toh:tp-link:tl-wr842nd"><img src="../../lib/exe/fetch.php?cache=&amp;tok=c805c0&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fpl.gif" class="media" title="Poliski (Polish)" alt="Poliski (Polish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pt-br/toh/tp-link/tl-wr842nd" class="media" title="pt-br:toh:tp-link:tl-wr842nd"><img src="../../lib/exe/fetch.php?cache=&amp;tok=13127d&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fbr.gif" class="media" title="Português brasileiro (Portuguese, Brasil)" alt="Português brasileiro (Portuguese, Brasil)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <a href="../../ru/toh/tp-link/tl-wr842nd" class="media" title="ru:toh:tp-link:tl-wr842nd"><img src="../../lib/exe/fetch.php?cache=&amp;tok=66ab5e&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fru.gif" class="media" title="Русский (Russsian)" alt="Русский (Russsian)" /></a>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/tr/toh/tp-link/tl-wr842nd" class="media" title="tr:toh:tp-link:tl-wr842nd"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f4beed&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ftr.gif" class="media" title="Tϋrkçe (Turkish)" alt="Tϋrkçe (Turkish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-cn/toh/tp-link/tl-wr842nd" class="media" title="zh-cn:toh:tp-link:tl-wr842nd"><img src="../../lib/exe/fetch.php?cache=&amp;tok=93625a&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-cn.gif" class="media" title="官話/官话 (Chinese)" alt="官話/官话 (Chinese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-tw/toh/tp-link/tl-wr842nd" class="media" title="zh-tw:toh:tp-link:tl-wr842nd"><img src="../../lib/exe/fetch.php?cache=&amp;tok=b56198&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-tw.gif" class="media" title="臺灣華語 (Taiwanese)" alt="臺灣華語 (Taiwanese)" /></a>
              </div>
            </div>
          </li>
        </ul>
      </div>
        </div>
    
    
    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>toh:tp-link:tl-wr842nd</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="tl-wr842nd#supported_versions">Supported Versions</a></div></li>
<li class="level1"><div class="li"><a href="tl-wr842nd#unsupported_tl-wr842n_chinese-only_version">Unsupported TL-WR842N chinese-only version</a></div></li>
<li class="level1"><div class="li"><a href="tl-wr842nd#hardware">Hardware</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="tl-wr842nd#info">Info</a></div></li>
<li class="level2"><div class="li"><a href="tl-wr842nd#flash_layout">Flash Layout</a></div></li>
<li class="level2"><div class="li"><a href="tl-wr842nd#photos">Photos</a></div></li>
<li class="level2"><div class="li"><a href="tl-wr842nd#serial">Serial</a></div></li>
<li class="level2"><div class="li"><a href="tl-wr842nd#recovery_v1">Recovery (v1)</a></div></li>
<li class="level2"><div class="li"><a href="tl-wr842nd#recovery_v2">Recovery (v2)</a></div></li>
<li class="level2"><div class="li"><a href="tl-wr842nd#back_to_stock_firmware">Back to stock firmware</a></div></li>
<li class="level2"><div class="li"><a href="tl-wr842nd#power">Power</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="tl-wr842nd#tags">Tags</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="tp-link_tl-wr842nd">TP-Link TL-WR842ND</h1>
<div class="level1">

<p>
For more details (including a latest install link (precompiled binary firmware download!)) see the cumulative page: <a href="tl-mr3220" class="wikilink1" title="toh:tp-link:tl-mr3420">TP-Link TL-MR3420, TL-MR3220, TL-WR841ND v7 &amp; TL-WR842ND</a>.
</p>

</div>

<h2 class="sectionedit2" id="supported_versions">Supported Versions</h2>
<div class="level2">
<div class="table sectionedit3"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Version/Model </th><th class="col1"> Release Date </th><th class="col2"> Supported Since OpenWrt Version </th><th class="col3"> Model Specific Notes </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> v1.0 </td><td class="col1"> Nov-2011 </td><td class="col2"> AA (<a href="https://dev.openwrt.org/changeset/30508" class="urlextern" title="https://dev.openwrt.org/changeset/30508"  rel="nofollow">r30508</a>) </td><td class="col3"> </td>
	</tr>
	<tr class="row2">
		<td class="col0"> v1.1 </td><td class="col1"> May-2013 </td><td class="col2"> AA (<a href="https://dev.openwrt.org/changeset/30508" class="urlextern" title="https://dev.openwrt.org/changeset/30508"  rel="nofollow">r30508</a>) </td><td class="col3"> Internal sticker v1.1, board rev1.0, /proc/cpuinfo same as v1.0. </td>
	</tr>
	<tr class="row3">
		<td class="col0"> v2.0 </td><td class="col1"> June-2013 </td><td class="col2"> BB (<a href="https://dev.openwrt.org/changeset/38815" class="urlextern" title="https://dev.openwrt.org/changeset/38815"  rel="nofollow">r38815</a>) </td><td class="col3"> </td>
	</tr>
	<tr class="row4">
		<td class="col0"> v2.1 </td><td class="col1"> 05 November 2013 </td><td class="col2"></td><td class="col3"></td>
	</tr>
</table></div>



</div>

<h2 class="sectionedit4" id="unsupported_tl-wr842n_chinese-only_version">Unsupported TL-WR842N chinese-only version</h2>
<div class="level2">
<div class="table sectionedit5"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Version/Model </th><th class="col1"> Release Date </th><th class="col2"> OpenWrt Version Supported </th><th class="col3"> Model Specific Notes </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> V1 - V4 </td><td class="col1"> 2013 </td><td class="col2"> probably unsupportable </td><td class="col3"> only 2M flash? <a href="http://www.tp-link.com.cn/product_298.html" class="urlextern" title="http://www.tp-link.com.cn/product_298.html"  rel="nofollow">http://www.tp-link.com.cn/product_298.html</a> </td>
	</tr>
</table></div>

</div>

<h2 class="sectionedit6" id="hardware">Hardware</h2>
<div class="level2">

</div>

<h3 class="sectionedit7" id="info">Info</h3>
<div class="level3">
<div class="table sectionedit8"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Model </th><th class="col1" colspan="2"> TL-WR842ND </th>
	</tr>
	<tr class="row1">
		<th class="col0"> Version </th><th class="col1"> 1 </th><th class="col2"> 2 </th>
	</tr>
	</thead>
	<tr class="row2">
		<td class="col0"> <strong>Architecture:</strong> </td><td class="col1 centeralign">  MIPS 24Kc V7.4  </td><td class="col2 centeralign">  MIPS 74Kc V4.12  </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <strong>Manufacturer:</strong> </td><td class="col1 centeralign" colspan="2">  Atheros  </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <strong>Bootloader:</strong> </td><td class="col1 centeralign" colspan="2">  <a href="../../doc/techref/bootloader/uboot" class="wikilink1" title="doc:techref:bootloader:uboot">U-Boot</a>  </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <strong>System-On-Chip:</strong> </td><td class="col1 centeralign">  Atheros AR7241  </td><td class="col2 centeralign">  Atheros AR9341  </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <strong>CPU Speed:</strong> </td><td class="col1 centeralign">  400 <abbr title="Megahertz">MHz</abbr>  </td><td class="col2 centeralign">  535 <abbr title="Megahertz">MHz</abbr>  </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <strong>Flash chip:</strong> </td><td class="col1 rightalign">  <a href="http://www.spansion.com/Support/Datasheets/S25FL064P_00_03_e.pdf" class="urlextern" title="http://www.spansion.com/Support/Datasheets/S25FL064P_00_03_e.pdf"  rel="nofollow">Spansion S25FL064P (FL064PIF)</a> </td><td class="col2 rightalign">  Winbond 25Q64FV or Spansion S25FL064 </td>
	</tr>
	<tr class="row8">
		<td class="col0"> <strong>Flash size:</strong> </td><td class="col1 centeralign" colspan="2">    8 MiB    </td>
	</tr>
	<tr class="row9">
		<td class="col0"> <strong>RAM chip:</strong> </td><td class="col1 centeralign">  A3S56D40FTP -G5  </td><td class="col2 centeralign">  Winbond W9425G6JH-5  </td>
	</tr>
	<tr class="row10">
		<td class="col0"> <strong>RAM size:</strong> </td><td class="col1 centeralign" colspan="2">  32 MiB  </td>
	</tr>
	<tr class="row11">
		<td class="col0"> <strong>Wireless</strong> </td><td class="col1 centeralign">  Atheros AR9287-bl1a  </td><td class="col2 centeralign">  Atheros AR9341  </td>
	</tr>
	<tr class="row12">
		<td class="col0"> <strong>Antenae(s)</strong> </td><td class="col1 centeralign" colspan="2">  2 Removables  </td>
	</tr>
	<tr class="row13">
		<td class="col0"> <strong>Ethernet:</strong> </td><td class="col1 centeralign" colspan="2">  4 <abbr title="Local Area Network">LAN</abbr>, 1 WAN 10/100  </td>
	</tr>
	<tr class="row14">
		<td class="col0"> <strong>USB:</strong> </td><td class="col1 centeralign" colspan="2">  1 x 2.0  </td>
	</tr>
	<tr class="row15">
		<td class="col0"> <strong>Serial:</strong> </td><td class="col1 centeralign">  <a href="tl-wr842nd#serial" title="toh:tp-link:tl-wr842nd ↵" class="wikilink1">Unfriendly</a>  </td><td class="col2"></td>
	</tr>
</table></div>

</div>

<h3 class="sectionedit9" id="flash_layout">Flash Layout</h3>
<div class="level3">

<p>
Please read the article <a href="../../doc/techref/flash.layout" class="wikilink1" title="doc:techref:flash.layout">Flash.Layout</a> for a better understanding. It contains a couple of explanations. Then let&#039;s have a quick view at flash layout of this particular device:
</p>
<div class="table sectionedit10"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 centeralign" colspan="6">   TP-Link WR842ND  Visual Flash Layout OpenWrt 12.09           </th>
	</tr>
	</thead>
	<tr class="row1">
		<th class="col0 leftalign"> Offset         </th><td class="col1 centeralign">     0       </td><td class="col2 centeralign">     128                       </td><td class="col3 centeralign">     1071                          </td><td class="col4 centeralign">     2944                                                         </td><td class="col5 centeralign">     8128   </td>
	</tr>
	<tr class="row2">
		<th class="col0 leftalign"> x64KiB Blocks  </th><td class="col1 centeralign">     2  </td><td class="col2 centeralign">     14. …  </td><td class="col3 centeralign">     29. …  </td><td class="col4 centeralign">     81  </td><td class="col5 centeralign">     1  </td>
	</tr>
	<tr class="row3">
		<th class="col0 centeralign" colspan="6">   TP-Link WR842ND  Flash Layout OpenWrt 12.09          </th>
	</tr>
	<tr class="row4">
		<th class="col0 leftalign"> Layer0       </th><td class="col1 centeralign" colspan="5">                       m25p80 <a href="http://en.wikipedia.org/wiki/Serial Peripheral Interface Bus" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Serial Peripheral Interface Bus">spi</a>0.0: s25sl064a      8192KiB                                                                      </td>
	</tr>
	<tr class="row5">
		<th class="col0 leftalign"> Layer1       </th><td class="col1 centeralign">  mtd0 <strong><em>u-boot</em></strong> 128KiB  </td><td class="col2 centeralign" colspan="3">  mtd5 <strong><em>firmware</em></strong> 8000KiB                                      </td><td class="col5 centeralign">    mtd4 <strong><em>art</em></strong> 64KiB  </td>
	</tr>
	<tr class="row6">
		<th class="col0 leftalign"> Layer2       </th><td class="col1 leftalign">                              </td><td class="col2 centeralign">  mtd1 <strong><em>kernel</em></strong> 943KiB  </td><td class="col3 centeralign" colspan="2">  mtd2 <strong><em>rootfs</em></strong> 7057KiB                           </td><td class="col5 leftalign">          </td>
	</tr>
	<tr class="row7">
		<th class="col0 leftalign"> <span style='color:magenta; '>mountpoint</span>   </th><td class="col1 leftalign">                              </td><td class="col2 leftalign">                               </td><td class="col3 centeralign" colspan="2">  <span style='color:magenta; '><code>/</code></span>                          </td><td class="col5 leftalign">          </td>
	</tr>
	<tr class="row8">
		<th class="col0 leftalign"> filesystem   </th><td class="col1 leftalign">                              </td><td class="col2 leftalign">                               </td><td class="col3 centeralign" colspan="2">  <a href="../../doc/techref/filesystems#mini_fo" class="wikilink1" title="doc:techref:filesystems">mini_fo</a>           </td><td class="col5 leftalign">          </td>
	</tr>
	<tr class="row9">
		<th class="col0 leftalign"> Layer3       </th><td class="col1 leftalign">                              </td><td class="col2 leftalign">                               </td><td class="col3 leftalign">                 </td><td class="col4 centeralign">  mtd3 <strong><em>rootfs_data</em></strong> 5184KiB     </td><td class="col5 leftalign">          </td>
	</tr>
	<tr class="row10">
		<th class="col0 leftalign"> Size in KiB  </th><td class="col1 centeralign">  128KiB                      </td><td class="col2 centeralign">  943KiB                      </td><td class="col3 centeralign">  1873KiB        </td><td class="col4 centeralign">  5184KiB                              </td><td class="col5 centeralign">   64KiB  </td>
	</tr>
	<tr class="row11">
		<th class="col0 leftalign"> Name         </th><td class="col1 centeralign">  <strong><em>u-boot</em></strong>              </td><td class="col2 centeralign">  <strong><em>kernel</em></strong>               </td><td class="col3 leftalign">                 </td><td class="col4 centeralign">  <strong><em>rootfs_data</em></strong>             </td><td class="col5 centeralign">  <strong><em>art</em></strong>  </td>
	</tr>
	<tr class="row12">
		<th class="col0 leftalign"> <span style='color:magenta; '>mountpoint</span>   </th><td class="col1 centeralign">  <em>none</em>                    </td><td class="col2 centeralign">  <em>none</em>                     </td><td class="col3 centeralign">  <span style='color:magenta; '><code>/rom</code></span>  </td><td class="col4 centeralign">  <span style='color:magenta; '><code>/overlay</code></span>   </td><td class="col5 centeralign">  <em>none</em>  </td>
	</tr>
	<tr class="row13">
		<th class="col0 leftalign"> filesystem   </th><td class="col1 centeralign">  <em>none</em>                    </td><td class="col2 centeralign">  <em>none</em>                     </td><td class="col3 centeralign">  <a href="../../doc/techref/filesystems#squashfs" class="wikilink1" title="doc:techref:filesystems">SquashFS</a>  </td><td class="col4 centeralign">  <a href="../../doc/techref/filesystems#jffs2" class="wikilink1" title="doc:techref:filesystems">JFFS2</a>  </td><td class="col5 centeralign">  <em>none</em>  </td>
	</tr>
</table></div>

<p>
ART = Atheros Radio Test - it contains mac addresses and calibration data for the wifi (EEPROM). If it is missing or corrupt, ath9k won&#039;t come up anymore.<br/>

</p>

<p>
Here is a LibreOffice Calc ODS for better understanding: <a href="http://ubuntuone.com/5eT1OJweXjF6aa3lMciaLw" class="urlextern" title="http://ubuntuone.com/5eT1OJweXjF6aa3lMciaLw"  rel="nofollow">http://ubuntuone.com/5eT1OJweXjF6aa3lMciaLw</a> .
</p>

</div>

<h3 class="sectionedit11" id="photos">Photos</h3>
<div class="level3">

<p>
<a href="http://wiki.openwrt.org/lib/exe/fetch.php?tok=adddfd&amp;media=http%3A%2F%2Fimg593.imageshack.us%2Fimg593%2F7418%2F20120107193152.jpg" class="media" title="http://img593.imageshack.us/img593/7418/20120107193152.jpg"><img src="http://wiki.openwrt.org/lib/exe/fetch.php?w=400&amp;tok=a8c56c&amp;media=http%3A%2F%2Fimg593.imageshack.us%2Fimg593%2F7418%2F20120107193152.jpg" class="media" title="Version 1.0 " alt="Version 1.0 " width="400" /></a>
</p>

<p>
TL-WR842ND v1.0
</p>

</div>

<h3 class="sectionedit12" id="serial">Serial</h3>
<div class="level3">

</div>

<h5 id="pinout">Pinout</h5>
<div class="level5">
<div class="table sectionedit13"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0">1 </th><th class="col1">2 </th><th class="col2">3 </th><th class="col3">4</th><td class="col4"></td><td class="col5"></td>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0">TX</td><td class="col1">RX</td><td class="col2">GND</td><td class="col3">VCC</td><td class="col4"> </td><td class="col5">SJ1</td>
	</tr>
</table></div>

<p>
<a href="http://wiki.openwrt.org/lib/exe/fetch.php?tok=0cf158&amp;media=http%3A%2F%2Fimg688.imageshack.us%2Fimg688%2F4219%2F20120107193104.jpg" class="media" title="http://img688.imageshack.us/img688/4219/20120107193104.jpg"><img src="http://wiki.openwrt.org/lib/exe/fetch.php?w=400&amp;tok=dd90c0&amp;media=http%3A%2F%2Fimg688.imageshack.us%2Fimg688%2F4219%2F20120107193104.jpg" class="media" title="20120107193104.jpg" alt="20120107193104.jpg" width="400" /></a><br/>

Pin 1 is clearly marked on the board.
</p>

<p>
To get the serial connection work reliably, you may have to connect a 10k pullup resistor between the TX and the 3.3V pin (same problem as described in <a href="tl-mr3220#serial" class="wikilink1" title="toh:tp-link:tl-mr3420">tl-mr3420</a>. 
</p>

<p>
The TX pin is connected via a 10k resistor to ground and via a 100nF capacitor to the serial output of the SoC. This gives a 2.5Vpp swing centered on ground. While this may work with some serial adapters, it is on the low side for most. An advantage of this connection scheme is that it protects the serial output to some degree.
</p>

<p>
The right settings for accessing the serial console are as follows:
</p>

<p>
Bits per second: <strong>115200</strong><br/>

Data bits: <strong>8</strong><br/>

Stop bits: <strong>1</strong><br/>

Parity: <strong>None</strong><br/>

Flow control: <strong>None</strong><br/>

</p>

<p>
Password to get into uboot prompt is <strong>tpl</strong><br/>

Password to get <strong>root</strong> login is <strong>5up</strong>
</p>

</div>

<h3 class="sectionedit14" id="recovery_v1">Recovery (v1)</h3>
<div class="level3">

<p>
Using the integrated tftp capability of the router.<br/>

</p>

<p>
First, enter failsafe mode:<br/>

</p>

<p>
Remove the power plug from the router.<br/>

Press and hold the WPS/RESET button.<br/>

Insert the power plug without releasing the RESET button, wait a moment for the USB LED to begin to blink.<br/>

Release the RESET button<br/>

</p>

<p>
No LED besides the one for USB (and maybe for attached ethernet ports) should be lit.
</p>

<p>
The device now uses the IP 192.168.1.86. It repeatedly tries to download a file named:  wr842ndv1_tp_recovery.bin from a tftpd server with the IP 192.168.1.66.<br/>

</p>

<p>
The following steps will serve an openwrt fimrware image to the device:<br/>

</p>

<p>
Download an appropriate firmware file from TP-LINK site.<br/>

You might need a &quot;stripped&quot; firmware version (without &quot;boot&quot; in the name). See bottom of this page for details and a download link.<br/>

Rename the file, so it matches the name required by the router: wr842ndv1_tp_recovery.bin<br/>

</p>

<p>
Configure your PC lan adapter ip address to IP 192.168.1.66 and connect your computer to one of the <abbr title="Local Area Network">LAN</abbr> ports of the router.
</p>

<p>
Install a tftp server, for windows you can download one from <a href="http://tftpd32.jounin.net/" class="urlextern" title="http://tftpd32.jounin.net/"  rel="nofollow">http://tftpd32.jounin.net/</a> <br/>

</p>

<p>
Run the tftp server and browse for the directory that contains the above firmware image. If necesary allow the connection of the server through your PCs firewall, once configured, shutdown the tftp server program, you will launch it again later.
</p>

<p>
If you connect your pc directly to a lan port on the router, be sure to put the router into failsafe mode <strong>FIRST</strong> (press reset button and plug power cable release reset button after 3 second), and then launch the tftp server, otherwise it might have problems trying to bind to the PC network interface.
</p>

<p>
Right after you launch the tftp server, a couple of blank messages will appear into the log window of the tftp server, this is normal, the third or fourth message will indicate that the process of file transfer is in progress.
</p>

<p>
After some time you will see all LEDs flashing once followed by a normal restart of the router
</p>

<p>
Now you can install the openwrt factory image of your liking, via the vendor firmware upgrade web page of the router.
</p>

<p>
You could try to flash directly using this method, an openwrt factory image (for this model obviously) to the router, for me it did not work, maybe you have better luck.<br/>

</p>

</div>

<h3 class="sectionedit15" id="recovery_v2">Recovery (v2)</h3>
<div class="level3">

<p>
Using the integrated tftp capability of the router.<br/>

</p>

<p>
First, enter failsafe mode:<br/>

</p>

<p>
Remove the power plug from the router.<br/>

Press and hold the WPS/RESET button.<br/>

Insert the power plug without releasing the RESET button, wait a moment for the Lock LED to come on solid.<br/>

Release the RESET button<br/>

</p>

<p>
Connect pc to one of the router <abbr title="Local Area Network">LAN</abbr> ports.
</p>
<div class="table sectionedit16"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0">Device </th><th class="col1">IP</th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0">router ip</td><td class="col1">192.168.0.86</td>
	</tr>
	<tr class="row2">
		<td class="col0">set your pc ip</td><td class="col1">192.168.0.66</td>
	</tr>
</table></div>

<p>
Set pc ip:
</p>
<div class="wrap_prewrap plugin_wrap" style="width: 100%;">
<p>
<pre class="code">ifconfig eth0:1 192.168.0.66/24 up</pre>

</p>
</div>
<p>
Router repeatedly tries to download <code>wr842ndv2_tp_recovery.bin</code> from a tftpd server running on 192.168.0.66.<br/>

</p>

<p>
Install tftpd server:
</p>
<div class="wrap_prewrap plugin_wrap" style="width: 100%;">
<p>
<pre class="code">pacman -S tftp-hpa</pre>

</p>
</div>
<p>
Download TP-LINK firmware to tftp root and rename it to <code>wr842ndv2_tp_recovery.bin</code>:
</p>
<div class="wrap_prewrap plugin_wrap" style="width: 100%;">
<p>
<pre class="code">mkdir /srv/tftpd
cd /srv/tftpd
wget http://www.tp-link.com/resources/software/TL-WR842ND_V2_130628.zip
unzip TL-WR842ND_V2_*.zip
mv wr842ndv2_en_3_14_2_up_boot(130628).bin wr842nv2_tp_recovery.bin</pre>

</p>
</div>
<p>
You might need a <strong><em>&quot;stripped&quot; firmware version</em></strong> (without &quot;boot&quot; in the name). See below for details and a download link.
</p>

<p>
Start tftpd server:
</p>
<div class="wrap_prewrap plugin_wrap" style="width: 100%;">
<p>
<pre class="code">systemctl start tftpd.socket
systemctl start tftpd.srvice</pre>

</p>
</div>
<p>
Router must in recovery mode <strong>before</strong> starting tftpd server, otherwise it might have problems trying to bind to the PC network interface.<br/>

</p>

<p>
After some time you will see all LEDs flashing once followed by a normal restart of the router.<br/>

</p>

</div>

<h3 class="sectionedit25" id="back_to_stock_firmware">Back to stock firmware</h3>
<div class="level3">

<p>
→ <a href="../../doc/howto/generic.uninstall" class="wikilink1" title="doc:howto:generic.uninstall">generic.uninstall</a>
</p>

</div>
<div class="plugin_include_content plugin_include__meta:infobox:dangerous" id="plugin_include__meta__infobox__dangerous">
<div class="level3">

<p>

<table class="inline" style="width:70%; margin-left:15%">
  <tr>
    <td style="border-left:6px solid #cd0505; vertical-align:middle">
      <img src="../../_media/meta/icons/tango/48px-dialog-warning.svg.png" alt="" style="float:left; margin-right:0.5em" />
      <strong>Warning!</strong><br />
      This section describes actions that might damage your device or firmware. Proceed with care!
    </td>
  </tr>
</table>

</p>

</div>
</div>
<div class="level3">

<p>
With the TL-WR842ND router, there is a catch: the stock firmware is obtained from the OEM: <a href="http://www.tplink.com/en/support/download/?model=TL-WR842ND" class="urlextern" title="http://www.tplink.com/en/support/download/?model=TL-WR842ND"  rel="nofollow">http://www.tplink.com/en/support/download/?model=TL-WR842ND</a>
</p>
<ul>
<li class="level1"><div class="li"> in case the file name of this firmware file does not contain the word <strong><em>&quot;boot&quot;</em></strong> in it, you can simply revert back to original firmware</div>
</li>
<li class="level1"><div class="li"> in case the file name of this firmware file does contain the word <strong><em>&quot;boot&quot;</em></strong> in it, you need to cut off parts of the image file <em>before</em> flashing it:</div>
</li>
</ul>

<p>
The following method applies both for the V1 and V2 since the bootloader is the same size.
</p>

<p>
An example of an image file with the word &quot;boot&quot; in it is <code>wr842ndv1_en_3_12_25_up_boot(130322).bin</code>.
</p>

<p>
Cut the first 0x20200 (that is 131,584 = 257*512) Bytes from original firmware:
<pre class="code">dd if=orig.bin of=tplink.bin skip=257 bs=512</pre>

</p>

<p>
You should transfer the firmeware image to the /tmp folder and revert back to original firmware (if availlable you can flash the firmware via the webinterface as well):
</p>

<p>
Via the safer method using sysupgrade:
<pre class="code">sysupgrade /tmp/tplink.bin</pre>

</p>

<p>
Or you use the mtd method:
<pre class="code">mtd -r write /tmp/tplink.bin firmware</pre>

</p>

<p>
It is also possible to revert to the stock firmware using the method with tftp described in &quot;recovery&quot;. (you still need the firmware image without the boot part).
</p>

<p>
OEM TP-Link firmware for the TL-WR842ND with the <strong><em>boot part removed</em></strong> to revert to the original OEM firmware:
</p>
<ul>
<li class="level1"><div class="li"> TL-WR842ND <strong><em>V1</em></strong> <a href="http://q.gs/6giqZ" class="urlextern" title="http://q.gs/6giqZ"  rel="nofollow">TL-WR842ND-V1-stripped.zip</a></div>
</li>
<li class="level1"><div class="li"> TL-WR842ND <strong><em>V2</em></strong> <a href="http://q.gs/6gitN" class="urlextern" title="http://q.gs/6gitN"  rel="nofollow">TL-WR842ND-V2-stripped.zip</a></div>
</li>
</ul>

</div>

<h3 class="sectionedit28" id="power">Power</h3>
<div class="level3">

</div>

<h5 id="general">General</h5>
<div class="level5">

<p>
This device has two main power regulators, one 12V→3V3 for the CPU, memory, wireless and one 12V→5V for USB.
</p>

</div>

<h5 id="main_3v3_power">Main 3V3 Power</h5>
<div class="level5">

<p>
This is delivered by a switching regulator with up to 2A at 3V3 output. Power is drawn from external input over one 1A Schottky diode (SS14), with a voltage drop of max .45V at 1A. It should be perfectly safe to draw an additional 100-200mA for your own additions from 3V3.
</p>

</div>

<h5 id="usb_power">USB Power</h5>
<div class="level5">

<p>
USB power is derived from the 12V input over two SS14 Schottky diodes, the one also feeding the 3V3 regulator and an additional one. The output regulator is capable of delivering up to 1.5A, but there is a USB current switch/limiter that limits output current to 1A (and goes into 50% duty-cycle on/off in addition after about 200ms on short-circuit). 
</p>

<p>
It should be fine to draw something like 700mA long-term from 5V USB and up to a bit less than 1A briefly. This is enough to spin-up and power most external 2.5&quot; USB HDDs. You can try it out. The worst that can happen is that it does not work. The USB power-switch is fully protected and the regulator has reserves, as it uses an external PNP power transistor and has its own over-current protection at 1.1A. 
</p>

<p>
I did run it at 750mA current draw from USB for half an hour without the regulator getting too warm. What I measured was 10C below the main SoC. The external 12V/1A PSU should also be fine with these loads. Still, if anything blows up in your face, or your house burns down, I am not responsible…
</p>

</div>

<h2 class="sectionedit29" id="tags">Tags</h2>
<div class="level2">
<hr />
<div class="tags"><span>
	<a href="../../tag/2011nov?do=showtag&amp;tag=2011Nov" class="wikilink1" title="tag:2011nov" rel="tag">2011Nov</a>,
	<a href="../../tag/fastethernet?do=showtag&amp;tag=FastEthernet" class="wikilink1" title="tag:fastethernet" rel="tag">FastEthernet</a>,
	<a href="../../tag/5port?do=showtag&amp;tag=5Port" class="wikilink1" title="tag:5port" rel="tag">5Port</a>,
	<a href="../../tag/usb?do=showtag&amp;tag=USB" class="wikilink1" title="tag:usb" rel="tag">USB</a>,
	<a href="../../tag/1usb?do=showtag&amp;tag=1USB" class="wikilink1" title="tag:1usb" rel="tag">1USB</a>,
	<a href="../../tag/usb2.0?do=showtag&amp;tag=USB2.0" class="wikilink1" title="tag:usb2.0" rel="tag">USB2.0</a>,
	<a href="../../tag/serial?do=showtag&amp;tag=Serial" class="wikilink1" title="tag:serial" rel="tag">Serial</a>,
	<a href="../../tag/integrated?do=showtag&amp;tag=integrated" class="wikilink1" title="tag:integrated" rel="tag">integrated</a>,
	<a href="../../tag/802.11bgn?do=showtag&amp;tag=802.11bgn" class="wikilink1" title="tag:802.11bgn" rel="tag">802.11bgn</a>,
	<a href="../../tag/1wnic?do=showtag&amp;tag=1WNIC" class="wikilink1" title="tag:1wnic" rel="tag">1WNIC</a>,
	<a href="../../tag/ar9287?do=showtag&amp;tag=AR9287" class="wikilink1" title="tag:ar9287" rel="tag">AR9287</a>,
	<a href="../../tag/ath9k?do=showtag&amp;tag=ath9k" class="wikilink1" title="tag:ath9k" rel="tag">ath9k</a>,
	<a href="../../tag/2ant?do=showtag&amp;tag=2Ant" class="wikilink1" title="tag:2ant" rel="tag">2Ant</a>,
	<a href="../../tag/detachableantenna" class="wikilink1" title="tag:detachableantenna" rel="tag">DetachableAntenna</a>,
	<a href="../../tag/32ram?do=showtag&amp;tag=32RAM" class="wikilink1" title="tag:32ram" rel="tag">32RAM</a>,
	<a href="../../tag/8flash?do=showtag&amp;tag=8Flash" class="wikilink1" title="tag:8flash" rel="tag">8Flash</a>,
	<a href="../../tag/mips?do=showtag&amp;tag=MIPS" class="wikilink1" title="tag:mips" rel="tag">MIPS</a>,
	<a href="../../tag/mips32?do=showtag&amp;tag=MIPS32" class="wikilink1" title="tag:mips32" rel="tag">MIPS32</a>,
	<a href="../../tag/24kc?do=showtag&amp;tag=24Kc" class="wikilink1" title="tag:24kc" rel="tag">24Kc</a>,
	<a href="../../tag/ar7241?do=showtag&amp;tag=AR7241" class="wikilink1" title="tag:ar7241" rel="tag">AR7241</a>
</span></div>

</div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>toh/tp-link/tl-wr842nd.txt</bdi> · Last modified: 2015/05/06 12:38 by <bdi>theoradicus</bdi></div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="tl-wr842nd?do=edit"  class="action source" accesskey="v" rel="nofollow" title="Show pagesource [V]"><span>Show pagesource</span></a></li><li><a href="tl-wr842nd?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="tl-wr842nd?do=backlink"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="tl-wr842nd#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license" class="urlextern">CC Attribution-Noncommercial-Share Alike 3.0 Unported</a></bdi></div>
    <div class="buttons">
        <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license"><img src="../../lib/images/license/button/cc-by-nc-sa.png" alt="CC Attribution-Noncommercial-Share Alike 3.0 Unported" /></a>        <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="../../lib/tpl/openwrt/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://www.php.net" title="Powered by PHP" ><img
            src="../../lib/tpl/openwrt/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="../../lib/tpl/openwrt/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="../../lib/tpl/openwrt/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="../../lib/tpl/openwrt/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="../../lib/exe/indexer.php?id=toh%253Atp-link%253Atl-wr842nd&amp;1432268150" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->
</body>
</html>
