<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>TP-Link TL-WR841ND [OpenWrt Wiki]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="fastethernet,5port,serial,integrated,802.11bgn,1wnic,ar9271,ath9k,2ant,detachableantenna,32ram,4flash,mips,mips32,24k,qca9533,qca953x"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../lib/exe/opensearch.php" title="OpenWrt Wiki"/>
<link rel="start" href="../../index.html"/>
<link rel="contents" href="tl-wr841nd?do=index" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Recent changes" href="../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="../../feed.php?mode=list&amp;ns=toh:tp-link"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="../../_export/xhtml/toh/tp-link/tl-wr841nd"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="../../_export/raw/toh/tp-link/tl-wr841nd"/>
<link rel="canonical" href="tl-wr841nd"/>
<link rel="stylesheet" type="text/css" href="../../lib/exe/css.php?t=openwrt&amp;tseed=6f44f363dc87908d905dc56ff3acbfc4"/>
<script type="text/javascript">/*<![CDATA[*/var NS='toh:tp-link';var JSINFO = {"id":"toh:tp-link:tl-wr841nd","namespace":"toh:tp-link"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../lib/exe/js.php?tseed=6f44f363dc87908d905dc56ff3acbfc4"></script>
<script type="text/javascript" charset="utf-8">/*<![CDATA[*/jQuery(function(){
	for ( i=0; i < document.forms.length; i++ ) {
		if (document.forms[i].method == 'post') {
			var myElement = document.createElement('input');
			myElement.setAttribute('type', 'hidden');
			myElement.name = 'bb2_screener_';
			myElement.value = '1432266257 166.182.3.99';
			document.forms[i].appendChild(myElement);
		}
	}
});
/*!]]>*/</script>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="../../lib/tpl/openwrt/images/favicon.ico" />
<link rel="apple-touch-icon" href="../../lib/tpl/openwrt/images/apple-touch-icon.png" />
    </head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_openwrt     ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="tl-wr841nd#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="../../start"  accesskey="h" title="[H]"><img src="../../lib/tpl/openwrt/images/logo.png" width="386" height="98" alt="" /> <span>OpenWrt Wiki</span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="tl-wr841nd?do=register"  class="action register" rel="nofollow" title="Register">Register</a></li><li><a href="tl-wr841nd?do=login&amp;sectok=382740b13d95f946eed36caa57076b4a"  class="action login" rel="nofollow" title="Login">Login</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="../../start" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="../../doku.php" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="toh:tp-link:tl-wr841nd" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Show pagesource</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Login</option><option value="register">Register</option></optgroup></select><input type="submit" value="&gt;" /></div></form>            </div>
            <ul>
                <li><a href="tl-wr841nd?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a></li><li><a href="tl-wr841nd?do=media&amp;ns=toh%253Atp-link"  class="action media" rel="nofollow" title="Media Manager">Media Manager</a></li><li><a href="tl-wr841nd?do=index"  class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                            <div class="youarehere"><span class="bchead">You are here: </span><span class="home"><bdi><a href="../../start" class="wikilink1" title="start">OpenWrt Wiki</a></bdi></span> » <bdi><a href="../start" class="wikilink1" title="toh:start">Table of Hardware</a></bdi> » <bdi><a href="start" class="wikilink1" title="toh:tp-link:start">TP-Link</a></bdi> » <bdi><span class="curid"><a href="tl-wr841nd" class="wikilink1" title="toh:tp-link:tl-wr841nd">TP-Link TL-WR841ND</a></span></bdi></div>
                                    <div class="plugin_multilingual">
        <ul>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/cz/toh/tp-link/tl-wr841nd" class="media" title="cz:toh:tp-link:tl-wr841nd"><img src="../../lib/exe/fetch.php?cache=&amp;tok=aff589&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fcz.gif" class="media" title="Čeština (Czech)" alt="Čeština (Czech)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <a href="../../de/toh/tp-link/tl-wr841nd" class="media" title="de:toh:tp-link:tl-wr841nd"><img src="../../lib/exe/fetch.php?cache=&amp;tok=e24010&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fde.gif" class="media" title="Deutsch (German)" alt="Deutsch (German)" /></a>
            </div>
          </li>
          <li>
            <div class="li">
              <span class="curid"><a href="tl-wr841nd" class="media" title="toh:tp-link:tl-wr841nd"><img src="../../lib/exe/fetch.php?cache=&amp;tok=2a37ae&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fgb.gif" class="media" title="English" alt="English" /></a></span>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/es/toh/tp-link/tl-wr841nd" class="media" title="es:toh:tp-link:tl-wr841nd"><img src="../../lib/exe/fetch.php?cache=&amp;tok=46c004&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fmx.gif" class="media" title="Español (Spanish, Mexico)" alt="Español (Spanish, Mexico)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/fr/toh/tp-link/tl-wr841nd" class="media" title="fr:toh:tp-link:tl-wr841nd"><img src="../../lib/exe/fetch.php?cache=&amp;tok=a5beba&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ffr.gif" class="media" title="Français (French)" alt="Français (French)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/hu/toh/tp-link/tl-wr841nd" class="media" title="hu:toh:tp-link:tl-wr841nd"><img src="../../lib/exe/fetch.php?cache=&amp;tok=6b5470&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fhu.gif" class="media" title="Magyar (Hungarian)" alt="Magyar (Hungarian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/jp/toh/tp-link/tl-wr841nd" class="media" title="jp:toh:tp-link:tl-wr841nd"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f999fc&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fjp.gif" class="media" title="日本語 (Japanese)" alt="日本語 (Japanese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pl/toh/tp-link/tl-wr841nd" class="media" title="pl:toh:tp-link:tl-wr841nd"><img src="../../lib/exe/fetch.php?cache=&amp;tok=c805c0&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fpl.gif" class="media" title="Poliski (Polish)" alt="Poliski (Polish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pt-br/toh/tp-link/tl-wr841nd" class="media" title="pt-br:toh:tp-link:tl-wr841nd"><img src="../../lib/exe/fetch.php?cache=&amp;tok=13127d&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fbr.gif" class="media" title="Português brasileiro (Portuguese, Brasil)" alt="Português brasileiro (Portuguese, Brasil)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <a href="../../ru/toh/tp-link/tl-wr841nd" class="media" title="ru:toh:tp-link:tl-wr841nd"><img src="../../lib/exe/fetch.php?cache=&amp;tok=66ab5e&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fru.gif" class="media" title="Русский (Russsian)" alt="Русский (Russsian)" /></a>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/tr/toh/tp-link/tl-wr841nd" class="media" title="tr:toh:tp-link:tl-wr841nd"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f4beed&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ftr.gif" class="media" title="Tϋrkçe (Turkish)" alt="Tϋrkçe (Turkish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <a href="../../zh-cn/toh/tp-link/tl-wr841nd" class="media" title="zh-cn:toh:tp-link:tl-wr841nd"><img src="../../lib/exe/fetch.php?cache=&amp;tok=93625a&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-cn.gif" class="media" title="官話/官话 (Chinese)" alt="官話/官话 (Chinese)" /></a>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-tw/toh/tp-link/tl-wr841nd" class="media" title="zh-tw:toh:tp-link:tl-wr841nd"><img src="../../lib/exe/fetch.php?cache=&amp;tok=b56198&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-tw.gif" class="media" title="臺灣華語 (Taiwanese)" alt="臺灣華語 (Taiwanese)" /></a>
              </div>
            </div>
          </li>
        </ul>
      </div>
        </div>
    
    
    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>toh:tp-link:tl-wr841nd</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="tl-wr841nd#clones">Clones</a></div></li>
<li class="level1"><div class="li"><a href="tl-wr841nd#supported_versions">Supported Versions</a></div></li>
<li class="level1"><div class="li"><a href="tl-wr841nd#hardware">Hardware</a></div></li>
<li class="level1"><div class="li"><a href="tl-wr841nd#installation">Installation</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="tl-wr841nd#installing_via_web_interface">Installing via web interface:</a></div></li>
<li class="level2"><div class="li"><a href="tl-wr841nd#tftp_install">TFTP install</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="tl-wr841nd#v8_v9_without_serial">v8,v9 (without serial)</a></div></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"><a href="tl-wr841nd#go_back_to_original_firmware">Go back to original firmware</a></div></li>
<li class="level1"><div class="li"><a href="tl-wr841nd#failsafe_mode">Failsafe mode</a></div></li>
<li class="level1"><div class="li"><a href="tl-wr841nd#debricking">Debricking</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="tl-wr841nd#v72_july_2012">v7.2 (July 2012)</a></div></li>
<li class="level2"><div class="li"><a href="tl-wr841nd#v8x_note">v8.x note</a></div></li>
<li class="level2"><div class="li"><a href="tl-wr841nd#v81_note">v8.1 note</a></div></li>
<li class="level2"><div class="li"><a href="tl-wr841nd#v9">v9</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="tl-wr841nd#basic_configuration">Basic configuration</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="tl-wr841nd#repeatermultiple_ssidvirtual_access_pointclient_bridge">Repeater / Multiple SSID / Virtual access point / Client bridge</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="tl-wr841nd#with_barrier_breaker_bleeding_edge_r40867">With BARRIER BREAKER (Bleeding Edge, r40867)</a></div></li>
<li class="level3"><div class="li"><a href="tl-wr841nd#attitude_adjustment_1209_final">attitude_adjustment 12.09 (final)</a></div></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"><a href="tl-wr841nd#use_wps_with_wps_button">Use WPS with WPS button</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="tl-wr841nd#prepare_and_install_wps">Prepare and install WPS</a></div></li>
<li class="level2"><div class="li"><a href="tl-wr841nd#check_configuration">Check configuration</a></div></li>
<li class="level2"><div class="li"><a href="tl-wr841nd#plug_button_action">Plug button action</a></div></li>
<li class="level2"><div class="li"><a href="tl-wr841nd#wifi_onoff_toggle_by_qss_button">Wifi on/off toggle by QSS button</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="tl-wr841nd#serial_console">Serial console</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="tl-wr841nd#yet_another_user_notes">Yet another user notes</a></div></li>
<li class="level2"><div class="li"><a href="tl-wr841nd#serial_port_settings">Serial port settings:</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="tl-wr841nd#jtag">JTAG</a></div></li>
<li class="level1"><div class="li"><a href="tl-wr841nd#troubleshooting">Troubleshooting</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="tl-wr841nd#stuck_at_130mbps_get_300mbps">Stuck at 130Mbps? Get 300Mbps</a></div></li>
<li class="level2"><div class="li"><a href="tl-wr841nd#can_not_connect_to_v8">Can not connect to v8?</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="tl-wr841nd#bootloader_mods">Bootloader Mods</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="tl-wr841nd#u-boot_114_modification_for_routers">U-Boot 1.1.4 modification for routers</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="tl-wr841nd#hardware_mods">Hardware Mods</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="tl-wr841nd#usb_11_port">USB 1.1 Port</a></div></li>
<li class="level2"><div class="li"><a href="tl-wr841nd#usb_20_port_on_v7">USB 2.0 Port on v7</a></div></li>
<li class="level2"><div class="li"><a href="tl-wr841nd#canbus_interface_for_v8x">CANBus Interface for V8.x</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="tl-wr841nd#version_80_forum_thread">Version 8.0 forum thread</a></div></li>
<li class="level1"><div class="li"><a href="tl-wr841nd#custom_openwrt_image_with_luci_integrated">Custom OpenWrt image with LuCi integrated</a></div></li>
<li class="level1"><div class="li"><a href="tl-wr841nd#tags">Tags</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="tp-link_tl-wr841nd">TP-Link TL-WR841ND</h1>
<div class="level1">

<p>
The device is a wireless N router with
</p>
<ul>
<li class="level1"><div class="li"> 2 detachable antennas</div>
</li>
<li class="level1"><div class="li"> 4 Port 100/10 Switch</div>
</li>
<li class="level1"><div class="li"> 1 Port 100/10 Wan Interface</div>
</li>
<li class="level1"><div class="li"> 4 <abbr title="Megabyte">MB</abbr> Flash</div>
</li>
<li class="level1"><div class="li"> 32 <abbr title="Megabyte">MB</abbr> Ram</div>
</li>
<li class="level1"><div class="li"> QSS Button</div>
</li>
<li class="level1"><div class="li"> Reset Button</div>
</li>
</ul>

<p>
<strong><code>Note1</code></strong>: The <a href="tl-wr841n" class="wikilink1" title="toh:tp-link:tl-wr841n">TL-WR841N</a> is identical except that the antennas are not detachable. TP-Link naming scheme is, that devices ending in a D have <strong>d</strong>etachable antennas.<br/>

<strong><code>Note2:</code></strong> v5.4, v5.2 etc. are all v5, similarly for v7, v8, v9. The only difference is the firmware version the come with. v1 and 1.5 have same latest fw. 
</p>

</div>

<h2 class="sectionedit2" id="clones">Clones</h2>
<div class="level2">

<p>
Known clones of this device:
</p>
<ul>
<li class="level1"><div class="li"> TP-Link TL-WR841ND v7: Rosewill Wireless N Router RNX-N300RT – see <a href="../rosewill/rnx-n300rt" class="wikilink1" title="toh:rosewill:rnx-n300rt">rnx-n300rt</a></div>
</li>
<li class="level1"><div class="li"> TP-Link TL-WR841N v8: ThinkPenguin TPE-NWIFIROUTER2 aka Rosewill RNX-N300RT v2 – see <a href="../rosewill/rnx-n300rt" class="wikilink1" title="toh:rosewill:rnx-n300rt">rnx-n300rt</a></div>
</li>
<li class="level1"><div class="li"> TP-Link TL-WR841ND v8: Mercury MW300R v3 and Fast FW300R v3. </div>
</li>
</ul>

</div>

<h2 class="sectionedit3" id="supported_versions">Supported Versions</h2>
<div class="level2">

<p>
The TP-Link versioning scheme seems to be:
</p>
<ul>
<li class="level1"><div class="li"> <em>major-number</em>.<em>minor-number</em>, where the <em>major-number</em> refers to hardware changes, and the <em>minor-number</em> refer to software (firmware) changes; this includes the <a href="../../doc/techref/bootloader.1" class="wikilink1" title="doc:techref:bootloader">bootloader</a>!</div>
</li>
<li class="level1"><div class="li"> If there is a language-code. e.g. (DE)v1.0, that means, that the TP-Link WebUI is that language. (Of course <a href="../../doc/howto/luci#native_language_support" class="wikilink1" title="doc:howto:luci">LuCI has Native Language Support</a>)</div>
</li>
<li class="level1"><div class="li"> Sometimes, version x. is only available in the PRC and version y. is intended for sale world-wide. The hardware between version x. and version y. can differ significantly but does not have to.</div>
</li>
<li class="level1"><div class="li"> Sometimes, there is Version x. for PRC only and Version x. for world-wide sale. If there is a special chinese-Version with the same major-number, then that version has usually significantly different hardware</div>
</li>
</ul>
<div class="table sectionedit4"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Version/Model </th><th class="col1"> Launch Date </th><th class="col2"> OpenWrt Versions Supported </th><th class="col3"> Download latest stable version </th><th class="col4"> Model Specific Notes </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> v1.x </td><td class="col1"> 2007 </td><td class="col2 centeralign">  10.03(.01) &amp; 12.09 &amp; 14.07  </td><td class="col3 centeralign">  <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841nd-v1.5-squashfs-factory.bin" class="urlextern" title="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841nd-v1.5-squashfs-factory.bin"  rel="nofollow">14.07</a>  </td><td class="col4"> <a href="http://dev.openwrt.org/changeset/18893" class="urlextern" title="http://dev.openwrt.org/changeset/18893"  rel="nofollow">Added model support</a> </td>
	</tr>
	<tr class="row2">
		<td class="col0"> v3.x </td><td class="col1"> 2008 </td><td class="col2 centeralign">  10.03(.01) &amp; 12.09 &amp; 14.07  </td><td class="col3 centeralign">  <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841nd-v3-squashfs-factory.bin" class="urlextern" title="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841nd-v3-squashfs-factory.bin"  rel="nofollow">14.07</a>  </td><td class="col4"><a href="https://forum.openwrt.org/viewtopic.php?id=21425" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?id=21425"  rel="nofollow">Report</a> </td>
	</tr>
	<tr class="row3">
		<td class="col0"> v5.x </td><td class="col1"> 2010 </td><td class="col2 centeralign">  10.03(.01) &amp; 12.09 &amp; 14.07  </td><td class="col3 centeralign">  <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841nd-v5-squashfs-factory.bin" class="urlextern" title="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841nd-v5-squashfs-factory.bin"  rel="nofollow">14.07</a>  </td><td class="col4"><a href="https://forum.openwrt.org/viewtopic.php?pid=119163#p119163" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?pid=119163#p119163"  rel="nofollow">Report</a> </td>
	</tr>
	<tr class="row4">
		<td class="col0"> v7.x </td><td class="col1"> 2010 </td><td class="col2 centeralign">  12.09 &amp; 14.07  </td><td class="col3 centeralign">  <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841nd-v7-squashfs-factory.bin" class="urlextern" title="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841nd-v7-squashfs-factory.bin"  rel="nofollow">14.07</a>  </td><td class="col4">UFO shape – Fully working with 12.09 </td>
	</tr>
	<tr class="row5">
		<td class="col0"> v8.x (chinese version) </td><td class="col1"> - </td><td class="col2 centeralign">  Trunk r29631(modified)  </td><td class="col3 centeralign">  ?  </td><td class="col4"> Only 2 MiB flash, need hardware mod </td>
	</tr>
	<tr class="row6">
		<td class="col0"> v8.x (international) </td><td class="col1"> 2012-Aug </td><td class="col2 centeralign">  12.09 &amp; 14.07  </td><td class="col3 centeralign">  <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin" class="urlextern" title="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin"  rel="nofollow">14.07</a>  </td><td class="col4 leftalign"> <a href="tl-db120" class="wikilink1" title="toh:tp-link:tl-db120">DB120</a>  </td>
	</tr>
	<tr class="row7">
		<td class="col0"> v9 </td><td class="col1"> 2014 </td><td class="col2 centeralign">  14.07  </td><td class="col3 centeralign">  <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841n-v9-squashfs-factory.bin" class="urlextern" title="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841n-v9-squashfs-factory.bin"  rel="nofollow">14.07</a>  </td><td class="col4 leftalign">  </td>
	</tr>
</table></div>

</div>

<h2 class="sectionedit5" id="hardware">Hardware</h2>
<div class="level2">
<div class="table sectionedit6"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Version </th><th class="col1"> v3 </th><th class="col2"> v5 </th><th class="col3"> v7 </th><th class="col4"> v8 </th><th class="col5"> v9 </th><td class="col6"></td>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <strong><a href="http://en.wikipedia.org/wiki/Instruction set" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Instruction set">Instruction set</a>:</strong> </td><td class="col1" colspan="6"> <a href="http://en.wikipedia.org/wiki/MIPS Architecture" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/MIPS Architecture">MIPS</a> </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <strong>Vendor:</strong> </td><td class="col1" colspan="6"> Atheros </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <strong><a href="../../doc/techref/bootloader.1" class="wikilink1" title="doc:techref:bootloader">Bootloader</a>:</strong> </td><td class="col1" colspan="6"> <a href="../../doc/techref/bootloader/uboot" class="wikilink1" title="doc:techref:bootloader:uboot">UBoot</a> </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <strong><a href="../../doc/hardware/soc.1" class="wikilink1" title="doc:hardware:soc">System-On-Chip</a>:</strong> </td><td class="col1"> AR9130 </td><td class="col2"> AR7240 rev 2 </td><td class="col3"> AR7241-AH1A </td><td class="col4"> AR9341 </td><td class="col5"> QCA9533-AL3A </td><td class="col6"></td>
	</tr>
	<tr class="row5">
		<td class="col0"> <strong><a href="../../doc/hardware/cpu" class="wikilink1" title="doc:hardware:cpu">CPU</a> Frq:</strong> </td><td class="col1"> 400 Mhz </td><td class="col2"> 400 Mhz </td><td class="col3"> 400 Mhz </td><td class="col4"> 535 Mhz </td><td class="col5"> 550 <abbr title="Megahertz">MHz</abbr> </td><td class="col6"></td>
	</tr>
	<tr class="row6">
		<td class="col0"> <strong>BogoMIPS:</strong> </td><td class="col1"> 265.42 </td><td class="col2"> 266.24 </td><td class="col3"> 265.42 </td><td class="col4"> 266.64 </td><td class="col5"> 366.18 </td><td class="col6"></td>
	</tr>
	<tr class="row7">
		<td class="col0"> <strong>Flash-Chip:</strong> </td><td class="col1"> ST 25P32V6P </td><td class="col2 leftalign"> Hynix  </td><td class="col3"> cFeon F32-100HIP/SPANSION FL032PIF (?) </td><td class="col4"> Spansion FL032PIF </td><td class="col5"> Spansion FL032PIF </td><td class="col6"></td>
	</tr>
	<tr class="row8">
		<td class="col0"> <strong>Flash size:</strong> </td><td class="col1"> 4 MiB </td><td class="col2"> 4 MiB </td><td class="col3"> 4 MiB </td><td class="col4"> 4 MiB </td><td class="col5"> 4 MiB </td><td class="col6"></td>
	</tr>
	<tr class="row9">
		<td class="col0"> <strong>RAM-Chip:</strong> </td><td class="col1"> Hynix HY5DU561622FTP-5 </td><td class="col2"> Hynix HY5DU561622FTP-5 </td><td class="col3"> Zentel A3S56D40ETP-G5 </td><td class="col4"> ESMT M13S2561616A-5T </td><td class="col5"> Winbond W9425G6JH-5 </td><td class="col6"></td>
	</tr>
	<tr class="row10">
		<td class="col0"> <strong>RAM size:</strong> </td><td class="col1"> 32 MiB </td><td class="col2"> 32 MiB </td><td class="col3"> 32 MiB </td><td class="col4"> 32 MiB </td><td class="col5"> 32 MiB </td><td class="col6"></td>
	</tr>
	<tr class="row11">
		<td class="col0"> <strong>Wireless:</strong> </td><td class="col1"> Atheros AR9100 Rev:7 </td><td class="col2"> Atheros AR9280 Rev:2 </td><td class="col3"> Atheros AR9287-BL1A 2.4ghz 802.11bgn </td><td class="col4"> AR9341 </td><td class="col5"> QCA9533-AL3A </td><td class="col6"></td>
	</tr>
	<tr class="row12">
		<td class="col0"> <strong><a href="../../doc/hardware/switch" class="wikilink1" title="doc:hardware:switch">Switch</a>:</strong> </td><td class="col1"> Marvell 88E6060 </td><td class="col2"> AR7240 built-in switch </td><td class="col3"> AR7240/AR9330 built-in switch </td><td class="col4"> AR9341 built-in switch </td><td class="col5"> QCA9533-AL3A build-in </td><td class="col6"></td>
	</tr>
	<tr class="row13">
		<td class="col0"> <strong>USB:</strong> </td><td class="col1"> ? </td><td class="col2"> <a href="tl-wr841nd#usb11port" title="toh:tp-link:tl-wr841nd ↵" class="wikilink1">Yes</a> </td><td class="col3"> <a href="tl-wr841nd#usb20portonv7" title="toh:tp-link:tl-wr841nd ↵" class="wikilink1"> Yes </a> </td><td class="col4"> <a href="http://forum.openwrt.org/viewtopic.php?id=37010" class="urlextern" title="http://forum.openwrt.org/viewtopic.php?id=37010"  rel="nofollow">In progress</a> </td><td class="col5"> <a href="http://wikidevi.com/wiki/Qualcomm_Atheros" class="urlextern" title="http://wikidevi.com/wiki/Qualcomm_Atheros"  rel="nofollow">No is SoC</a> </td><td class="col6"></td>
	</tr>
	<tr class="row14">
		<td class="col0"> <strong><a href="../../OpenWrtDocs/Customizing/Hardware/Serial_Console" class="wikilink1" title="doc:hardware:port.serial">Serial</a>:</strong> </td><td class="col1"> <a href="tl-wr841nd#serial_console" title="toh:tp-link:tl-wr841nd ↵" class="wikilink1">Yes</a> </td><td class="col2"> <a href="tl-wr841nd#serial_console" title="toh:tp-link:tl-wr841nd ↵" class="wikilink1">Yes</a> </td><td class="col3"> <a href="tl-wr841nd#serial_console" title="toh:tp-link:tl-wr841nd ↵" class="wikilink1">Yes</a> </td><td class="col4"> <a href="tl-wr841nd#serial_console" title="toh:tp-link:tl-wr841nd ↵" class="wikilink1">Yes</a> </td><td class="col5"> <a href="tl-wr841nd#serial_console" title="toh:tp-link:tl-wr841nd ↵" class="wikilink1">Remove R26</a> </td><td class="col6"></td>
	</tr>
	<tr class="row15">
		<td class="col0"> <strong><a href="../../doc/hardware/port.jtag" class="wikilink1" title="doc:hardware:port.jtag">JTAG</a>:</strong> </td><td class="col1"> Yes </td><td class="col2"> ? </td><td class="col3"> ? </td><td class="col4"> <a href="tl-wr841nd#jtag" title="toh:tp-link:tl-wr841nd ↵" class="wikilink1">Yes</a> </td><td class="col5"> ? </td><td class="col6"></td>
	</tr>
</table></div>

</div>

<h2 class="sectionedit7" id="installation">Installation</h2>
<div class="level2">

<p>
Flash the squashfs images only, the jffs images will brick the router (not enough space on 4Mb flash) (<a href="https://dev.openwrt.org/ticket/13659" class="urlextern" title="https://dev.openwrt.org/ticket/13659"  rel="nofollow">bug report</a>). 
</p>

</div>

<h3 class="sectionedit8" id="installing_via_web_interface">Installing via web interface:</h3>
<div class="level3">
<ol>
<li class="level1"><div class="li"> Download image for your version: <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/" class="urlextern" title="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/"  rel="nofollow">http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/</a></div>
</li>
<li class="level1"><div class="li"> Log in to router web interface and select the firmware image you just uploaded as an update</div>
</li>
<li class="level1"><div class="li"> Sit and wait while it flashes. It will reboot and be accessible at 192.168.1.1.</div>
</li>
</ol>

<p>
The Barrier Breaker image already includes a <abbr title="Graphical User Interface">GUI</abbr>, you do not have to install it manually.
</p>

<p>
<img src="../../lib/images/smileys/icon_exclaim.gif" class="icon" alt=":!:" />  Warning! in some cases after reboot you don&#039;t have web interface (<abbr title="Graphical User Interface">GUI</abbr>), only telnet and ssh access. You can install <abbr title="Graphical User Interface">GUI</abbr>, for details see: <a href="../../doc/luci" class="wikilink1" title="doc:howto:luci.essentials">luci.essentials</a>, but before install LuCI (<abbr title="Graphical User Interface">GUI</abbr>) you need to configure your router to have access to internet, for configuration see: <a href="../../doc/howto/internet.connection" class="wikilink1" title="doc:howto:internet.connection">internet.connection</a>
</p>

</div>

<h3 class="sectionedit9" id="tftp_install">TFTP install</h3>
<div class="level3">

<p>
<a href="tl-wr841nd#v8_v9_without_serial" title="toh:tp-link:tl-wr841nd ↵" class="wikilink1">For v8,v9 is much easier</a>
</p>

<p>
Beware that this installation method needs a <a href="../../OpenWrtDocs/Customizing/Hardware/Serial_Console" class="urlextern" title="http://wiki.openwrt.org/doc/hardware/port.serial"  rel="nofollow">TTL level serial console</a> usb to TTL like DKU-5 data cable  or RS232-TTL level shifter like this: <a href="../../_detail/media/max3232.gif?id=toh%253Atp-link%253Atl-wr841nd" class="media" title="media:max3232.gif"><img src="../../_media/media/max3232.gif?w=500&amp;tok=013ff7" class="media" alt="" width="500" /></a><br/>
and <a href="../../doc/howto/tftp" class="urlextern" title="http://wiki.openwrt.org/doc/howto/generic.flashing.tftp"  rel="nofollow">a working TFTP server</a> and should not be attempted unless you have experience with this sort of thing or are eager to learn.
</p>

<p>
This is taken more or less verbatim from <a href="https://forum.openwrt.org/viewtopic.php?id=24203" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?id=24203"  rel="nofollow">https://forum.openwrt.org/viewtopic.php?id=24203</a>, thanks to dl3daz.
</p>
<ol>
<li class="level1"><div class="li"> Download <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/" class="urlextern" title="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/"  rel="nofollow">an appropriate image</a> to serve from your TFTP server (for example, <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin" class="urlextern" title="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin"  rel="nofollow">http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin</a>).</div>
</li>
<li class="level1"><div class="li"> Hook your routers WAN ethernet port up to your network (for v8.2 it&#039;s LAN1 ethernet port)</div>
</li>
<li class="level1"><div class="li"> Hook up the serial console as explained in the section &quot;serial console&quot;. At the prompt &quot;Autobooting in 1 seconds&quot; type &quot;tpl&quot; quickly to start a uboot console.</div>
</li>
<li class="level1"><div class="li"> Now we need to set router and server IP addresses (here named ROUTERIP and SERVERIP, substitute these with the real IP addresses). </div>
</li>
</ol>

<p>
  Type in the console:<pre class="code">setenv ipaddr ROUTERIP
setenv serverip SERVERIP
printenv</pre>

</p>

<p>
For example: Configure this static ip for your <abbr title="Local Area Network">LAN</abbr> card 192.168.1.100. If your computer containing other <abbr title="Local Area Network">LAN</abbr> or Wifi card, disable it!
</p>

<p>
 Type in the console
<pre class="code">setenv ipaddr 192.168.1.111
setenv serverip 192.168.1.100</pre>

192.168.1.111 is the router ip, 192.168.1.100 is the TFTP server ip.
</p>
<ol>
<li class="level1"><div class="li"> Double check that the output of printenv lists the IP addresses you just set.</div>
</li>
<li class="level1"><div class="li"> Uboot needs the tftp server to be listening on port 69. Make sure your server is configured to listen to that port. Now we can load the firmware over TFTP with &quot;tftpboot 0x80000000 openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin&quot;: <pre class="code">ar7240&gt; tftpboot 0x80000000 openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin
Using eth0 device
TFTP from server 192.168.1.100; our IP address is 192.168.1.111
Filename &#039;openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin&#039;.
Load address: 0x80000000
Loading: checksum bad
#################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         ######################################################
done
Bytes transferred = 3932160 (3c0000 hex)</pre>
</div>
</li>
<li class="level1"><div class="li"> Note the &quot;3c0000&quot; in the last line (your number may differ). Now execute the following commands, if necessary replacing 3c0000 with the number you got from tftpboot</div>
</li>
</ol>

<p>
Type: <pre class="code">printenv bootcmd</pre>

</p>

<p>
Take note of the address and use it as flash erase start address.
</p>

<p>
For TL-WR841ND v3:
</p>

<p>
 1. Erase the flash: <pre class="code"> ar7100&gt; erase 0xbf020000 +0x3c0000
                                                                             
First 0x2 last 0x3d sector size 0x10000                                      
  61                                                                         
Erased 60 sectors </pre>

 2.Copy RAM content to flash:
<pre class="code"> ar7100&gt; cp.b 0x80000000 0xbf020000 0x3c0000                                  
Copy to Flash... write addr: bf020000                       
done </pre>

3.Reset <pre class="code"> ar7100&gt; reset                                               
                                                            
Resetting...</pre>

4. Done.
</p>

<p>
For TL-WR841ND v5, v7, v8, v9:
</p>

<p>
1. Erase the flash:
<pre class="code">wasp&gt; erase 0x9f020000 +0x3c0000</pre>

2. Copy RAM content to flash:
<pre class="code">wasp&gt; cp.b 0x80000000 0x9f020000 0x3c0000</pre>

3. Set up the boot
<pre class="code">wasp&gt; bootm 0x9f020000
## Booting image at 9f020000 ...
Uncompressing Kernel Image ... OK

Starting kernel ...</pre>

</p>

<p>
4. Done.
</p>

</div>

<h4 id="v8_v9_without_serial">v8,v9 (without serial)</h4>
<div class="level4">

<p>
As most other current TP-Link routers this device can be flashed and debricked without serial access. Basically, the procedure is as follows:
</p>
<ol>
<li class="level1"><div class="li"> Set your PC to use the static IP address <code>192.168.0.66</code> (the router will have <code>192.168.0.86</code>)</div>
</li>
<li class="level1"><div class="li"> Put an OpenWrt factory image named <code>wr841nv9_tp_recovery.bin</code> in the root directory of an TFTP server and start it (for v8 image name must be <code>mr3420v2_tp_recovery.bin</code>)</div>
</li>
<li class="level1"><div class="li"> Power on the router while pressing the reset button until the lock LED is lighting up</div>
</li>
<li class="level1"><div class="li"> Wait for the router to reboot</div>
</li>
</ol>

<p>
For details, see <a href="tl-wdr4900#reset_button_method_no_serial_cable_needed" class="wikilink1" title="toh:tp-link:tl-wdr4900">reset_button_method_no_serial_cable_needed</a>
</p>

</div>

<h2 class="sectionedit10" id="go_back_to_original_firmware">Go back to original firmware</h2>
<div class="level2">

<p>
→ <a href="../../doc/howto/generic.uninstall" class="wikilink1" title="doc:howto:generic.uninstall">generic.uninstall</a>
</p>

</div>
<div class="plugin_include_content plugin_include__meta:infobox:dangerous" id="plugin_include__meta__infobox__dangerous">
<div class="level2">

<p>

<table class="inline" style="width:70%; margin-left:15%">
  <tr>
    <td style="border-left:6px solid #cd0505; vertical-align:middle">
      <img src="../../_media/meta/icons/tango/48px-dialog-warning.svg.png" alt="" style="float:left; margin-right:0.5em" />
      <strong>Warning!</strong><br />
      This section describes actions that might damage your device or firmware. Proceed with care!
    </td>
  </tr>
</table>

</p>

</div>
</div>
<div class="level2">

<p>
With the TL-WR842ND router, there is a catch: the stock firmware is obtained from the OEM: <a href="http://www.tplink.com/en/support/download/?model=TL-WR841N" class="urlextern" title="http://www.tplink.com/en/support/download/?model=TL-WR841N"  rel="nofollow"> versions 1,5,7,8,9</a>(verions v1 and v1.5 have same latest fw) and <a href="http://www.tplink.com/en/support/download/?model=TL-WR841ND&amp;version=V3" class="urlextern" title="http://www.tplink.com/en/support/download/?model=TL-WR841ND&amp;version=V3"  rel="nofollow">link for v3</a>
</p>
<ul>
<li class="level1"><div class="li"> in case the file name of this firmware file does not contain the word <strong><em>&quot;boot&quot;</em></strong> in it, you can simply revert back to original firmware</div>
</li>
<li class="level1"><div class="li"> in case the file name of this firmware file does contain the word <strong><em>&quot;boot&quot;</em></strong> in it, you need to cut off parts of the image file <em>before</em> flashing it:</div>
</li>
</ul>

<p>
The following method applies both for the V1 V3 V5 V7 V8 and V9 since the bootloader is the same size.
</p>

<p>
An example of an image file with the word &quot;boot&quot; in it is <code>wr841nv9_en_3_14_4_up_boot(131129).bin</code>.
</p>

<p>
Cut the first 0x20200 (that is 131,584 = 257*512) Bytes from original firmware:
<pre class="code">dd if=orig.bin of=tplink.bin skip=257 bs=512</pre>

</p>

<p>
You should transfer the firmeware image to the /tmp folder and revert back to original firmware (if availlable you can flash the firmware via the webinterface as well):
</p>

<p>
Via the safer method using sysupgrade:
<pre class="code">sysupgrade /tmp/tplink.bin</pre>

</p>

<p>
Or you use the mtd method:
<pre class="code">mtd -r write tplink.bin firmware</pre>

</p>

<p>
It is also possible to revert to the stock firmware using the method with tftp described in &quot;TFTP install&quot;. (you still need the firmware images without the boot part).
</p>

<p>
OEM TP-Link firmware for the TL-WR841ND with the <strong><em>boot part removed</em></strong> or the original firmware if there wasn&#039;t a boot part to revert to the original OEM firmware:
</p>
<ul>
<li class="level1"><div class="li"> TL-WR841N(D) <strong><em>V1</em></strong> <a href="http://www.tplink.com/resources/software/2008613143645.zip" class="urlextern" title="http://www.tplink.com/resources/software/2008613143645.zip"  rel="nofollow">2008613143645.zip</a></div>
</li>
<li class="level1"><div class="li"> TL-WR842N(D) <strong><em>V3</em></strong> <a href="https://drive.google.com/uc?export=download&amp;id=0B-pEMb4uQtg8SXpmVFJRbE54cFk" class="urlextern" title="https://drive.google.com/uc?export=download&amp;id=0B-pEMb4uQtg8SXpmVFJRbE54cFk"  rel="nofollow">TL-WR841ND-V3-stripped.zip</a></div>
</li>
<li class="level1"><div class="li"> TL-WR841N(D) <strong><em>V5</em></strong> <a href="http://www.tplink.com/resources/software/201112613340616.zip" class="urlextern" title="http://www.tplink.com/resources/software/201112613340616.zip"  rel="nofollow">201112613340616.zip</a></div>
</li>
<li class="level1"><div class="li"> TL-WR841N(D) <strong><em>V7</em></strong> <a href="http://www.tplink.com/Resources/software/TL-WR841N_WR841ND_v7_120201.zip" class="urlextern" title="http://www.tplink.com/Resources/software/TL-WR841N_WR841ND_v7_120201.zip"  rel="nofollow">TL-WR841N_WR841ND_v7_120201.zip</a></div>
</li>
<li class="level1"><div class="li"> TL-WR842N(D) <strong><em>V8</em></strong> <a href="https://drive.google.com/uc?export=download&amp;id=0B-pEMb4uQtg8cFhhSGZlWlE0ZXc" class="urlextern" title="https://drive.google.com/uc?export=download&amp;id=0B-pEMb4uQtg8cFhhSGZlWlE0ZXc"  rel="nofollow">TL-WR841ND-V8-stripped.zip</a></div>
</li>
<li class="level1"><div class="li"> TL-WR842N(D) <strong><em>V9</em></strong> <a href="https://drive.google.com/uc?export=download&amp;id=0B-pEMb4uQtg8aXRScW1PeVFvdHc" class="urlextern" title="https://drive.google.com/uc?export=download&amp;id=0B-pEMb4uQtg8aXRScW1PeVFvdHc"  rel="nofollow">TL-WR841ND-V9-stripped.zip</a></div>
</li>
</ul>

</div>

<h2 class="sectionedit13" id="failsafe_mode">Failsafe mode</h2>
<div class="level2">

<p>
<a href="../../doc/howto/generic.failsafe" class="wikilink1" title="doc:howto:generic.failsafe">generic.failsafe</a>
</p>
<ol>
<li class="level1"><div class="li"> When the SYS led (under gear icon) starts to blink push the QSS/reset button for around 5-10 sec. Now the led should blink a lot faster than before.</div>
</li>
</ol>

</div>

<h2 class="sectionedit14" id="debricking">Debricking</h2>
<div class="level2">

</div>

<h3 class="sectionedit15" id="v72_july_2012">v7.2 (July 2012)</h3>
<div class="level3">
<ol>
<li class="level1"><div class="li"> Disconnect the router from the internet, connect it with a PC via RJ45 cable and perform a 30/30/30 restart</div>
</li>
<li class="level1"><div class="li"> Change the ip on the PC to 192.168.1.<strong>2</strong>, subnet mask must be 255.255.255.0 and restart the router by unplugging the power cable</div>
</li>
<li class="level1"><div class="li"> Perform a failsafe boot, quickly use <pre class="code">telnet 192.168.1.1</pre>
</div>
</li>
</ol>

<p>
If this didnt work check the ip adress on the PC or if you were too slow to connect during the failsafe mode. Still not working? <a href="https://forum.openwrt.org/viewtopic.php?id=33906" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?id=33906"  rel="nofollow">Read this!</a>
</p>

<p>
In telnet do the following things one after another:
</p>
<ul>
<li class="level1"><div class="li"> Define a password<pre class="code">passwd</pre>
enter<pre class="code">yourpassword</pre>
enter<pre class="code">againyourpassword</pre>
enter</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> Kill the broken OWRT firmware<pre class="code">mtd -r erase rootfs_data</pre>
enter<pre class="code">firstboot</pre>
enter<pre class="code">reboot -f</pre>
After rebooting log in again just to check if the router is accessable. If you cant start again at the beginning.</div>
</li>
</ul>

<p>
Now change the network settings on the PC back to &quot;Aquire IP adress automatically&quot; and connect the router with the internet. Do a manual reboot by simply turning it off and back on again. The PC should now get an ip adress by DHCP. If this is the case you successfully resetted the router. If not repeat from the beginning or  <a href="https://forum.openwrt.org/viewtopic.php?id=33906" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?id=33906"  rel="nofollow">do this</a> if you like.
</p>

<p>
Basically the router now works like after the initial flash to OWRT. Now you have to <a href="../../doc/howto/configuration" class="urlextern" title="http://wiki.openwrt.org/doc/howto/basic.config"  rel="nofollow">configure the internet connection</a> and probably you want to install <a href="../../doc/luci" class="urlextern" title="http://wiki.openwrt.org/doc/howto/luci.essentials"  rel="nofollow">LUCI</a>. After that open your browser, connect to 192.168.1.1 and log in with the data you entered via telnet.
</p>

</div>

<h3 class="sectionedit16" id="v8x_note">v8.x note</h3>
<div class="level3">

<p>
Debricking see the above, but you will have to plug your cable to WAN port in failsafe to be able to telnet 192.168.1.1.
</p>

</div>

<h3 class="sectionedit17" id="v81_note">v8.1 note</h3>
<div class="level3">

<p>
Try <abbr title="Local Area Network">LAN</abbr> port 1 instead of WAN port. The Link LEDs won&#039;t work.
</p>

</div>

<h3 class="sectionedit18" id="v9">v9</h3>
<div class="level3">

<p>
 <a href="tl-wr841nd#v9_without_serial" title="toh:tp-link:tl-wr841nd ↵" class="wikilink1">See v9 installing without serial</a>
</p>

</div>

<h2 class="sectionedit19" id="basic_configuration">Basic configuration</h2>
<div class="level2">

<p>
<a href="../../doc/howto/configuration" class="wikilink1" title="doc:howto:configuration">configuration</a>
</p>

</div>

<h3 class="sectionedit20" id="repeatermultiple_ssidvirtual_access_pointclient_bridge">Repeater / Multiple SSID / Virtual access point / Client bridge</h3>
<div class="level3">

<p>
<a href="https://forum.openwrt.org/viewtopic.php?id=39077" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?id=39077"  rel="nofollow">Basic information about repeater configuration on a forum thread</a>. 
</p>

</div>

<h4 id="with_barrier_breaker_bleeding_edge_r40867">With BARRIER BREAKER (Bleeding Edge, r40867)</h4>
<div class="level4">

<p>
Tested with the wr841n v9 with <code>Linux OpenWrt-tplink 3.10.36 #1 Thu May 29 06:34:50 UTC 2014 mips GNU/Linux/</code>  or better <code>openwrt BARRIER BREAKER (Bleeding Edge, r40867)</code> . The system supports multiple virtual access points.
</p>

<p>
Modify the files that follows according to your needs (and, in the case, search for the file definition here in the wiki to understand how it works)
</p>

</div>

<h5 id="etcconfigwireless">etc/config/wireless</h5>
<div class="level5">

<p>
<pre class="code">config wifi-device  radio0
        option type     mac80211
        option channel  9 #same channel of the existing wifi network
        option path     &#039;platform/qca953x_wmac&#039;
        option txpower  12 #this depends on your needs, default is 20 dBm. Lower it is healthier (citation needed)
        # REMOVE THIS LINE TO ENABLE WIFI:
        #option disabled 1

config wifi-iface
        option device   radio0
        option network  lan
        option mode     ap
        option ssid     &#039;This_is_a_new_wifi_network&#039;
        option encryption       psk2 #wpa2 psk
        option key      &#039;this_is_the_wifi_password&#039;

config wifi-iface
        option device   radio0
        option network  wan
        option mode     &#039;sta&#039;
        option ssid     &#039;This_is_the_name_of_the_existing_wifi_network&#039;
        option encryption       psk2
        option key      &#039;this_is_the_wifi_password_to_get_the_connection&#039;</pre>

</p>

</div>

<h5 id="etcconfignetwork">etc/config/network</h5>
<div class="level5">

<p>
<pre class="code">config interface &#039;loopback&#039;
        option ifname &#039;lo&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;127.0.0.1&#039;
        option netmask &#039;255.0.0.0&#039;

config globals &#039;globals&#039;
        option ula_prefix &#039;here is written something, no need to modify it&#039;

config interface &#039;lan&#039;
        option ifname &#039;eth0&#039;
        option force_link &#039;1&#039;
        option type &#039;bridge&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;192.168.11.1&#039; ä modify this according to you needsfor the lan network
        option netmask &#039;255.255.255.0&#039;
        option ip6assign &#039;60&#039;

config interface &#039;wan&#039;
        #option ifname &#039;eth1&#039;
        option proto &#039;dhcp&#039;

config interface &#039;wan6&#039;
        option ifname &#039;@wan&#039;
        option proto &#039;dhcpv6&#039;

config switch
        option name &#039;switch0&#039;
        option reset &#039;1&#039;
        option enable_vlan &#039;1&#039;

config switch_vlan
        option device &#039;switch0&#039;
        option vlan &#039;1&#039;
        option ports &#039;0 1 2 3 4&#039;</pre>

</p>

</div>

<h5 id="etcconfigdhcp">etc/config/dhcp</h5>
<div class="level5">

<p>
Pratically unchanged
<pre class="code">config dnsmasq
        option domainneeded &#039;1&#039;
        option boguspriv &#039;1&#039;
        option filterwin2k &#039;0&#039;
        option localise_queries &#039;1&#039;
        option rebind_protection &#039;1&#039;
        option rebind_localhost &#039;1&#039;
        option local &#039;/lan/&#039;
        option domain &#039;lan&#039;
        option expandhosts &#039;1&#039;
        option nonegcache &#039;0&#039;
        option authoritative &#039;1&#039;
        option readethers &#039;1&#039;
        option leasefile &#039;/tmp/dhcp.leases&#039;
        option resolvfile &#039;/tmp/resolv.conf.auto&#039;

config dhcp &#039;lan&#039;
        option interface &#039;lan&#039;
        option start &#039;100&#039;
        option limit &#039;150&#039;
        option leasetime &#039;12h&#039;
        option dhcpv6 &#039;hybrid&#039;
        option ra &#039;hybrid&#039;
        option ndp &#039;hybrid&#039;

config dhcp &#039;wan&#039;
        option interface &#039;wan&#039;
        option ignore &#039;1&#039;

config odhcpd &#039;odhcpd&#039;
        option maindhcp &#039;0&#039;
        option leasefile &#039;/tmp/hosts/odhcpd&#039;
        option leasetrigger &#039;/usr/sbin/odhcpd-update&#039;

config dhcp &#039;wan6&#039;
        option dhcpv6 &#039;hybrid&#039;
        option ra &#039;hybrid&#039;
        option ndp &#039;hybrid&#039;
        option master &#039;1&#039;</pre>

</p>

</div>

<h5 id="etcconfigfirewall">etc/config/firewall</h5>
<div class="level5">

<p>
Pratically unchanged because the &quot;client&quot; wifi is connected to the &quot;wan&quot; interface, while the &quot;repeater&quot; wifi is connected to the lan interface, thus the firewall is basically already configured.
<pre class="code">config defaults
        option syn_flood        1
        option input            ACCEPT
        option output           ACCEPT
        option forward          REJECT
# Uncomment this line to disable ipv6 rules
#       option disable_ipv6     1

config zone
        option name             lan
        list   network          &#039;lan&#039;
        option input            ACCEPT
        option output           ACCEPT
        option forward          ACCEPT

config zone
        option name             wan
        list   network          &#039;wan&#039;
        list   network          &#039;wan6&#039;
        option input            REJECT
        option output           ACCEPT
        option forward          REJECT
        option masq             1
        option mtu_fix          1

config forwarding
        option src              lan
        option dest             wan</pre>

</p>

</div>

<h5 id="final_actions">Final actions</h5>
<div class="level5">

<p>
Just be sure that the files are saved. To edit the files on windows, either use vi on the openwrt, check for a tutorial online, the basic commands are not difficult; or use winscp with a SCP connection and edit the files with an editor on windows. Then reboot the system and check for the wifi connection.
</p>

<p>
Remember that if the &quot;client&quot; wifi doesn&#039;t work, won&#039;t work also the repeater wifi network.
</p>

</div>

<h4 id="attitude_adjustment_1209_final">attitude_adjustment 12.09 (final)</h4>
<div class="level4">

<p>
The default wireless configuration is different, for example
there is no: <code>option path     &#039;platform/qca953x_wmac</code>&#039; .
Further investigation shown that the wireless is able to provide an AP
if connected to whatever interface defined in <code>/etc/config/network</code>,
while for &#039;sta&#039; mode (a wifi client) it is possible to obtain it only if
the interface connected to the wireless configuration is <em class="u">not using the <code>bridge</code> option nor having a relation to a switch with more than one port</em> (for example if with eth0 we define a switch over multiple ports)  Note: <em>would be better to check this statement more thoroughly</em>.
</p>

<p>
For example, with the configuration reported above for barrier breaker, the wlan is linked with the wan side, that is using no switch interfaces nor bridge protocol. This works too for 12.09.
</p>

</div>

<h2 class="sectionedit21" id="use_wps_with_wps_button">Use WPS with WPS button</h2>
<div class="level2">

<p>
<em> found info in Netgear WNDR3700 page  <a href="http://wiki.openwrt.org/toh/netgear" class="wikilink2" title="toh:netgear" rel="nofollow">netgear</a> and adapted for WR841N </em>
</p>

</div>

<h3 class="sectionedit22" id="prepare_and_install_wps">Prepare and install WPS</h3>
<div class="level3">
<ol>
<li class="level1"><div class="li"> Follow the instructions for installing WPS : See <a href="../../doc/uci/wireless#wpsoptions" class="wikilink1" title="doc:uci:wireless">wps.options</a></div>
</li>
<li class="level1"><div class="li"> Your &#039;/etc/config/wireless&#039; file should be like that :</div>
</li>
</ol>

<p>
<pre class="code">config wifi-iface
        option device &#039;radio0&#039;
        option network &#039;lan&#039;
        option mode &#039;ap&#039;
        option ssid &#039;XXXXXXXXXXXXXXX&#039;
        option key &#039;XXXXXXXXXXXXXXXXXXXXXXX&#039;
        option wps_pushbutton &#039;1&#039;
        option wps_config &#039;push_button&#039;
        option encryption &#039;psk2&#039;</pre>

</p>

</div>

<h3 class="sectionedit23" id="check_configuration">Check configuration</h3>
<div class="level3">
<ol>
<li class="level1"><div class="li"> After reboot, if everything is ok, you can test with this command:</div>
</li>
</ol>

<p>
<pre class="code">root@OpenWrt /root# hostapd_cli -p /var/run/hostapd-phy0 wps_pbc
Selected interface &#039;wlan0&#039;
OK</pre>

</p>

</div>

<h3 class="sectionedit24" id="plug_button_action">Plug button action</h3>
<div class="level3">
<ol>
<li class="level1"><div class="li"> Now, we can configure the WPS button on back on TL-WR841N to launch this command when we pressed it. Edit the file &#039;/etc/hotplug.d/button/50-wps&#039; </div>
</li>
</ol>

<p>
<pre class="code">#!/bin/sh
# for debugging button name and action name, uncomment this 2 lines
#logger $BUTTON
#logger $ACTION

if [ &quot;$ACTION&quot; = &quot;pressed&quot; -a &quot;$BUTTON&quot; = &quot;reset&quot; ]; then
        for dir in /var/run/hostapd-*; do
                [ -d &quot;$dir&quot; ] || continue
                hostapd_cli -p &quot;$dir&quot; wps_pbc
        done
fi</pre>

If everything goes ok, you should see in Syslog not only the button events, but also succesful WPS authentication.
</p>

</div>

<h3 class="sectionedit25" id="wifi_onoff_toggle_by_qss_button">Wifi on/off toggle by QSS button</h3>
<div class="level3">

<p>
Read <a href="../../doc/howto/hardware.button" class="wikilink1" title="doc:howto:hardware.button">this howto</a> to use buttons on TP-Link 
</p>

<p>
<em>Found in WR741ND wiki page and coppied. It works on WR841ND too.</em>
</p>

<p>
(Thanks to obsy) <a href="https://forum.openwrt.org/viewtopic.php?id=26871" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?id=26871"  rel="nofollow">Wifi toggle by QSS button</a>
Simply create a new file called 01onoff in /etc/hotplug.d/button/
<pre class="code">vi /etc/hotplug.d/button/01onoff</pre>

</p>

<p>
and copy these lines inside (remember to push &#039;i&#039; for insert) 
</p>

<p>
<pre class="code">#!/bin/sh

[ &quot;$BUTTON&quot; = &quot;wps&quot; ] &amp;&amp; [ &quot;$ACTION&quot; = &quot;pressed&quot; ] &amp;&amp; {
 SW=$(uci get wireless.@wifi-device[0].disabled)
 [ $SW == &#039;0&#039; ] &amp;&amp; uci set wireless.@wifi-device[0].disabled=1
 [ $SW == &#039;0&#039; ] || uci set wireless.@wifi-device[0].disabled=0
 wifi
}</pre>

</p>

<p>
Save and exit 
<pre class="code">(esc :wq)</pre>

</p>

</div>

<h2 class="sectionedit26" id="serial_console">Serial console</h2>
<div class="level2">

<p>
Getting serial console is pretty standard fare. You need a MAX323 or similar level-shifter. The pinout on the router is RX - TX - GND - +5V (Power connector).
</p>

<p>
If you do not have serial port on your PC, use <a href="http://www.dealextreme.com/p/data-cable-compatible-with-nokia-ca-42-446" class="urlextern" title="http://www.dealextreme.com/p/data-cable-compatible-with-nokia-ca-42-446"  rel="nofollow">Nokia CA-42 data USB cable</a>.
</p>

</div>

<h3 class="sectionedit27" id="yet_another_user_notes">Yet another user notes</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> For TP-LINK WR841ND V7.2 power conector (+5V) is ignored, just connect RX - TX - GND and router power cord, work fine…</div>
</li>
<li class="level1"><div class="li"> My TP-LINK WR841ND V7.2 has a VCC of +3.3V and like the TL-MR3420 <a href="tl-mr3220#serial" class="urlextern" title="http://wiki.openwrt.org/toh/tp-link/tl-mr3420#serial"  rel="nofollow">http://wiki.openwrt.org/toh/tp-link/tl-mr3420#serial</a> needed to connect a 10k pullup resistor between the TX and the 3.3V pin to get reliable serial:</div>
</li>
</ul>

<p>
  <a href="../../_detail/media/dsc02532_324.jpg?id=toh%253Atp-link%253Atl-wr841nd" class="media" title="media:dsc02532_324.jpg"><img src="../../_media/media/dsc02532_324.jpg?w=800&amp;tok=5c9960" class="media" alt="" width="800" /></a>
</p>
<ul>
<li class="level1"><div class="li"> My TP-Link WR841ND V7.1 also requires the 10k pullup resistor between TX and the 3.3V pin.  Without the resistor I just get garbage when I type, but can see some console output. </div>
</li>
<li class="level1"><div class="li"> just swap TX and GND pin in serial and no garbage in serial console, but this is read-only.</div>
</li>
<li class="level1"><div class="li"> For my TP-Link TL841N v9.0 i had to remove R26. It&#039;s a pull-up between RX (device side) and VCC. My ftdi device couldn&#039;t send data with R26 attached.</div>
</li>
<li class="level1"><div class="li"> For my TP-Link TL-WR841ND v8.4 was not required 10K resistor. My TTL to RS232 converter has bad marking of Tx and Rx pins. So, it was necessary to connect Tx-Tx and Rx-Rx. The connection of Vcc (3.3V) was necessary too. The connection scheme you can find on the following image:</div>
</li>
</ul>

<p>
    <a href="../../_detail/media/tplink-841nd-v8-4-serial.jpg?id=toh%253Atp-link%253Atl-wr841nd" class="media" title="media:tplink-841nd-v8-4-serial.jpg"><img src="../../_media/media/tplink-841nd-v8-4-serial.jpg?w=800&amp;tok=05386d" class="media" alt="" width="800" /></a>
</p>

<p>
<strong>Tip:</strong> Connecting TL-WR841N v8.1 via Arduino Due R3 (<a href="https://forum.openwrt.org/viewtopic.php?id=37010&amp;p=6" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?id=37010&amp;p=6"  rel="nofollow"> forum link</a>):
</p>

<p>
<a href="../../_detail/media/tp-link-tl-wr841n-v8-2.jpeg?id=toh%253Atp-link%253Atl-wr841nd" class="media" title="media:tp-link-tl-wr841n-v8-2.jpeg"><img src="../../_media/media/tp-link-tl-wr841n-v8-2.jpeg?w=450&amp;tok=e6bd4b" class="media" alt="" width="450" /></a>
</p>

</div>

<h3 class="sectionedit28" id="serial_port_settings">Serial port settings:</h3>
<div class="level3">
<div class="table sectionedit29"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Version </th><th class="col1"> v3.2 </th><th class="col2"> v5 </th><th class="col3"> v7.X </th><th class="col4"> v8.4 </th><th class="col5"> v9.0 </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <strong>Image</strong> </td><td class="col1"> <a href="../../_detail/toh/tp-link/tl-wr841nd-v3.2-serial.jpg?id=toh%253Atp-link%253Atl-wr841nd" class="media" title="toh:tp-link:tl-wr841nd-v3.2-serial.jpg"><img src="../../_media/toh/tp-link/tl-wr841nd-v3.2-serial.jpg?w=250&amp;tok=7a8f35" class="media" alt="" width="250" /></a> </td><td class="col2"> <a href="../../_detail/toh/tp-link/wr841nd-v5-serial.jpg?id=toh%253Atp-link%253Atl-wr841nd" class="media" title="toh:tp-link:wr841nd-v5-serial.jpg"><img src="../../_media/toh/tp-link/wr841nd-v5-serial.jpg?w=250&amp;tok=f1cfe8" class="media" alt="" width="250" /></a> </td><td class="col3"> <a href="../../_detail/toh/tp-link/tl-wr841nd.v7.2.serial.jpg?id=toh%253Atp-link%253Atl-wr841nd" class="media" title="toh:tp-link:tl-wr841nd.v7.2.serial.jpg"><img src="../../_media/toh/tp-link/tl-wr841nd.v7.2.serial.jpg?w=250&amp;tok=92d0f0" class="media" alt="" width="250" /></a> </td><td class="col4"> <a href="../../_detail/media/toh/tp-link/tl-wr841nd.v8.4.serial.jpg?id=toh%253Atp-link%253Atl-wr841nd" class="media" title="media:toh:tp-link:tl-wr841nd.v8.4.serial.jpg"><img src="../../_media/media/toh/tp-link/tl-wr841nd.v8.4.serial.jpg?w=250&amp;tok=6d1941" class="media" title="serial console connection on TL-WR841N(D) v8.4" alt="serial console connection on TL-WR841N(D) v8.4" width="250" /></a> </td><td class="col5"> <a href="../../_detail/media/toh/tp-link/tp-link/tl-wr841nd.v9.0.serial.jpg?id=toh%253Atp-link%253Atl-wr841nd" class="media" title="media:toh:tp-link:tp-link:tl-wr841nd.v9.0.serial.jpg"><img src="../../_media/media/toh/tp-link/tp-link/tl-wr841nd.v9.0.serial.jpg?w=250&amp;tok=9120c5" class="media" title="ASCII" alt="ASCII" width="250" /></a> </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <strong>U-Boot speed</strong> </td><td class="col1"> 9600 </td><td class="col2" colspan="4"> 115200 </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <strong>kernel speed</strong> </td><td class="col1"> 115200 - switch automaticaly </td><td class="col2" colspan="4"> 115200 </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <strong>Data format</strong> </td><td class="col1" colspan="5"> always 8N1 </td>
	</tr>
</table></div>

<p>
After connecting, you will be greeted by something like this:
<pre class="code">AP93 (ar7240) U-boot
DRAM:  
sri
#### TAP VALUE 1 = 9, 2 = 9
32 MB
id read 0x100000ff
flash size 4194304, sector count = 64
Flash:  4 MB
Using default environment

In:    serial
Out:   serial
Err:   serial
Net:   ag7240_enet_initialize...
No valid address in Flash. Using fixed address
: cfg1 0xf cfg2 0x7014
eth0: 00:03:7f:09:0b:ad
eth0 up
No valid address in Flash. Using fixed address
: cfg1 0xf cfg2 0x7214
eth1: 00:03:7f:09:0b:ad
ATHRS26: resetting s26
ATHRS26: s26 reset done
eth1 up
eth0, eth1
Autobooting in 1 seconds</pre>

You now have one second to enter &quot;tpl&quot; (without the quotes) to get to the Uboot console prompt.
</p>

</div>

<h2 class="sectionedit30" id="jtag">JTAG</h2>
<div class="level2">

<p>
Near the two biggest capacitor you could see a HE10 connector with 14 pin (V8).
</p>
<div class="table sectionedit31"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 leftalign">Pin  </th><th class="col1 centeralign" colspan="2">  Function     </th><th class="col3">Pin </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 centeralign">  1  </td><td class="col1"> ? </td><td class="col2 leftalign"> GND  </td><td class="col3 leftalign"> 2  </td>
	</tr>
	<tr class="row2">
		<td class="col0 centeralign">  3  </td><td class="col1 leftalign"> TCK   </td><td class="col2 leftalign"> GND  </td><td class="col3 leftalign"> 4  </td>
	</tr>
	<tr class="row3">
		<td class="col0 centeralign">  5  </td><td class="col1 leftalign"> TDI   </td><td class="col2 leftalign"> GND  </td><td class="col3 leftalign"> 6  </td>
	</tr>
	<tr class="row4">
		<td class="col0 centeralign">  7  </td><td class="col1 leftalign"> TDO   </td><td class="col2 leftalign"> GND  </td><td class="col3 leftalign"> 8  </td>
	</tr>
	<tr class="row5">
		<td class="col0 centeralign">  9  </td><td class="col1 leftalign"> TMS   </td><td class="col2 leftalign"> GND  </td><td class="col3"> 10 </td>
	</tr>
	<tr class="row6">
		<td class="col0 rightalign">  11 </td><td class="col1"> ? </td><td class="col2 leftalign"> ?   </td><td class="col3"> 12 </td>
	</tr>
	<tr class="row7">
		<td class="col0 rightalign">  13 </td><td class="col1 leftalign"> ?  </td><td class="col2"> ? </td><td class="col3"> 14 </td>
	</tr>
</table></div>

<p>
For JTAG interface you need VCC. You could take it on the TP1 point test.
</p>

</div>

<h2 class="sectionedit32" id="troubleshooting">Troubleshooting</h2>
<div class="level2">

</div>

<h3 class="sectionedit33" id="stuck_at_130mbps_get_300mbps">Stuck at 130Mbps? Get 300Mbps</h3>
<div class="level3">

<p>
<em>This violates regulatory requirements</em>
</p>

<p>
Edit the file <code><a href="../../doc/uci/wireless" class="wikilink1" title="doc:uci:wireless">/etc/config/wireless</a></code>
</p>
<ol>
<li class="level1"><div class="li"> Below <em>config &#039;wifi-device&#039; &#039;radio0&#039;</em> add<pre class="code">option &#039;noscan&#039; &#039;1&#039;</pre>
</div>
</li>
<li class="level1"><div class="li"> <em>option &#039;htmode&#039;</em> should be set either to HT40+ or HT40-(HT40+ wont work with Channel 11)<pre class="code">option &#039;htmode&#039; &#039;HT40+&#039;</pre>
</div>
</li>
<li class="level1"><div class="li"> Restart wireless <pre class="code">wifi</pre>
</div>
</li>
</ol>

</div>

<h3 class="sectionedit34" id="can_not_connect_to_v8">Can not connect to v8?</h3>
<div class="level3">

<p>
check whether eth0/eth1 are switched!
</p>

</div>

<h2 class="sectionedit35" id="bootloader_mods">Bootloader Mods</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> you could read about <a href="../../doc/techref/bootloader.1" class="wikilink1" title="doc:techref:bootloader">bootloader</a> in general and about <a href="../../doc/techref/bootloader/uboot" class="wikilink1" title="doc:techref:bootloader:uboot">Das U-Boot</a> in particular.</div>
</li>
</ol>

</div>

<h3 class="sectionedit36" id="u-boot_114_modification_for_routers">U-Boot 1.1.4 modification for routers</h3>
<div class="level3">

<p>
Forum member <a href="https://forum.openwrt.org/profile.php?id=72549" class="urlextern" title="https://forum.openwrt.org/profile.php?id=72549"  rel="nofollow">pepe2k</a> made a modification of <strong>U-Boot 1.1.4</strong> for <strong>Qualcomm Atheros</strong> SoCs based devices (the project is still being developed, so new devices and SoCs will be supported in the future). Up to date information, binary images and sources can be found on official <a href="https://github.com/pepe2k/u-boot_mod" class="urlextern" title="https://github.com/pepe2k/u-boot_mod"  rel="nofollow">GitHub repository</a>.
</p>

<p>
This modification started from <a href="http://code.google.com/p/wr703n-uboot-with-web-failsafe/" class="urlextern" title="http://code.google.com/p/wr703n-uboot-with-web-failsafe/"  rel="nofollow">wr703n-uboot-with-web-failsafe</a> project, but supports more devices, all modern web browsers, has a lot of improvements and other modifications (like U-Boot NetConsole, custom commands, overclocking possibilities etc.).
</p>

<p>
More information:
</p>
<ul>
<li class="level1"><div class="li"> Official repository on GitHub: <a href="https://github.com/pepe2k/u-boot_mod" class="urlextern" title="https://github.com/pepe2k/u-boot_mod"  rel="nofollow">U-Boot 1.1.4 modification for routers</a></div>
</li>
<li class="level1"><div class="li"> Discussion about this project on <a href="https://forum.openwrt.org/viewtopic.php?id=43237" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?id=43237"  rel="nofollow">OpenWrt forum</a></div>
</li>
<li class="level1"><div class="li"> An article (in Polish) about one of the first version of this project on <a href="http://www.tech-blog.pl/2013/03/29/zmodyfikowany-u-boot-dla-routerow-tp-link-z-atheros-ar9331-z-trybem-aktualizacji-oprogramowania-przez-www-i-konsola-sieciowa-netconsole/" class="urlextern" title="http://www.tech-blog.pl/2013/03/29/zmodyfikowany-u-boot-dla-routerow-tp-link-z-atheros-ar9331-z-trybem-aktualizacji-oprogramowania-przez-www-i-konsola-sieciowa-netconsole/"  rel="nofollow">www.tech-blog.pl</a></div>
</li>
</ul>

</div>

<h2 class="sectionedit37" id="hardware_mods">Hardware Mods</h2>
<div class="level2">

</div>

<h3 class="sectionedit38" id="usb_11_port">USB 1.1 Port</h3>
<div class="level3">

<p>
<em>Tested on WR841n_v5.1</em>
</p>

<p>
<strong>Attention. Firmware of TP-Link TL-MR 3420 is coming to WR841ND v7.2 - verified. (OpenWrt Firmware Attitude Adjustment (r28380) / LuCI Trunk (trunk+svn7612))
But working usb port has not been verified. Probably enough to use this firmware, but do not compile a new one :)</strong>
</p>

<p>
Overview of the board:
</p>

<p>
<a href="../../_detail/toh/tp-link/wr841n_v5.1_01.jpg?id=toh%253Atp-link%253Atl-wr841nd" class="media" title="toh:tp-link:wr841n_v5.1_01.jpg"><img src="../../_media/toh/tp-link/wr841n_v5.1_01.jpg" class="media" alt="" /></a>
</p>

<p>
Soldering (wire with red accent means D+). R185 and R183 can be shorted then D+/D- will appear in J1.
</p>

<p>
<a href="../../_detail/toh/tp-link/wr841n_v5.1_02.jpg?id=toh%253Atp-link%253Atl-wr841nd" class="media" title="toh:tp-link:wr841n_v5.1_02.jpg"><img src="../../_media/toh/tp-link/wr841n_v5.1_02.jpg" class="media" alt="" /></a>
</p>

<p>
To get working USB the new firmware build is required. Files to edit are listed below:
</p>

<p>
1. Edit file target/linux/ar71xx/files/arch/mips/ar71xx/<strong>mach-tl-wr841nd.c</strong>
<pre class="code">    Add line #include &quot;dev-usb.h&quot; after line #include &quot;dev-leds-gpio.h&quot;
    Add line ar71xx_add_device_usb(); before line ar71xx_add_device_mdio(0x0);</pre>

</p>

<p>
2. Edit file target/linux/ar71xx/files/arch/mips/ar71xx/<strong>setup.c</strong>
<pre class="code">   Add line ar71xx_pll_wr(0x08, 0x00001030); before line ar71xx_detect_mem_size();</pre>

</p>

<p>
3. Edit file target/linux/ar71xx/files/arch/mips/ar71xx/<strong>Kconfig</strong>:
<pre class="code">config AR71XX_MACH_TL_WR841N_V1
        bool &quot;TP-LINK TL-WR841N v1 support&quot;
        select AR71XX_DEV_M25P80
        select AR71XX_DEV_PB42_PCI if PCI
        select AR71XX_DEV_DSA
        select AR71XX_DEV_GPIO_BUTTONS
        select AR71XX_DEV_LEDS_GPIO
        select AR71XX_DEV_USB
        default n</pre>

</p>

<p>
For newer version of trunk (as of 2013 March)
1.Edit file target/linux/ar71xx/files/arch/mips/ath79/mach-tl-wr841n.c
<pre class="code">    Add line #include &quot;dev-usb.h&quot; after line #include &quot;dev-leds-gpio.h&quot;
    Add line ath79_register_usb(); after line ath79_register_eth(0);</pre>

</p>

<p>
2. Edit file target/linux/ar71xx/generic/profiles/tp-link.mk, add packages in the definition of TLWR841 as following.
<pre class="code">define Profile/TLWR841
	NAME:=TP-LINK TL-WR841N/ND
	PACKAGES:=kmod-usb-core kmod-usb2 kmod-ledtrig-usbdev
endef</pre>

</p>

<p>
i.e L7805 with 470uF and 100uF can be used to obtain 5V from the stock power supply.
</p>

<p>
NOTE: in case of v5.1 sections for WR741N instead of WR841N_V1 have to be edited (Kconfig, mach-tl-wr741nd.c).
</p>

</div>

<h3 class="sectionedit39" id="usb_20_port_on_v7">USB 2.0 Port on v7</h3>
<div class="level3">

<p>
<em>tested with WR841 v7.1 and trunk revision 30430. New patch for rev. 32461 available</em>
</p>

<p>
Hardware mod is on pictures, nothing changed.
</p>

<p>
Kernel mod is different, because new kernel version is released in revision 30430.
</p>

<p>
Here is patch for kernel 3.3: <a href="http://mysicka.ics.muni.cz/openwrt/usb-patch-final.patch" class="urlextern" title="http://mysicka.ics.muni.cz/openwrt/usb-patch-final.patch"  rel="nofollow">http://mysicka.ics.muni.cz/openwrt/usb-patch-final.patch</a>
</p>

<p>
Apply this patch and build…
</p>

</div>

<h3 class="sectionedit40" id="canbus_interface_for_v8x">CANBus Interface for V8.x</h3>
<div class="level3">

<p>
<a href="../../_detail/media/tplink/wr841_slcan_02_s.jpg?id=toh%253Atp-link%253Atl-wr841nd" class="media" title="media:tplink:wr841_slcan_02_s.jpg"><img src="../../_media/media/tplink/wr841_slcan_02_s.jpg" class="media" alt="" /></a>
</p>

<p>
<a href="http://lnxpps.de/openwrt/wr841/indexe.html" class="urlextern" title="http://lnxpps.de/openwrt/wr841/indexe.html"  rel="nofollow">SLCAN CAN-Bus Interface</a>
</p>

</div>

<h2 class="sectionedit41" id="version_80_forum_thread">Version 8.0 forum thread</h2>
<div class="level2">

<p>
<a href="https://forum.openwrt.org/viewtopic.php?id=37010" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?id=37010"  rel="nofollow">https://forum.openwrt.org/viewtopic.php?id=37010</a>
</p>

</div>

<h2 class="sectionedit42" id="custom_openwrt_image_with_luci_integrated">Custom OpenWrt image with LuCi integrated</h2>
<div class="level2">

<p>
<a href="http://www.superwrt.eu/en/firmware/tp-link-wr841nd/" class="urlextern" title="http://www.superwrt.eu/en/firmware/tp-link-wr841nd/"  rel="nofollow">http://www.superwrt.eu/en/firmware/tp-link-wr841nd/</a>
</p>

</div>

<h2 class="sectionedit43" id="tags">Tags</h2>
<div class="level2">

<p>
For some Help with the Tags, please have a look here: <a href="../../meta/tags" class="wikilink1" title="meta:tags">tags</a>
</p>
<div class="tags"><span>
	<a href="../../tag/fastethernet?do=showtag&amp;tag=FastEthernet" class="wikilink1" title="tag:fastethernet" rel="tag">FastEthernet</a>,
	<a href="../../tag/5port?do=showtag&amp;tag=5Port" class="wikilink1" title="tag:5port" rel="tag">5Port</a>,
	<a href="../../tag/serial?do=showtag&amp;tag=Serial" class="wikilink1" title="tag:serial" rel="tag">Serial</a>,
	<a href="../../tag/integrated?do=showtag&amp;tag=integrated" class="wikilink1" title="tag:integrated" rel="tag">integrated</a>,
	<a href="../../tag/802.11bgn?do=showtag&amp;tag=802.11bgn" class="wikilink1" title="tag:802.11bgn" rel="tag">802.11bgn</a>,
	<a href="../../tag/1wnic?do=showtag&amp;tag=1WNIC" class="wikilink1" title="tag:1wnic" rel="tag">1WNIC</a>,
	<a href="../../tag/ar9271?do=showtag&amp;tag=AR9271" class="wikilink1" title="tag:ar9271" rel="tag">AR9271</a>,
	<a href="../../tag/ath9k?do=showtag&amp;tag=ath9k" class="wikilink1" title="tag:ath9k" rel="tag">ath9k</a>,
	<a href="../../tag/2ant?do=showtag&amp;tag=2Ant" class="wikilink1" title="tag:2ant" rel="tag">2Ant</a>,
	<a href="../../tag/detachableantenna" class="wikilink1" title="tag:detachableantenna" rel="tag">DetachableAntenna</a>,
	<a href="../../tag/32ram?do=showtag&amp;tag=32RAM" class="wikilink1" title="tag:32ram" rel="tag">32RAM</a>,
	<a href="../../tag/4flash?do=showtag&amp;tag=4Flash" class="wikilink1" title="tag:4flash" rel="tag">4Flash</a>,
	<a href="../../tag/mips?do=showtag&amp;tag=MIPS" class="wikilink1" title="tag:mips" rel="tag">MIPS</a>,
	<a href="../../tag/mips32?do=showtag&amp;tag=MIPS32" class="wikilink1" title="tag:mips32" rel="tag">MIPS32</a>,
	<a href="../../tag/24k?do=showtag&amp;tag=24k" class="wikilink1" title="tag:24k" rel="tag">24k</a>,
	<a href="../../tag/qca9533?do=showtag&amp;tag=QCA9533" class="wikilink1" title="tag:qca9533" rel="tag">QCA9533</a>,
	<a href="../../tag/qca953x?do=showtag&amp;tag=QCA953x" class="wikilink1" title="tag:qca953x" rel="tag">QCA953x</a>
</span></div>

</div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>toh/tp-link/tl-wr841nd.txt</bdi> · Last modified: 2015/05/19 17:46 by <bdi>zorun</bdi></div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="tl-wr841nd?do=edit"  class="action source" accesskey="v" rel="nofollow" title="Show pagesource [V]"><span>Show pagesource</span></a></li><li><a href="tl-wr841nd?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="tl-wr841nd?do=backlink"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="tl-wr841nd#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license" class="urlextern">CC Attribution-Noncommercial-Share Alike 3.0 Unported</a></bdi></div>
    <div class="buttons">
        <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license"><img src="../../lib/images/license/button/cc-by-nc-sa.png" alt="CC Attribution-Noncommercial-Share Alike 3.0 Unported" /></a>        <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="../../lib/tpl/openwrt/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://www.php.net" title="Powered by PHP" ><img
            src="../../lib/tpl/openwrt/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="../../lib/tpl/openwrt/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="../../lib/tpl/openwrt/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="../../lib/tpl/openwrt/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="../../lib/exe/indexer.php?id=toh%253Atp-link%253Atl-wr841nd&amp;1432266257" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->
</body>
</html>
