<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>TP-Link TD-W8960N [OpenWrt Wiki]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="bcm63xx,bcm6358"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../lib/exe/opensearch.php" title="OpenWrt Wiki"/>
<link rel="start" href="../../index.html"/>
<link rel="contents" href="td-w8960n?do=index" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Recent changes" href="../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="../../feed.php?mode=list&amp;ns=toh:tp-link"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="../../_export/xhtml/toh/tp-link/td-w8960n"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="../../_export/raw/toh/tp-link/td-w8960n"/>
<link rel="canonical" href="td-w8960n"/>
<link rel="stylesheet" type="text/css" href="../../lib/exe/css.php?t=openwrt&amp;tseed=6f44f363dc87908d905dc56ff3acbfc4"/>
<script type="text/javascript">/*<![CDATA[*/var NS='toh:tp-link';var JSINFO = {"id":"toh:tp-link:td-w8960n","namespace":"toh:tp-link"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../lib/exe/js.php?tseed=6f44f363dc87908d905dc56ff3acbfc4"></script>
<script type="text/javascript" charset="utf-8">/*<![CDATA[*/jQuery(function(){
	for ( i=0; i < document.forms.length; i++ ) {
		if (document.forms[i].method == 'post') {
			var myElement = document.createElement('input');
			myElement.setAttribute('type', 'hidden');
			myElement.name = 'bb2_screener_';
			myElement.value = '1432266316 166.182.3.117';
			document.forms[i].appendChild(myElement);
		}
	}
});
/*!]]>*/</script>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="../../lib/tpl/openwrt/images/favicon.ico" />
<link rel="apple-touch-icon" href="../../lib/tpl/openwrt/images/apple-touch-icon.png" />
    </head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_openwrt     ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="td-w8960n#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="../../start"  accesskey="h" title="[H]"><img src="../../lib/tpl/openwrt/images/logo.png" width="386" height="98" alt="" /> <span>OpenWrt Wiki</span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="td-w8960n?do=register"  class="action register" rel="nofollow" title="Register">Register</a></li><li><a href="td-w8960n?do=login&amp;sectok=382740b13d95f946eed36caa57076b4a"  class="action login" rel="nofollow" title="Login">Login</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="../../start" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="../../doku.php" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="toh:tp-link:td-w8960n" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Show pagesource</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Login</option><option value="register">Register</option></optgroup></select><input type="submit" value="&gt;" /></div></form>            </div>
            <ul>
                <li><a href="td-w8960n?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a></li><li><a href="td-w8960n?do=media&amp;ns=toh%253Atp-link"  class="action media" rel="nofollow" title="Media Manager">Media Manager</a></li><li><a href="td-w8960n?do=index"  class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                            <div class="youarehere"><span class="bchead">You are here: </span><span class="home"><bdi><a href="../../start" class="wikilink1" title="start">OpenWrt Wiki</a></bdi></span> » <bdi><a href="../start" class="wikilink1" title="toh:start">Table of Hardware</a></bdi> » <bdi><a href="start" class="wikilink1" title="toh:tp-link:start">TP-Link</a></bdi> » <bdi><span class="curid"><a href="td-w8960n" class="wikilink1" title="toh:tp-link:td-w8960n">TP-Link TD-W8960N</a></span></bdi></div>
                                    <div class="plugin_multilingual">
        <ul>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/cz/toh/tp-link/td-w8960n" class="media" title="cz:toh:tp-link:td-w8960n"><img src="../../lib/exe/fetch.php?cache=&amp;tok=aff589&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fcz.gif" class="media" title="Čeština (Czech)" alt="Čeština (Czech)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/de/toh/tp-link/td-w8960n" class="media" title="de:toh:tp-link:td-w8960n"><img src="../../lib/exe/fetch.php?cache=&amp;tok=e24010&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fde.gif" class="media" title="Deutsch (German)" alt="Deutsch (German)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <span class="curid"><a href="td-w8960n" class="media" title="toh:tp-link:td-w8960n"><img src="../../lib/exe/fetch.php?cache=&amp;tok=2a37ae&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fgb.gif" class="media" title="English" alt="English" /></a></span>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/es/toh/tp-link/td-w8960n" class="media" title="es:toh:tp-link:td-w8960n"><img src="../../lib/exe/fetch.php?cache=&amp;tok=46c004&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fmx.gif" class="media" title="Español (Spanish, Mexico)" alt="Español (Spanish, Mexico)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/fr/toh/tp-link/td-w8960n" class="media" title="fr:toh:tp-link:td-w8960n"><img src="../../lib/exe/fetch.php?cache=&amp;tok=a5beba&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ffr.gif" class="media" title="Français (French)" alt="Français (French)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/hu/toh/tp-link/td-w8960n" class="media" title="hu:toh:tp-link:td-w8960n"><img src="../../lib/exe/fetch.php?cache=&amp;tok=6b5470&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fhu.gif" class="media" title="Magyar (Hungarian)" alt="Magyar (Hungarian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/jp/toh/tp-link/td-w8960n" class="media" title="jp:toh:tp-link:td-w8960n"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f999fc&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fjp.gif" class="media" title="日本語 (Japanese)" alt="日本語 (Japanese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pl/toh/tp-link/td-w8960n" class="media" title="pl:toh:tp-link:td-w8960n"><img src="../../lib/exe/fetch.php?cache=&amp;tok=c805c0&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fpl.gif" class="media" title="Poliski (Polish)" alt="Poliski (Polish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pt-br/toh/tp-link/td-w8960n" class="media" title="pt-br:toh:tp-link:td-w8960n"><img src="../../lib/exe/fetch.php?cache=&amp;tok=13127d&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fbr.gif" class="media" title="Português brasileiro (Portuguese, Brasil)" alt="Português brasileiro (Portuguese, Brasil)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/ru/toh/tp-link/td-w8960n" class="media" title="ru:toh:tp-link:td-w8960n"><img src="../../lib/exe/fetch.php?cache=&amp;tok=66ab5e&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fru.gif" class="media" title="Русский (Russsian)" alt="Русский (Russsian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/tr/toh/tp-link/td-w8960n" class="media" title="tr:toh:tp-link:td-w8960n"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f4beed&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ftr.gif" class="media" title="Tϋrkçe (Turkish)" alt="Tϋrkçe (Turkish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-cn/toh/tp-link/td-w8960n" class="media" title="zh-cn:toh:tp-link:td-w8960n"><img src="../../lib/exe/fetch.php?cache=&amp;tok=93625a&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-cn.gif" class="media" title="官話/官话 (Chinese)" alt="官話/官话 (Chinese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-tw/toh/tp-link/td-w8960n" class="media" title="zh-tw:toh:tp-link:td-w8960n"><img src="../../lib/exe/fetch.php?cache=&amp;tok=b56198&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-tw.gif" class="media" title="臺灣華語 (Taiwanese)" alt="臺灣華語 (Taiwanese)" /></a>
              </div>
            </div>
          </li>
        </ul>
      </div>
        </div>
    
    
    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>toh:tp-link:td-w8960n</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="td-w8960n#hardware_highlights">Hardware Highlights</a></div></li>
<li class="level1"><div class="li"><a href="td-w8960n#hardware_picture">Hardware Picture</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="td-w8960n#info">Info</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="td-w8960n#installation">Installation</a></div></li>
<li class="level1"><div class="li"><a href="td-w8960n#revert_to_original_firmware">Revert to original firmware</a></div></li>
<li class="level1"><div class="li"><a href="td-w8960n#serial">Serial</a></div></li>
<li class="level1"><div class="li"><a href="td-w8960n#how_to_open_the_case">How to open the case</a></div></li>
<li class="level1"><div class="li"><a href="td-w8960n#hardware_mods">Hardware mods</a></div></li>
<li class="level1"><div class="li"><a href="td-w8960n#debug_logs">Debug Logs</a></div></li>
<li class="level1"><div class="li"><a href="td-w8960n#bootlogs">Bootlogs</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="td-w8960n#oem_bootlog">OEM bootlog</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="td-w8960n#tags">Tags</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="tp-link_td-w8960n">TP-Link TD-W8960N</h1>
<div class="level1">

<p>
300Mbps Wireless N ADSL2+ Modem Router
</p>

<p>
Forum discussion <a href="https://forum.openwrt.org/viewtopic.php?pid=179455" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?pid=179455"  rel="nofollow">here</a>
</p>

<p>
OEM source code available at:<br/>

<a href="http://www.tp-link.com/resources/GPL/TD-W8960Nv1.0_RELEASE_GPL_CODE.tar.gz" class="urlextern" title="http://www.tp-link.com/resources/GPL/TD-W8960Nv1.0_RELEASE_GPL_CODE.tar.gz"  rel="nofollow">TD-W8960Nv1.0_RELEASE_GPL_CODE.tar.gz</a>
</p>

</div>

<h2 class="sectionedit2" id="hardware_highlights">Hardware Highlights</h2>
<div class="level2">

<p>
(for version 1 and version 3)
</p>
<div class="table sectionedit3"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> CPU </th><th class="col1"> Ram </th><th class="col2"> Flash </th><th class="col3"> Network </th><th class="col4"> Wireless NIC </th><th class="col5"> Wireless Standard </th><th class="col6"> USB </th><th class="col7"> Serial </th><th class="col8"> JTag </th><th class="col9"> ADSL2+ Modem </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> BCM6358@300MHz </td><td class="col1">32 <abbr title="Megabyte">MB</abbr> </td><td class="col2">4 <abbr title="Megabyte">MB</abbr> </td><td class="col3"> 4x 100mbps </td><td class="col4"> BCM4351 (onboard) </td><td class="col5"> b/g/n </td><td class="col6"> NO </td><td class="col7"> YES </td><td class="col8"> YES </td><td class="col9"> YES </td>
	</tr>
</table></div>

</div>

<h2 class="sectionedit4" id="hardware_picture">Hardware Picture</h2>
<div class="level2">

<p>
<a href="../../_detail/toh/tp-link/w8960n.internal.jpg?id=toh%253Atp-link%253Atd-w8960n" class="media" title="toh:tp-link:w8960n.internal.jpg"><img src="../../_media/toh/tp-link/w8960n.internal.jpg" class="media" alt="" /></a>
</p>

</div>

<h3 class="sectionedit5" id="info">Info</h3>
<div class="level3">
<div class="table sectionedit6"><table class="inline">
	<tr class="row0">
		<td class="col0 leftalign"> <strong><a href="http://en.wikipedia.org/wiki/Instruction set" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Instruction set">Architecture</a>:</strong>   </td><td class="col1"> <a href="http://en.wikipedia.org/wiki/MIPS architecture" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/MIPS architecture">MIPS</a> </td>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> <strong>Vendor:</strong>                      </td><td class="col1"> <a href="http://en.wikipedia.org/wiki/Broadcom" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Broadcom">Broadcom</a> </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> <strong><a href="../../doc/techref/bootloader.1" class="wikilink1" title="doc:techref:bootloader">Bootloader</a>:</strong>  </td><td class="col1"> <a href="../../doc/techref/bootloader/cfe" class="wikilink1" title="doc:techref:bootloader:cfe">CFE</a> </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <strong>Board ID:</strong>                    </td><td class="col1"> 96358VW2 </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> <strong><a href="../../doc/hardware/soc.1" class="wikilink1" title="doc:hardware:soc">System-On-Chip</a>:</strong>  </td><td class="col1"> BCM6358 </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> <strong><a href="../../doc/hardware/cpu" class="wikilink1" title="doc:hardware:cpu">CPU</a>/Speed</strong>        </td><td class="col1"> BMIPS4350 V1.0 / 300 Mhz <a href="../../doc/hardware/soc/soc.broadcom.bcm63xx/smp" class="wikilink1" title="doc:hardware:soc:soc.broadcom.bcm63xx:smp">BMIPS Dual Core</a> </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> <strong>Flash-Chip:</strong>      </td><td class="col1"> Spansion S25FL032A (on v1.3 hardware) </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> <strong>Flash size:</strong>      </td><td class="col1"> 4 MiB </td>
	</tr>
	<tr class="row8">
		<td class="col0 leftalign"> <strong>RAM-Chip :</strong>             </td><td class="col1"> DDR-400 </td>
	</tr>
	<tr class="row9">
		<td class="col0 leftalign"> <strong>RAM size :</strong>             </td><td class="col1"> 32 MiB </td>
	</tr>
	<tr class="row10">
		<td class="col0 leftalign"> <strong>Wireless:</strong>        </td><td class="col1"> Broadcom BCM4351 802.11b/g/n (onboard) </td>
	</tr>
	<tr class="row11">
		<td class="col0 leftalign"> <strong>Ethernet:</strong>        </td><td class="col1"> Broadcom  <a href="../../_media/toh/bcm5325_pinout.png" class="urlextern" title="http://wiki.openwrt.org/_media/toh/bcm5325_pinout.png"  rel="nofollow">BCM5325</a> w/ vlan support <a href="../../doc/uci/network#swconfig" class="wikilink1" title="doc:uci:network">swconfig</a> </td>
	</tr>
	<tr class="row12">
		<td class="col0 leftalign"> <strong>Internet:</strong>    </td><td class="col1 leftalign"> ADSL2+  </td>
	</tr>
	<tr class="row13">
		<td class="col0 leftalign"> <strong>USB:</strong>         </td><td class="col1"> no </td>
	</tr>
	<tr class="row14">
		<td class="col0 leftalign"> <strong><a href="../../OpenWrtDocs/Customizing/Hardware/Serial_Console" class="wikilink1" title="doc:hardware:port.serial">Serial</a>:</strong>  </td><td class="col1"> <a href="td-w8960n#serial" title="toh:tp-link:td-w8960n ↵" class="wikilink1">Yes</a> </td>
	</tr>
	<tr class="row15">
		<td class="col0 leftalign"> <strong><a href="../../doc/hardware/port.jtag" class="wikilink1" title="doc:hardware:port.jtag">JTAG</a>:</strong>      </td><td class="col1 leftalign"> <a href="td-w8960n#jtag" title="toh:tp-link:td-w8960n ↵" class="wikilink1">Yes</a>  </td>
	</tr>
</table></div>

</div>

<h2 class="sectionedit7" id="installation">Installation</h2>
<div class="level2">

<p>
→ <strong>WARNING! CURRENTLY THIS WILL BRICK YOUR ROUTER</strong> ← <br/>

</p>
<ol>
<li class="level1"><div class="li"> Download the latest openwrt-96358VW2-generic-squashfs-cfe.bin from <a href="http://downloads.openwrt.org/snapshots/trunk/brcm63xx/" class="urlextern" title="http://downloads.openwrt.org/snapshots/trunk/brcm63xx/"  rel="nofollow">OpenWrt trunk</a>.</div>
</li>
<li class="level1"><div class="li"> Use a tftp <strong>CLIENT</strong> to upload the image <em>(for example tftp2.exe on windows)</em></div>
</li>
<li class="level1"><div class="li"> Wait for it to flash, router will reboot and enter in recovery mode</div>
</li>
<li class="level1"><div class="li"> Go to <a href="http://192.168.1.1" class="urlextern" title="http://192.168.1.1"  rel="nofollow">http://192.168.1.1</a> and reflash the openwrt-96358VW2-generic-squashfs-cfe.bin image</div>
</li>
<li class="level1"><div class="li"> The router should now boot to openwrt</div>
</li>
</ol>

<p>
Alternative mode (you have to open the router case):
</p>
<ol>
<li class="level1"><div class="li"> Flash using a Serial TTL adapter and CFE bootloader.</div>
</li>
<li class="level1"><div class="li"> Setup a TFTP <strong>server</strong> on your computer.</div>
</li>
<li class="level1"><div class="li"> Using the serial connection, stop the boot process by pressing any key when asked</div>
</li>
<li class="level1"><div class="li"> Once you are on the CFE prompt do &quot;flashimage hostip:image.bin&quot; <em>(example CFE &gt; flashimage 192.168.1.2:firmware.bin)</em></div>
</li>
<li class="level1"><div class="li"> The device should automatically reboot to openwrt</div>
</li>
</ol>

</div>

<h2 class="sectionedit8" id="revert_to_original_firmware">Revert to original firmware</h2>
<div class="level2">

<p>
You will need an active serial connection!
</p>
<ol>
<li class="level1"><div class="li"> Download the latest firmware from the TP-LINK servers</div>
</li>
<li class="level1"><div class="li"> Using an hex-editor remove everything from offset 00000000 to 000001FF <em>(this means that now the 1st character of the firmware is a 6 (or 36 in BIN))</em></div>
</li>
<li class="level1"><div class="li"> Save that modified original image</div>
</li>
<li class="level1"><div class="li"> Go to the CFE prompt and do &quot;flashimage hostip:image.bin&quot;</div>
</li>
<li class="level1"><div class="li"> The device should automatically reboot to original tplink firmware</div>
</li>
</ol>

</div>

<h2 class="sectionedit9" id="serial">Serial</h2>
<div class="level2">

<p>
→ <a href="../../OpenWrtDocs/Customizing/Hardware/Serial_Console" class="wikilink1" title="doc:hardware:port.serial">port.serial</a>
Pin: TX,RX,GND,VCC (3.3v)<br/>

Speed: 115200 8N1<br/>

</p>

<p>
<strong>Don&#039;t connect VCC!</strong> Just use TX,RX and GND and then power on the device.<br/>

Also, you <strong>MUST</strong> short those 2 pads marked in yellow to enable serial RX and TX.<br/>

Don&#039;t forget that RX connects to the RS232TTL-TX and TX to the RS232TTL-RX!<br/>

</p>

<p>
<a href="../../_detail/toh/tp-link/td-w8960n.rs232.ttl.jpg?id=toh%253Atp-link%253Atd-w8960n" class="media" title="toh:tp-link:td-w8960n.rs232.ttl.jpg"><img src="../../_media/toh/tp-link/td-w8960n.rs232.ttl.jpg" class="media" alt="" /></a><br/>

</p>

</div>

<h2 class="sectionedit10" id="how_to_open_the_case">How to open the case</h2>
<div class="level2">

<p>
TD-W8960N is a little tricky to open.
</p>
<ol>
<li class="level1"><div class="li"> Below 2 rubber feets there are 2 screws - remove them</div>
</li>
<li class="level1"><div class="li"> Using your hands and a small screwdriver, try to open the upper and lower part (both are white) so that you can grab the 2 black laterals and push them a little. <strong>Don&#039;t force it!</strong></div>
</li>
<li class="level1"><div class="li"> Near the leds, there are 2 snaps. Using a flat screwdriver, try to open them <strong>from the inside</strong>. If you don&#039;t have space, check if the 2 antenna cables are stuck on any capacitor.</div>
</li>
<li class="level1"><div class="li"> The front part should be now loose and all you need is to pull the white upper cover.</div>
</li>
</ol>

</div>

<h2 class="sectionedit11" id="hardware_mods">Hardware mods</h2>
<div class="level2">

<p>
Because TD-W8960N is an unit that gets way too hot, adding 2 heatsinks is a good idea.
</p>
<ol>
<li class="level1"><div class="li"> Add 1 heatsink to the cpu (look at the above image, it&#039;s the big square chip on the center)</div>
</li>
<li class="level1"><div class="li"> Add 1 heatsink to the switch (also look at the above image, it&#039;s the left chip with &quot;broadcom&quot; written on it)</div>
</li>
</ol>

<p>
This should prevent any overheating signs.
</p>

</div>

<h2 class="sectionedit12" id="debug_logs">Debug Logs</h2>
<div class="level2">

<p style="padding: 10px;border:1px solid grey;height:600px;font:10px/14px Georgia, Garamond, Serif;overflow:Auto;background-color:#FFFFFF">
<code>
# cat /proc/cpuinfo
 system type : 96358VW2
 processor : 0
 cpu model : BCM6358 V1.0
 BogoMIPS : 297.98
 wait instruction : no
 microsecond timers : yes
 tlb_entries : 32
 extra interrupt vector : no
 hardware watchpoint : no
 ASEs implemented :
 VCED exceptions : not available
 VCEI exceptions : not available

 unaligned exceptions : 8260

# cat /proc/mtd
dev:    size   erasesize  name
mtd0: 00313000 00313000 "Physically mapped flash"

# cat /proc/partitions
 major minor #blocks name

 31 0 3148 mtdblock0 

# cat /proc/meminfo
 MemTotal: 29820 kB
 MemFree: 9148 kB
 Buffers: 2320 kB
 Cached: 7860 kB
 SwapCached: 0 kB
 Active: 6868 kB
 Inactive: 6576 kB
 SwapTotal: 0 kB
 SwapFree: 0 kB
 Dirty: 0 kB
 Writeback: 0 kB
 AnonPages: 3276 kB
 Mapped: 2684 kB
 Slab: 3092 kB
 SReclaimable: 508 kB
 SUnreclaim: 2584 kB
 PageTables: 384 kB
 NFS_Unstable: 0 kB
 Bounce: 0 kB
 CommitLimit: 14908 kB
 Committed_AS: 7320 kB
 VmallocTotal: 1032148 kB
 VmallocUsed: 1732 kB
 VmallocChunk: 1029348 kB

# cat /proc/version
Linux version 2.6.21.5 (root@localhost.localdomain) (gcc version 4.2.3) #4 Fri Oct 28 18:30:25 CST 2011

---------------------------------------------------------------------
Logs at boot time (RS232ttl)
 CFE version 1.0.37-102.9 for BCM96358 (32bit,SP,BE)
 Build Date: äş 12ć 29 20:10:30 CST 2009 (root@localhost.localdomain)
 Copyright (C) 2000-2009 Broadcom Corporation.

 Serial flash device: name S25FL032A, id 0x0115, size 4096KB
 CPU type 0x2A010: 300MHz, Bus: 133MHz, Ref: 64MHz
 CPU running TP0
 Total memory: 33554432 bytes (32MB)
 Boot Address 0xbfc00000


 Param0 : 192.168.1.1:ffffff00
 Param1 : 192.168.1.100
 Param2 :
 Param3 : f
 Param4 : vmlinux
 Param5 : bcm963xx_fs_kernel
 Param6 : 1
 Param7 : 0
 Num = 8;gNumBootParams = 8
 Board IP address : 192.168.1.1:ffffff00
 Host IP address : 192.168.1.100
 Gateway IP address :
 Run from flash/host (f/h) : f
 Default host run file name : vmlinux
 Default host flash file name : bcm963xx_fs_kernel
 Boot delay (0-9 seconds) : 1
 Board Id (0-5) : 96358VW2
 Number of MAC Addresses (1-32) : 11
 Base MAC Address : 00:23:cd:##:##:##
 PSI Size (1-64) KBytes : 24
 Main Thread Number [0|1] : 0
 Device Pin : "#######"

 * * * Press any key to stop auto run (1 seconds) * * *
 Auto run second count down: 1
 web info: Waiting for connection on socket 0.
 CFE>

 CFE> help
 Available commands:

 sm Set memory or registers.
 dm Dump memory or registers.
 w Write the whole image start from beginning of the flash
 e Erase [n]vram or [a]ll flash except bootrom
 r Run program from flash image or from host depend on [f/h] flag
 p Print boot line and board parameter info
 c Change booline parameters
 f Write image to the flash
 i Erase persistent storage data
 b Change board parameters
 reset Reset the board
 flashimage Flashes a compressed image after the bootloader.
 help Obtain help for CFE commands

 For more information about a command, enter 'help command-name'
 * * * command status = 0
</code>
</p>

</div>

<h2 class="sectionedit13" id="bootlogs">Bootlogs</h2>
<div class="level2">

</div>

<h3 class="sectionedit14" id="oem_bootlog">OEM bootlog</h3>
<div class="level3">

<p style="padding: 10px;border:1px solid grey;height:600px;font:10px/14px Georgia, Garamond, Serif;overflow:Auto;background-color:#FFFFFF">
<code>CFE> 
Booting from only image (0xbfc10000) ...
Code Address: 0x80010000, Entry Address: 0x8021a000
Decompression OK!
Entry at 0x8021a000
Closing network.
Closing DMA Channels.
Starting program at 0x8021a000
Linux version 2.6.21.5 (root@localhost.localdomain) (gcc version 4.2.3) #2 Wed Aug 25 17:14:28 CST 2010
Serial flash device: name S25FL032A, id 0x0115, size 4096KB
96358VW2 prom init
CPU revision is: 0002a010
Determined physical RAM map:
memory: 01fa0000 @ 00000000 (usable)
On node 0 totalpages: 8096
DMA zone: 32 pages used for memmap
DMA zone: 0 pages reserved
DMA zone: 4064 pages, LIFO batch:0
Normal zone: 31 pages used for memmap
Normal zone: 3969 pages, LIFO batch:0
Built 1 zonelists.  Total pages: 8033
Kernel command line: root=31:0 ro noinitrd console=ttyS0,115200
brcm mips: enabling icache and dcache...
Primary instruction cache 32kB, physically tagged, 2-way, linesize 16 bytes.
Primary data cache 16kB, 2-way, linesize 16 bytes.
Synthesized TLB refill handler (21 instructions).
Synthesized TLB load handler fastpath (33 instructions).
Synthesized TLB store handler fastpath (33 instructions).
Synthesized TLB modify handler fastpath (32 instructions).
PID hash table entries: 128 (order: 7, 512 bytes)
Using 150.000 MHz high precision timer.
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Memory: 29732k/32384k available (1762k kernel code, 2652k reserved, 321k data, 88k init, 0k highmem)
KLOB Pool 1 Initialized: 1048576 bytes
Calibrating delay loop... 297.98 BogoMIPS (lpj=148992)
Mount-cache hash table entries: 512
NET: Registered protocol family 16
Total Flash size: 4096K with 64 sectors
File system address: 0xbfc10100
registering PCI controller with io_map_base unset
BLOG v1.0 Initialized
NET: Registered protocol family 8
NET: Registered protocol family 20
Time: MIPS clocksource has been installed.
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
squashfs: version 3.2-r2 (2007/01/15) Phillip Lougher
squashfs: LZMA suppport for slax.org by jro
io scheduler noop registered (default)
PPP generic driver version 2.4.2
NET: Registered protocol family 24
bcm963xx_mtd driver v1.0
brcmboard: brcm_board_init entry
SES: Button Interrupt 0x3 is enabled
SES: LED GPIO 0x4 is enabled
irq.c: reset_fac_irq is set to low_trigger.
Serial: BCM63XX driver $Revision: 3.00 $
ttyS0 at MMIO 0xfffe0100 (irq = 10) is a BCM63XX
ttyS1 at MMIO 0xfffe0120 (irq = 11) is a BCM63XX
bcmxtmrt: Broadcom BCM6358A1 ATM Network Device v0.1 Aug 25 2010 17:14:19
TCP cubic registered
Initializing XFRM netlink socket
NET: Registered protocol family 1
NET: Registered protocol family 17
NET: Registered protocol family 15
Ebtables v2.0 registered
802.1Q VLAN Support v1.8 Ben Greear
All bugs added by David S. Miller
VFS: Mounted root (squashfs filesystem) readonly.
Freeing unused kernel memory: 88k freed
init started:  BusyBox v1.00 (2010.08.12-01:27+0000) multi-call binary


BusyBox v1.00 (2010.08.12-01:27+0000) Built-in shell (msh)
Enter 'help' for a list of built-in commands.


Loading drivers and kernel modules...

pktflow: module license 'Proprietary' taints kernel.
Broadcom Packet Flow Cache learning via BLOG enabled.
Created Proc FS /procfs/fcache
Constructed Broadcom Packet Flow Cache v0.1 Feb 26 2009 14:21:08
bcmxtmcfg: bcmxtmcfg_init entry
adsl: adsl_init entry
Broadcom BCMPROCFS v1.0 initialized
Broadcom BCM6358A1 Ethernet Network Device v0.3 Aug 25 2010 17:14:08
Config Ethernet Switch Through MDIO Pseudo PHY Interface
ethsw: found bcm5325e!
dgasp: kerSysRegisterDyingGaspHandler: eth0 registered
rate ctrl page 0x35, addr 0x02: 0
8021x_1 page 0x0A, addr 0x4C: 0
8021x_2 page 0x0A, addr 0x4E: 0
eth0: MAC Address: 00:23:CD:20:16:FF
PCI: Enabling device 0000:00:01.0 (0000 -> 0002)
PCI: Setting latency timer of device 0000:00:01.0 to 64
wl0: Broadcom BCM4351 802.11 Wireless Controller 5.10.85.0.cpe4.402.0
dgasp: kerSysRegisterDyingGaspHandler: wl0 registered

===== Release Version 4.02L.03 (build timestamp 100825_1906) =====

wl_cnt= 1
device eth0 is not a slave of br0
device eth0 entered promiscuous mode
br0: port 1(eth0) entering learning state
br0: topology change detected, propagating
br0: port 1(eth0) entering forwarding state
WLmngr Daemon is running
optarg=0 shmId=0
device wl0 is not a slave of br0
device wl0 entered promiscuous mode
br0: port 2(wl0) entering learning state
br0: topology change detected, propagating
br0: port 2(wl0) entering forwarding state
BcmAdsl_Initialize=0xC006B1F8, g_pFnNotifyCallback=0xC0088744
AnnexCParam=0x00000000 AnnexAParam=0x00000980 adsl2=0x00000000
KLOB extended to 2 pools
pSdramPHY=0xA1FFFFF8, 0xBE9A 0xDEADBEEF
AdslCoreSharedMemInit: shareMemAvailable=21712
AdslCoreHwReset:  AdslOemDataAddr = 0xA1FEF96C
AnnexCParam=0x00000000 AnnexAParam=0x00000980 adsl2=0x00000000
dgasp: kerSysRegisterDyingGaspHandler: dsl0 registered
KLOB extended to 3 pools
KLOB extended to 4 pools
KLOB extended to 5 pools
KLOB extended to 6 pools
KLOB extended to 7 pools
KLOB extended to 8 pools
wlctl -i wl0 phytype > /var/wl0
wlctl -i wl0 revinfo > /var/wl0
wlctl -i wl0 bands > /var/wl0bands
wlctl ver > /var/wlver
wlctl -i wl0 cap > /var/wl0cap
device wl0 left promiscuous mode
br0: port 2(wl0) entering disabled state
device wl0 is not a slave of br0
device wl0 entered promiscuous mode
br0: port 2(wl0) entering learning state
br0: topology change detected, propagating
br0: port 2(wl0) entering forwarding state
interface wl0.1 does not exist!
interface wl0.2 does not exist!
interface wl0.3 does not exist!
Scratch pad is not initialized.
br0: port 2(wl0) entering disabled state
WPS Device PIN = 23402034
wlctl -i wl0 phy_watchdog 0
wlctl -i wl0 wds none
wlctl -i wl0 up
wlctl -i wl0 down
wlctl -i wl0 mbss 0
wlctl -i wl0 bss -C 0 down
wlctl -i wl0 bss -C 1 down
wlctl -i wl0 bss -C 2 down
wlctl -i wl0 bss -C 3 down
wlctl -i wl0 ssid -C 0 's''k''y'
Setting SSID "sky"
wlctl -i wl0 ssid -C 1 'w''l''0''_''G''u''e''s''t''1'
Setting SSID "wl0_Guest1"
wlctl -i wl0 ssid -C 2 'w''l''0''_''G''u''e''s''t''2'
Setting SSID "wl0_Guest2"
wlctl -i wl0 ssid -C 3 'w''l''0''_''G''u''e''s''t''3'
Setting SSID "wl0_Guest3"
wlctl -i wl0 cur_etheraddr 00:23:CD:20:16:FF  2>/dev/null
wlctl -i wl0.1 cur_etheraddr 00:23:CD:20:16:FF  2>/dev/null
wlctl -i wl0.2 cur_etheraddr 00:23:CD:20:16:FF  2>/dev/null
wlctl -i wl0.3 cur_etheraddr 00:23:CD:20:16:FF  2>/dev/null
wlctl -i wl0  ap 1
wlctl -i wl0 infra 1
wlctl -i wl0 closed 0
wlctl -i wl0 country PL
wlctl -i wl0  band b
wlctl -i wl0 regulatory 0
wlctl -i wl0 radar 0 2>/dev/null
wlctl -i wl0 spect 0 2>/dev/null
wlctl -i wl0 nmode -1
wlctl -i wl0 mimo_bw_cap 1
wlctl -i wl0 chanspec -c 7 -b 2 -w 40 -s -1
Chanspec set to 0x2d07
wlctl -i wl0 wpa_cap -C 0 > /var/wpa_cap0
wlctl -i wl0 wpa_cap -C 0 0 2>/dev/null
wlctl -i wl0 wpa_cap -C 1 > /var/wpa_cap0
wlctl -i wl0 wpa_cap -C 1 0 2>/dev/null
wlctl -i wl0 wpa_cap -C 2 > /var/wpa_cap0
wlctl -i wl0 wpa_cap -C 2 0 2>/dev/null
wlctl -i wl0 wpa_cap -C 3 > /var/wpa_cap0
wlctl: Unsupported
wlctl -i wl0 wpa_cap -C 3 0 2>/dev/null
wlctl -i wl0 maxassoc 50
wlctl -i wl0 bss_maxassoc 50
wlctl -i wl0 gmode Auto
wlctl -i wl0 gmode_protection_override -1
wlctl -i wl0 gmode_protection_control 2
wlctl -i wl0 nmode_protection_override -1
wlctl -i wl0 protection_control 2
wlctl -i wl0 nreqd 0
wlctl -i wl0 wme 0 2>/dev/null
wlctl -i wl0 afterburner_override 0 2>/dev/null
wlctl -i wl0 ampdu 1
wlctl -i wl0 amsdu 1
wlctl -i wl0 afterburner_override 0
wlctl -i wl0 wme 1 2>/dev/null
wlctl -i wl0 wme_noack 0 2>/dev/null
wlctl -i wl0 wme_apsd 1 2>/dev/null
wlctl -i wl0 wme_bss_disable 0
wlctl -i wl0 rate 0
wlctl -i wl0 bg_rate 0
wlctl -i wl0 leddc 0 2>/dev/null
wlctl -i wl0 mrate -1
wlctl -i wl0 bg_mrate -1
wlctl -i wl0 rateset default
wlctl -i wl0 rtsthresh 2347
wlctl -i wl0 fragthresh 2346
wlctl -i wl0 dtim 1
wlctl -i wl0  bi 100
wlctl -i wl0 frameburst 1
wlctl -i wl0 ap_isolate 0
wlctl -i wl0 pwr_percent 100
wlctl -i wl0 wmf_bss_enable 0
wlctl -i wl0.1 wmf_bss_enable 0
wlctl -i wl0.2 wmf_bss_enable 0
wlctl -i wl0.3 wmf_bss_enable 0
wlctl -i wl0 mac none
wlctl -i wl0 macmode 0
wlctl -i wl0 up
wlctl -i wl0 csscantimer 0
wlctl -i wl0 chanspec > /var/curchaspec0
br0: port 2(wl0) entering learning state
br0: topology change detected, propagating
br0: port 2(wl0) entering forwarding state
device wl0 left promiscuous mode
br0: port 2(wl0) entering disabled state
device wl0 is not a slave of br0
device wl0 entered promiscuous mode
br0: port 2(wl0) entering learning state
br0: topology change detected, propagating
br0: port 2(wl0) entering forwarding state
device wl0.1 is not a slave of br0
device wl0.2 is not a slave of br0
device wl0.3 is not a slave of br0
Reaped 415
UPnP::upnp_init:UPnP daemon is ready to run
UPnP::upnp_request_handler:UPNP_CMD_DEV_ADD
UPnP::upnp_device_attach:br0: attach WFADevice.xml
UPnP::upnp_request_handler:Device command.
</code>
</p>

</div>

<h2 class="sectionedit15" id="tags">Tags</h2>
<div class="level2">
<div class="tags"><span>
	<a href="../../tag/bcm63xx?do=showtag&amp;tag=bcm63xx" class="wikilink1" title="tag:bcm63xx" rel="tag">bcm63xx</a>,
	<a href="../../tag/bcm6358?do=showtag&amp;tag=bcm6358" class="wikilink1" title="tag:bcm6358" rel="tag">bcm6358</a>
</span></div>

</div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>toh/tp-link/td-w8960n.txt</bdi> · Last modified: 2015/05/14 11:59 by <bdi>tmomas</bdi></div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="td-w8960n?do=edit"  class="action source" accesskey="v" rel="nofollow" title="Show pagesource [V]"><span>Show pagesource</span></a></li><li><a href="td-w8960n?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="td-w8960n?do=backlink"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="td-w8960n#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license" class="urlextern">CC Attribution-Noncommercial-Share Alike 3.0 Unported</a></bdi></div>
    <div class="buttons">
        <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license"><img src="../../lib/images/license/button/cc-by-nc-sa.png" alt="CC Attribution-Noncommercial-Share Alike 3.0 Unported" /></a>        <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="../../lib/tpl/openwrt/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://www.php.net" title="Powered by PHP" ><img
            src="../../lib/tpl/openwrt/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="../../lib/tpl/openwrt/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="../../lib/tpl/openwrt/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="../../lib/tpl/openwrt/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="../../lib/exe/indexer.php?id=toh%253Atp-link%253Atd-w8960n&amp;1432266316" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->
</body>
</html>
