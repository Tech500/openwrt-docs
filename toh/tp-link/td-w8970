<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>TP-Link TD-W8970 [OpenWrt Wiki]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="lantiq,vr9,mips,mips32,34kc,gigabitethernet,1nic,1wnic,4port,adsl2,vdsl2,usb,2usb,jtag,serial,802.11bgn,ath9k,3ant,detachableantenna,64ram,8flash"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../lib/exe/opensearch.php" title="OpenWrt Wiki"/>
<link rel="start" href="../../index.html"/>
<link rel="contents" href="td-w8970?do=index" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Recent changes" href="../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="../../feed.php?mode=list&amp;ns=toh:tp-link"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="../../_export/xhtml/toh/tp-link/td-w8970"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="../../_export/raw/toh/tp-link/td-w8970"/>
<link rel="canonical" href="td-w8970"/>
<link rel="stylesheet" type="text/css" href="../../lib/exe/css.php?t=openwrt&amp;tseed=6f44f363dc87908d905dc56ff3acbfc4"/>
<script type="text/javascript">/*<![CDATA[*/var NS='toh:tp-link';var JSINFO = {"id":"toh:tp-link:td-w8970","namespace":"toh:tp-link"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../lib/exe/js.php?tseed=6f44f363dc87908d905dc56ff3acbfc4"></script>
<script type="text/javascript" charset="utf-8">/*<![CDATA[*/jQuery(function(){
	for ( i=0; i < document.forms.length; i++ ) {
		if (document.forms[i].method == 'post') {
			var myElement = document.createElement('input');
			myElement.setAttribute('type', 'hidden');
			myElement.name = 'bb2_screener_';
			myElement.value = '1432269501 166.182.3.249';
			document.forms[i].appendChild(myElement);
		}
	}
});
/*!]]>*/</script>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="../../lib/tpl/openwrt/images/favicon.ico" />
<link rel="apple-touch-icon" href="../../lib/tpl/openwrt/images/apple-touch-icon.png" />
    </head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_openwrt     ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="td-w8970#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="../../start"  accesskey="h" title="[H]"><img src="../../lib/tpl/openwrt/images/logo.png" width="386" height="98" alt="" /> <span>OpenWrt Wiki</span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="td-w8970?do=register"  class="action register" rel="nofollow" title="Register">Register</a></li><li><a href="td-w8970?do=login&amp;sectok=382740b13d95f946eed36caa57076b4a"  class="action login" rel="nofollow" title="Login">Login</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="../../start" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="../../doku.php" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="toh:tp-link:td-w8970" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Show pagesource</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Login</option><option value="register">Register</option></optgroup></select><input type="submit" value="&gt;" /></div></form>            </div>
            <ul>
                <li><a href="td-w8970?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a></li><li><a href="td-w8970?do=media&amp;ns=toh%253Atp-link"  class="action media" rel="nofollow" title="Media Manager">Media Manager</a></li><li><a href="td-w8970?do=index"  class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                            <div class="youarehere"><span class="bchead">You are here: </span><span class="home"><bdi><a href="../../start" class="wikilink1" title="start">OpenWrt Wiki</a></bdi></span> » <bdi><a href="../start" class="wikilink1" title="toh:start">Table of Hardware</a></bdi> » <bdi><a href="start" class="wikilink1" title="toh:tp-link:start">TP-Link</a></bdi> » <bdi><span class="curid"><a href="td-w8970" class="wikilink1" title="toh:tp-link:td-w8970">TP-Link TD-W8970</a></span></bdi></div>
                                    <div class="plugin_multilingual">
        <ul>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/cz/toh/tp-link/td-w8970" class="media" title="cz:toh:tp-link:td-w8970"><img src="../../lib/exe/fetch.php?cache=&amp;tok=aff589&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fcz.gif" class="media" title="Čeština (Czech)" alt="Čeština (Czech)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/de/toh/tp-link/td-w8970" class="media" title="de:toh:tp-link:td-w8970"><img src="../../lib/exe/fetch.php?cache=&amp;tok=e24010&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fde.gif" class="media" title="Deutsch (German)" alt="Deutsch (German)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <span class="curid"><a href="td-w8970" class="media" title="toh:tp-link:td-w8970"><img src="../../lib/exe/fetch.php?cache=&amp;tok=2a37ae&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fgb.gif" class="media" title="English" alt="English" /></a></span>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/es/toh/tp-link/td-w8970" class="media" title="es:toh:tp-link:td-w8970"><img src="../../lib/exe/fetch.php?cache=&amp;tok=46c004&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fmx.gif" class="media" title="Español (Spanish, Mexico)" alt="Español (Spanish, Mexico)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/fr/toh/tp-link/td-w8970" class="media" title="fr:toh:tp-link:td-w8970"><img src="../../lib/exe/fetch.php?cache=&amp;tok=a5beba&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ffr.gif" class="media" title="Français (French)" alt="Français (French)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/hu/toh/tp-link/td-w8970" class="media" title="hu:toh:tp-link:td-w8970"><img src="../../lib/exe/fetch.php?cache=&amp;tok=6b5470&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fhu.gif" class="media" title="Magyar (Hungarian)" alt="Magyar (Hungarian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/jp/toh/tp-link/td-w8970" class="media" title="jp:toh:tp-link:td-w8970"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f999fc&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fjp.gif" class="media" title="日本語 (Japanese)" alt="日本語 (Japanese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pl/toh/tp-link/td-w8970" class="media" title="pl:toh:tp-link:td-w8970"><img src="../../lib/exe/fetch.php?cache=&amp;tok=c805c0&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fpl.gif" class="media" title="Poliski (Polish)" alt="Poliski (Polish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pt-br/toh/tp-link/td-w8970" class="media" title="pt-br:toh:tp-link:td-w8970"><img src="../../lib/exe/fetch.php?cache=&amp;tok=13127d&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fbr.gif" class="media" title="Português brasileiro (Portuguese, Brasil)" alt="Português brasileiro (Portuguese, Brasil)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/ru/toh/tp-link/td-w8970" class="media" title="ru:toh:tp-link:td-w8970"><img src="../../lib/exe/fetch.php?cache=&amp;tok=66ab5e&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fru.gif" class="media" title="Русский (Russsian)" alt="Русский (Russsian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/tr/toh/tp-link/td-w8970" class="media" title="tr:toh:tp-link:td-w8970"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f4beed&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ftr.gif" class="media" title="Tϋrkçe (Turkish)" alt="Tϋrkçe (Turkish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-cn/toh/tp-link/td-w8970" class="media" title="zh-cn:toh:tp-link:td-w8970"><img src="../../lib/exe/fetch.php?cache=&amp;tok=93625a&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-cn.gif" class="media" title="官話/官话 (Chinese)" alt="官話/官话 (Chinese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-tw/toh/tp-link/td-w8970" class="media" title="zh-tw:toh:tp-link:td-w8970"><img src="../../lib/exe/fetch.php?cache=&amp;tok=b56198&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-tw.gif" class="media" title="臺灣華語 (Taiwanese)" alt="臺灣華語 (Taiwanese)" /></a>
              </div>
            </div>
          </li>
        </ul>
      </div>
        </div>
    
    
    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>toh:tp-link:td-w8970</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="td-w8970#supported_versions">Supported Versions</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="td-w8970#work-in-progress">Work-in-progress</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="td-w8970#hardware_highlights">Hardware Highlights</a></div></li>
<li class="level1"><div class="li"><a href="td-w8970#installation">Installation</a></div></li>
<li class="level1"><div class="li"><a href="td-w8970#installation_direct_to_flash">Installation direct to Flash</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="td-w8970#restore_tp-link_fw">Restore TP-LINK FW</a></div></li>
<li class="level2"><div class="li"><a href="td-w8970#vdslbin">VDSL.BIN</a></div></li>
<li class="level2"><div class="li"><a href="td-w8970#dsl_settings">DSL Settings</a></div></li>
<li class="level2"><div class="li"><a href="td-w8970#flash_layout">Flash layout</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="td-w8970#hardware">Hardware</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="td-w8970#info">Info</a></div></li>
<li class="level2"><div class="li"><a href="td-w8970#photos">Photos</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="td-w8970#serial">Serial</a></div></li>
<li class="level1"><div class="li"><a href="td-w8970#switch">Switch</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="td-w8970#switch_utility">switch_utility</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="td-w8970#oem_default_settings">OEM Default settings</a></div></li>
<li class="level3"><div class="li"><a href="td-w8970#empty_settings">Empty settings</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="td-w8970#oem_switch_scripts">OEM Switch scripts</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="td-w8970#dsl_wan_settingsh">dsl_wan_setting.sh</a></div></li>
<li class="level3"><div class="li"><a href="td-w8970#eth_wan_settingsh">eth_wan_setting.sh</a></div></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"><a href="td-w8970#debug_logs">Debug Logs</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="td-w8970#system_info">System Info:</a></div></li>
<li class="level2"><div class="li"><a href="td-w8970#u-boot_info_printenv">U-Boot info &amp; printenv:</a></div></li>
<li class="level2"><div class="li"><a href="td-w8970#oem_bootlog">OEM bootlog:</a></div></li>
<li class="level2"><div class="li"><a href="td-w8970#openwrt_ramdisk_bootlog">OpenWrt ramdisk bootlog:</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="td-w8970#discussion">Discussion</a></div></li>
<li class="level1"><div class="li"><a href="td-w8970#bugs">Bugs</a></div></li>
<li class="level1"><div class="li"><a href="td-w8970#tags">Tags</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="tp-link_td-w8970">TP-Link TD-W8970</h1>
<div class="level1">

<p>
300Mbps Wireless N VDSL2 Modem Router, <code><a href="../../doc/hardware/soc/soc.lantiq" class="wikilink1" title="doc:hardware:soc:soc.lantiq">Lantiq</a></code>-target, VDSL2-support is WIP.
</p>

<p>
Firstly - <strong>DO NOT</strong> upgrade to the 28.08.2013 (or newer) firmware on TP-Link website. It has modified u-boot, and applies a <strong>NEW UNKNOWN</strong> header - first byte is 0x03. We don&#039;t know how is it working. It seems to be a rsa signed firmware upgrade. Flashing
over serial &amp; bootloader works.
</p>

</div>

<h2 class="sectionedit2" id="supported_versions">Supported Versions</h2>
<div class="level2">
<div class="table sectionedit3"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Version/Model </th><th class="col1"> S/N </th><th class="col2"> Release Date </th><th class="col3"> OpenWrt Version Supported </th><th class="col4"> Model Specific Notes </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 centeralign">  1.0         </td><td class="col1 leftalign">    </td><td class="col2 leftalign"> 2012-11  </td><td class="col3"> <strong>work in progress</strong> </td><td class="col4 leftalign">  </td>
	</tr>
</table></div>
<ul>
<li class="level1"><div class="li"> OEM source code available at: <a href="http://www.tp-link.com/resources/gpl/GPL_TD-W8970.tar.gz" class="urlextern" title="http://www.tp-link.com/resources/gpl/GPL_TD-W8970.tar.gz"  rel="nofollow">GPL_TD-W8970.tar.gz</a></div>
</li>
<li class="level1"><div class="li"> ADSL/VDSL works</div>
</li>
<li class="level1"><div class="li"> switch is passing traffic (tagged + untagged), but passing it to all ports <a href="https://dev.openwrt.org/ticket/15511" class="urlextern" title="https://dev.openwrt.org/ticket/15511"  rel="nofollow">https://dev.openwrt.org/ticket/15511</a></div>
</li>
<li class="level1"><div class="li"> wifi doesn&#039;t work (regression since r40948) <a href="https://dev.openwrt.org/ticket/17069" class="urlextern" title="https://dev.openwrt.org/ticket/17069"  rel="nofollow">#17069</a></div>
</li>
</ul>

</div>

<h3 class="sectionedit4" id="work-in-progress">Work-in-progress</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <a href="https://dev.openwrt.org/changeset/37541" class="urlextern" title="https://dev.openwrt.org/changeset/37541"  rel="nofollow">r37541 lantiq: add devicetree for TP-Link TDW8970</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://dev.openwrt.org/changeset/37542" class="urlextern" title="https://dev.openwrt.org/changeset/37542"  rel="nofollow">r37542 lantiq: add profile for TP-Link TDW8970</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://dev.openwrt.org/changeset/37543" class="urlextern" title="https://dev.openwrt.org/changeset/37543"  rel="nofollow">r37543 lantiq: add TP-Link TDW8970 image generation</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://dev.openwrt.org/changeset/37612" class="urlextern" title="https://dev.openwrt.org/changeset/37612"  rel="nofollow">r37612 lantiq: setup gphy leds on TPlink TDW8970</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://dev.openwrt.org/changeset/37718" class="urlextern" title="https://dev.openwrt.org/changeset/37718"  rel="nofollow">r37718 firmware-utils: add support for TDW8970 to mktplinkfw</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://dev.openwrt.org/changeset/37720" class="urlextern" title="https://dev.openwrt.org/changeset/37720"  rel="nofollow">r37720 lantiq: fix TDW8970.dts commandline and partition name</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://dev.openwrt.org/changeset/37727" class="urlextern" title="https://dev.openwrt.org/changeset/37727"  rel="nofollow">r37727 lantiq: fix TD-W8970 image generation to work with the new tool</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://dev.openwrt.org/changeset/38029" class="urlextern" title="https://dev.openwrt.org/changeset/38029"  rel="nofollow">r38029 lantiq: add a subtarget for the xrx200 SoC family</a></div>
</li>
</ul>

</div>

<h2 class="sectionedit5" id="hardware_highlights">Hardware Highlights</h2>
<div class="level2">

<p>
(for rev. 1.0)
</p>
<div class="table sectionedit6"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> SoC </th><th class="col1"> Ram </th><th class="col2"> Flash </th><th class="col3"> Network </th><th class="col4"> Wireless NIC </th><th class="col5"> Wireless Standard </th><th class="col6"> USB </th><th class="col7"> Serial </th><th class="col8"> JTag </th><th class="col9"> ADSL2+ Modem </th><th class="col10"> VDSL2 Modem </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> Lantiq XWay VRX268 @500MHz </td><td class="col1">64 MiB </td><td class="col2">8 MiB </td><td class="col3"> 4x 1000mbps </td><td class="col4"> AR9381 (onboard) </td><td class="col5"> b/g/n </td><td class="col6"> 2 x 2.0 </td><td class="col7"> YES </td><td class="col8"> YES </td><td class="col9"> YES </td><td class="col10"> YES </td>
	</tr>
</table></div>

</div>

<h2 class="sectionedit7" id="installation">Installation</h2>
<div class="level2">

<p>
At the time of writing, the only known method of installation involves access to the bootloader, which requires using the serial console.  This in turn requires opening the device to access the contacts on the circuit board.
</p>

<p>
Once a serial console has been established (see below for further details) the following method worked for at least one person:
</p>
<ol>
<li class="level1"><div class="li"> Download the openwrt-lantiq-xrx200-TDW8970-uImage-initramfs image from wherever you can find it (the <a href="http://downloads.openwrt.org/barrier_breaker/14.07/lantiq/xrx200/" class="urlextern" title="http://downloads.openwrt.org/barrier_breaker/14.07/lantiq/xrx200/"  rel="nofollow">official release</a> does not supply a uImage with an initramfs, so booting that just gives you an error about a missing root filesystem.)</div>
</li>
<li class="level1"><div class="li"> Switch on the device and press &#039;t&#039; on the serial console until you get a prompt, then run commands similar to these:</div>
<ol>
<li class="level2"><div class="li"> Set the device&#039;s IP if you don&#039;t want the default 192.168.1.1: (so you don&#039;t have to move your TFTP server onto a different subnet)<pre class="code">setenv ipaddr 192.168.1.1</pre>
</div>
</li>
<li class="level2"><div class="li"> Set the address of your TFTP server:<pre class="code">setenv serverip 192.168.1.2</pre>
</div>
</li>
<li class="level2"><div class="li"> Set the board type:<pre class="code">setenv bootargs &#039;board=WD8970&#039;</pre>
</div>
</li>
<li class="level2"><div class="li"> Download the image into RAM (*not* flash):<pre class="code">tftpboot openwrt-lantiq-xrx200-TDW8970-uImage-initramfs</pre>
</div>
</li>
<li class="level2"><div class="li"> Boot the image from RAM:<pre class="code">bootm</pre>
</div>
</li>
</ol>
</li>
<li class="level1"><div class="li"> If OpenWRT boots successfully, download the <a href="http://downloads.openwrt.org/barrier_breaker/14.07/lantiq/xrx200/" class="urlextern" title="http://downloads.openwrt.org/barrier_breaker/14.07/lantiq/xrx200/"  rel="nofollow">official release</a> sysimage into /tmp</div>
</li>
<li class="level1"><div class="li"> Flash the newly downloaded sysimage:<pre class="code">sysupgrade /tmp/openwrt-lantiq-xrx200-TDW8970-sysupgrade.image</pre>
The flash is extremely slow on this device (~100kB/sec) so the write takes a long time.</div>
</li>
<li class="level1"><div class="li"> Find the DSL firmware which is not included in the image and copy it into /lib/firmware/vdsl.bin (this file is referenced in /etc/config/network)</div>
</li>
</ol>

</div>

<h2 class="sectionedit8" id="installation_direct_to_flash">Installation direct to Flash</h2>
<div class="level2">

<p>
I had trouble to obtain a working initramfs image, but it is possible to flash the sysupgrade image directly. There should be a recommendation to have serial connection to the board, I needed it some times in the beginning, also could not find a failsafe mode.
</p>

<p>
Once a serial console has been established (see below for further details):
</p>
<ol>
<li class="level1"><div class="li"> Download the openwrt-lantiq-xrx200-TDW8970-uImage-sysupgrade.image, BARRIER BREAKER (14.07, r42625) worked for me.</div>
</li>
<li class="level1"><div class="li"> Switch on the device and press &#039;t&#039; on the serial console until you get a prompt, then run commands similar to these:</div>
<ol>
<li class="level2"><div class="li"> Set the device&#039;s IP if you don&#039;t want the default 192.168.1.1: (so you don&#039;t have to move your TFTP server onto a different subnet)<pre class="code">setenv ipaddr 192.168.1.1</pre>
</div>
</li>
<li class="level2"><div class="li"> Set the address of your TFTP server:<pre class="code">setenv serverip 192.168.1.2</pre>
</div>
</li>
<li class="level2"><div class="li"> Set the board type (not sure if this is necessary):<pre class="code">setenv bootargs &#039;board=WD8970&#039;</pre>
</div>
</li>
<li class="level2"><div class="li"> Download the image into RAM (*not* flash):<pre class="code">tftpboot 0x80800000 openwrt-lantiq-xrx200-TDW8970-sysupgrade.image</pre>
</div>
</li>
<li class="level2"><div class="li"> Erase the rootfs flash area:<pre class="code">sf erase 0x20000 0x7a0000</pre>
</div>
</li>
<li class="level2"><div class="li"> Write image to flash:<pre class="code">sf write 0x80800000 0x20000 0x680004</pre>
</div>
</li>
<li class="level2"><div class="li"> Reboot into OpenWRT:<pre class="code">reset</pre>
</div>
</li>
</ol>
</li>
<li class="level1"><div class="li"> the rootfs area is 0x7c0000, erase command is to 0x7a000 and BB image is only 0x680004 in size, so it works anyway. If your image is bigger, custom or next release you see the size after tftpboot command and need to adjust it.</div>
</li>
<li class="level1"><div class="li"> be careful when erasing/writing the flash the radio is required for WLAN and should not be overwritten or erased. A backup is nice to have if something went wrong, it stores also the MAC address for your WLAN (ART Partition).</div>
</li>
</ol>

</div>

<h3 class="sectionedit9" id="restore_tp-link_fw">Restore TP-LINK FW</h3>
<div class="level3">

<p>
For testing purpose only <img src="../../lib/images/smileys/icon_wink.gif" class="icon" alt=";-)" /> wrote this from my notes it should work.
</p>

<p>
Once a serial console has been established (see below for further details):
</p>
<ol>
<li class="level1"><div class="li"> Obtain your Image, you need to care about you model type TD-W8970 or TD-W8970B both images work but the modem part is different. You might need to strip the header off with &quot;dd if=orig.bin of=tplink.bin skip=257 bs=512&quot; for newer FW like &quot;TD-W8970B_V1_130918.bin&quot; or flash an older one directly like &quot;TD-W8970v1_0.6.0_2.1_up(130415).bin&quot;</div>
</li>
<li class="level1"><div class="li"> Switch on the device and press &#039;t&#039; on the serial console until you get a prompt, then run commands similar to these:</div>
<ol>
<li class="level2"><div class="li"> Set the device&#039;s IP if you don&#039;t want the default 192.168.1.1: (so you don&#039;t have to move your TFTP server onto a different subnet)<pre class="code">setenv ipaddr 192.168.1.1</pre>
</div>
</li>
<li class="level2"><div class="li"> Set the address of your TFTP server:<pre class="code">setenv serverip 192.168.1.2</pre>
</div>
</li>
<li class="level2"><div class="li"> Set the board type (not sure if this is necessary might be also WD8970B):<pre class="code">setenv bootargs &#039;board=WD8970&#039;</pre>
</div>
</li>
<li class="level2"><div class="li"> Download the image into RAM (*not* flash):<pre class="code">tftpboot 0x80800000 TD-W8970v1_0.6.0_2.1_up(130415).bin</pre>
</div>
</li>
<li class="level2"><div class="li"> Erase the rootfs flash area:<pre class="code">sf erase 0x20000 0x7a0000</pre>
</div>
</li>
<li class="level2"><div class="li"> Write image to flash:<pre class="code">sf write 0x80800000 0x20000 0x7a0000</pre>
</div>
</li>
<li class="level2"><div class="li"> Reboot:<pre class="code">reset</pre>
</div>
</li>
</ol>
</li>
<li class="level1"><div class="li"> the rootfs area is 0x7c0000, erase command is to 0x7a000 and write is also 0x7a000 you can see the image size in after the tftpboot command</div>
</li>
<li class="level1"><div class="li"> be careful when erasing/writing the flash the radio is required for WLAN and should not be overwritten or erased. A backup is nice to have if something went wrong, it stores also the MAC address for your WLAN (ART Partition).</div>
</li>
</ol>

</div>

<h3 class="sectionedit10" id="vdslbin">VDSL.BIN</h3>
<div class="level3">

<p>
A whole Point for this? yes there is much trouble with this. But the Devs made it very simple, you only need to know. There is a command for obtaining the vdsl.bin and put it to an separate partition that is mounted in the right place, so it does not eat up your free space. But the Telekom removed the Image they chose to obtain the bin because of stability issues with their HW. The replacement for this is V1.21 and is available on their server. You can either get a newer &quot;vdsl_fw_install&quot; (this is the command) or modify it to work again.
edit the comand with vi:<pre class="code">vi /sbin/vdsl_fw_install</pre>

edit line <abbr title="Uniform Resource Locator">URL</abbr> to:<pre class="code">URL=&quot;http://hilfe.telekom.de/dlp/eki/downloads/Speedport/Speedport%20W%20921V/Firmware_Speedport_W921V_1.21.000.bin&quot;</pre>

edit line MD5 to:<pre class="code">MD5_FW=&quot;0a099d08dbf091c74d685b532cbb1390&quot;</pre>

and run it:<pre class="code">vdsl_fw_install</pre>

It is fixed in trunk already, you can also obtain other working bins, to play around, they should only meet your Annex Type.
</p>

<p>
You might need to obtain the files via internet, so you need to setup the device as a client first. To do so temporary you need to set the nameserver and maybe th IP.
to set the IP:<pre class="code">udhcp -i br-lan</pre>

to set the NS:<pre class="code">echo &quot;nameserver 192.168.1.254&quot; &gt; /tmp/resolv.conf</pre>
 mine is 192.168.1.254
</p>

</div>

<h3 class="sectionedit11" id="dsl_settings">DSL Settings</h3>
<div class="level3">

<p>
depending on you Country/ISP you need to modify your DSL config settings, ATM or PTM and Annex A or B the following is the default:
<pre class="code">config vdsl &#039;dsl&#039;
option annex &#039;a&#039;
option firmware &#039;/lib/firmware/vdsl.bin&#039;
option tone &#039;av&#039;
option xfer_mode &#039;atm&#039;</pre>

to set it for Annex B issue the next 2 commands and with PTM the next 3 (you need to install the Kernel Module with the fourth)
<pre class="code">uci set network.dsl.annex=b
uci set network.dsl.tone=bv
uci set network.dsl.xfer_mode=ptm
opkg install kmod-ltq-ptm-vr9</pre>

</p>

</div>

<h3 class="sectionedit12" id="flash_layout">Flash layout</h3>
<div class="level3">

<p>
(for <strong>OEM</strong> firmware version 1.2)
</p>
<div class="table sectionedit13"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> partition </th><th class="col1"> address space </th><th class="col2"> name </th><th class="col3"> filesystem </th><th class="col4"> function </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> mtd0 </td><td class="col1"> 0x00000000-0x00020000 </td><td class="col2"> <strong>boot</strong> </td><td class="col3"> n/a </td><td class="col4"> U-Boot v2.0.40 </td>
	</tr>
	<tr class="row2">
		<td class="col0"> mtd1 </td><td class="col1"> 0x00020000-0x00160000 </td><td class="col2"> <strong>kernel</strong> </td><td class="col3"> RAM executable </td><td class="col4"> kernel 2.6.32 </td>
	</tr>
	<tr class="row3">
		<td class="col0"> mtd2 </td><td class="col1"> 0x00160000-0x007c0000 </td><td class="col2"> <strong>rootfs</strong> </td><td class="col3"> squashfs </td><td class="col4"> root </td>
	</tr>
	<tr class="row4">
		<td class="col0"> mtd3 </td><td class="col1"> 0x007c0000-0x007d0000 </td><td class="col2"> <strong>config</strong> </td><td class="col3"> XML string </td><td class="col4"> user configuration </td>
	</tr>
	<tr class="row5">
		<td class="col0"> mtd4 </td><td class="col1"> 0x007d0000-0x007e0000 </td><td class="col2"> <strong>romfile</strong> </td><td class="col3"> n/a </td><td class="col4"> ??? </td>
	</tr>
	<tr class="row6">
		<td class="col0"> mtd5 </td><td class="col1"> 0x007e0000-0x007f0000 </td><td class="col2"> <strong>rom</strong> </td><td class="col3"> n/a </td><td class="col4"> ??? </td>
	</tr>
	<tr class="row7">
		<td class="col0"> mtd6 </td><td class="col1"> 0x007f0000-0x00800000 </td><td class="col2"> <strong>radio</strong> </td><td class="col3"> n/a </td><td class="col4"> radio settings </td>
	</tr>
</table></div>

</div>

<h2 class="sectionedit14" id="hardware">Hardware</h2>
<div class="level2">

</div>

<h3 class="sectionedit15" id="info">Info</h3>
<div class="level3">
<div class="table sectionedit16"><table class="inline">
	<tr class="row0">
		<td class="col0 leftalign"> <strong><a href="http://en.wikipedia.org/wiki/Instruction set" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Instruction set">Instruction set</a>:</strong>    </td><td class="col1"> <a href="http://en.wikipedia.org/wiki/MIPS architecture" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/MIPS architecture">MIPS</a> </td>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> <strong>Vendor:</strong>          </td><td class="col1 leftalign"> <a href="http://en.wikipedia.org/wiki/Lantiq" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Lantiq">Lantiq</a>  </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> <strong><a href="../../doc/techref/bootloader.1" class="wikilink1" title="doc:techref:bootloader">Bootloader</a>:</strong>     </td><td class="col1"> <a href="../../doc/techref/bootloader/uboot" class="wikilink1" title="doc:techref:bootloader:uboot">U-Boot</a> 2010.06-LANTIQ-v-2.0.40-svn2583<br/>
(press <strong>t</strong> to enter U-Boot console on OEM firmware) </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <strong><a href="../../doc/hardware/soc.1" class="wikilink1" title="doc:hardware:soc">System-On-Chip</a>:</strong>  </td><td class="col1"> <a href="http://www.lantiq.com/uploads/media//Lantiq_XWAY-VRX268_Product-Brief_03.pdf" class="urlextern" title="http://www.lantiq.com/uploads/media//Lantiq_XWAY-VRX268_Product-Brief_03.pdf"  rel="nofollow">XWAY VRX268</a> (<a href="../../doc/hardware/soc/soc.lantiq" class="urlextern" title="http://wiki.openwrt.org/doc/hardware/soc/soc.lantiq"  rel="nofollow">VR9 Family)</a> </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> <strong><a href="../../doc/hardware/cpu" class="wikilink1" title="doc:hardware:cpu">CPU</a>/Speed:</strong>        </td><td class="col1"> MIPS34Kc @ 500 <abbr title="Megahertz">MHz</abbr> </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> <strong>Flash Chip:</strong>      </td><td class="col1"> <a href="http://html.alldatasheet.com/html-pdf/313095/EON/EN56Q64-104HIP/61/1/EN56Q64-104HIP.html" class="urlextern" title="http://html.alldatasheet.com/html-pdf/313095/EON/EN56Q64-104HIP/61/1/EN56Q64-104HIP.html"  rel="nofollow">cFeon Q64-104HIP</a> other <a href="https://www.winbond.com/NR/rdonlyres/05A6F2FD-83D2-4748-8394-65909AC2A8E3/0/W25Q64FV.pdf" class="urlextern" title="https://www.winbond.com/NR/rdonlyres/05A6F2FD-83D2-4748-8394-65909AC2A8E3/0/W25Q64FV.pdf"  rel="nofollow"> Winbond 25Q64FVSIG</a> </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> <strong>Flash Specs:</strong>     </td><td class="col1"> 8 MiB SPI </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> <strong>RAM Chip:</strong>        </td><td class="col1"> <a href="http://www.skhynix.com/inc/pdfDownload.jsp?path=/datasheet/pdf/dram/consumer_H5PS518(6)2GFRseries(Rev1.5).pdf" class="urlextern" title="http://www.skhynix.com/inc/pdfDownload.jsp?path=/datasheet/pdf/dram/consumer_H5PS518(6)2GFRseries(Rev1.5).pdf"  rel="nofollow">Hynix H5PS5162GFR-Y5C</a> other <a href="http://www.winbond.com/NR/rdonlyres/54848106-3243-4720-A223-18CFB79A9F37/0/W9751G6KB.pdf" class="urlextern" title="http://www.winbond.com/NR/rdonlyres/54848106-3243-4720-A223-18CFB79A9F37/0/W9751G6KB.pdf"  rel="nofollow"> Winbond W9751G6KB</a> </td>
	</tr>
	<tr class="row8">
		<td class="col0 leftalign"> <strong>RAM Specs:</strong>       </td><td class="col1"> 64 MiB DDR2 @ 250 <abbr title="Megahertz">MHz</abbr> (3-5-5-5) </td>
	</tr>
	<tr class="row9">
		<td class="col0 leftalign"> <strong>Wireless:</strong>        </td><td class="col1"> AR9381 2.4 <abbr title="Gigahertz">GHz</abbr> (3x3) 802.11bgn </td>
	</tr>
	<tr class="row10">
		<td class="col0 leftalign"> <strong>Ethernet:</strong>        </td><td class="col1"> 4x 10/100/1000 BASE-TX Ethernet Interface<br/>
(2x XWAY VR9 GPHY 11G &amp; 2x XWAY PEF7071 via RGMII) </td>
	</tr>
	<tr class="row11">
		<td class="col0 leftalign"> <strong>Switch:</strong>          </td><td class="col1"> <a href="td-w8970#switch" title="toh:tp-link:td-w8970 ↵" class="wikilink1">Internal configurable</a> (Infineon) </td>
	</tr>
	<tr class="row12">
		<td class="col0 leftalign"> <strong>xDSL:</strong>            </td><td class="col1"> <a href="http://www.lantiq.com/uploads/media//Lantiq_XWAY-VRX268_Product-Brief_03.pdf" class="urlextern" title="http://www.lantiq.com/uploads/media//Lantiq_XWAY-VRX268_Product-Brief_03.pdf"  rel="nofollow">Lantiq XWAY VRX208</a><br/>
ADSL1/2/2+ (G.992.1/3/5) Annexes A, B, I, J, M, L,<br/>
VDSL1 (G.993.1, T1.424, TS 101 270),<br/>
 VDSL2 (G.993.2),<br/>
ITU-T G 998.2 Bonding,<br/>
EFM (IEEE 802.3ah)</td>
	</tr>
	<tr class="row13">
		<td class="col0 leftalign"> <strong>USB:</strong>             </td><td class="col1"> 2 x USB 2.0 </td>
	</tr>
	<tr class="row14">
		<td class="col0 leftalign"> <strong>GPIO Buttons:</strong>    </td><td class="col1"> WPS button, WiFi toggle switch, Reset button </td>
	</tr>
	<tr class="row15">
		<td class="col0 leftalign"> <strong>GPIO LEDs:</strong>       </td><td class="col1"> ADSL, Internet, WPS, USB Port 1, USB Port 2 </td>
	</tr>
	<tr class="row16">
		<td class="col0 leftalign"> <strong>Power:</strong>           </td><td class="col1"> External 12V 1.5A </td>
	</tr>
	<tr class="row17">
		<td class="col0 leftalign"> <strong>Serial:</strong>          </td><td class="col1"> <a href="td-w8970#serial" title="toh:tp-link:td-w8970 ↵" class="wikilink1">Yes</a> </td>
	</tr>
	<tr class="row18">
		<td class="col0 leftalign"> <strong>JTAG:</strong>            </td><td class="col1"> Yes </td>
	</tr>
</table></div>

</div>

<h3 class="sectionedit17" id="photos">Photos</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <strong>Device</strong>: <a href="http://wikidevi.com/wiki/TP-LINK_TD-W8970_v1" class="urlextern" title="http://wikidevi.com/wiki/TP-LINK_TD-W8970_v1"  rel="nofollow">http://wikidevi.com/wiki/TP-LINK_TD-W8970_v1</a></div>
</li>
</ul>

<p>
<a href="../../_detail/media/toh/tp-link/td-w8970-internal.jpg?id=toh%253Atp-link%253Atd-w8970" class="media" title="media:toh:tp-link:td-w8970-internal.jpg"><img src="../../_media/media/toh/tp-link/td-w8970-internal.jpg?w=400&amp;tok=7b6bd0" class="media" alt="" width="400" /></a> <a href="../../_detail/media/toh/tp-link/tdw8970_hardware_labeled.png?id=toh%253Atp-link%253Atd-w8970" class="media" title="media:toh:tp-link:tdw8970_hardware_labeled.png"><img src="../../_media/media/toh/tp-link/tdw8970_hardware_labeled.png?w=400&amp;tok=fe33b9" class="media" alt="" width="400" /></a>
</p>

</div>

<h2 class="sectionedit18" id="serial">Serial</h2>
<div class="level2">

<p>
<a href="../../_detail/media/toh/tp-link/td-w8970-serial-jtag.jpg?id=toh%253Atp-link%253Atd-w8970" class="media" title="media:toh:tp-link:td-w8970-serial-jtag.jpg"><img src="../../_media/media/toh/tp-link/td-w8970-serial-jtag.jpg" class="media" alt="" /></a>
</p>

<p>
<a href="../../OpenWrtDocs/Customizing/Hardware/Serial_Console" class="wikilink1" title="doc:hardware:port.serial">Serial console</a> info:
</p>
<div class="table sectionedit19"><table class="inline">
	<tr class="row0">
		<td class="col0"> Connector </td><td class="col1"> J7 </td>
	</tr>
	<tr class="row1">
		<td class="col0"> Pins (from top to bottom) </td><td class="col1"> VCC (3.3V), GND, Rx, Tx </td>
	</tr>
	<tr class="row2">
		<td class="col0"> Speed </td><td class="col1"> 115200 8N1 </td>
	</tr>
</table></div>

<p>
Press <strong><code>t</code></strong> on the console to interrupt U-Boot autobooting.<br/>

Logon through serial by pressing <code>Enter</code> and using: <strong>admin/1234</strong>.
</p>

</div>

<h2 class="sectionedit20" id="switch">Switch</h2>
<div class="level2">

<p>
The XWAY VRX286 SoC features an internal configurable Infineon Gigabit Ethernet switch that connects all the physical Ethernet ports together. 
</p>

<p>
As of yet (<a href="https://dev.openwrt.org/browser/trunk?rev=38701" class="urlextern" title="https://dev.openwrt.org/browser/trunk?rev=38701"  rel="nofollow">trunk: 38701</a>) no support for this switch exists on OpenWrt.
</p>

<p>
However a <abbr title="GNU General Public License">GPL</abbr> source code exists for the switch under the name &quot;<code>ifx_ethsw</code>&quot; for the kernel module and &quot;<code>switch_utility</code>&quot; for the user-space configuration tool. The code can be found from links below:
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://gpl.back2roots.org/source/fritzbox/7390_5.50/GPL-release_kernel/linux/arch/mips/include/asm/mach-infineon/switch_api/" class="urlextern" title="http://gpl.back2roots.org/source/fritzbox/7390_5.50/GPL-release_kernel/linux/arch/mips/include/asm/mach-infineon/switch_api/"  rel="nofollow">http://gpl.back2roots.org/source/fritzbox/7390_5.50/GPL-release_kernel/linux/arch/mips/include/asm/mach-infineon/switch_api/</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://gpl.back2roots.org/source/fritzbox/7390_5.50/GPL-release_kernel/linux/drivers/net/ifxmips_switch_api/" class="urlextern" title="http://gpl.back2roots.org/source/fritzbox/7390_5.50/GPL-release_kernel/linux/drivers/net/ifxmips_switch_api/"  rel="nofollow">http://gpl.back2roots.org/source/fritzbox/7390_5.50/GPL-release_kernel/linux/drivers/net/ifxmips_switch_api/</a></div>
</li>
</ul>

<p>
On the OEM firmware the driver initialization looks like this:
</p>
<pre class="code">  IFX SWITCH API, Version 1.1.7.2
  SWAPI: Registered character device [switch_api] with major no [81]
  Switch API: PCE MicroCode loaded !!
  Init IFX_ETHSW_Switch_API_procModule successfully.</pre>

<p>
And the configuration tool can be found at: <code>/usr/sbin/switch_utility</code>
</p>

</div>

<h3 class="sectionedit21" id="switch_utility">switch_utility</h3>
<div class="level3">

<p style="padding: 10px;border:1px solid grey;height:300px;font:10px/14px Georgia, Garamond, Serif;overflow:Auto;background-color:#FFFFFF">
<code>~ # switch_utility

Switch Utility Version : v1.1.7.1
Available commands:
        CfgGet
        CfgSet
        PortCfgGet
        PortCfgSet
        PortLinkCfgGet
        PortLinkCfgSet
        PortRedirectGet
        PortRedirectSet
        MAC_TableEntryRead
        MAC_TableEntryAdd
        MAC_TableEntryRemove
        MAC_TableClear
        VLAN_IdCreate
        VLAN_IdDelete
        VLAN_IdGet
        VLAN_PortMemberAdd
        VLAN_PortMapTableRead
        VLAN_PortMemberRemove
        VLAN_PortCfgGet
        VLAN_PortCfgSet
        VLAN_ReservedAdd
        VLAN_ReservedRemove
        MulticastRouterPortAdd
        MulticastRouterPortRemove
        MulticastRouterPortRead
        MulticastTableEntryAdd
        MulticastTableEntryRemove
        MulticastTableEntryRead
        MulticastSnoopCfgGet
        MulticastSnoopCfgSet
        RMON_Clear
        RMON_Get
        MDIO_DataRead
        MDIO_DataWrite
        MDIO_CfgGet
        MDIO_CfgSet
        PortRGMII_ClkCfgGet
        PortRGMII_ClkCfgSet
        RegisterGet
        RegisterSet
        CPU_PortExtendCfgGet
        CPU_PortExtendCfgSet
        CPU_PortCfgGet
        CPU_PortCfgSet
        MonitorPortGet
        MonitorPortSet
        PHY_AddrGet
        QOS_PortCfgGet
        QOS_PortCfgSet
        QOS_DscpClassGet
        QOS_DscpClassSet
        QOS_PcpClassGet
        QOS_PcpClassSet
        Reset
        HW_Init
        PCE_RuleRead
        PCE_RuleWrite
        PCE_RuleDelete
        QOS_QueuePortGet
        QOS_QueuePortSet
        QOS_MeterCfgGet
        QOS_MeterCfgSet
        QOS_MeterPortGet
        QOS_MeterPortAssign
        QOS_MeterPortDeassign
        QOS_WredCfgGet
        QOS_WredCfgSet
        QOS_WredQueueCfgGet
        QOS_WredQueueCfgSet
        QOS_SchedulerCfgGet
        QOS_SchedulerCfgSet
        QOS_StormAdd
        QOS_StormGet
        QOS_ShaperCfgGet
        QOS_ShaperCfgSet
        QOS_ShaperQueueAssign
        QOS_ShaperQueueDeassign
        QOS_ClassPCPGet
        QOS_ClassPCPSet
        QOS_ClassDSCPGet
        QOS_ClassDSCPSet
        QOS_PortRemarkingCfgGet
        QOS_PortRemarkingCfgSet
        STP_PortCfgGet
        STP_PortCfgSet
        STP_BPDU_RULE_Get
        STP_BPDU_RULE_Set
        8021X_PortCfgGet
        8021X_PortCfgSet
        PHY_Query
        VersionGet
        RMON_ExtendGet
        8021X_EAPOL_RuleGet
        8021X_EAPOL_RuleSet
        CapGet
        Enable
        Disable</code>
</p>

</div>

<h4 id="oem_default_settings">OEM Default settings</h4>
<div class="level4">

<p>
These are the switch_utility settings on the OEM firmware right after booting up.
</p>

<p style="padding: 10px;border:1px solid grey;height:300px;font:10px/14px Georgia, Garamond, Serif;overflow:Auto;background-color:#FFFFFF">
<code>~ # brctl show
bridge name     bridge id               STP enabled     interfaces
br0             8000.f81a67d8b108       no              eth0.2
                                                        eth0.3
                                                        eth0.4
                                                        eth0.5
                                                        ath0
                                                        nas0_1

~ # switch_utility CfgGet
        MAC_Table Age Timer = 3
        VLAN_Aware          = 1
        Max Packet Len      = 1536
        Max Packet Len      = 0
        Pause MAC Mode      = 0
        Pause MAC Src       = 00:d0:8f:00:01:00
~ # switch_utility PortCfgGet 4
        Port Id                 = 4
        Port Enable             = 1
        Unicast Unkown Drop     = 0
        Multicast Unkown Drop   = 0
        Reserved Packet Drop    = 0
        Broadcast Packet Drop   = 0
        Aging                   = 0
        Learning Mac Port Lock  = 0
        Learning Limit          = 255
        Port Monitor            = 0
        Flow Control            = 0
~ # switch_utility PortLinkCfgGet 4
        Port Id                   = 4
        Force Port Duplex Mode.   = 0
        Port Duplex Status.       = 0
        Force Link Speed.         = 0
        Port link speed status    = 1000
        Force Link                = 0
        Force link status         = 0
        Selected interface mode   = 0
        Select if MAC or PHY mode = 1
        Interface clock Mode      = 0
~ # switch_utility PortRedirectGet 4
        Port Id                 = 4
        Port Redirect Egress    = 0
        Port Redirect Ingress   = 0
~ # switch_utility MAC_TableEntryRead
ERROR: (VID does not exists) drivers/net/ifxmips_switch_api/ifx_ethsw_flow_api.c:IFX_FLOW_VLAN_IdGet:1711
--------------------------------------------------------------
   MAC Address       | port |   age    | FID | Static
--------------------------------------------------------------
  f8:1a:67:d8:b1:08  |  6   |     0    | 0   | 1
  f8:1a:67:d8:b1:08  |  6   |    15    | 2   | 0
  00:00:00:00:00:20  |  6   |     0    | 1   | 1
--------------------------------------------------------------
~ # switch_utility VLAN_IdGet 0
        VId = 0
        FId = 0
~ # switch_utility VLAN_IdGet 1
ERROR: (VID does not exists) drivers/net/ifxmips_switch_api/ifx_ethsw_flow_api.c:IFX_FLOW_VLAN_IdGet:1711
IOCTL failed for ioctl command 0xC0084517, returned -1
~ # switch_utility VLAN_IdGet 2
        VId = 2
        FId = 2
~ # switch_utility VLAN_IdGet 3
        VId = 3
        FId = 2
~ # switch_utility VLAN_IdGet 4
        VId = 4
        FId = 2
~ # switch_utility VLAN_IdGet 5
        VId = 5
        FId = 2
~ # switch_utility VLAN_IdGet 6
ERROR: (VID does not exists) drivers/net/ifxmips_switch_api/ifx_ethsw_flow_api.c:IFX_FLOW_VLAN_IdGet:1711
IOCTL failed for ioctl command 0xC0084517, returned -1
switch_utility VLAN_PortMapTableRead
--------------------------------------------------------------
 VLAN ID            | Port               | Tag Member
--------------------------------------------------------------
                  50 |                  245 | FALSE
                  40 |                   64 | FALSE
                  30 |                  245 | FALSE
                   5 |                   96 | FALSE
                   4 |                   65 | FALSE
                   3 |                   68 | FALSE
                   2 |                   80 | FALSE
                2053 |                  117 | TRUE
                2052 |                  117 | TRUE
                2051 |                  117 | TRUE
                2050 |                  117 | TRUE
--------------------------------------------------------------
~ # switch_utility VLAN_PortCfgGet 0
        VLAN PortId           = 0
        VLAN PortVId          = 2052
        VLAN Unknown Drop     = 1
        VLAN ReAssign         = 0
        VLAN Violation Member = 3
        VLAN Admit Mode       = 0
        VLAN TVM              = 1
~ # switch_utility VLAN_PortCfgGet 1
        VLAN PortId           = 1
        VLAN PortVId          = 0
        VLAN Unknown Drop     = 0
        VLAN ReAssign         = 0
        VLAN Violation Member = 0
        VLAN Admit Mode       = 0
        VLAN TVM              = 0
~ # switch_utility VLAN_PortCfgGet 2
        VLAN PortId           = 2
        VLAN PortVId          = 2051
        VLAN Unknown Drop     = 1
        VLAN ReAssign         = 0
        VLAN Violation Member = 3
        VLAN Admit Mode       = 0
        VLAN TVM              = 1
~ # switch_utility VLAN_PortCfgGet 3
        VLAN PortId           = 3
        VLAN PortVId          = 0
        VLAN Unknown Drop     = 0
        VLAN ReAssign         = 0
        VLAN Violation Member = 0
        VLAN Admit Mode       = 0
        VLAN TVM              = 0
~ # switch_utility VLAN_PortCfgGet 4
        VLAN PortId           = 4
        VLAN PortVId          = 2050
        VLAN Unknown Drop     = 1
        VLAN ReAssign         = 0
        VLAN Violation Member = 3
        VLAN Admit Mode       = 0
        VLAN TVM              = 1
~ # switch_utility VLAN_PortCfgGet 5
        VLAN PortId           = 5
        VLAN PortVId          = 2053
        VLAN Unknown Drop     = 1
        VLAN ReAssign         = 0
        VLAN Violation Member = 3
        VLAN Admit Mode       = 0
        VLAN TVM              = 1
~ # switch_utility VLAN_PortCfgGet 6
        VLAN PortId           = 6
        VLAN PortVId          = 50
        VLAN Unknown Drop     = 0
        VLAN ReAssign         = 0
        VLAN Violation Member = 3
        VLAN Admit Mode       = 0
        VLAN TVM              = 0
~ # switch_utility MulticastSnoopCfgGet
        MULTICAST SNOOP IGMP_Mode           = 0
        MULTICAST SNOOP IGMPv3 support      = 0
        MULTICAST SNOOP CrossVLAN           = 0
        MULTICAST SNOOP ForwardPort         = 0
        MULTICAST SNOOP ForwardPortId       = 0
        MULTICAST SNOOP ClassOfService      = 0
        MULTICAST SNOOP Robust              = 3
        MULTICAST SNOOP QueryInterval (HEX) = 0x64
        MULTICAST Suppression | Aggregation = 2
        MULTICAST SNOOP FastLeave           = 0
        MULTICAST SNOOP LearningRouter      = 0
~ # switch_utility RMON_Get 4
        Port Id                                       = 4
        Receive Packet Count                          = 2695
        Receive Unicast Packet Count                  = 2634
        Receive Broadcast Packet Count                = 31
        Receive Multicast Packet Count                = 30
        Receive FCS Error Packet Count                = 0
        Receive Undersize Good Packet Count           = 0
        Receive Overswitch_utility MDIO_CfgGet
~ # switch_utility MDIO_CfgGet
        MDIO Access Enable = 1
        Clock Speed= 5
~ # switch_utility MDIO_DataRead 0
Invalid number of parameters: is 1, should be 2
Usage:  switch_utility MDIO_DataRead <PHY addr> <Register inside PHY>

        phy addr:           0..14
        register:           0..24

~ # switch_utility PortRGMII_ClkCfgGet 4
nDelayRx = 0
nDelayTx = 0
        Port Id         = 4
        Delay RX        = 0
        Delay TX        = 0
~ # switch_utility RegisterGet
Invalid number of parameters: is 0, should be 1
Usage:  switch_utility RegisterGet <nRegAddr>

        nRegAddr:

~ # switch_utility CPU_PortExtendCfgGet
        Add Ethernet layer-2 header = 0
        Remove Ethernet layer-2 header = 0
        Header data
          Source MAC     : 00:00:00:00:00:00
          Destination MAC: 00:00:00:00:00:00
          Packet EtherType Field = 0
          VLAN Tag Priority Field = 0
          VLAN Tag CFI = 0
          VLAN Tag VLAN ID = 0
        PAUSE frames coming = 0
        Remove the CRC = 1
        Port map of WAN Ethernet switch ports = 0
~ # switch_utility CPU_PortCfgGet 4
        Port Id                                 = 4
        Enable FCS check                        = 0
        Enable FCS Enable FCS generation        = 1
        Special tag enable in egress direction  = 0
        Special tag enable in ingress direction = 0
        CPU port validity                       = 0
~ # switch_utility MonitorPortGet 4
        Port Id                                 = 4
        This port is used as monitor port.      = 1
~ # switch_utility PHY_AddrGet 0
        Device address on the MDIO interface = 0
~ # switch_utility PHY_AddrGet 1
        Device address on the MDIO interface = 1
~ # switch_utility PHY_AddrGet 2
        Device address on the MDIO interface = 17
~ # switch_utility PHY_AddrGet 3
        Device address on the MDIO interface = 18
~ # switch_utility PHY_AddrGet 4
        Device address on the MDIO interface = 19
~ # switch_utility PHY_AddrGet 5
        Device address on the MDIO interface = 5
~ # switch_utility PHY_AddrGet 6
        Device address on the MDIO interface = 0
~ # switch_utility QOS_PortCfgGet 4
        Port Id                  = 4
        Traffic Class assignment = 0
        Traffic Class            = 0
~ # switch_utility QOS_DscpClassGet
        nTrafficClass[0] = 0
        nTrafficClass[1] = 0
        nTrafficClass[2] = 0
        nTrafficClass[3] = 0
        nTrafficClass[4] = 0
        nTrafficClass[5] = 0
        nTrafficClass[6] = 0
        nTrafficClass[7] = 0
        nTrafficClass[8] = 0
        nTrafficClass[9] = 0
        nTrafficClass[10] = 0
        nTrafficClass[11] = 0
        nTrafficClass[12] = 0
        nTrafficClass[13] = 0
        nTrafficClass[14] = 0
        nTrafficClass[15] = 0
        nTrafficClass[16] = 0
        nTrafficClass[17] = 0
        nTrafficClass[18] = 0
        nTrafficClass[19] = 0
        nTrafficClass[20] = 0
        nTrafficClass[21] = 0
        nTrafficClass[22] = 0
        nTrafficClass[23] = 0
        nTrafficClass[24] = 0
        nTrafficClass[25] = 0
        nTrafficClass[26] = 0
        nTrafficClass[27] = 0
        nTrafficClass[28] = 0
        nTrafficClass[29] = 0
        nTrafficClass[30] = 0
        nTrafficClass[31] = 0
        nTrafficClass[32] = 0
        nTrafficClass[33] = 0
        nTrafficClass[34] = 0
        nTrafficClass[35] = 0
        nTrafficClass[36] = 0
        nTrafficClass[37] = 0
        nTrafficClass[38] = 0
        nTrafficClass[39] = 0
        nTrafficClass[40] = 0
        nTrafficClass[41] = 0
        nTrafficClass[42] = 0
        nTrafficClass[43] = 0
        nTrafficClass[44] = 0
        nTrafficClass[45] = 0
        nTrafficClass[46] = 0
        nTrafficClass[47] = 0
        nTrafficClass[48] = 0
        nTrafficClass[49] = 0
        nTrafficClass[50] = 0
        nTrafficClass[51] = 0
        nTrafficClass[52] = 0
        nTrafficClass[53] = 0
        nTrafficClass[54] = 0
        nTrafficClass[55] = 0
        nTrafficClass[56] = 0
        nTrafficClass[57] = 0
        nTrafficClass[58] = 0
        nTrafficClass[59] = 0
        nTrafficClass[60] = 0
        nTrafficClass[61] = 0
        nTrafficClass[62] = 0
        nTrafficClass[63] = 0
~ # switch_utility QOS_PcpClassGet
        nTrafficClass[0] = 0
        nTrafficClass[1] = 0
        nTrafficClass[2] = 0
        nTrafficClass[3] = 0
        nTrafficClass[4] = 0
        nTrafficClass[5] = 0
        nTrafficClass[6] = 0
        nTrafficClass[7] = 0
~ # switch_utility PCE_RuleRead 4
        == Pattern Table:
        nIndex                               = 4
        Index is used(Enabled)/ (Disabled)   = 0
        Port ID used                         = 0
        Port ID                              = 0
        DSCP value used                      = 0
        DSCP value                           = 0
        PCP value used                       = 0
        PCP value                            = 0
        Packet length used                   = 0
        Packet length                        = 0
        Packet length Range                  = 0
        Destination MAC address used         = 0
        Destination MAC address              = 00:00:00:00:00:00
        Destination MAC address mask         = 0x0
        Source MAC address used              = 0
        Source MAC address                   = 00:00:00:00:00:00
        Source MAC address mask              = 0x0
        MSB Application field used           = 0
        MSB Application field                = 0
        MSB Application mask/range selection = 0
        MSB Application mask/range           = 0
        LSB Application used                 = 0
        LSB Application field                = 0
        LSB Application mask/range selection = 0
        LSB Application mask/range           = 0
        DIP Selection.                       = 0
        DIP                                  = 000.000.000.000
        DIP Nibble Mask                      = 0x0
        SIP Selection.                       = 0
        SIP                                  = 000.000.000.000
        SIP Nibble Mask                      = 0x0
        Ethertype used                       = 0
        Ethertype                            = 0
        Ethertype Mask                       = 0x0
        IP protocol used                     = 0
        IP protocol                          = 0
        IP protocol Mask                     = 0x0
        PPPoE used                           = 0
        PPPoE                                = 0
        VLAN used                            = 0
        VLAN                                 = 0
        == Action Table:
        Action Traffic class Group.          = 0
        Alternative Traffic class            = 0
        Action IGMP Snooping Group.          = 0
        Action Learning Group.               = 0
        Action Interrupt Group.              = 0
        Action Cross State Group.            = 0
        Action Critical Frames Group.        = 0
        Action Timestamp Group.              = 0
        Action Forwarding Group.             = 0
        Target portmap for forwarded packets = 0
        Action Remarking Group.              = 0
        PCP remarking enable                 = 0
        DSCP remarking enable                = 0
        Class remarking enable               = 0
        Action Meter Group.                  = 0
        Meter ID                             = 0
        Action RMON Group.                   = 0
        Counter ID                           = 0
        Action VLAN Group.                   = 0
        Alternative VLAN Id.                 = 0
        Action Cross VLAN Group.             = 0
~ # switch_utility QOS_QueuePortGet
Invalid number of parameters: is 0, should be 2
Usage:  switch_utility QOS_QueuePortGet <nPortId> <nTrafficClassId>

        nPortId:             Port ID
        nTrafficClassId:     Traffic Class index

~ # switch_utility QOS_MeterCfgGet 0
        The meter shaper Enable or Disable = 0
        Meter index = 0
        Committed Burst Size = 0
        Excess Burst Size = 0
        Rate[kbit/s] = 0
~ # switch_utility QOS_MeterPortGet
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
~ # switch_utility QOS_WredCfgGet
        Drop Probability Profile   = 0
        WRED Red Threshold Min     = 0x3ff
        WRED Red Threshold Max     = 0x3ff
        WRED Yellow Threshold Min  = 0x3ff
        WRED Yellow Threshold Max  = 0x3ff
        WRED Green Threshold Min   = 0x3ff
        WRED Green Threshold Max   = 0x3ff
~ # switch_utility QOS_WredQueueCfgGet 0
        QoS queue index = 0x0
        WRED Red Threshold Min = 0xff
        WRED Red Threshold Max = 0xff
        WRED Yellow Threshold Min = 0xff
        WRED Yellow Threshold Max = 0xff
        WRED Green Threshold Min = 0xff
        WRED Green Threshold Max = 0xff
~ # switch_utility QOS_SchedulerCfgGet 0
        QoS queue index = 0
        Scheduler Type  = 0x0
        Ratio = 0x1800
~ # switch_utility QOS_StormGet
        Meter index = 0x0
        broadcast traffic= 0x0
        multicast traffic = 0x0
        unknown unicast traffic= 0x0
~ # switch_utility QOS_ShaperCfgGet 0
        Rate shaper index = 0x0
        Enable or Disable the rate shaperx = 0x0
        Committed Burst Size = 0
        Rate [kbit/s]= 0
~ # switch_utility QOS_ClassPCPGet
        nPCP[0] = 0
        nPCP[1] = 0
        nPCP[2] = 0
        nPCP[3] = 0
        nPCP[4] = 0
        nPCP[5] = 0
        nPCP[6] = 0
        nPCP[7] = 0
        nPCP[8] = 0
        nPCP[9] = 0
        nPCP[10] = 0
        nPCP[11] = 0
        nPCP[12] = 0
        nPCP[13] = 0
        nPCP[14] = 0
        nPCP[15] = 0
~ # switch_utility QOS_ClassDSCPGet
        nDSCP[0] = 0
        nDSCP[1] = 0
        nDSCP[2] = 0
        nDSCP[3] = 0
        nDSCP[4] = 0
        nDSCP[5] = 0
        nDSCP[6] = 0
        nDSCP[7] = 0
        nDSCP[8] = 0
        nDSCP[9] = 0
        nDSCP[10] = 0
        nDSCP[11] = 0
        nDSCP[12] = 0
        nDSCP[13] = 0
        nDSCP[14] = 0
        nDSCP[15] = 0
~ # switch_utility QOS_PortRemarkingCfgGet 4
        nPortId = 0x4
        eDSCP_IngressRemarkingEnable = 0x0
        bDSCP_EgressRemarkingEnable  = 0x0
        bPCP_IngressRemarkingEnable  = 0x0
        bPCP_EgressRemarkingEnable   = 0x1
~ # switch_utility STP_PortCfgGet 4
        Port Id                      = 4
        Spanning Tree Protocol state = 0
~ # switch_utility STP_BPDU_RULE_Get
        Filter spanning tree packets      = 0
        Target port for forwarded packets = 0
~ # switch_utility 8021X_PortCfgGet 4
        Port number                  = 4
        802.1x state of the port     = 0
~ # switch_utility PHY_Query 0
        A connected PHY on this port = YES
~ # switch_utility PHY_Query 1
        A connected PHY on this port = No
~ # switch_utility PHY_Query 2
        A connected PHY on this port = YES
~ # switch_utility PHY_Query 3
        A connected PHY on this port = No
~ # switch_utility PHY_Query 4
        A connected PHY on this port = YES
~ # switch_utility PHY_Query 5
        A connected PHY on this port = YES
~ # switch_utility PHY_Query 6
        A connected PHY on this port = YES
~ # switch_utility VersionGet 0
        IFX ETHSW SWITCH API for GSWITCH Platform = 1.1.7.2
~ # switch_utility RMON_ExtendGet 0
        RMON Counter [0] = 0
        RMON Counter [1] = 0
        RMON Counter [2] = 0
        RMON Counter [3] = 0
        RMON Counter [4] = 0
        RMON Counter [5] = 0
        RMON Counter [6] = 0
        RMON Counter [7] = 0
        RMON Counter [8] = 0
        RMON Counter [9] = 0
        RMON Counter [10] = 0
        RMON Counter [11] = 0
        RMON Counter [12] = 0
        RMON Counter [13] = 0
        RMON Counter [14] = 0
        RMON Counter [15] = 0
        RMON Counter [16] = 0
        RMON Counter [17] = 0
        RMON Counter [18] = 0
        RMON Counter [19] = 0
        RMON Counter [20] = 0
        RMON Counter [21] = 0
        RMON Counter [22] = 0
        RMON Counter [23] = 0
~ # switch_utility 8021X_EAPOL_RuleGet
        8021.x forwarding port rule       = 0
        Target port for forwarded packets = 0
~ # switch_utility CapGet
        Capability: Number of physical Ethernet ports = 7
        Capability: Number of virtual Ethernet ports = 6
        Capability: Size of internal packet memory [in Bytes] = 65536
        Capability: Number of Segment size per device = 256
        Capability: Number of priority queues per device = 32
        Capability: Number of meter instances = 8
        Capability: Number of rate shaper instances = 16
        Capability: Number of VLAN groups that can be configured on the switch hardware = 64
        Capability: Number of Forwarding database IDs [FIDs] = 64
        Capability: Number of MAC table entries = 2048
        Capability: Number of multicast level 3 hardware table entries = 64
        Capability: Number of supported PPPoE sessions = 16</code>
</p>

</div>

<h4 id="empty_settings">Empty settings</h4>
<div class="level4">

<p>
On the OEM firmware, the switch settings can be reset to manufacturer defaults by doing:
</p>
<pre class="code">  ~ # switch_utility Reset
  ~ # switch_utility HW_Init</pre>

<p>
These settings would <em>probably</em> reflect what the settings are like when OpenWrt is running:
</p>

<p style="padding: 10px;border:1px solid grey;height:300px;font:10px/14px Georgia, Garamond, Serif;overflow:Auto;background-color:#FFFFFF">
<code>~ # switch_utility Reset
~ # switch_utility HW_Init
~ #
~ # switch_utility CfgGet
        MAC_Table Age Timer = 3
        VLAN_Aware          = 0
        Max Packet Len      = 9600
        Max Packet Len      = 0
        Pause MAC Mode      = 0
        Pause MAC Src       = 00:d0:8f:00:01:00
~ # switch_utility PortCfgGet 4
        Port Id                 = 4
        Port Enable             = 0
        Unicast Unkown Drop     = 0
        Multicast Unkown Drop   = 0
        Reserved Packet Drop    = 0
        Broadcast Packet Drop   = 0
        Aging                   = 0
        Learning Mac Port Lock  = 0
        Learning Limit          = 255
        Port Monitor            = 0
        Flow Control            = 0
~ # switch_utility PortLinkCfgGet 4
        Port Id                   = 4
        Force Port Duplex Mode.   = 0
        Port Duplex Status.       = 0
        Force Link Speed.         = 0
        Port link speed status    = 1000
        Force Link                = 0
        Force link status         = 0
        Selected interface mode   = 0
        Select if MAC or PHY mode = 1
        Interface clock Mode      = 0
~ # switch_utility PortRedirectGet 4
        Port Id                 = 4
        Port Redirect Egress    = 0
        Port Redirect Ingress   = 0
~ # switch_utility MAC_TableEntryRead
--------------------------------------------------------------
   MAC Address       | port |   age    | FID | Static
--------------------------------------------------------------
--------------------------------------------------------------
~ # switch_utility VLAN_IdGet 0
        VId = 0
        FId = 0
~ # switch_utility VLAN_IdGet 1
ERROR: (VID does not exists) drivers/net/ifxmips_switch_api/ifx_ethsw_flow_api.c:IFX_FLOW_VLAN_IdGet:1711
IOCTL failed for ioctl command 0xC0084517, returned -1
~ # switch_utility VLAN_IdGet 2
ERROR: (VID does not exists) drivers/net/ifxmips_switch_api/ifx_ethsw_flow_api.c:IFX_FLOW_VLAN_IdGet:1711
IOCTL failed for ioctl command 0xC0084517, returned -1
~ # switch_utility VLAN_IdGet 3
ERROR: (VID does not exists) drivers/net/ifxmips_switch_api/ifx_ethsw_flow_api.c:IFX_FLOW_VLAN_IdGet:1711
sIOCTL failed for ioctl command 0xC0084517, returned -1
~ # switch_utility VLAN_IdGet 4
ERROR: (VID does not exists) drivers/net/ifxmips_switch_api/ifx_ethsw_flow_api.c:IFX_FLOW_VLAN_IdGet:1711
IOCTL failed for ioctl command 0xC0084517, returned -1
~ # switch_utility VLAN_IdGet 5
ERROR: (VID does not exists) drivers/net/ifxmips_switch_api/ifx_ethsw_flow_api.c:IFX_FLOW_VLAN_IdGet:1711
IOCTL failed for ioctl command 0xC0084517, returned -1
~ # switch_utility VLAN_IdGet 6
ERROR: (VID does not exists) drivers/net/ifxmips_switch_api/ifx_ethsw_flow_api.c:IFX_FLOW_VLAN_IdGet:1711
IOCTL failed for ioctl command 0xC0084517, returned -1
~ # switch_utility VLAN_PortMapTableRead
--------------------------------------------------------------
 VLAN ID            | Port               | Tag Member
--------------------------------------------------------------
--------------------------------------------------------------
~ # switch_utility VLAN_PortCfgGet 0
        VLAN PortId           = 0
        VLAN PortVId          = 0
        VLAN Unknown Drop     = 0
        VLAN ReAssign         = 0
        VLAN Violation Member = 0
        VLAN Admit Mode       = 0
        VLAN TVM              = 0
~ # switch_utility VLAN_PortCfgGet 1
        VLAN PortId           = 1
        VLAN PortVId          = 0
        VLAN Unknown Drop     = 0
        VLAN ReAssign         = 0
        VLAN Violation Member = 0
        VLAN Admit Mode       = 0
        VLAN TVM              = 0
~ # switch_utility VLAN_PortCfgGet 2
        VLAN PortId           = 2
        VLAN PortVId          = 0
        VLAN Unknown Drop     = 0
        VLAN ReAssign         = 0
        VLAN Violation Member = 0
        VLAN Admit Mode       = 0
        VLAN TVM              = 0
~ # switch_utility VLAN_PortCfgGet 3
        VLAN PortId           = 3
        VLAN PortVId          = 0
        VLAN Unknown Drop     = 0
        VLAN ReAssign         = 0
        VLAN Violation Member = 0
        VLAN Admit Mode       = 0
        VLAN TVM              = 0
~ # switch_utility VLAN_PortCfgGet 4
        VLAN PortId           = 4
        VLAN PortVId          = 0
        VLAN Unknown Drop     = 0
        VLAN ReAssign         = 0
        VLAN Violation Member = 0
        VLAN Admit Mode       = 0
        VLAN TVM              = 0
~ # switch_utility VLAN_PortCfgGet 5
        VLAN PortId           = 5
        VLAN PortVId          = 0
        VLAN Unknown Drop     = 0
        VLAN ReAssign         = 0
        VLAN Violation Member = 0
        VLAN Admit Mode       = 0
        VLAN TVM              = 0
~ # switch_utility VLAN_PortCfgGet 6
        VLAN PortId           = 6
        VLAN PortVId          = 0
        VLAN Unknown Drop     = 0
        VLAN ReAssign         = 0
        VLAN Violation Member = 0
        VLAN Admit Mode       = 0
        VLAN TVM              = 0
~ # switch_utility MulticastSnoopCfgGet
        MULTICAST SNOOP IGMP_Mode           = 0
        MULTICAST SNOOP IGMPv3 support      = 0
        MULTICAST SNOOP CrossVLAN           = 0
        MULTICAST SNOOP ForwardPort         = 0
        MULTICAST SNOOP ForwardPortId       = 0
        MULTICAST SNOOP ClassOfService      = 0
        MULTICAST SNOOP Robust              = 3
        MULTICAST SNOOP QueryInterval (HEX) = 0x64
        MULTICAST Suppression | Aggregation = 2
        MULTICAST SNOOP FastLeave           = 0
        MULTICAST SNOOP LearningRouter      = 0
~ # switch_utility RMON_Get 4
        Port Id                                       = 4
        Receive Packet Count                          = 0
        Receive Unicast Packet Count                  = 0
        Receive Broadcast Packet Count                = 0
        Receive Multicast Packet Count                = 0
        Receive FCS Error Packet Count                = 0
        Receive Undersize Good Packet Count           = 0
        Receive Oversize Good Packet Count            = 0
        Receive Undersize Error Packet Count          = 0
        Receive Good Pause Packet Count               = 0
        Receive Oversize Error Packet Count           = 0
        Receive Align Error Packet Count              = 0
        Filtered Packet Count                         = 0
        Receive Size 64 Packet Count                  = 0
        Receive Size 65-127 Packet Countt             = 0
        Receive Size 128-255 Packet Count             = 0
        Receive Size 256-511 Packet Count             = 0
        Receive Size 512-1023 Packet Count            = 0
        Receive Size 1024-1522(or more)Packet Count   = 0
        Receive Dropped Packet Count                  = 0
        Transmit Packet Count                         = 0
        Transmit Unicast Packet Count                 = 0
        Transmit Broadcast Packet Count               = 0
        Transmit Multicast Packet Count               = 0
        Transmit Single Collision Count               = 0
        Transmit Multiple Collision Count             = 0
        Transmit Late Collision Count                 = 0
        Transmit Excessive Collision Count            = 0
        Transmit Collision Count                      = 0
        Transmit Pause Packet Count                   = 0
        Transmit Size 64 Packet Count                 = 0
        Transmit Size 65-127 Packet Count             = 0
        Transmit Size 128-255 Packet Count            = 0
        Transmit Size 256-511 Packet Count            = 0
        Transmit Size 512-1023 Packet Count           = 0
        Transmit Size 1024-1522(or more)Packet Count  = 0
        Transmit Drop Packet Count                    = 0
        Egress Queue Discard (ACM) Frame Count        = 0
        Receive Good Bytes Count                      = 00000000
        Receive Bad Byte Count                        = 00000000
        Transmit Good Byte Count                      = 00000000
~ # switch_utility MDIO_CfgGet
        MDIO Access Enable = 1
        Clock Speed= 9
~ # switch_utility MDIO_DataRead 0
Invalid number of parameters: is 1, should be 2
Usage:  switch_utility MDIO_DataRead <PHY addr> <Register inside PHY>

        phy addr:           0..14
        register:           0..24

~ # switch_utility PortRGMII_ClkCfgGet 4
nDelayRx = 0
nDelayTx = 0
        Port Id         = 4
        Delay RX        = 0
        Delay TX        = 0
~ # switch_utility RegisterGet
Invalid number of parameters: is 0, should be 1
Usage:  switch_utility RegisterGet <nRegAddr>

        nRegAddr:

~ # switch_utility CPU_PortExtendCfgGet
        Add Ethernet layer-2 header = 0
        Remove Ethernet layer-2 header = 0
        Header data
          Source MAC     : 00:00:00:00:00:00
          Destination MAC: 00:00:00:00:00:00
          Packet EtherType Field = 0
          VLAN Tag Priority Field = 0
          VLAN Tag CFI = 0
          VLAN Tag VLAN ID = 0
        PAUSE frames coming = 1
        Remove the CRC = 0
        Port map of WAN Ethernet switch ports = 0
~ # switch_utility CPU_PortCfgGet 4
        Port Id                                 = 4
        Enable FCS check                        = 0
        Enable FCS Enable FCS generation        = 1
        Special tag enable in egress direction  = 0
        Special tag enable in ingress direction = 0
        CPU port validity                       = 0
~ # switch_utility MonitorPortGet 4
        Port Id                                 = 4
        This port is used as monitor port.      = 0
~ # switch_utility PHY_AddrGet 0
        Device address on the MDIO interface = 0
~ # switch_utility PHY_AddrGet 1
        Device address on the MDIO interface = 1
~ # switch_utility PHY_AddrGet 2
        Device address on the MDIO interface = 17
~ # switch_utility PHY_AddrGet 3
        Device address on the MDIO interface = 18
~ # switch_utility PHY_AddrGet 4
        Device address on the MDIO interface = 19
~ # switch_utility PHY_AddrGet 5
        Device address on the MDIO interface = 5
~ # switch_utility PHY_AddrGet 6
        Device address on the MDIO interface = 0
~ # switch_utility QOS_PortCfgGet 4
        Port Id                  = 4
        Traffic Class assignment = 0
        Traffic Class            = 0
~ # switch_utility QOS_DscpClassGet
        nTrafficClass[0] = 0
        nTrafficClass[1] = 0
        nTrafficClass[2] = 0
        nTrafficClass[3] = 0
        nTrafficClass[4] = 0
        nTrafficClass[5] = 0
        nTrafficClass[6] = 0
        nTrafficClass[7] = 0
        nTrafficClass[8] = 0
        nTrafficClass[9] = 0
        nTrafficClass[10] = 0
        nTrafficClass[11] = 0
        nTrafficClass[12] = 0
        nTrafficClass[13] = 0
        nTrafficClass[14] = 0
        nTrafficClass[15] = 0
        nTrafficClass[16] = 0
        nTrafficClass[17] = 0
        nTrafficClass[18] = 0
        nTrafficClass[19] = 0
        nTrafficClass[20] = 0
        nTrafficClass[21] = 0
        nTrafficClass[22] = 0
        nTrafficClass[23] = 0
        nTrafficClass[24] = 0
        nTrafficClass[25] = 0
        nTrafficClass[26] = 0
        nTrafficClass[27] = 0
        nTrafficClass[28] = 0
        nTrafficClass[29] = 0
        nTrafficClass[30] = 0
        nTrafficClass[31] = 0
        nTrafficClass[32] = 0
        nTrafficClass[33] = 0
        nTrafficClass[34] = 0
        nTrafficClass[35] = 0
        nTrafficClass[36] = 0
        nTrafficClass[37] = 0
        nTrafficClass[38] = 0
        nTrafficClass[39] = 0
        nTrafficClass[40] = 0
        nTrafficClass[41] = 0
        nTrafficClass[42] = 0
        nTrafficClass[43] = 0
        nTrafficClass[44] = 0
        nTrafficClass[45] = 0
        nTrafficClass[46] = 0
        nTrafficClass[47] = 0
        nTrafficClass[48] = 0
        nTrafficClass[49] = 0
        nTrafficClass[50] = 0
        nTrafficClass[51] = 0
        nTrafficClass[52] = 0
        nTrafficClass[53] = 0
        nTrafficClass[54] = 0
        nTrafficClass[55] = 0
        nTrafficClass[56] = 0
        nTrafficClass[57] = 0
        nTrafficClass[58] = 0
        nTrafficClass[59] = 0
        nTrafficClass[60] = 0
        nTrafficClass[61] = 0
        nTrafficClass[62] = 0
        nTrafficClass[63] = 0
~ # switch_utility QOS_PcpClassGet
        nTrafficClass[0] = 0
        nTrafficClass[1] = 0
        nTrafficClass[2] = 0
        nTrafficClass[3] = 0
        nTrafficClass[4] = 0
        nTrafficClass[5] = 0
        nTrafficClass[6] = 0
        nTrafficClass[7] = 0
~ # switch_utility PCE_RuleRead 4
        == Pattern Table:
        nIndex                               = 4
        Index is used(Enabled)/ (Disabled)   = 0
        Port ID used                         = 0
        Port ID                              = 0
        DSCP value used                      = 0
        DSCP value                           = 0
        PCP value used                       = 0
        PCP value                            = 0
        Packet length used                   = 0
        Packet length                        = 0
        Packet length Range                  = 0
        Destination MAC address used         = 0
        Destination MAC address              = 00:00:00:00:00:00
        Destination MAC address mask         = 0x0
        Source MAC address used              = 0
        Source MAC address                   = 00:00:00:00:00:00
        Source MAC address mask              = 0x0
        MSB Application field used           = 0
        MSB Application field                = 0
        MSB Application mask/range selection = 0
        MSB Application mask/range           = 0
        LSB Application used                 = 0
        LSB Application field                = 0
        LSB Application mask/range selection = 0
        LSB Application mask/range           = 0
        DIP Selection.                       = 0
        DIP                                  = 000.000.000.000
        DIP Nibble Mask                      = 0x0
        SIP Selection.                       = 0
        SIP                                  = 000.000.000.000
        SIP Nibble Mask                      = 0x0
        Ethertype used                       = 0
        Ethertype                            = 0
        Ethertype Mask                       = 0x0
        IP protocol used                     = 0
        IP protocol                          = 0
        IP protocol Mask                     = 0x0
        PPPoE used                           = 0
        PPPoE                                = 0
        VLAN used                            = 0
        VLAN                                 = 0
        == Action Table:
        Action Traffic class Group.          = 0
        Alternative Traffic class            = 0
        Action IGMP Snooping Group.          = 0
        Action Learning Group.               = 0
        Action Interrupt Group.              = 0
        Action Cross State Group.            = 0
        Action Critical Frames Group.        = 0
        Action Timestamp Group.              = 0
        Action Forwarding Group.             = 0
        Target portmap for forwarded packets = 0
        Action Remarking Group.              = 0
        PCP remarking enable                 = 0
        DSCP remarking enable                = 0
        Class remarking enable               = 0
        Action Meter Group.                  = 0
        Meter ID                             = 0
        Action RMON Group.                   = 0
        Counter ID                           = 0
        Action VLAN Group.                   = 0
        Alternative VLAN Id.                 = 0
        Action Cross VLAN Group.             = 0
~ # switch_utility QOS_QueuePortGet
Invalid number of parameters: is 0, should be 2
Usage:  switch_utility QOS_QueuePortGet <nPortId> <nTrafficClassId>

        nPortId:             Port ID
        nTrafficClassId:     Traffic Class index

~ # switch_utility QOS_MeterCfgGet 0
        The meter shaper Enable or Disable = 0
        Meter index = 0
        Committed Burst Size = 0
        Excess Burst Size = 0
        Rate[kbit/s] = 0
~ # switch_utility QOS_MeterPortGet
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
 | Meter Index =  0 | Direction =  0 | Ingress PortID =  0 | Egress PortID =  0
~ # switch_utility QOS_WredCfgGet
        Drop Probability Profile   = 0
        WRED Red Threshold Min     = 0x3ff
        WRED Red Threshold Max     = 0x3ff
        WRED Yellow Threshold Min  = 0x3ff
        WRED Yellow Threshold Max  = 0x3ff
        WRED Green Threshold Min   = 0x3ff
        WRED Green Threshold Max   = 0x3ff
~ # switch_utility QOS_WredQueueCfgGet 0
        QoS queue index = 0x0
        WRED Red Threshold Min = 0x50
        WRED Red Threshold Max = 0x50
        WRED Yellow Threshold Min = 0x50
        WRED Yellow Threshold Max = 0x50
        WRED Green Threshold Min = 0x50
        WRED Green Threshold Max = 0x50
~ # switch_utility QOS_SchedulerCfgGet 0
        QoS queue index = 0
        Scheduler Type  = 0x0
        Ratio = 0x1800
~ # switch_utility QOS_StormGet
        Meter index = 0x0
        broadcast traffic= 0x0
        multicast traffic = 0x0
        unknown unicast traffic= 0x0
~ # switch_utility QOS_ShaperCfgGet 0
        Rate shaper index = 0x0
        Enable or Disable the rate shaperx = 0x0
        Committed Burst Size = 0
        Rate [kbit/s]= 0
~ # switch_utility QOS_ClassPCPGet
        nPCP[0] = 0
        nPCP[1] = 0
        nPCP[2] = 0
        nPCP[3] = 0
        nPCP[4] = 0
        nPCP[5] = 0
        nPCP[6] = 0
        nPCP[7] = 0
        nPCP[8] = 0
        nPCP[9] = 0
        nPCP[10] = 0
        nPCP[11] = 0
        nPCP[12] = 0
        nPCP[13] = 0
        nPCP[14] = 0
        nPCP[15] = 0
~ # switch_utility QOS_ClassDSCPGet
        nDSCP[0] = 0
        nDSCP[1] = 0
        nDSCP[2] = 0
        nDSCP[3] = 0
        nDSCP[4] = 0
        nDSCP[5] = 0
        nDSCP[6] = 0
        nDSCP[7] = 0
        nDSCP[8] = 0
        nDSCP[9] = 0
        nDSCP[10] = 0
        nDSCP[11] = 0
        nDSCP[12] = 0
        nDSCP[13] = 0
        nDSCP[14] = 0
        nDSCP[15] = 0
~ # switch_utility QOS_PortRemarkingCfgGet 4
        nPortId = 0x4
        eDSCP_IngressRemarkingEnable = 0x0
        bDSCP_EgressRemarkingEnable  = 0x0
        bPCP_IngressRemarkingEnable  = 0x0
        bPCP_EgressRemarkingEnable   = 0x1
~ # switch_utility STP_PortCfgGet 4
        Port Id                      = 4
        Spanning Tree Protocol state = 0
~ # switch_utility STP_BPDU_RULE_Get
        Filter spanning tree packets      = 0
        Target port for forwarded packets = 0
~ # switch_utility 8021X_PortCfgGet 4
        Port number                  = 4
        802.1x state of the port     = 0
~ # switch_utility PHY_Query 0
        A connected PHY on this port = YES
~ # switch_utility PHY_Query 1
        A connected PHY on this port = No
~ # switch_utility PHY_Query 2
        A connected PHY on this port = YES
~ # switch_utility PHY_Query 3
        A connected PHY on this port = No
~ # switch_utility PHY_Query 4
        A connected PHY on this port = YES
~ # switch_utility PHY_Query 5
        A connected PHY on this port = YES
~ # switch_utility PHY_Query 6
        A connected PHY on this port = YES
~ # switch_utility VersionGet 0
        IFX ETHSW SWITCH API for GSWITCH Platform = 1.1.7.2
~ # switch_utility RMON_ExtendGet 0
        RMON Counter [0] = 0
        RMON Counter [1] = 0
        RMON Counter [2] = 0
        RMON Counter [3] = 0
        RMON Counter [4] = 0
        RMON Counter [5] = 0
        RMON Counter [6] = 0
        RMON Counter [7] = 0
        RMON Counter [8] = 0
        RMON Counter [9] = 0
        RMON Counter [10] = 0
        RMON Counter [11] = 0
        RMON Counter [12] = 0
        RMON Counter [13] = 0
        RMON Counter [14] = 0
        RMON Counter [15] = 0
        RMON Counter [16] = 0
        RMON Counter [17] = 0
        RMON Counter [18] = 0
        RMON Counter [19] = 0
        RMON Counter [20] = 0
        RMON Counter [21] = 0
        RMON Counter [22] = 0
        RMON Counter [23] = 0
~ # switch_utility 8021X_EAPOL_RuleGet
        8021.x forwarding port rule       = 0
        Target port for forwarded packets = 6
~ # switch_utility CapGet
        Capability: Number of physical Ethernet ports = 7
        Capability: Number of virtual Ethernet ports = 6
        Capability: Size of internal packet memory [in Bytes] = 65536
        Capability: Number of Segment size per device = 256
        Capability: Number of priority queues per device = 32
        Capability: Number of meter instances = 8
        Capability: Number of rate shaper instances = 16
        Capability: Number of VLAN groups that can be configured on the switch hardware = 64
        Capability: Number of Forwarding database IDs [FIDs] = 64
        Capability: Number of MAC table entries = 2048
        Capability: Number of multicast level 3 hardware table entries = 64
        Capability: Number of supported PPPoE sessions = 16</code>
</p>

</div>

<h3 class="sectionedit22" id="oem_switch_scripts">OEM Switch scripts</h3>
<div class="level3">

</div>

<h4 id="dsl_wan_settingsh">dsl_wan_setting.sh</h4>
<div class="level4">

<p style="padding: 10px;border:1px solid grey;height:300px;font:10px/14px Georgia, Garamond, Serif;overflow:Auto;background-color:#FFFFFF">
<code>#!/bin/sh
switch_utility CfgSet 3 1 1536 0 00:00:00:00:00:00 

#==============================================MAC SPOOFING 

#====================================================== 
CPU_PORT="6" 
DSL_VPORT="11" 
DSL_XOAVPORT="10"

COMMON_VID="50" 
WAN_VID="40" 
LAN_VID="30" 

LAN_PORT_VID1="0x5"
LAN_PORT_VID2="0x4"
LAN_PORT_VID3="0x3"
LAN_PORT_VID4="0x2"

LAN_PORT_PVID1="0x805"
LAN_PORT_PVID2="0x804"
LAN_PORT_PVID3="0x803"
LAN_PORT_PVID4="0x802"

LAN_PORT1="5"
LAN_PORT2="0"
LAN_PORT3="2"
LAN_PORT4="4"
LAN_PORT7="7"
LAN_PORT8="8"
LAN_PORT9="9"

ETH_LAN_FID="2"

#========= Default MAC port lock is Disable on all port======== 

#================Create Vlan ID for Common, WAN, LAN group================================
switch_utility VLAN_IdCreate $COMMON_VID 0 
switch_utility VLAN_IdCreate $WAN_VID 1
switch_utility VLAN_IdCreate $LAN_VID 0 

for port_vid in $LAN_PORT_VID1 $LAN_PORT_VID2 $LAN_PORT_VID3 $LAN_PORT_VID4;do 
		switch_utility VLAN_IdCreate $port_vid $ETH_LAN_FID
		switch_utility VLAN_PortMemberAdd $port_vid $CPU_PORT 0
done

switch_utility VLAN_PortMemberAdd $LAN_PORT_VID1 $LAN_PORT1 0
switch_utility VLAN_PortMemberAdd $LAN_PORT_VID2 $LAN_PORT2 0
switch_utility VLAN_PortMemberAdd $LAN_PORT_VID3 $LAN_PORT3 0
switch_utility VLAN_PortMemberAdd $LAN_PORT_VID4 $LAN_PORT4 0

for port_vid in $LAN_PORT_PVID1 $LAN_PORT_PVID2 $LAN_PORT_PVID3 $LAN_PORT_PVID4;do 
		switch_utility VLAN_IdCreate $port_vid $ETH_LAN_FID
		switch_utility VLAN_PortMemberAdd $port_vid $LAN_PORT1 0
		switch_utility VLAN_PortMemberAdd $port_vid $LAN_PORT2 0
		switch_utility VLAN_PortMemberAdd $port_vid $LAN_PORT3 0
		switch_utility VLAN_PortMemberAdd $port_vid $LAN_PORT4 0
		switch_utility VLAN_PortMemberAdd $port_vid $CPU_PORT 1
done
      
#===============Turn on TVM on ALL VPORT===================================
for argument in $LAN_PORT1 $LAN_PORT2 $LAN_PORT3 $LAN_PORT4 $LAN_PORT7 $LAN_PORT8 $LAN_PORT9 ;do 
		switch_utility VLAN_PortCfgSet $argument $LAN_VID 0 0 3 0 1 
done 

switch_utility VLAN_PortCfgSet $DSL_VPORT $WAN_VID 0 0 3 0 1 
switch_utility VLAN_PortCfgSet $DSL_XOAVPORT $WAN_VID 0 0 3 0 1 
switch_utility VLAN_PortCfgSet $CPU_PORT $COMMON_VID 0 0 3 0 1 
   								       								    
##===============All Ports need add to VlanID 50 group ==============================
for argument in $LAN_PORT1 $LAN_PORT2 $LAN_PORT3 $LAN_PORT4 $LAN_PORT7 $LAN_PORT8 $LAN_PORT9 $CPU_PORT $DSL_VPORT $DSL_XOAVPORT;do 
		switch_utility VLAN_PortMemberAdd $COMMON_VID $argument 0 
done 
   																		                   
for argument in $CPU_PORT $DSL_VPORT $DSL_XOAVPORT;do 
		switch_utility VLAN_PortMemberAdd $WAN_VID $argument 0 
done 
 
for argument in $CPU_PORT $LAN_PORT1 $LAN_PORT2 $LAN_PORT3 $LAN_PORT4 $LAN_PORT7 $LAN_PORT8 $LAN_PORT9;do 
		switch_utility VLAN_PortMemberAdd $LAN_VID $argument 0 
done

#======================Add mac for pppoa===============================
switch_utility MAC_TableEntryAdd 1 $CPU_PORT 0 1 00:00:00:00:00:00

#======================Add mac for ipoa================================
switch_utility MAC_TableEntryAdd 1 $CPU_PORT 0 1 00:00:00:00:00:20

#======================enable flow control=============================
switch_utility MDIO_DataWrite 0x0 0x4 0x5e1
switch_utility MDIO_DataWrite 0x5 0x4 0x5e1
switch_utility MDIO_DataWrite 0x11 0x4 0x5e1
switch_utility MDIO_DataWrite 0x13 0x4 0x5e1

switch_utility QOS_WredQueueCfgSet 0 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 1 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 2 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 3 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 4 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 5 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 6 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 7 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 8 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 9 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 10 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 11 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 12 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 13 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 14 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 15 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 16 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 17 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 18 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 19 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 20 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 21 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 22 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 23 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 24 0x50 0x50 0x50 0x50 0x50 0x50
switch_utility QOS_WredQueueCfgSet 25 0x50 0x50 0x50 0x50 0x50 0x50
switch_utility QOS_WredQueueCfgSet 26 0x50 0x50 0x50 0x50 0x50 0x50
switch_utility QOS_WredQueueCfgSet 27 0x50 0x50 0x50 0x50 0x50 0x50
switch_utility QOS_WredQueueCfgSet 28 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 29 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 30 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 31 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff

switch_utility RegisterSet 0x4a 0x118

#==============================for traffic=============================
switch_utility RegisterSet 0x904 0x0B
switch_utility RegisterSet 0x910 0x0B
switch_utility RegisterSet 0x91c 0x0B
switch_utility RegisterSet 0x928 0x0B
switch_utility RegisterSet 0x934 0x0B
switch_utility RegisterSet 0x940 0x0B</code>
</p>

</div>

<h4 id="eth_wan_settingsh">eth_wan_setting.sh</h4>
<div class="level4">

<p style="padding: 10px;border:1px solid grey;height:300px;font:10px/14px Georgia, Garamond, Serif;overflow:Auto;background-color:#FFFFFF">
<code>#!/bin/sh

switch_utility RegisterSet 0xCCD 0x10

switch_utility CfgSet 3 1 1536 0 00:00:00:00:00:00 

CPU_PORT="6" 
WAN_PORT="4"

COMMON_VID="50" 
WAN_VID="40" 
LAN_VID="30" 

LAN_PORT_VID1="0x5"
LAN_PORT_VID2="0x4"
LAN_PORT_VID3="0x3"

LAN_PORT_PVID1="0x805"
LAN_PORT_PVID2="0x804"
LAN_PORT_PVID3="0x803"

LAN_PORT1="5"
LAN_PORT2="0"
LAN_PORT3="2"
LAN_PORT7="7"
LAN_PORT8="8"
LAN_PORT9="9"

ETH_LAN_FID="2"

#================Create Vlan ID for Common, WAN, LAN group================================
switch_utility VLAN_IdCreate $COMMON_VID 0 
switch_utility VLAN_IdCreate $WAN_VID 1
switch_utility VLAN_IdCreate $LAN_VID 0 

for port_vid in $LAN_PORT_VID1 $LAN_PORT_VID2 $LAN_PORT_VID3;do 
		switch_utility VLAN_IdCreate $port_vid $ETH_LAN_FID
		switch_utility VLAN_PortMemberAdd $port_vid $CPU_PORT 0
done

switch_utility VLAN_PortMemberAdd $LAN_PORT_VID1 $LAN_PORT1 0
switch_utility VLAN_PortMemberAdd $LAN_PORT_VID2 $LAN_PORT2 0
switch_utility VLAN_PortMemberAdd $LAN_PORT_VID3 $LAN_PORT3 0

for port_vid in $LAN_PORT_PVID1 $LAN_PORT_PVID2 $LAN_PORT_PVID3;do 
		switch_utility VLAN_IdCreate $port_vid $ETH_LAN_FID
		switch_utility VLAN_PortMemberAdd $port_vid $LAN_PORT1 0
		switch_utility VLAN_PortMemberAdd $port_vid $LAN_PORT2 0
		switch_utility VLAN_PortMemberAdd $port_vid $LAN_PORT3 0
		switch_utility VLAN_PortMemberAdd $port_vid $CPU_PORT 1
done

#===============Turn on TVM on ALL VPORT===================================
for argument in $LAN_PORT1 $LAN_PORT2 $LAN_PORT3 $LAN_PORT7 $LAN_PORT8 $LAN_PORT9;do 
		switch_utility VLAN_PortCfgSet $argument $LAN_VID 0 0 3 0 1 
done 

switch_utility VLAN_PortCfgSet $WAN_PORT $WAN_VID 0 0 3 0 1 
switch_utility VLAN_PortCfgSet $CPU_PORT $COMMON_VID 0 0 3 0 1 

##===============All Ports need add to VlanID 50 group ==============================
for argument in $LAN_PORT1 $LAN_PORT2 $LAN_PORT3 $LAN_PORT7 $LAN_PORT8 $LAN_PORT9 $CPU_PORT $WAN_PORT;do 
		switch_utility VLAN_PortMemberAdd $COMMON_VID $argument 0 
done

for argument in $CPU_PORT $WAN_PORT;do 
		switch_utility VLAN_PortMemberAdd $WAN_VID $argument 0 
done

for argument in $CPU_PORT $LAN_PORT1 $LAN_PORT2 $LAN_PORT3 $LAN_PORT7 $LAN_PORT8 $LAN_PORT9;do 
		switch_utility VLAN_PortMemberAdd $LAN_VID $argument 0 
done

#======================enable flow control=============================
switch_utility MDIO_DataWrite 0x0 0x4 0x5e1
switch_utility MDIO_DataWrite 0x5 0x4 0x5e1
switch_utility MDIO_DataWrite 0x11 0x4 0x5e1
switch_utility MDIO_DataWrite 0x13 0x4 0x5e1

switch_utility QOS_WredQueueCfgSet 0 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 1 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 2 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 3 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 4 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 5 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 6 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 7 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 8 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 9 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 10 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 11 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 12 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 13 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 14 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 15 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 16 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 17 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 18 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 19 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 20 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 21 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 22 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 23 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 24 0x50 0x50 0x50 0x50 0x50 0x50
switch_utility QOS_WredQueueCfgSet 25 0x50 0x50 0x50 0x50 0x50 0x50
switch_utility QOS_WredQueueCfgSet 26 0x50 0x50 0x50 0x50 0x50 0x50
switch_utility QOS_WredQueueCfgSet 27 0x50 0x50 0x50 0x50 0x50 0x50
switch_utility QOS_WredQueueCfgSet 28 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 29 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 30 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff
switch_utility QOS_WredQueueCfgSet 31 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff 0x3ff

switch_utility RegisterSet 0x4a 0x118

#==============================for traffic=============================
switch_utility RegisterSet 0x904 0x0B
switch_utility RegisterSet 0x910 0x0B
switch_utility RegisterSet 0x91c 0x0B
switch_utility RegisterSet 0x928 0x0B
switch_utility RegisterSet 0x934 0x0B
switch_utility RegisterSet 0x940 0x0B</code>
</p>

</div>

<h2 class="sectionedit23" id="debug_logs">Debug Logs</h2>
<div class="level2">

</div>

<h3 class="sectionedit24" id="system_info">System Info:</h3>
<div class="level3">

<p style="padding: 10px;border:1px solid grey;height:400px;font:10px/14px Georgia, Garamond, Serif;overflow:Auto;background-color:#FFFFFF">
<code>~ # cat /proc/cpuinfo
system type             : VR9
processor               : 0
cpu model               : MIPS 34Kc V5.6
BogoMIPS                : 332.59
wait instruction        : tra interrupt vector  : yes
hardware watchpoint     : yes, count: 4, address/irw mask: [0x0ff8, 0x0ffc, 0x0ffb, 0x0ff8]
ASEs implemented        : mips16 dsp mt
shadow register sets    : 1
core                    : 0
VCED exceptions         : not available
VCEI exceptions         : not available

~ # cat /proc/mtd
dev:    size   erasesize  name
mtd0: 00020000 00010000 "boot"
mtd1: 00140000 00010000 "kernel"
mtd2: 00660000 00010000 "rootfs"
mtd3: 00010000 00010000 "config"
mtd4: 00010000 00010000 "romfile"
mtd5: 00010000 00010000 "rom"
mtd6: 00010000 00010000 "radio"
~ # cat /proc/partitions
major minor  #blocks  name

  31        0        128 mtdblock0
  31        1       1280 mtdblock1
  31        2       6528 mtdblock2
  31        3         64 mtdblock3
  31        4         64 mtdblock4
  31        5         64 mtdblock5
  31        6         64 mtdblock6
~ # cat /proc/meminfo
MemTotal:          60888 kB
MemFree:           16740 kB
Buffers:            4596 kB
Cached:            16736 kB
SwapCached:            0 kB
Active:             7796 kB
Inactive:          17548 kB
Active(anon):       4012 kB
Inactive(anon):        0 kB
Active(file):       3784 kB
Inactive(file):    17548 kB
Unevictable:           0 kB
Mlocked:               0 kB
SwapTotal:             0 kB
SwapFree:              0 kB
Dirty:                 0 kB
Writeback:             0 kB
AnonPages:          4028 kB
Mapped:             4156 kB
Shmem:                 0 kB
Slab:              13968 kB
SReclaimable:        704 kB
SUnreclaim:        13264 kB
KernelStack:         568 kB
PageTables:          484 kB
NFS_Unstable:          0 kB
Bounce:                0 kB
WritebackTmp:          0 kB
CommitLimit:       57840 kB
Committed_AS:       9680 kB
VmallocTotal:    1048372 kB
VmallocUsed:        3528 kB
VmallocChunk:    1023284 kB
~ # cat /proc/version
Linux version 2.6.32.32 (wuzhiqin@localhost.localdomain) (gcc version 4.3.3 (GCC) ) #15 Mon Apr 8 16:02:07 CST 2013
~ # lsmod

nf_nat_sip 6408 0 - Live 0xc1221000
nf_conntrack_sip 14307 1 nf_nat_sip, Live 0xc1211000
nf_nat_h323 5391 0 - Live 0xc1201000
nf_conntrack_h323 36544 1 nf_nat_h323, Live 0xc11ea000
nf_nat_tftp 566 0 - Live 0xc11d3000
nf_conntrack_tftp 2577 1 nf_nat_tftp, Live 0xc11ca000
nf_nat_pptp 1594 0 - Live 0xc11b4000
nf_nat_proto_gre 1061 1 nf_nat_pptp, Live 0xc11aa000
nf_nat_ftp 1695 0 - Live 0xc119d000
nf_conntrack_ftp 5132 1 nf_nat_ftp, Live 0xc1192000
umac 671855 0 - Live 0xc0cdc000
ath_dev 222301 1 umac, Live 0xc0b31000 (P)
ath_dfs 41921 2 umac,ath_dev, Live 0xc0aae000 (P)
ath_rate_atheros 61760 2 umac,ath_dev, Live 0xc0a84000 (P)
ath_hal 755449 3 umac,ath_dev,ath_dfs, Live 0xc0999000 (P)
asf 6607 4 umac,ath_dev,ath_dfs,ath_hal, Live 0xc087d000 (P)
adf 8858 3 umac,ath_dev,ath_hal, Live 0xc086d000
ifx_ppa_api_proc 23906 0 - Live 0xc07d8000 (P)
ifx_ppa_api 105748 1 ifx_ppa_api_proc, Live 0xc079c000 (P)
drv_dsl_cpe_api 287798 0 - Live 0xc0706000
drv_ifxos 15134 1 drv_dsl_cpe_api, Live 0xc0669000
ifxmips_ppa_hal_vr9_a5 40003 0 - Live 0xc0648000
ifxmips_ppa_datapath_vr9_a5 176964 1 - Live 0xc05f4000
ipt_STAT 86651 0 - Live 0xc0292000
nf_conntrack_pptp 3961 1 nf_nat_pptp, Live 0xc0281000
nf_conntrack_proto_gre 3365 1 nf_conntrack_pptp, Live 0xc0276000
ifxusb_host 107058 0 - Live 0xc0244000
scsi_wait_scan 463 0 - Live 0xc01fe000
usb_storage 38362 0 - Live 0xc01e7000
usbcore 124802 3 ifxusb_host,usb_storage, Live 0xc0199000
sd_mod 26150 0 - Live 0xc0140000
scsi_mod 86989 2 usb_storage,sd_mod, Live 0xc00e8000
~ # ls /bin/ /sbin/ /usr/bin/ /usr/sbin/ /firmware/ /proc/
/proc/:
1342              984               42                filesystems
1326              982               8                 locks
1320              981               5                 cmdline
1318              978               4                 cpuinfo
1317              977               3                 devices
1316              972               2                 interrupts
1315              968               1                 loadavg
1314              966               self              meminfo
1312              930               mounts            stat
1305              777               net               uptime
1238              774               sysvipc           version
1125              768               fs                softirqs
1102              753               driver            kcore
1048              752               tty               kmsg
1047              751               bus               crypto
1046              750               sys               diskstats
1044              593               irq               partitions
1036              592               misc              sysrq-trigger
1032              249               mips              pmcu
1025              245               execdomains       tplink
999               244               ioports           ifx_wdt
998               243               iomem             mtd
996               215               timer_list        url_list
995               150               modules           scsi
994               129               kallsyms          ifxusb_hcd
993               79                buddyinfo         eth
992               75                pagetypeinfo      ppa
991               74                vmstat            athdebug
987               73                zoneinfo          athversion
986               46                vmallocinfo       athrtscts
985               44                slabinfo          athnodefixedrate

/firmware/:
xdslled.sh
xcpe_hw.bin
vdsl.scr
eth_wan_setting.sh
dsl_wan_setting.sh
dsl_vr9_firmware_xdsl-05.04.08.00.00.06_05.04.04.04.00.01.bin
dsl_cpe_pipe.sh
adsl.scr

/usr/sbin/:
zebra            radvd            ipsecVpn         dhcp6s           br2684ctl
telnetd          pppd             igmpd            dhcp6c           atmarpd
switch_utility   ppacmd           handle_card      cwmp             atmarp
snmpd            noipdns          dyndns           brctl
ripd             modem_scan       dsl_cpe_control  br2684ctld

/usr/bin/:
vsftpd          smbd            iptables        free            cos
ushare          smbcontrol      ipcs            ebtables        cli
usb_modeswitch  setkey          ipcrm           dnsproxy        chat
upnpd           racoon          ip6tables       dnsProxy        arping
tftp            ntpc            ip              diagTool
tc              ntfs-3g         igmpd           dhcpd
smbpasswd       killall         httpd           dhcpc

/sbin/:
wpatalk         usbp            poweroff        iwconfig        hotplug
wpa_supplicant  route           lsmod           insmod          hostapd
wlanconfig      rmmod           iwpriv          init            halt
vconfig         reboot          iwlist          ifconfig        getty

/bin/:
umount   rm       ping     mount    login    df       chmod    ash
sleep    ps       pidof    mkdir    kill     date     cat
sh       ping6    netstat  ls       echo     cp       busybox</code>
</p>

</div>

<h3 class="sectionedit25" id="u-boot_info_printenv">U-Boot info &amp; printenv:</h3>
<div class="level3">

<p style="padding: 10px;border:1px solid grey;height:400px;font:10px/14px Georgia, Garamond, Serif;overflow:Auto;background-color:#FFFFFF">
<code>ROM VER: 1.1.4
CFG 05

DDR autotuning Rev 0.3d
DDR size from 0xa0000000 - 0xa3ffffff
DDR check ok... start booting...



U-Boot 2010.06-LANTIQ-v-2.0.40-svn2583 (Oct 26 2012 - 12:15:55)

CLOCK CPU 500M RAM 250M
DRAM:  64 MiB
Using default environment

In:    serial
Out:   serial
Err:   serial
Net:   Internal phy(GE) firmware version: 0x841d
vr9 Switch8192 KiB EN25Q64 at 0:3 is now current device


Type "run flash_nfs" to mount root filesystem over NFS

Hit any key to stop autoboot:  0
VR9 # help
?       - alias for 'help'
base    - print or set address offset
bootm   - boot application image from memory
bootp   - boot image via network using BOOTP/TFTP protocol
cmp     - memory compare
cp      - memory copy
crc32   - checksum calculation
echo    - echo args to console
go      - start application at address 'addr'
help    - print command description/usage
loop    - infinite loop on address range
md      - memory display
mm      - memory modify (auto-incrementing address)
mtest   - simple RAM read/write test
mw      - memory write (fill)
nm      - memory modify (constant address)
printenv- print environment variables
rarpboot- boot image via network using RARP/TFTP protocol
reset   - Perform RESET of the CPU
run     - run commands in an environment variable
setenv  - set environment variables
sf      - SPI flash sub-system
tftpboot- boot image via network using TFTP protocol
version - print monitor version
VR9 # printenv
bootcmd=run flash_flash
bootdelay=1
baudrate=115200
preboot=echo;echo Type \"run flash_nfs\" to mount root filesystem over NFS;echo
bootfile="uImage"
mem=63M
phym=64M
ipaddr=192.168.1.1
serverip=192.168.1.100
ethaddr=00:E0:92:00:01:40
netdev=eth0
console=ttyS0
baudrate=115200
tftppath=
loadaddr=0x80800000
rootpath=/mnt/full_fs
rootfsmtd=/dev/mtdblock2
nfsargs= setenv bootargs root=/dev/nfs rw nfsroot=$(serverip):$(rootpath)
ramargs=setenv bootargs root=/dev/ram rw
addip=setenv bootargs $(bootargs) ip=$(ipaddr):$(serverip):$(gatewayip):$(netmask):$(hostname):$(netdev):on
addmisc=setenv bootargs $(bootargs) console=$(console),$(baudrate) ethaddr=$(ethaddr) phym=$(phym) mem=$(mem) panic=1 mtdparts=$(mtdparts) init=/etc/preinit vpe1_load_addr=0x82000000 vpe1_mem=1M ethwan=$(ethwan)
flash_nfs=run nfsargs addip addmisc;bootm $(kernel_addr)
net_nfs=tftp $(loadaddr) $(tftppath)$(bootfile);run nfsargs addip addmisc;bootm
net_flash=tftp $(loadaddr) $(tftppath)$(bootfile); run flashargs addip addmisc; bootm
net_ram=tftp $(loadaddr) $(tftppath)$(bootfile); run ramargs addip addmisc; bootm
u-boot=u-boot.lq
rootfs=rootfs.img
firmware=firmware.img
fullimage=fullimage.img
totalimage=totalimage.img
load=tftp $(loadaddr) $(u-boot)
update=protect off 1:0-2;era 1:0-2;cp.b $(loadaddr) B0000000 $(filesize)
flashargs=setenv bootargs root=$(rootfsmtd) rw rootfstype=squashfs
flash_flash=sf probe 3; bootm 0x80800000
update_uboot=tftp $(loadaddr) $(tftppath)$(u-boot); nand write.partial $(loadaddr) 4000 $(filesize);reset
update_kernel=tftpboot $(loadaddr) $(tftppath)$(bootfile);upgrade $(loadaddr) $(filesize)
update_rootfs=tftpboot $(loadaddr) $(tftppath)$(rootfs);upgrade $(loadaddr) $(filesize)
update_firmware=tftpboot $(loadaddr) $(tftppath)$(firmware);upgrade $(loadaddr) $(filesize)
update_fullimage=tftpboot $(loadaddr) $(tftppath)$(fullimage);upgrade $(loadaddr) $(filesize)
update_totalimage=tftpboot $(loadaddr) $(tftppath)$(totalimage);upgrade $(loadaddr) $(filesize)
stdin=serial
stdout=serial
stderr=serial
ethact=vr9 Switch

Environment size: 2040/4092 bytes</code>
</p>

</div>

<h3 class="sectionedit26" id="oem_bootlog">OEM bootlog:</h3>
<div class="level3">

<p style="padding: 10px;border:1px solid grey;height:600px;font:10px/14px Georgia, Garamond, Serif;overflow:Auto;background-color:#FFFFFF">
<code>ROM VER: 1.1.4
CFG 05

DDR autotuning Rev 0.3d
DDR size from 0xa0000000 - 0xa3ffffff
DDR check ok... start booting...



U-Boot 2010.06-LANTIQ-v-2.0.40-svn2583 (Oct 26 2012 - 12:15:55)

CLOCK CPU 500M RAM 250M
DRAM:  64 MiB
Using default environment

In:    serial
Out:   serial
Err:   serial
Net:   Internal phy(GE) firmware version: 0x841d
vr9 Switch8192 KiB EN25Q64 at 0:3 is now current device


Type "run flash_nfs" to mount root filesystem over NFS

Hit any key to stop autoboot:  0
8192 KiB EN25Q64 at 0:3 is now current device
8192 KiB EN25Q64 at 0:3 is now current device
        Uncompressing ...
Starting kernel ...

Lantiq xDSL CPE VR9
mips_hpt_frequency = 250000000, counter_resolution = 2
Linux version 2.6.32.32 (wuzhiqin@localhost.localdomain) (gcc version 4.3.3 (GCC) ) #15 Mon Apr 8 16:02:07 CST 2013
phym = 04000000, mem = 04000000, max_pfn = 00004000
Reserving memory for CP1 @0xa4000000, size 0x00000000
CPU revision is: 00019556 (MIPS 34Kc)
Determined physical RAM map:
User-defined physical RAM map:
 memory: 04000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal   0x00000000 -> 0x00004000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -> 0x00004000
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
Kernel command line: root=/dev/mtdblock2 rw rootfstype=squashfs ip=192.168.1.1:192.168.1.2::::eth0:on console=ttyS0,115200 ethaddr=AC:9A:96:XX:XX:XX phym=64M mem=64M panic=1 mtdparts=ifx_sflash:128k(boot),1280k(kernel),6528k(rootfs),64k(config),64k(romfile),64k(rom),64k(radio) init=/sbin/init ethwan=
PID hash table entries: 256 (order: -2, 1024 bytes)
Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
Primary instruction cache 32kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
Writing ErrCtl register=00024f10
Readback ErrCtl register=00024f10
Memory: 60632k/65536k available (2855k kernel code, 4832k reserved, 820k data, 184k init, 0k highmem)
Hierarchical RCU implementation.
NR_IRQS:185
Lantiq ICU driver, version 3.0.1, (c) 2001-2011 Lantiq Deutschland GmbH
console [ttyS0] enabled
Calibrating delay loop... 332.59 BogoMIPS (lpj=1662976)
Mount-cache hash table entries: 512
NET: Registered protocol family 16
Lantiq PCIe Root Complex driver, version 1.5.3, (c) 2001-2011 Lantiq Deutschland GmbH
bio: create slab <bio-0> at 0
ifx_pcie_rc_class_early_fixup: fixed pcie host bridge to pci-pci bridge
pci 0000:00:00.0: PME# supported from D0 D3hot
pci 0000:00:00.0: PME# disabled
pci 0000:01:00.0: PME# supported from D0 D1 D3hot
pci 0000:01:00.0: PME# disabled
pci 0000:00:00.0: PCI bridge, secondary bus 0000:01
pci 0000:00:00.0:   IO window: disabled
pci 0000:00:00.0:   MEM window: 0x1c000000-0x1c0fffff
pci 0000:00:00.0:   PREFETCH window: 0x1c100000-0x1c1fffff
NET: Registered protocol family 8
NET: Registered protocol family 20
Switching to clocksource MIPS
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 2048 (order: 2, 16384 bytes)
TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
TCP: Hash tables configured (established 2048 bind 2048)
TCP reno registered
NET: Registered protocol family 1
gptu: totally 6 16-bit timers/counters
gptu: misc_register on minor 63
gptu: succeeded to request irq 118
gptu: succeeded to request irq 119
gptu: succeeded to request irq 120
gptu: succeeded to request irq 121
gptu: succeeded to request irq 122
gptu: succeeded to request irq 123
IFX DMA driver, version ifxmips_dma_core.c:v1.0.17
,(c)2009 Infineon Technologies AG
Lantiq CGU driver, version 1.1.27, (c) 2001-2011 Lantiq Deutschland GmbH
vpe1_mem = 0
Wired TLB entries for Linux read_c0_wired() = 0
squashfs: version 4.0 (2009/01/31) Phillip Lougher
Registering mini_fo version $Id$
fuse init (API version 7.13)
msgmni has been set to 118
Line: 127, function: deu_init
DMA Referenced PAGE_SIZE = 4096
Infineon Technologies DEU driver version 2.0.0
IFX DEU DES initialized (multiblock) (DMA).
IFX DEU AES initialized (multiblock) (DMA).
IFX DEU ARC4 initialized (multiblock) (DMA).
IFX DEU SHA1 initialized (DMA).
IFX DEU MD5 initialized (DMA).
IFX DEU SHA1_HMAC initialized (DMA).
IFX DEU MD5_HMAC initialized (DMA).
io scheduler noop registered (default)
ifx_pmu_init: Major 252
Lantiq PMU driver, version 1.2.2, (c) 2001-2011 Lantiq Deutschland GmbH
Lantiq GPIO driver, version 1.2.14, (c) 2001-2011 Lantiq Deutschland GmbH
Infineon Technologies RCU driver version 1.0.8
Lantiq LED Controller driver, version 1.0.6, (c) 2001-2011 Lantiq Deutschland GmbH
MEI CPE Driver, Version 1.2.0

(c) Copyright 2009, Infineon Technologies AG

### MEI CPE - MEI CPE - MEI CPE - MEI CPE ###

ttyS0 at MMIO 0xbe100c00 (irq = 105) is a IFX_ASC
Register ASC (UART) to PMCU.
Lantiq ASC (UART) driver, version 1.0.9, (c) 2001-2011 Lantiq Deutschland GmbH
brd: module loaded
loop: module loaded
Lantiq SSC driver, version 2.2.6, (c) 2001-2011 Lantiq Deutschland GmbH
Register flash device:flash0
7 cmdlinepart partitions found on MTD device ifx_sflash
Creating 7 MTD partitions on "ifx_sflash":
0x000000000000-0x000000020000 : "boot"
0x000000020000-0x000000160000 : "kernel"
0x000000160000-0x0000007c0000 : "rootfs"
mtd: partition "rootfs" set to be root filesystem
0x0000007c0000-0x0000007d0000 : "config"
0x0000007d0000-0x0000007e0000 : "romfile"
0x0000007e0000-0x0x0000007f0000-0x0000800000 : "radio"
Lantiq SPI flash driver, version 1.1.9, (c) 2001-2011 Lantiq Deutschland GmbH
ifxmips_gpio: Pin ID 10 (port 0, pin 10) has been reserved by module SFLASH from kernel module!
ifx_dataflash_init status error 255
PPP generic driver version 2.4.2
NET: Registered protocol family 24
IFX SWITCH API, Version 1.1.7.2
SWAPI: Registered character device [switch_api] with major no [81]
Switch API: PCE MicroCode loaded !!
Init IFX_ETHSW_Switch_API_procModule successfully.
Switch Auto Polling value = 0
GPHY FW load for A2x !!
GPHY FIRMWARE LOAD SUCCESSFULLY AT ADDR : 400000
IFX GPHY driver GE Mode, version ifxmips_vr9_gphy: V0.9 - Firmware: 841d
Registered led device: broadband_led
Registered led device: internet_led
Registered led device: usb1_link_led
Registered led device: usb2_link_led
Lantiq LED driver, version 1.0.17, (c) 2001-2011 Lantiq Deutschland GmbH
Mirror/redirect action on
u32 classifier
    Actions configured
Netfilter messages via NETLINK v0.30.
nf_conntrack version 0.5.0 (948 buckets, 5120 max)
CONFIG_NF_CT_ACCT is deprecated and will be removed soon. Please use
nf_conntrack.acct=1 kernel parameter, acct=1 nf_conntrack module option or
sysctl net.netfilter.nf_conntrack_acct=1 to enable it.
GRE over IPv4 tunneling driver
ip_tables: (C) 2000-2006 Netfilter Core Team
TCP cubic registered
NET: Registered protocol family 10
ip6_tables: (C) 2000-2006 Netfilter Core Team
IPv6 over IPv4 tunneling driver
NET: Registered protocol family 17
NET: Registered protocol family 15
Bridge firewalling registered
Ebtables v2.0 registered
NET: Registered protocol family 8
atmpvc_init() failed with -17
KOAM is loaded successfully.
802.1Q VLAN Support v1.8 Ben Greear <greearb@candelatech.com>
All bugs added by David S. Miller <davem@redhat.com>
VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
Freeing unused kernel memory: 184k freed
starting pid 187, tty '': '/etc/init.d/rcS'
SCSI subsystem initialized
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
Initializing USB Mass Storage driver...
usbcore: registered new interface driver usb-storage
USB Mass Storage support registered.
IFXUSB: ifxusb_hcd: version 3.2 B120208
Chip Version :0002 BurstSize=4
IFXUSB: USB core #0 soft-reset
IFXUSB: USB core #0 soft-reset
ifxusb_hcd ifxusb_hcd: IFX USB Controller
ifxusb_hcd ifxusb_hcd: new USB bus registered, assigned bus number 1
ifxusb_hcd ifxusb_hcd: irq 54, io mem 0xbe101000
IFXUSB: Init: Power Port (0)
hotplug, argusb usb1: configuration #1 chosen from 1 choice
s:usb
hotplug, args:usb
.....pidhub 1-0:1.0: USB hub found
hub 1-0:1.0: 1 port detected
 228: wait the running hotplug to end itself.......
IFXUSB: USB core #1 soft-reset
IFXUSB: USB core #1 soft-reset
ifxusb_hcd ifxusb_hcd: IFX USB Controller
ifxusb_hcd ifxusb_hcd: new USB bus registered, assigned bus number 2
ifxusb_hcd ifxusb_hcd: irq 83, io mem 0xbe106000
IFXUSB: Init: Power Port (0)
hotplug, argsusb usb2: configuration #1 chosen from 1 choice
:hub 2-0:1.0: USB hub found
hub 2-0:1.0: 1 port detected
usb
hotplug, args:usb

Please press Enter to activate this console. .....pid 228: wait the running hotplug to end itself.......
[ dm_readFile ] 2042:  can not open xml file /var/tmp/pc/reduced_data_model.xml!, about to open file /etc/reduced_data_model.xml
Loading A5 (MII0/1 + ATM) driver ...... MAC-0: a0-f3-c1-xx-xx-xx
MAC-1: a0-f3-c1-xx-xx-xx
Succeeded!
PPE datapath driver info:
  Version ID: 64.3.7.1.0.1.4
  Family    : VR9
  DR Type   : Normal Data Path | Indirect-Fast Path
  Interface : MII0 | MII1 | ATM
  Mode      : Routing
  Release   : 0.1.4
PPE firmware info:
  Version ID: 7.2.4.6.2.0
  Family    : VR9
  FW Type   : Acceleration
  Interface : MII0/1 + ATM
  Mode      : Bridging + IPv4 Routing
  Release   : 2.0
IFXOS, Version 1.5.14 (c) Copyright 2009, Lantiq Deutschland GmbH


Lantiq CPE API Driver version: DSL CPE API V4.11.4

Predefined debug level: 3
ifx_ppa_api: module license 'unspecified' taints kernel.
Disabling lock debugging due to kernel taint
PPA API --- init successfully
.....pid 228: wait the running hotplug to end itself.......
ifx_ppa_init - init succeeded
ioctl: No such device
ioctl: No such device
ioctl: No such device
ioctl: No such device
sendto: No such file or directory
send 2001 error 244, -1
ath0      no private ioctls.

ath1      no private ioctls.

ioctl: No such device
device eth0.2 entered promiscuous mode
device eth0 entered promiscuous mode
br0: port 1(eth0.2) entering forwarding state
device eth0.3 entered promiscuous mode
br0: port 2(eth0.3) entering forwarding state
device eth0.4 entered promiscuous mode
br0: port 3(eth0.4) entering forwarding state
device eth0.5 entered promiscuous mode
br0: port 4(eth0.5) entering forwarding state
[ rsl_initLanIgmpSnoopObj ] 181:  We need vlan if we want igmp snooping
*********cal_data*******
020500023537707500000000*********end*******
.....pid 228: wait the running hotplug to end itself.......
ath_hal: 0.9.17.1 (AR5212, AR5416, AR9380, RF5111, RF5112, RF2413, RF5413, RF2316, RF2317, REGOPS_FUNC, WRITE_EEPROM, 11D)
ath_rate_atheros: Copyright (c) 2001-2005 Atheros Communications, Inc, All Rights Reserved
ath_dfs: Version 2.0.0
Copyright (c) 2005-2006 Atheros Communications, Inc. All Rights Reserved
ath_dev: Copyright (c) 2001-2007 Atheros Communications, Inc, All Rights Reserved
ath_pci: 9.2.0_U10.1020 (Atheros/multi-bss)
PCI: Enabling device 0000:01:00.0 (0000 -> 0002)
__ath_attach: Set global_scn[0]
ACBKMinfree = 48
ACBEMinfree = 32
ACVIMinfree = 16
ACVOMinfree = 0
CABMinfree = 48
UAPSDMinfree = 0
Restoring Cal data from Flash
dfs_attach: use DFS enhancements
DFS min filter rssiThresh = 18
DFS max pulse dur = 151 ticks
ath_get_caps[5105] rx chainmask mismatch actual 7 sc_chainmak 0
ath_get_caps[5080] tx chainmask mismatch actual 7 sc_chainmak 0
.....pid 228: wait the running hotplug to end itself.......
Register wlan WPS function, dev=0x828b8000
Register wlan button on function
Register wlan button off function
wifi0: Atheros ???: mem=0x1c000000, irq=136 hw_base=0xbc000000
ath_netdev_set_macaddr: ffffffa0:fffffff3:ffffffc1:ffffffff:ffffff96:20
wlan_vap_create : enter. devhandle=0x828b82c0, opmode=IEEE80211_M_HOSTAP, flags=0x1
wlan_vap_create : exit. devhandle=0x828b82c0, opmode=IEEE80211_M_HOSTAP, flags=0x1.
VAP device ath0 created
ath0
DFS min filter rssiThresh = 15
DFS max pulse dur = 151 ticks
ath_netdev_set_macaddr: ffffffa0:fffffff3:ffffffc1:ffffffff:ffffff96:20
wlan_setAllCfgFile bridgeName br0
Reading topology file /var/Wireless/topology.conf ...
014.602: Reading radio configuration file /var/Wireless/80211g.ap_radio ...

014.603: Reading bss configuration file /var/Wireless/ath0.ap_bss ...

 ieee80211_ioctl_siwmode: imr.ifm_active=131712, new mode=3, valid=1
014.911: upnp_wps_device_init called
l2_packet_receive - recvfrom: Network is down
ni aponly is null!
.....pid 228: wait the running hotplug to end itself.......
ni aponly is null!
 Scan in progress.. Cancelling it
l2_packet_receive - recvfrom: Network is down
ath1      no private ioctls.

sendto: No such file or directory
send 2030 error 244, -1
sendto: No such file or directory
send 2004 error 244, -1
Primary DNS server Is Down... Switching To Secondary DNS server
ni aponly is null!
ni aponly is null!
.....pid 228: wait the running hotplug to end itself.......
[ apiSetAdslTypeAndAnnexType ] 1369:  /firmware/dsl_cpe_pipe.sh g997xtusecs 05 00 04 00 04 01 04 00
nReturn=0

nReturn=0

nReturn=0 nDirection=0

nReturn=0 nDirection=1

nReturn=4 nDirection=0

nReturn=0 nDirection=1

nReturn=0

iptables: Bad rule (does a matching rule exist in that chain?)
radvd starting
[ oal_dsl_createMainAtmIf ] 2209:  br2684ctl -b -p 1 -c 0 -e 0 -q ubr,aal5:max_pcr=0,min_pcr=0 -a 0.8.35
.....pid 228: wait the running hotplug to end itself.......
........pid 226: pPlugDevId[0]=, plugDevClass[0]=, plugAction[0]=.........
[ oal_dsl_createMainAtmIf ] 2253:  ifconfig nas0 hw ether 20:F3:C1:FF:96:21
Interface "nas0" created sucessfully
[ oal_dsl_addAtmIf ] 2038:  br2684ctl -b -p 1 -x 1 -c 0 -e 0 -q ubr,aal5:max_pcr=0,min_pcr=0 -a 0.8.35
optarg : ubr,aal5:max_pcr=0,min_pcr=0Interface "nas0_1" created sucessfully
device nas0_1 entered promiscuous mode
br0: port 5(nas0_1) entering forwarding state
iptables: Bad rule (does a matching rule exist in that chain?)
iptables: Bad rule (does a matching rule exist in that chain?)
[ oal_dsl_addAtmIf ] 2038:  br2684ctl -b -p 1 -x 2 -c 0 -e 0 -q ubr,aal5:max_pcr=0,min_pcr=0 -a 0.8.35
optarg : ubr,aal5:max_pcr=0,min_pcr=0Interface "nas0_2" created sucessfully
pppoe_init() success
PPPoE DevName Hook, the name is nas0_2
PPPoE DevName Hook, the name is nas0_2
[ getPidFromPidFile ] 112:  Cann't open file: /var/run/zebra.pid.
[ getPidFromPidFile ] 112:  Cann't open file: /var/run/ripd.pid.
ifx_ppa_init - init succeeded
iptables: Bad rule (does a matching rule exist in that chain?)
ifx_ppa_init - init succeeded
iptables: Bad rule (does a matching rule exist in that chain?)
ifx_ppa_init - init succeeded
iptables: Bad rule (does a matching rule exist in that chain?)
........pid 228: pPlugDevId[0]=, plugDevClass[0]=, plugAction[0]=.........
ip6tables: Bad rule (does a matching rule exist in that chain?)
[ rsl_setStorageServiceObj ] 1140:  mountFlag is 3,We start usb server

killall: ushare: no process killed
uShare (version 1.1a), a lightweight UPnP A/V and DLNA Media Server.
Benjamin Zores (C) 2005-2007, for GeeXboX Team.
See http://ushare.geexbox.org/ for updates.
iptables: Bad rule (does a matching rule exist in that chain?)
iptables: Bad rule (does a matching rule exist in that chain?)
xDSL Handshake!!
Enable forwarding
xDSL Training !!
xDSL Enter SHOWTIME!!
Terminating on signal 15
iptables: No chain/target/match by that name
iptables: Bad rule (does a matching rule exist in that chain?)
iptables: Bad rule (does a matching rule exist in that chain?)
pppoe_init() success
PPPoE DevName Hook, the name is nas0_2
PPPoE DevName Hook, the name is nas0_2
PPP session is 5838
Connected to 00:90:1a:xx:xx:xx via interface nas0_2
Using interface ppp1
Connect: ppp1 <--> nas0_2
CHAP authentication succeeded: Authentication success,Welcome!
CHAP authentication succeeded
peer from calling number 00:90:1A:xx:xx:xx authorized
local  IP address XX.XX.XX.XX
remote IP address XX.XX.XX.XX
primary   DNS address XX.XX.XX.XX
secondary DNS address XX.XX.XX.XX
iptables: No chain/target/match by that name
iptables: No chamatch by that na
                                ifx_ppa_init - init succeeded
iptables: No chain/target/match by that name
ifx_ppa_init - init succeeded
iptables: No chain/target/match by that name
ifx_ppa_init - init succeeded
ifx_ppa_init - init succeeded
112.048: upnp_wps_device M-SEARCH parse failure
112.079: upnp_wps_device M-SEARCH parse failure
112.110: upnp_wps_device M-SEARCH parse failure
112.142: upnp_wps_device M-SEARCH parse failure
112.204: upnp_wps_device M-SEARCH parse failure
115.245: upnp_wps_device M-SEARCH parse failure
115.277: upnp_wps_device M-SEARCH parse failure
115.308: upnp_wps_device M-SEARCH parse failure
115.340: upnp_wps_device M-SEARCH parse failure
115.401: upnp_wps_device M-SEARCH parse failure

starting pid 245, tty '': '/sbin/getty -L ttyS0 115200 vt100'

TD-W8970 login: admin
Password:
May 21 21:52:48 login[245]: root login on 'console'
~ #</code>
</p>

</div>

<h3 class="sectionedit27" id="openwrt_ramdisk_bootlog">OpenWrt ramdisk bootlog:</h3>
<div class="level3">

<p style="padding: 10px;border:1px solid grey;height:600px;font:10px/14px Georgia, Garamond, Serif;overflow:Auto;background-color:#FFFFFF">
<code>ROM VER: 1.1.4
CFG 05

DDR autotuning Rev 0.3d
DDR size from 0xa0000000 - 0xa3ffffff
DDR check ok... start booting...



U-Boot 2010.06-LANTIQ-v-2.0.40-svn2583 (Oct 26 2012 - 12:15:55)

CLOCK CPU 500M RAM 250M
DRAM:  64 MiB
Using default environment

In:    serial
Out:   serial
Err:   serial
Net:   Internal phy(GE) firmware version: 0x841d
vr9 Switch8192 KiB EN25Q64 at 0:3 is now current device


Type "run flash_nfs" to mount root filesystem over NFS

Hit any key to stop autoboot:  0
VR9 # ttttttt
VR9 # setenv serverip 192.168.1.2
VR9 # setenv bootargs 'board=WD8970'
VR9 # tftpboot openwrt-lantiq-xrx200-TDW8970-uImage-initramfs
8192 KiB EN25Q64 at 0:3 is now current device
Using vr9 Switch device
TFTP from server 192.168.1.2; our IP address is 192.168.1.1
Filename 'openwrt-lantiq-xrx200-TDW8970-uImage-initramfs'.
Load address: 0x80800000
Loading: #################################################################
         #################################################################
         #################################################################
         #################################
done
Bytes transferred = 3346323 (330f93 hex)
VR9 # bootm
        Uncompressing ...
Starting kernel ...

[    0.000000] Linux version 3.10.17 (fld@HA) (gcc version 4.6.4 (OpenWrt/Linaro GCC 4.6-2013.05 r38578) ) #26 Sat Nov 2 15:28:31 EET 2013
[    0.000000] SoC: VR9 rev 1.2
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 00019556 (MIPS 34Kc)
[    0.000000] MIPS: machine is TDW8970 - TP-LINK TD-W8970
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 04000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x00000000-0x03ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x00000000-0x03ffffff]
[    0.000000] Primary instruction cache 32kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
[    0.000000] Kernel command line: console=ttyLTQ0,115200 init=/etc/preinit
[    0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)
[    0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Writing ErrCtl register=00042e40
[    0.000000] Readback ErrCtl register=00042e40
[    0.000000] Memory: 58948k/65536k available (2652k kernel code, 6588k reserved, 876k data, 2220k init, 0k highmem)
[    0.000000] NR_IRQS:256
[    0.000000] CPU Clock: 500MHz
[    0.000000] Calibrating delay loop... 332.54 BogoMIPS (lpj=665088)
[    0.032000] pid_max: default: 32768 minimum: 301
[    0.036000] Mount-cache hash table entries: 512
[    0.040000] pinctrl core: initialized pinctrl subsystem
[    0.044000] NET: Registered protocol family 16
[    0.056000] pinctrl-xway 1e100b10.pinmux: Init done
[    0.060000] dma-xway 1e104100.dma: Init done - hw rev: 7, ports: 7, channels: 28
[    0.068000] dcdc-xrx200 1f106a00.dcdc: Core Voltage : 1016 mV
[    0.072000] arch/mips/pci/ifxmips_pcie_vr9.h:pcie_device_rst_assert[185]
[    0.184000] arch/mips/pci/ifxmips_pcie_vr9.h:pcie_device_rst_deassert[193]
[    0.188000] ath9k,eeprom ath9k_eep.8: failed to find mtd device
[    0.200000] bio: create slab <bio-0> at 0
[    0.204000] usbcore: registered new interface driver usbfs
[    0.208000] usbcore: registered new interface driver hub
[    0.212000] usbcore: registered new device driver usb
[    0.216000] PCI host bridge to bus 0000:00
[    0.220000] pci_bus 0000:00: root bus resource [mem 0x1c000000-0x1cffffff]
[    0.224000] pci_bus 0000:00: root bus resource [io  0x1d800000-0x1d8fffff]
[    0.228000] pci_bus 0000:00: No busn resource found for root bus, will use [bus 00-ff]
[    0.232000] ifx_pcie_rc_class_early_fixup: fixed pcie host bridge to pci-pci bridge
[    0.244000] pci 0000:00:00.0: BAR 8: assigned [mem 0x1c000000-0x1c0fffff]
[    0.248000] pci 0000:00:00.0: BAR 9: assigned [mem 0x1c100000-0x1c1fffff pref]
[    0.252000] pci 0000:01:00.0: BAR 0: assigned [mem 0x1c000000-0x1c01ffff 64bit]
[    0.256000] pci 0000:01:00.0: BAR 6: assigned [mem 0x1c100000-0x1c10ffff pref]
[    0.260000] pci 0000:00:00.0: PCI bridge to [bus 01]
[    0.264000] pci 0000:00:00.0:   bridge window [mem 0x1c000000-0x1c0fffff]
[    0.268000] pci 0000:00:00.0:   bridge window [mem 0x1c100000-0x1c1fffff pref]
[    0.272000] PCI: Enabling device 0000:00:00.0 (0000 -> 0002)
[    0.276000] ifx_pcie_bios_map_irq port 0 dev 0000:00:00.0 slot 0 pin 1
[    0.280000] ifx_pcie_bios_map_irq dev 0000:00:00.0 irq 144 assigned
[    0.284000] ifx_pcie_bios_map_irq port 0 dev 0000:01:00.0 slot 0 pin 1
[    0.288000] ifx_pcie_bios_map_irq dev 0000:01:00.0 irq 144 assigned
[    0.292000] Switching to clocksource MIPS
[    0.300000] NET: Registered protocol family 2
[    0.304000] TCP established hash table entries: 512 (order: 0, 4096 bytes)
[    0.312000] TCP bind hash table entries: 512 (order: -1, 2048 bytes)
[    0.316000] TCP: Hash tables configured (established 512 bind 512)
[    0.324000] TCP: reno registered
[    0.328000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.332000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.340000] NET: Registered protocol family 1
[    3.800000] gptu: totally 6 16-bit timers/counters
[    3.804000] gptu: misc_register on minor 63
[    3.808000] gptu: succeeded to request irq 126
[    3.816000] gptu: succeeded to request irq 127
[    3.820000] gptu: succeeded to request irq 128
[    3.824000] gptu: succeeded to request irq 129
[    3.828000] gptu: succeeded to request irq 130
[    3.832000] gptu: succeeded to request irq 131
[    3.840000] phy-xrx200 gphy-xrx200.5: requesting lantiq/vr9_phy11g_a2x.bin
[    3.848000] phy-xrx200 gphy-xrx200.5: booting GPHY0 firmware at 2EE0000
[    3.852000] phy-xrx200 gphy-xrx200.5: booting GPHY1 firmware at 2EE0000
[    3.964000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    3.968000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    3.980000] msgmni has been set to 115
[    3.984000] io scheduler noop registered
[    3.984000] io scheduler deadline registered (default)
[    3.992000] 1e100c00.serial: ttyLTQ0 at MMIO 0x1e100c00 (irq = 112) is a lantiq,asc
[    4.000000] console [ttyLTQ0] enabled, bootconsole disabled
[    4.000000] console [ttyLTQ0] enabled, bootconsole disabled
[    4.016000] spi_gpio spi.7: master is unqueued, this is deprecated
[    4.020000] m25p80 spi32766.0: en25q64 (8192 Kbytes)
[    4.024000] 4 ofpart partitions found on MTD device spi32766.0
[    4.032000] Creating 4 MTD partitions on "spi32766.0":
[    4.036000] 0x000000000000-0x000000020000 : "u-boot"
[    4.044000] 0x000000020000-0x0000007c0000 : "firmware"
[    4.048000] 0x00000015b7b5-0x0000007c0000 : "rootfs"
[    4.052000] mtd: partition "rootfs" must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    4.068000] mtd: partition "rootfs" set to be root filesystem
[    4.072000] mtdsplit: no squashfs found in "spi32766.0"
[    5.072000] 0x0000007c0000-0x0000007d0000 : "config"
[    5.076000] 0x0000007d0000-0x000000800000 : "boardconfig"
[    5.188000] libphy: lantiq,xrx200-mdio: probed
[    5.196000] net-xrx200: invalid MAC, using random
[    5.200000] eth0: attached PHY [Lantiq XWAY PEF7071] (phy_addr=0:00, irq=-1)
[    5.208000] eth0: attached PHY [Lantiq XWAY PEF7071] (phy_addr=0:05, irq=-1)
[    5.212000] eth0: attached PHY [Lantiq XWAY VR9 GPHY 11G v1.4] (phy_addr=0:11, irq=-1)
[    5.220000] eth0: attached PHY [Lantiq XWAY VR9 GPHY 11G v1.4] (phy_addr=0:13, irq=-1)
[    5.232000] wdt 1f8803f0.watchdog: Init done
[    5.236000] leds-gpio gpio-leds.10: pins are not configured from the driver
[    5.244000] TCP: cubic registered
[    5.244000] NET: Registered protocol family 17
[    5.248000] 8021q: 802.1Q VLAN Support v1.8
[    5.336000] ath9k,eeprom ath9k_eep.8: using random mac
[    5.340000] ath9k,eeprom ath9k_eep.8: pci slot: 0
[    5.344000] ath9k,eeprom ath9k_eep.8: loaded ath9k eeprom
[    5.360000] Freeing unused kernel memory: 2220K (80375000 - 805a0000)
Console is alive
procd: Console is alive
- watchdog -
procd: - watchdog -
[    5.412000] IFXUSB: ifxusb_hcd: version 3.2 B110801
[    5.416000] Chip Version :000c BurstSize=4
[    6.020000] IFXUSB: USB core #0 soft-reset
[    6.320000] IFXUSB: USB core #0 soft-reset
[    6.324000] ifxusb_hcd ifxusb_hcd: IFX USB Controller
[    6.328000] ifxusb_hcd ifxusb_hcd: new USB bus registered, assigned bus number 1
[    6.336000] ifxusb_hcd ifxusb_hcd: irq 62, io mem 0xbe101000
[    6.340000] IFXUSB: Init: Power Port (0)
[    6.348000] eth0: port 5 got link
[    6.352000] hub 1-0:1.0: USB hub found
[    6.352000] hub 1-0:1.0: 1 port detected
[    6.856000] IFXUSB: USB core #1 soft-reset
[    7.160000] IFXUSB: USB core #1 soft-reset
[    7.164000] ifxusb_hcd ifxusb_hcd: IFX USB Controller
[    7.168000] ifxusb_hcd ifxusb_hcd: new USB bus registered, assigned bus number 2
[    7.176000] ifxusb_hcd ifxusb_hcd: irq 91, io mem 0xbe106000
[    7.180000] IFXUSB: Init: Power Port (0)
[    7.188000] hub 2-0:1.0: USB hub found
[    7.188000] hub 2-0:1.0: 1 port detected
[    7.192000] ifxusb_hcd ifxusb_hcd: requested GPIO 233
kmod: ran 4 iterations
- preinit -
procd: - preinit -
Press the [f] key and hit [enter] to enter failsafe mode
- early -
procd: - early -
- watchdog -
procd: - watchdog -
- init -
procd: - init -
Please press Enter to activate this console.
[   11.040000] IFXOS, Version 1.5.14 (c) Copyright 2009, Lantiq Deutschland GmbH

[   11.064000] NET: Registered protocol family 10
[   11.072000] NET: Registered protocol family 8
[   11.076000] NET: Registered protocol family 20
[   11.092000] PPP generic driver version 2.4.2
[   11.116000] nf_conntrack version 0.5.0 (955 buckets, 3820 max)
[   11.128000] ip6_tables: (C) 2000-2006 Netfilter Core Team
[   11.184000] MEI CPE Driver, Version 1.2.0

[   11.188000] (c) Copyright 2009, Infineon Technologies AG
### MEI CPE - MEI CPE - MEI CPE - MEI CPE ###


Lantiq CPE API Driver version: DSL CPE API V4.11.4
[   11.232000]
[   11.232000] Predefined debug level: 2
[   11.272000] u32 classifier
[   11.272000]     input device check on
[   11.276000]     Actions configured
[   11.280000] Mirror/redirect action on
[   11.300000] Loading modules backported from Linux version master-2013-06-27-0-gdcfa6d5
[   11.308000] Backport generated by backports.git backports-20130617-4-ge3220f5
[   11.320000] ip_tables: (C) 2000-2006 Netfilter Core Team
[   11.340000] ATM1.0.26    ATM (A1) firmware version 0.24
[   11.344000] ifxmips_atm: ATM init succeed
[   11.352000] Infineon Technologies DEU driver version 2.0.0
[   11.364000] IFX DEU DES initialized (multiblock).
[   11.368000] IFX DEU AES initialized (multiblock).
[   11.376000] IFX DEU ARC4 initialized (multiblock).
[   11.376000] IFX DEU SHA1 initialized.
[   11.380000] IFX DEU MD5 initialized.
[   11.388000] IFX DEU SHA1_HMAC initialized.
[   11.392000] IFX DEU MD5_HMAC initialized.
[   11.424000] NET: Registered protocol family 24
[   11.484000] xt_time: kernel timezone is -0000
[   11.508000] cfg80211: Calling CRDA to update world regulatory domain
[   11.512000] cfg80211: World regulatory domain updated:
[   11.516000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[   11.524000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   11.532000] cfg80211:   (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[   11.540000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[   11.548000] cfg80211:   (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   11.556000] cfg80211:   (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   11.668000] PCI: Enabling device 0000:01:00.0 (0000 -> 0002)
[   11.692000] cfg80211: Calling CRDA for country: US
[   11.700000] cfg80211: Regulatory domain changed to country: US
[   11.704000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[   11.712000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2700 mBm)
[   11.720000] cfg80211:   (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 1700 mBm)
[   11.728000] cfg80211:   (5250000 KHz - 5330000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   11.736000] cfg80211:   (5490000 KHz - 5600000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   11.744000] cfg80211:   (5650000 KHz - 5710000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   11.748000] cfg80211:   (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 3000 mBm)
[   11.760000] ieee80211 phy0: Atheros AR9300 Rev:3 mem=0xbc000000, irq=144
[   16.048000] device eth0 entered promiscuous mode
[   16.056000] br-lan: port 1(eth0) entered forwarding state
[   16.060000] br-lan: port 1(eth0) entered forwarding state
[   18.064000] br-lan: port 1(eth0) entered forwarding state
procd: - init complete -



BusyBox v1.19.4 (2013-11-01 22:55:08 EET) built-in shell (ash)
Enter 'help' for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 -----------------------------------------------------
 BARRIER BREAKER (Bleeding Edge, r38578)
 -----------------------------------------------------
  * 1/2 oz Galliano         Pour all ingredients into
  * 4 oz cold Coffee        an irish coffee mug filled
  * 1 1/2 oz Dark Rum       with crushed ice. Stir.
  * 2 tsp. Creme de Cacao
 -----------------------------------------------------
root@OpenWrt:/#

root@OpenWrt:/# cat /proc/mtd
dev:    size   erasesize  name
mtd0: 00020000 00010000 "u-boot"
mtd1: 007a0000 00010000 "firmware"
mtd2: 0066484b 00010000 "rootfs"
mtd3: 00010000 00010000 "config"
mtd4: 00030000 00010000 "boardconfig"

root@OpenWrt:/# cat /proc/partitions
major minor  #blocks  name

  31        0        128 mtdblock0
  31        1       7808 mtdblock1
  31        2       6546 mtdblock2
  31        3         64 mtdblock3
  31        4        192 mtdblock4

root@OpenWrt:/# df -h
Filesystem                Size      Used Available Use% Mounted on
tmpfs                    29.9M    524.0K     29.4M   2% /tmp
tmpfs                   512.0K         0    512.0K   0% /dev

root@OpenWrt:/# free -m
             total         used         free       shared      buffers
Mem:         61168        28504        32664            0            0
-/+ buffers:              28504        32664
Swap:            0            0            0

root@OpenWrt:/# ifconfig -a
br-lan    Link encap:Ethernet  HWaddr 02:C3:48:8B:24:CB
          inet addr:192.168.1.1  Bcast:192.168.1.255  Mask:255.255.255.0
          inet6 addr: fd15:9c5b:f18::1/60 Scope:Global
          inet6 addr: fe80::c3:48ff:fe8b:24cb/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:99 errors:0 dropped:0 overruns:0 frame:0
          TX packets:18 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:13347 (13.0 KiB)  TX bytes:3136 (3.0 KiB)

eth0      Link encap:Ethernet  HWaddr 02:C3:48:8B:24:CB
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:184 errors:0 dropped:83 overruns:0 frame:0
          TX packets:18 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:25059 (24.4 KiB)  TX bytes:3208 (3.1 KiB)

ifb0      Link encap:Ethernet  HWaddr 76:27:DE:0E:12:0C
          BROADCAST NOARP  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:32
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

ifb1      Link encap:Ethernet  HWaddr 56:D4:8B:68:C2:55
          BROADCAST NOARP  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:32
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:19680 errors:0 dropped:0 overruns:0 frame:0
          TX packets:19680 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:1338240 (1.2 MiB)  TX bytes:1338240 (1.2 MiB)

nas0      Link encap:Ethernet  HWaddr 00:00:01:00:00:00
          inet6 addr: fe80::200:1ff:fe00:0/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:966 errors:966 dropped:0 overruns:966 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 B)  TX bytes:73094 (71.3 KiB)

root@OpenWrt:/# iw list
Wiphy phy0
        max # scan SSIDs: 4
        max scan IEs length: 2257 bytes
        Coverage class: 0 (up to 0m)
        Device supports RSN-IBSS.
        Supported Ciphers:
                * WEP40 (00-0f-ac:1)
                * WEP104 (00-0f-ac:5)
                * TKIP (00-0f-ac:2)
                * CCMP (00-0f-ac:4)
                * CMAC (00-0f-ac:6)
        Available Antennas: TX 0x7 RX 0x7
        Configured Antennas: TX 0x7 RX 0x7
        Supported interface modes:
                 * IBSS
                 * managed
                 * AP
                 * AP/VLAN
                 * WDS
                 * monitor
                 * mesh point
                 * P2P-client
                 * P2P-GO
        Band 1:
                Capabilities: 0x11ef
                        RX LDPC
                        HT20/HT40
                        SM Power Save disabled
                        RX HT20 SGI
                        RX HT40 SGI
                        TX STBC
                        RX STBC 1-stream
                        Max AMSDU length: 3839 bytes
                        DSSS/CCK HT40
                Maximum RX AMPDU length 65535 bytes (exponent: 0x003)
                Minimum RX AMPDU time spacing: 8 usec (0x06)
                HT TX/RX MCS rate indexes supported: 0-23
                Bitrates (non-HT):
                        * 1.0 Mbps
                        * 2.0 Mbps (short preamble supported)
                        * 5.5 Mbps (short preamble supported)
                        * 11.0 Mbps (short preamble supported)
                        * 6.0 Mbps
                        * 9.0 Mbps
                        * 12.0 Mbps
                        * 18.0 Mbps
                        * 24.0 Mbps
                        * 36.0 Mbps
                        * 48.0 Mbps
                        * 54.0 Mbps
                Frequencies:
                        * 2412 MHz [1] (27.0 dBm)
                        * 2417 MHz [2] (27.0 dBm)
                        * 2422 MHz [3] (27.0 dBm)
                        * 2427 MHz [4] (27.0 dBm)
                        * 2432 MHz [5] (27.0 dBm)
                        * 2437 MHz [6] (27.0 dBm)
                        * 2442 MHz [7] (27.0 dBm)
                        * 2447 MHz [8] (27.0 dBm)
                        * 2452 MHz [9] (27.0 dBm)
                        * 2457 MHz [10] (27.0 dBm)
                        * 2462 MHz [11] (27.0 dBm)
                        * 2467 MHz [12] (disabled)
                        * 2472 MHz [13] (disabled)
                        * 2484 MHz [14] (disabled)
        Band 2:
                Capabilities: 0x11ef
                        RX LDPC
                        HT20/HT40
                        SM Power Save disabled
                        RX HT20 SGI
                        RX HT40 SGI
                        TX STBC
                        RX STBC 1-stream
                        Max AMSDU length: 3839 bytes
                        DSSS/CCK HT40
                Maximum RX AMPDU length 65535 bytes (exponent: 0x003)
                Minimum RX AMPDU time spacing: 8 usec (0x06)
                HT TX/RX MCS rate indexes supported: 0-23
                Bitrates (non-HT):
                        * 6.0 Mbps
                        * 9.0 Mbps
                        * 12.0 Mbps
                        * 18.0 Mbps
                        * 24.0 Mbps
                        * 36.0 Mbps
                        * 48.0 Mbps
                        * 54.0 Mbps
                Frequencies:
                        * 5180 MHz [36] (17.0 dBm)
                        * 5200 MHz [40] (17.0 dBm)
                        * 5220 MHz [44] (17.0 dBm)
                        * 5240 MHz [48] (17.0 dBm)
                        * 5260 MHz [52] (20.0 dBm) (passive scanning, no IBSS, radar detection)
                          DFS state: usable (for 4826 sec)
                        * 5280 MHz [56] (20.0 dBm) (passive scanning, no IBSS, radar detection)
                          DFS state: usable (for 4826 sec)
                        * 5300 MHz [60] (20.0 dBm) (passive scanning, no IBSS, radar detection)
                          DFS state: usable (for 4826 sec)
                        * 5320 MHz [64] (20.0 dBm) (passive scanning, no IBSS, radar detection)
                          DFS state: usable (for 4826 sec)
                        * 5500 MHz [100] (20.0 dBm) (passive scanning, no IBSS, radar detection)
                          DFS state: usable (for 4826 sec)
                        * 5520 MHz [104] (20.0 dBm) (passive scanning, no IBSS, radar detection)
                          DFS state: usable (for 4826 sec)
                        * 5540 MHz [108] (20.0 dBm) (passive scanning, no IBSS, radar detection)
                          DFS state: usable (for 4826 sec)
                        * 5560 MHz [112] (20.0 dBm) (passive scanning, no IBSS, radar detection)
                          DFS state: usable (for 4826 sec)
                        * 5580 MHz [116] (20.0 dBm) (passive scanning, no IBSS, radar detection)
                          DFS state: usable (for 4826 sec)
                        * 5600 MHz [120] (disabled)
                        * 5620 MHz [124] (disabled)
                        * 5640 MHz [128] (disabled)
                        * 5660 MHz [132] (20.0 dBm) (passive scanning, no IBSS, radar detection)
                          DFS state: usable (for 4826 sec)
                        * 5680 MHz [136] (20.0 dBm) (passive scanning, no IBSS, radar detection)
                          DFS state: usable (for 4826 sec)
                        * 5700 MHz [140] (20.0 dBm) (passive scanning, no IBSS, radar detection)
                          DFS state: usable (for 4826 sec)
                        * 5745 MHz [149] (30.0 dBm)
                        * 5765 MHz [153] (30.0 dBm)
                        * 5785 MHz [157] (30.0 dBm)
                        * 5805 MHz [161] (30.0 dBm)
                        * 5825 MHz [165] (30.0 dBm)
        Supported commands:
                 * new_interface
                 * set_interface
                 * new_key
                 * start_ap
                 * new_station
                 * new_mpath
                 * set_mesh_config
                 * set_bss
                 * authenticate
                 * associate
                 * deauthenticate
                 * disassociate
                 * join_ibss
                 * join_mesh
                 * remain_on_channel
                 * set_tx_bitrate_mask
                 * frame
                 * frame_wait_cancel
                 * set_wiphy_netns
                 * set_channel
                 * set_wds_peer
                 * tdls_mgmt
                 * tdls_oper
                 * probe_client
                 * set_noack_map
                 * register_beacons
                 * start_p2p_device
                 * Unknown command (92)
                 * testmode
                 * connect
                 * disconnect
        Supported TX frame types:
                 * IBSS: 0x00 0x10 0x20 0x30 0x40 0x50 0x60 0x70 0x80 0x90 0xa0 0xb0 0xc0 0xd0 0xe0 0xf0
                 * managed: 0x00 0x10 0x20 0x30 0x40 0x50 0x60 0x70 0x80 0x90 0xa0 0xb0 0xc0 0xd0 0xe0 0xf0
                 * AP: 0x00 0x10 0x20 0x30 0x40 0x50 0x60 0x70 0x80 0x90 0xa0 0xb0 0xc0 0xd0 0xe0 0xf0
                 * AP/VLAN: 0x00 0x10 0x20 0x30 0x40 0x50 0x60 0x70 0x80 0x90 0xa0 0xb0 0xc0 0xd0 0xe0 0xf0
                 * mesh point: 0x00 0x10 0x20 0x30 0x40 0x50 0x60 0x70 0x80 0x90 0xa0 0xb0 0xc0 0xd0 0xe0 0xf0
                 * P2P-client: 0x00 0x10 0x20 0x30 0x40 0x50 0x60 0x70 0x80 0x90 0xa0 0xb0 0xc0 0xd0 0xe0 0xf0
                 * P2P-GO: 0x00 0x10 0x20 0x30 0x40 0x50 0x60 0x70 0x80 0x90 0xa0 0xb0 0xc0 0xd0 0xe0 0xf0
                 * P2P-device: 0x00 0x10 0x20 0x30 0x40 0x50 0x60 0x70 0x80 0x90 0xa0 0xb0 0xc0 0xd0 0xe0 0xf0
        Supported RX frame types:
                 * IBSS: 0x40 0xb0 0xc0 0xd0
                 * managed: 0x40 0xd0
                 * AP: 0x00 0x20 0x40 0xa0 0xb0 0xc0 0xd0
                 * AP/VLAN: 0x00 0x20 0x40 0xa0 0xb0 0xc0 0xd0
                 * mesh point: 0xb0 0xc0 0xd0
                 * P2P-client: 0x40 0xd0
                 * P2P-GO: 0x00 0x20 0x40 0xa0 0xb0 0xc0 0xd0
                 * P2P-device: 0x40 0xd0
        software interface modes (can always be added):
                 * AP/VLAN
                 * monitor
        valid interface combinations:
                 * #{ managed, WDS, P2P-client } <= 2048, #{ AP, mesh point, P2P-GO } <= 8, #{ IBSS } <= 1,
                   total <= 2048, #channels <= 1, STA/AP BI must match
                 * #{ AP } <= 1,
                   total <= 1, #channels <= 1, STA/AP BI must match, radar detect widths: { 20 MHz (no HT), 20 MHz }

        HT Capability overrides:
                 * MCS: ff ff ff ff ff ff ff ff ff ff
                 * maximum A-MSDU length
                 * supported channel width
                 * short GI for 40 MHz
                 * max A-MPDU length exponent
                 * min MPDU start spacing
        Device supports TX status socket option.
        Device supports HT-IBSS.
        Device supports low priority scan.
        Device supports scan flush.
        Device supports AP scan.

root@OpenWrt:/# iw phy phy0 interface add wlan0 type station
root@OpenWrt:/# ifconfig wlan0 up
[ 5081.520000] IPv6: ADDRCONF(NETDEV_UP): wlan0: link is not ready

root@OpenWrt:/# iwconfig
ifb0      no wireless extensions.

nas0      no wireless extensions.

lo        no wireless extensions.

wlan0     IEEE 802.11abgn  ESSID:off/any
          Mode:Managed  Access Point: Not-Associated   Tx-Power=5 dBm
          RTS thr:off   Fragment thr:off
          Encryption key:off
          Power Management:off

eth0      no wireless extensions.

ifb1      no wireless extensions.

br-lan    no wireless extensions.</code>
</p>

</div>

<h2 class="sectionedit28" id="discussion">Discussion</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="https://forum.openwrt.org/viewtopic.php?id=42380" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?id=42380"  rel="nofollow">forum.openwrt.org - Tp-Link td-w8970</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://forum.openwrt.org/viewtopic.php?id=32204&amp;p=2" class="urlextern" title="https://forum.openwrt.org/viewtopic.php?id=32204&amp;p=2"  rel="nofollow">forum.openwrt.org - Vdsl2</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://translate.google.com/translate?hl=en&amp;ie=UTF8&amp;prev=_t&amp;sl=pl&amp;tl=en&amp;u=http://openrouter.info/forum/viewtopic.php%3Ff%3D18%26t%3D2727" class="urlextern" title="http://translate.google.com/translate?hl=en&amp;ie=UTF8&amp;prev=_t&amp;sl=pl&amp;tl=en&amp;u=http://openrouter.info/forum/viewtopic.php%3Ff%3D18%26t%3D2727"  rel="nofollow">openrouter.info - TP-LINK TD-W8970</a> (<em>translated</em>)</div>
</li>
</ul>

</div>

<h2 class="sectionedit29" id="bugs">Bugs</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="https://dev.openwrt.org/ticket/14413" class="urlextern" title="https://dev.openwrt.org/ticket/14413"  rel="nofollow">ticket #14413 ltq-vdsl-app does not get included for xrx200 targets</a> - <em><strong>fixed</strong> by blogic</em></div>
</li>
<li class="level1"><div class="li"> <a href="https://dev.openwrt.org/ticket/14414" class="urlextern" title="https://dev.openwrt.org/ticket/14414"  rel="nofollow">ticket #14414 w921v_fw_cutter Illegal instruction</a> - <em><strong>fixed</strong> by blogic</em></div>
</li>
<li class="level1"><div class="li"> <a href="https://dev.openwrt.org/ticket/14417" class="urlextern" title="https://dev.openwrt.org/ticket/14417"  rel="nofollow">ticket #14417 TD-W8970 ramdisk does not boot</a> - <em><strong>fixed</strong> by blogic</em></div>
</li>
<li class="level1"><div class="li"> <a href="https://dev.openwrt.org/ticket/14433" class="urlextern" title="https://dev.openwrt.org/ticket/14433"  rel="nofollow">ticket #14433 Bug mac address TD-8970v1</a> - <em><strong>fixed</strong> by blogic</em></div>
</li>
<li class="level1"><div class="li"> <a href="https://dev.openwrt.org/ticket/14436" class="urlextern" title="https://dev.openwrt.org/ticket/14436"  rel="nofollow">ticket #14436 Double the router TD8970</a> - <em><strong>fixed</strong> by jow</em></div>
</li>
<li class="level1"><div class="li"> <a href="https://dev.openwrt.org/ticket/14439" class="urlextern" title="https://dev.openwrt.org/ticket/14439"  rel="nofollow">ticket #14439 TD-W8970 full support</a> </div>
</li>
<li class="level1"><div class="li"> <a href="https://dev.openwrt.org/ticket/14451" class="urlextern" title="https://dev.openwrt.org/ticket/14451"  rel="nofollow">ticket #14451 error in the script dsl_notify in the trunk modem TD-8970</a>  <em><strong>fixed</strong> by rpc</em></div>
</li>
<li class="level1"><div class="li"> <a href="https://dev.openwrt.org/ticket/14453" class="urlextern" title="https://dev.openwrt.org/ticket/14453"  rel="nofollow">ticket #14453 lantiq ar9/vr9 insmod memory leak</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://dev.openwrt.org/ticket/14454" class="urlextern" title="https://dev.openwrt.org/ticket/14454"  rel="nofollow">ticket #14454 TD-W8970 WiFi toggle button not working with hotplug.d</a> - <em><strong>fixed</strong> by blogic</em></div>
</li>
<li class="level1"><div class="li"> <a href="https://dev.openwrt.org/ticket/14455" class="urlextern" title="https://dev.openwrt.org/ticket/14455"  rel="nofollow">ticket #14455 TD-W8970 ath9k WiFi LED not working</a></div>
</li>
</ul>

</div>

<h2 class="sectionedit30" id="tags">Tags</h2>
<div class="level2">
<div class="tags"><span>
	<a href="../../tag/lantiq?do=showtag&amp;tag=Lantiq" class="wikilink1" title="tag:lantiq" rel="tag">Lantiq</a>,
	<a href="../../tag/vr9?do=showtag&amp;tag=VR9" class="wikilink1" title="tag:vr9" rel="tag">VR9</a>,
	<a href="../../tag/mips?do=showtag&amp;tag=MIPS" class="wikilink1" title="tag:mips" rel="tag">MIPS</a>,
	<a href="../../tag/mips32?do=showtag&amp;tag=MIPS32" class="wikilink1" title="tag:mips32" rel="tag">MIPS32</a>,
	<a href="../../tag/34kc?do=showtag&amp;tag=34Kc" class="wikilink1" title="tag:34kc" rel="tag">34Kc</a>,
	<a href="../../tag/gigabitethernet?do=showtag&amp;tag=GigabitEthernet" class="wikilink1" title="tag:gigabitethernet" rel="tag">GigabitEthernet</a>,
	<a href="../../tag/1nic?do=showtag&amp;tag=1NIC" class="wikilink1" title="tag:1nic" rel="tag">1NIC</a>,
	<a href="../../tag/1wnic?do=showtag&amp;tag=1WNIC" class="wikilink1" title="tag:1wnic" rel="tag">1WNIC</a>,
	<a href="../../tag/4port?do=showtag&amp;tag=4Port" class="wikilink1" title="tag:4port" rel="tag">4Port</a>,
	<a href="../../tag/adsl2?do=showtag&amp;tag=ADSL2%252B" class="wikilink1" title="tag:adsl2" rel="tag">ADSL2+</a>,
	<a href="../../tag/vdsl2?do=showtag&amp;tag=VDSL2" class="wikilink1" title="tag:vdsl2" rel="tag">VDSL2</a>,
	<a href="../../tag/usb?do=showtag&amp;tag=USB" class="wikilink1" title="tag:usb" rel="tag">USB</a>,
	<a href="../../tag/2usb?do=showtag&amp;tag=2USB" class="wikilink1" title="tag:2usb" rel="tag">2USB</a>,
	<a href="../../tag/jtag?do=showtag&amp;tag=JTAG" class="wikilink1" title="tag:jtag" rel="tag">JTAG</a>,
	<a href="../../tag/serial?do=showtag&amp;tag=Serial" class="wikilink1" title="tag:serial" rel="tag">Serial</a>,
	<a href="../../tag/802.11bgn?do=showtag&amp;tag=802.11bgn" class="wikilink1" title="tag:802.11bgn" rel="tag">802.11bgn</a>,
	<a href="../../tag/ath9k?do=showtag&amp;tag=ath9k" class="wikilink1" title="tag:ath9k" rel="tag">ath9k</a>,
	<a href="../../tag/3ant?do=showtag&amp;tag=3Ant" class="wikilink1" title="tag:3ant" rel="tag">3Ant</a>,
	<a href="../../tag/detachableantenna" class="wikilink1" title="tag:detachableantenna" rel="tag">DetachableAntenna</a>,
	<a href="../../tag/64ram?do=showtag&amp;tag=64RAM" class="wikilink1" title="tag:64ram" rel="tag">64RAM</a>,
	<a href="../../tag/8flash?do=showtag&amp;tag=8Flash" class="wikilink1" title="tag:8flash" rel="tag">8Flash</a>
</span></div>

</div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>toh/tp-link/td-w8970.txt</bdi> · Last modified: 2015/04/25 22:49 by <bdi>Wingman2k</bdi></div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="td-w8970?do=edit"  class="action source" accesskey="v" rel="nofollow" title="Show pagesource [V]"><span>Show pagesource</span></a></li><li><a href="td-w8970?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="td-w8970?do=backlink"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="td-w8970#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license" class="urlextern">CC Attribution-Noncommercial-Share Alike 3.0 Unported</a></bdi></div>
    <div class="buttons">
        <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license"><img src="../../lib/images/license/button/cc-by-nc-sa.png" alt="CC Attribution-Noncommercial-Share Alike 3.0 Unported" /></a>        <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="../../lib/tpl/openwrt/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://www.php.net" title="Powered by PHP" ><img
            src="../../lib/tpl/openwrt/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="../../lib/tpl/openwrt/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="../../lib/tpl/openwrt/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="../../lib/tpl/openwrt/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="../../lib/exe/indexer.php?id=toh%253Atp-link%253Atd-w8970&amp;1432269501" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->
</body>
</html>
