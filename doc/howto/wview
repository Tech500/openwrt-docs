<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>wview HowTo [OpenWrt Wiki]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="doc,howto,wview"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../lib/exe/opensearch.php" title="OpenWrt Wiki"/>
<link rel="start" href="../../index.html"/>
<link rel="contents" href="wview?do=index" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Recent changes" href="../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="../../feed.php?mode=list&amp;ns=doc:howto"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="../../_export/xhtml/doc/howto/wview"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="../../_export/raw/doc/howto/wview"/>
<link rel="canonical" href="wview"/>
<link rel="stylesheet" type="text/css" href="../../lib/exe/css.php?t=openwrt&amp;tseed=6f44f363dc87908d905dc56ff3acbfc4"/>
<script type="text/javascript">/*<![CDATA[*/var NS='doc:howto';var JSINFO = {"id":"doc:howto:wview","namespace":"doc:howto"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../lib/exe/js.php?tseed=6f44f363dc87908d905dc56ff3acbfc4"></script>
<script type="text/javascript" charset="utf-8">/*<![CDATA[*/jQuery(function(){
	for ( i=0; i < document.forms.length; i++ ) {
		if (document.forms[i].method == 'post') {
			var myElement = document.createElement('input');
			myElement.setAttribute('type', 'hidden');
			myElement.name = 'bb2_screener_';
			myElement.value = '1432273861 166.182.3.244';
			document.forms[i].appendChild(myElement);
		}
	}
});
/*!]]>*/</script>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="../../lib/tpl/openwrt/images/favicon.ico" />
<link rel="apple-touch-icon" href="../../lib/tpl/openwrt/images/apple-touch-icon.png" />
    </head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_openwrt     ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="wview#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="../../start"  accesskey="h" title="[H]"><img src="../../lib/tpl/openwrt/images/logo.png" width="386" height="98" alt="" /> <span>OpenWrt Wiki</span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="wview?do=register"  class="action register" rel="nofollow" title="Register">Register</a></li><li><a href="wview?do=login&amp;sectok=382740b13d95f946eed36caa57076b4a"  class="action login" rel="nofollow" title="Login">Login</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="../../start" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="../../doku.php" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="doc:howto:wview" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Show pagesource</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Login</option><option value="register">Register</option></optgroup></select><input type="submit" value="&gt;" /></div></form>            </div>
            <ul>
                <li><a href="wview?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a></li><li><a href="wview?do=media&amp;ns=doc%253Ahowto"  class="action media" rel="nofollow" title="Media Manager">Media Manager</a></li><li><a href="wview?do=index"  class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                            <div class="youarehere"><span class="bchead">You are here: </span><span class="home"><bdi><a href="../../start" class="wikilink1" title="start">OpenWrt Wiki</a></bdi></span> » <bdi><a href="../start" class="wikilink1" title="doc:start">Documentation</a></bdi> » <bdi><a href="start" class="wikilink1" title="doc:howto:start">HOWTOs</a></bdi> » <bdi><span class="curid"><a href="wview" class="wikilink1" title="doc:howto:wview">wview HowTo</a></span></bdi></div>
                                    <div class="plugin_multilingual">
        <ul>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/cz/doc/howto/wview" class="media" title="cz:doc:howto:wview"><img src="../../lib/exe/fetch.php?cache=&amp;tok=aff589&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fcz.gif" class="media" title="Čeština (Czech)" alt="Čeština (Czech)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/de/doc/howto/wview" class="media" title="de:doc:howto:wview"><img src="../../lib/exe/fetch.php?cache=&amp;tok=e24010&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fde.gif" class="media" title="Deutsch (German)" alt="Deutsch (German)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <span class="curid"><a href="wview" class="media" title="doc:howto:wview"><img src="../../lib/exe/fetch.php?cache=&amp;tok=2a37ae&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fgb.gif" class="media" title="English" alt="English" /></a></span>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/es/doc/howto/wview" class="media" title="es:doc:howto:wview"><img src="../../lib/exe/fetch.php?cache=&amp;tok=46c004&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fmx.gif" class="media" title="Español (Spanish, Mexico)" alt="Español (Spanish, Mexico)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/fr/doc/howto/wview" class="media" title="fr:doc:howto:wview"><img src="../../lib/exe/fetch.php?cache=&amp;tok=a5beba&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ffr.gif" class="media" title="Français (French)" alt="Français (French)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/hu/doc/howto/wview" class="media" title="hu:doc:howto:wview"><img src="../../lib/exe/fetch.php?cache=&amp;tok=6b5470&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fhu.gif" class="media" title="Magyar (Hungarian)" alt="Magyar (Hungarian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/jp/doc/howto/wview" class="media" title="jp:doc:howto:wview"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f999fc&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fjp.gif" class="media" title="日本語 (Japanese)" alt="日本語 (Japanese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pl/doc/howto/wview" class="media" title="pl:doc:howto:wview"><img src="../../lib/exe/fetch.php?cache=&amp;tok=c805c0&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fpl.gif" class="media" title="Poliski (Polish)" alt="Poliski (Polish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pt-br/doc/howto/wview" class="media" title="pt-br:doc:howto:wview"><img src="../../lib/exe/fetch.php?cache=&amp;tok=13127d&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fbr.gif" class="media" title="Português brasileiro (Portuguese, Brasil)" alt="Português brasileiro (Portuguese, Brasil)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/ru/doc/howto/wview" class="media" title="ru:doc:howto:wview"><img src="../../lib/exe/fetch.php?cache=&amp;tok=66ab5e&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fru.gif" class="media" title="Русский (Russsian)" alt="Русский (Russsian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/tr/doc/howto/wview" class="media" title="tr:doc:howto:wview"><img src="../../lib/exe/fetch.php?cache=&amp;tok=f4beed&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ftr.gif" class="media" title="Tϋrkçe (Turkish)" alt="Tϋrkçe (Turkish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-cn/doc/howto/wview" class="media" title="zh-cn:doc:howto:wview"><img src="../../lib/exe/fetch.php?cache=&amp;tok=93625a&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-cn.gif" class="media" title="官話/官话 (Chinese)" alt="官話/官话 (Chinese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-tw/doc/howto/wview" class="media" title="zh-tw:doc:howto:wview"><img src="../../lib/exe/fetch.php?cache=&amp;tok=b56198&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-tw.gif" class="media" title="臺灣華語 (Taiwanese)" alt="臺灣華語 (Taiwanese)" /></a>
              </div>
            </div>
          </li>
        </ul>
      </div>
        </div>
    
    
    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>doc:howto:wview</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="wview#preparation">Preparation</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="wview#prerequisites">Prerequisites</a></div></li>
<li class="level2"><div class="li"><a href="wview#required_packages">Required Packages</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="wview#server_openwrt">Server (OpenWRT)</a></div></li>
<li class="level3"><div class="li"><a href="wview#wview_source_tarball">wview Source tarball</a></div></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"><a href="wview#installation">Installation</a></div>
<ul class="toc">
<li class="clear">
<ul class="toc">
<li class="level3"><div class="li"><a href="wview#packages_installation">Packages installation</a></div></li>
<li class="level3"><div class="li"><a href="wview#usb-stick_files">USB-Stick files</a></div></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"><a href="wview#configuration">Configuration</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="wview#server_configuration">Server configuration</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="wview#start_stop">Start &amp; Stop</a></div></li>
<li class="level1"><div class="li"><a href="wview#start_on_boot">Start on boot</a></div></li>
<li class="level1"><div class="li"><a href="wview#troubleshooting">Troubleshooting</a></div></li>
<li class="level1"><div class="li"><a href="wview#notes">Notes</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="wview_howto">wview HowTo</h1>
<div class="level1">

<p>
wview is a collection of unix daemons which interface with a supported weather station to retrieve archive records (if generated by the station) and current conditions. 
More info on <a href="http://www.wviewweather.com/" class="urlextern" title="http://www.wviewweather.com/"  rel="nofollow">www.wviewweather.com</a>
</p>

<p>
If the station does not generate archive records internally, wview will auto-generate archive records based on the sensor readings collected for that interval. The archive records and High/Low (HILOW) data are stored in SQLite3 databases. 
At a configurable interval, wview will utilize the archive history and current conditions to generate weather images (buckets, dials and graphs) and <abbr title="HyperText Markup Language">HTML</abbr> web pages based on user-configurable <abbr title="HyperText Markup Language">HTML</abbr> templates. 
</p>

<p>
So you can have a perfect weather information page on your router <img src="../../lib/images/smileys/icon_smile.gif" class="icon" alt=":-)" />
</p>

</div>

<h2 class="sectionedit2" id="preparation">Preparation</h2>
<div class="level2">

</div>

<h3 class="sectionedit3" id="prerequisites">Prerequisites</h3>
<div class="level3">

<p>
As an example I use a TP-Link <a href="../../toh/tp-link/tl-wdr4300" class="wikilink1" title="toh:tp-link:tl-wdr4300">TL-WDR4300</a> and a <strong>TFA Nexus weather station</strong> which is a derivate of Hideki. (AKA Hideki, Nexus, Mebus, Irox, Honeywell, Cresta TE923, TE923W, TE821W, WXR810, DV928). More stations on <a href="http://www.wviewweather.com/" class="urlextern" title="http://www.wviewweather.com/"  rel="nofollow">www.wviewweather.com</a>
</p>

<p>
I took the <a href="../../toh/tp-link/tl-wdr4300" class="wikilink1" title="toh:tp-link:tl-wdr4300">TL-WDR4300</a> because of RAM, FLASH and 2 USB Ports. One for storage (I used USB Stick with 1 <abbr title="Gigabyte">GB</abbr>, but less is also good) and second port for the Nexus. If your router has only one USB port you can use a HUB… <img src="../../lib/images/smileys/icon_smile.gif" class="icon" alt=":-)" />
</p>

<p>
I used OpenWRT version ATTITUDE ADJUSTMENT (12.09, r36088)
</p>

<p>
You have to follow/need to know this upfront:
</p>
<ol>
<li class="level1"><div class="li"> follow <a href="usb.essentials" class="wikilink1" title="doc:howto:usb.essentials">usb.essentials</a> for a basic USB support (<strong>Do not explain this again!</strong> Link to it, and you&#039;re done)</div>
</li>
<li class="level1"><div class="li"> follow <a href="usb.storage" class="wikilink1" title="doc:howto:usb.storage">usb.storage</a> for USB storage support</div>
</li>
<li class="level1"><div class="li"> follow <a href="client.overview#mountingfilesystems" class="wikilink1" title="doc:howto:client.overview">Mounting.Filesystems</a> to mount <em>any</em> filesystem.</div>
</li>
</ol>

<p>
And you should know how to login via ssh to your OpenWRT…
</p>

<p>
But now an overview of all packages and basic installation.
</p>

</div>

<h3 class="sectionedit4" id="required_packages">Required Packages</h3>
<div class="level3">

</div>

<h4 id="server_openwrt">Server (OpenWRT)</h4>
<div class="level4">
<ul>
<li class="level1"><div class="li"><strong><code>wview</code></strong> Package which installs some programs, daemons and sample config files</div>
</li>
</ul>

<p>
Please install also the following packages, because wview depends on it. Maybe some are already installed.
</p>
<ul>
<li class="level1"><div class="li"><strong><code>zlib</code></strong> - compression library </div>
</li>
<li class="level2"><div class="li"><strong><code>libpng</code></strong> - png image library </div>
</li>
<li class="level2"><div class="li"><strong><code>libreadline</code></strong> - command line functions</div>
</li>
<li class="level2"><div class="li"><strong><code>gawk</code></strong> - GNU awk </div>
</li>
<li class="level2"><div class="li"><strong><code>libgd</code></strong> - graphics drawing library </div>
</li>
<li class="level2"><div class="li"><strong><code>libsqlite3</code></strong> - SQLite3 database library</div>
</li>
<li class="level2"><div class="li"><strong><code>radlib</code></strong> - rapid application development library - must be installed with SQLite support (–enable-sqlite) </div>
</li>
<li class="level2"><div class="li"><strong><code>libcurl</code></strong> - &quot;C&quot; <abbr title="Uniform Resource Locator">URL</abbr> HTTP library - optional, required for Weather Underground</div>
</li>
</ul>

<p>
Of course we need a kernel module for communication with the weather station.
To check which driver you have to install you need to know the Vendor and ProdID. 
</p>

<p>
Helpful is this package
</p>
<ul>
<li class="level1"><div class="li"><strong><code>usbutils</code></strong> - USB devices listing utilities</div>
</li>
</ul>

<p>
You can now check the Vendor and ProdID with 
<pre class="code"># lsusb </pre>

</p>

<p>
You will get something like this:
<pre class="code">Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 001 Device 002: ID 05e3:0608 Genesys Logic, Inc. USB-2.0 4-Port HUB
Bus 001 Device 003: ID 1130:6801 Tenx Technology, Inc.
Bus 001 Device 004: ID 4146:ba01 USBest Technology Intuix Flash Drive</pre>

</p>

<p>
The Nexus has the ID 1130:6801.
</p>

<p>
To check which driver you need you can take a look into 
<pre class="code"># cat /proc/bus/usb/devices</pre>

</p>

<p>
You will get something like this:
<pre class="code">...
T:  Bus=01 Lev=02 Prnt=02 Port=00 Cnt=01 Dev#=  3 Spd=1.5  MxCh= 0
D:  Ver= 1.10 Cls=00(&gt;ifc ) Sub=00 Prot=00 MxPS= 8 #Cfgs=  1
P:  Vendor=1130 ProdID=6801 Rev= 3.02
S:  Product= 
C:* #Ifs= 1 Cfg#= 1 Atr=80 MxPwr=100mA
I:* If#= 0 Alt= 0 #EPs= 1 Cls=03(HID  ) Sub=00 Prot=00 Driver=(none)
E:  Ad=81(I) Atr=03(Int.) MxPS=   8 Ivl=10ms
...</pre>

</p>

<p>
As you can see in line I: we need a HID driver for the Nexus.
</p>
<ul>
<li class="level1"><div class="li"><strong><code>kmod-usb-hid</code></strong> - Kernel support for USB HID devices such as keyboards and mice</div>
</li>
</ul>

<p>
If you have not a Nexus weather station you may need a different driver, but I assume that many will work with HID. 
(Please confirm your station here…)
</p>

<p>
I installed also some kernel modules for NLS (Native Language Support). Maybe not necessary.
</p>
<ul>
<li class="level1"><div class="li"><strong><code>kmod-nls-cp437</code></strong></div>
</li>
<li class="level1"><div class="li"><strong><code>kmod-nls-iso8859-1</code></strong></div>
</li>
<li class="level1"><div class="li"><strong><code>kmod-nls-utf8</code></strong></div>
</li>
</ul>

</div>

<h4 id="wview_source_tarball">wview Source tarball</h4>
<div class="level4">

<p>
You will need also some files from the <a href="http://sourceforge.net/projects/wview/" class="urlextern" title="http://sourceforge.net/projects/wview/"  rel="nofollow">latest wview Weather System package from Sourceforge</a> because not all needed files are included in the OpenWRT wview package.
</p>

<p>
Please unpack the tarball Sourceforge and search for he following directory:
</p>

<p>
<code>wview.x.x.x./examples/html/*.*</code>
</p>

<p>
You have to copy this directory later to your USB-stick.
</p>

</div>

<h2 class="sectionedit5" id="installation">Installation</h2>
<div class="level2">

</div>

<h4 id="packages_installation">Packages installation</h4>
<div class="level4">

<p>
<a href="../techref/opkg" class="wikilink1" title="doc:techref:opkg">opkg</a>
<pre class="code bash"><span class="co4"># </span>opkg <span class="kw2">install</span> wview zlib libpng libreadline <span class="kw2">gawk</span> libgd libsqlite3 radlib libcurl</pre>

</p>

<p>
Additional tool
<pre class="code bash"><span class="co4"># </span>opkg <span class="kw2">install</span> usbutils</pre>

</p>

<p>
And now the driver for the weather station.
<pre class="code bash"><span class="co4"># </span>opkg <span class="kw2">install</span> kmod-usb-hid kmod-nls-cp437 kmod-nls-iso8859-<span class="nu0">1</span> kmod-nls-utf8</pre>

</p>

</div>

<h4 id="usb-stick_files">USB-Stick files</h4>
<div class="level4">

<p>
You can prepare the external memory upfront with your PC… it saves some time.
I used a Linux system and a USB stick with ext4 filesystem… but vfat will also work.
</p>

<p>
This is the structure of the directories on the USB Stick that you have to generate:
<pre class="code">wview-data/measurements-archive
wview-html
wview-img</pre>

</p>

<p>
Because the wview package is lacking some files you have to copy the html files of the source tarball <code>wview.x.x.x./examples/html/*.*</code> to <code>wview-html</code> on the USB stick.
</p>

<p>
The USB stick is now ready.
</p>

</div>

<h2 class="sectionedit6" id="configuration">Configuration</h2>
<div class="level2">

<p>
Now, please mount the prepared USB Stick on <code>/mnt/extusb/</code>
If you do not have the dir <code>extusb</code>, just make it…
</p>

<p>
If you don&#039;t know how to mount the stick, just check <a href="client.overview#mountingfilesystems" class="wikilink1" title="doc:howto:client.overview">Mounting.Filesystems</a> to mount <em>any</em> filesystem.
</p>

</div>

<h3 class="sectionedit7" id="server_configuration">Server configuration</h3>
<div class="level3">

<p>
If you have installed all packages above, prepared and mounted the USB stick… you are ready to config.
</p>

<p>
<strong>First</strong> you have to create the databases for archive and config.
<pre class="code"># cd /mnt/extusb/wview-data/measurements-archive/
# sqlite3 wview-archive.sdb &#039;.read /etc/wview/wview-archive.sql&#039;

# cd /etc/wview/
# sqlite3 wview-conf.sdb &#039;.read /etc/wview/wview-conf.sql&#039;</pre>

</p>

<p>
<strong>Second</strong> you have to start wview config program with:
<pre class="code"># wviewconfig</pre>

Now answer all questions … <img src="../../lib/images/smileys/icon_smile.gif" class="icon" alt=":-)" />
</p>

<p>
No, not really… for a first test you can leave all parameters default except the following:
</p>

<p>
Important questions and answers for Nexus are
</p>
<ul>
<li class="level1"><div class="li"> Station type - one of Simulator, Virtual, VantagePro, WXT510, TWI, WS-2300, WMR918, WMRUSB, WH1080, TE923: <strong>TE923</strong></div>
</li>
<li class="level2"><div class="li"> Physical interface to the weather station - one of serial or ethernet (usb is considered serial): <strong>serial</strong></div>
</li>
<li class="level2"><div class="li"> Weather station serial device (/dev/ttyS0, /dev/ttyUSB0, etc.): <strong>/dev/usb/hiddev0</strong></div>
</li>
</ul>

<p>
You will find the interface for your weather station in <code>/dev</code>.
The best is you check <code>/dev</code> before you connect your weather station and directly after.
A <code>/dev/new file</code> or maybe <code>/dev/dir/new file</code> show you the name of the device.
</p>

<p>
Important directories are
</p>
<ul>
<li class="level1"><div class="li"> Where to store generated html and graphics files: <strong>/mnt/extusb/wview-img</strong></div>
</li>
<li class="level1"><div class="li"> Where to find <abbr title="HyperText Markup Language">HTML</abbr> template files: <strong>/etc/wview/html</strong></div>
</li>
</ul>

<p>
<strong>Third</strong>: We need one additional link for the generated html files. 
<pre class="code"># ln -snf /mnt/extusb/wview-img /www/weather</pre>

</p>

<p>
<strong>Fourth</strong>: Last config to do is to choose a html template. I prefer classic <img src="../../lib/images/smileys/icon_smile.gif" class="icon" alt=":-)" />
<pre class="code"># wviewhtmlconfig</pre>

</p>

<p>
If everything worked fine you will get something like this
<pre class="code">Which template skin do you want to use for your site?

wview site skins currently supported:
    classic - default wview skin
    chrome  - classic with a chrome effect
(chrome): classic
Site skin classic selected...
With extended data graphics.
With metric units.
Saving old HTML directory to html-20131012.232546 ...
...done.
Saving old config files...
... done.
HTML setup complete:
you may now customize template files in /etc/wview/html</pre>

</p>

<p>
If it is not looking like this and if you got some error messages… please check this Howto and proof that you have mounted the USB stick, have all directories, made all steps and if this not helps read and amend <code>/etc/init.d/wview</code> appropriately for your particular setup! Here you have to check especially the directories and devices. 
</p>

<p>
OK, I hope everything is fine and you have no errors…
</p>

</div>

<h2 class="sectionedit8" id="start_stop">Start &amp; Stop</h2>
<div class="level2">

<p>
Now we are ready to start…
</p>

<p>
<code>/etc/init.d/wview start</code> to start all daemons
</p>

<p>
Check system log for messages.
</p>

<p>
If everything is fine you can reach your weather page with
</p>

<p>
<a href="http://your-openwrt-ip/weather" class="urlextern" title="http://your-openwrt-ip/weather"  rel="nofollow">http://your-openwrt-ip/weather</a>
</p>

<p>
To stop, just type
</p>

<p>
<code>/etc/init.d/wview stop</code> to stop all daemons
</p>

</div>

<h2 class="sectionedit9" id="start_on_boot">Start on boot</h2>
<div class="level2">

<p>
To enable/disable start on boot:<br/>

<code>/etc/init.d/wview enable</code>  this simply creates a symlink: <code>/etc/rc.d/S99wview → ../init.d/wview</code><br/>

<code>/etc/init.d/wview disable</code> this removes the symlink again<br/>

</p>

</div>

<h2 class="sectionedit10" id="troubleshooting">Troubleshooting</h2>
<div class="level2">

<p>
If you find some errors in this Howto or have additional info… just edit this Howto. Thank you.
</p>

</div>

<h2 class="sectionedit11" id="notes">Notes</h2>
<div class="level2">

<p>
Have fun!
Maik
</p>

</div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>doc/howto/wview.txt</bdi> · Last modified: 2013/10/13 00:03 by <bdi>maikst</bdi></div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="wview?do=edit"  class="action source" accesskey="v" rel="nofollow" title="Show pagesource [V]"><span>Show pagesource</span></a></li><li><a href="wview?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="wview?do=backlink"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="wview#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license" class="urlextern">CC Attribution-Noncommercial-Share Alike 3.0 Unported</a></bdi></div>
    <div class="buttons">
        <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license"><img src="../../lib/images/license/button/cc-by-nc-sa.png" alt="CC Attribution-Noncommercial-Share Alike 3.0 Unported" /></a>        <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="../../lib/tpl/openwrt/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://www.php.net" title="Powered by PHP" ><img
            src="../../lib/tpl/openwrt/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="../../lib/tpl/openwrt/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="../../lib/tpl/openwrt/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="../../lib/tpl/openwrt/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="../../lib/exe/indexer.php?id=doc%253Ahowto%253Awview&amp;1432273861" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->
</body>
</html>
