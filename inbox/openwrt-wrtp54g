<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>Linksys RTP300 and WRTP54G [OpenWrt Wiki]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="lantiq,ar7,adsl2"/>
<link rel="search" type="application/opensearchdescription+xml" href="../lib/exe/opensearch.php" title="OpenWrt Wiki"/>
<link rel="start" href="../index.html"/>
<link rel="contents" href="../toh/linksys/rtp300_and_wrtp54g?do=index" title="Sitemap"/>
<link rel="alternate" type="application/rss+xml" title="Recent changes" href="../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="../feed.php?mode=list&amp;ns=toh:linksys"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="../_export/xhtml/toh/linksys/rtp300_and_wrtp54g"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="../_export/raw/toh/linksys/rtp300_and_wrtp54g"/>
<link rel="canonical" href="openwrt-wrtp54g"/>
<link rel="stylesheet" type="text/css" href="../lib/exe/css.php?t=openwrt&amp;tseed=6f44f363dc87908d905dc56ff3acbfc4"/>
<script type="text/javascript">/*<![CDATA[*/var NS='toh:linksys';var JSINFO = {"id":"toh:linksys:rtp300_and_wrtp54g","namespace":"toh:linksys"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../lib/exe/js.php?tseed=6f44f363dc87908d905dc56ff3acbfc4"></script>
<script type="text/javascript" charset="utf-8">/*<![CDATA[*/jQuery(function(){
	for ( i=0; i < document.forms.length; i++ ) {
		if (document.forms[i].method == 'post') {
			var myElement = document.createElement('input');
			myElement.setAttribute('type', 'hidden');
			myElement.name = 'bb2_screener_';
			myElement.value = '1432282550 166.182.3.51';
			document.forms[i].appendChild(myElement);
		}
	}
});
/*!]]>*/</script>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="../lib/tpl/openwrt/images/favicon.ico" />
<link rel="apple-touch-icon" href="../lib/tpl/openwrt/images/apple-touch-icon.png" />
    </head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_openwrt     ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="openwrt-wrtp54g#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="../start"  accesskey="h" title="[H]"><img src="../lib/tpl/openwrt/images/logo.png" width="386" height="98" alt="" /> <span>OpenWrt Wiki</span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="../toh/linksys/rtp300_and_wrtp54g?do=register"  class="action register" rel="nofollow" title="Register">Register</a></li><li><a href="../toh/linksys/rtp300_and_wrtp54g?do=login&amp;sectok=382740b13d95f946eed36caa57076b4a"  class="action login" rel="nofollow" title="Login">Login</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="../start" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="../doku.php" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="toh:linksys:rtp300_and_wrtp54g" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Show pagesource</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Login</option><option value="register">Register</option></optgroup></select><input type="submit" value="&gt;" /></div></form>            </div>
            <ul>
                <li><a href="../toh/linksys/rtp300_and_wrtp54g?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a></li><li><a href="../toh/linksys/rtp300_and_wrtp54g?do=media&amp;ns=toh%253Alinksys"  class="action media" rel="nofollow" title="Media Manager">Media Manager</a></li><li><a href="../toh/linksys/rtp300_and_wrtp54g?do=index"  class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                            <div class="youarehere"><span class="bchead">You are here: </span><span class="home"><bdi><a href="../start" class="wikilink1" title="start">OpenWrt Wiki</a></bdi></span> » <bdi><a href="../toh/start" class="wikilink1" title="toh:start">Table of Hardware</a></bdi> » <bdi><a href="../toh/linksys/start" class="wikilink1" title="toh:linksys:start">Linksys</a></bdi> » <bdi><span class="curid"><a href="openwrt-wrtp54g" class="wikilink1" title="toh:linksys:rtp300_and_wrtp54g">Linksys RTP300 and WRTP54G</a></span></bdi></div>
                                    <div class="plugin_multilingual">
        <ul>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/cz/toh/linksys/rtp300_and_wrtp54g" class="media" title="cz:toh:linksys:rtp300_and_wrtp54g"><img src="../lib/exe/fetch.php?cache=&amp;tok=aff589&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fcz.gif" class="media" title="Čeština (Czech)" alt="Čeština (Czech)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/de/toh/linksys/rtp300_and_wrtp54g" class="media" title="de:toh:linksys:rtp300_and_wrtp54g"><img src="../lib/exe/fetch.php?cache=&amp;tok=e24010&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fde.gif" class="media" title="Deutsch (German)" alt="Deutsch (German)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <span class="curid"><a href="openwrt-wrtp54g" class="media" title="toh:linksys:rtp300_and_wrtp54g"><img src="../lib/exe/fetch.php?cache=&amp;tok=2a37ae&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fgb.gif" class="media" title="English" alt="English" /></a></span>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/es/toh/linksys/rtp300_and_wrtp54g" class="media" title="es:toh:linksys:rtp300_and_wrtp54g"><img src="../lib/exe/fetch.php?cache=&amp;tok=46c004&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fmx.gif" class="media" title="Español (Spanish, Mexico)" alt="Español (Spanish, Mexico)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/fr/toh/linksys/rtp300_and_wrtp54g" class="media" title="fr:toh:linksys:rtp300_and_wrtp54g"><img src="../lib/exe/fetch.php?cache=&amp;tok=a5beba&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ffr.gif" class="media" title="Français (French)" alt="Français (French)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/hu/toh/linksys/rtp300_and_wrtp54g" class="media" title="hu:toh:linksys:rtp300_and_wrtp54g"><img src="../lib/exe/fetch.php?cache=&amp;tok=6b5470&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fhu.gif" class="media" title="Magyar (Hungarian)" alt="Magyar (Hungarian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/jp/toh/linksys/rtp300_and_wrtp54g" class="media" title="jp:toh:linksys:rtp300_and_wrtp54g"><img src="../lib/exe/fetch.php?cache=&amp;tok=f999fc&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fjp.gif" class="media" title="日本語 (Japanese)" alt="日本語 (Japanese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pl/toh/linksys/rtp300_and_wrtp54g" class="media" title="pl:toh:linksys:rtp300_and_wrtp54g"><img src="../lib/exe/fetch.php?cache=&amp;tok=c805c0&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fpl.gif" class="media" title="Poliski (Polish)" alt="Poliski (Polish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/pt-br/toh/linksys/rtp300_and_wrtp54g" class="media" title="pt-br:toh:linksys:rtp300_and_wrtp54g"><img src="../lib/exe/fetch.php?cache=&amp;tok=13127d&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fbr.gif" class="media" title="Português brasileiro (Portuguese, Brasil)" alt="Português brasileiro (Portuguese, Brasil)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/ru/toh/linksys/rtp300_and_wrtp54g" class="media" title="ru:toh:linksys:rtp300_and_wrtp54g"><img src="../lib/exe/fetch.php?cache=&amp;tok=66ab5e&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fru.gif" class="media" title="Русский (Russsian)" alt="Русский (Russsian)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/tr/toh/linksys/rtp300_and_wrtp54g" class="media" title="tr:toh:linksys:rtp300_and_wrtp54g"><img src="../lib/exe/fetch.php?cache=&amp;tok=f4beed&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Ftr.gif" class="media" title="Tϋrkçe (Turkish)" alt="Tϋrkçe (Turkish)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-cn/toh/linksys/rtp300_and_wrtp54g" class="media" title="zh-cn:toh:linksys:rtp300_and_wrtp54g"><img src="../lib/exe/fetch.php?cache=&amp;tok=93625a&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-cn.gif" class="media" title="官話/官话 (Chinese)" alt="官話/官话 (Chinese)" /></a>
              </div>
            </div>
          </li>
          <li>
            <div class="li">
              <div class="flag_not_exists">
                <a href="http://wiki.openwrt.org/zh-tw/toh/linksys/rtp300_and_wrtp54g" class="media" title="zh-tw:toh:linksys:rtp300_and_wrtp54g"><img src="../lib/exe/fetch.php?cache=&amp;tok=b56198&amp;media=http%253A%252F%252Fwiki.openwrt.org%252Flib%252Fplugins%252Fmultilingual%252Fflags%252Fzh-tw.gif" class="media" title="臺灣華語 (Taiwanese)" alt="臺灣華語 (Taiwanese)" /></a>
              </div>
            </div>
          </li>
        </ul>
      </div>
        </div>
    
    
    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>toh:linksys:rtp300_and_wrtp54g</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="openwrt-wrtp54g#flashing_firmware">Flashing firmware</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="openwrt-wrtp54g#info">Info</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="openwrt-wrtp54g#photos">Photos</a></div></li>
<li class="level1"><div class="li"><a href="openwrt-wrtp54g#opening_the_case">Opening the case</a></div></li>
<li class="level1"><div class="li"><a href="openwrt-wrtp54g#serial">Serial</a></div></li>
<li class="level1"><div class="li"><a href="openwrt-wrtp54g#jtag">JTAG</a></div></li>
<li class="level1"><div class="li"><a href="openwrt-wrtp54g#interfaces">Interfaces</a></div></li>
<li class="level1"><div class="li"><a href="openwrt-wrtp54g#firmware_dumps_for_study">Firmware Dumps for Study</a></div></li>
<li class="level1"><div class="li"><a href="openwrt-wrtp54g#misc_notes">Misc Notes</a></div></li>
<li class="level1"><div class="li"><a href="openwrt-wrtp54g#tags">Tags</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="linksys_rtp300_and_wrtp54g">Linksys RTP300 and WRTP54G</h1>
<div class="level1">
<div class="table sectionedit2"><table class="inline">
	<tr class="row0">
		<td class="col0"> <img src="../lib/images/smileys/fixme.gif" class="icon" alt="FIXME" /> please merge this article with <a href="../toh/linksys/rtp300" class="wikilink1" title="toh:linksys:rtp300">rtp300</a> </td>
	</tr>
</table></div>

<p>
The WRTP54G has two ports to which one can connect telephones. The RTP300 is a version of the WRTP54G with the wireless radio omitted.
</p>

</div>

<h1 class="sectionedit3" id="supported_versions">Supported versions</h1>
<div class="level1">
<div class="table sectionedit4"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Version/Model </th><th class="col1"> S/N </th><th class="col2"> OpenWrt Version Supported </th><th class="col3"> Model Specific Notes </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> RTP300 v1.0 </td><td class="col1"> - </td><td class="col2"> trunk r18447 </td><td class="col3"> patch required, see below </td>
	</tr>
	<tr class="row2">
		<td class="col0"> WRTP54G v1.0 </td><td class="col1"> - </td><td class="col2"> trunk r18447 </td><td class="col3"> patch required, see below </td>
	</tr>
</table></div>

</div>

<h1 class="sectionedit5" id="hardware_highlights">Hardware highlights</h1>
<div class="level1">
<div class="table sectionedit6"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> CPU </th><th class="col1"> RAM </th><th class="col2"> Flash </th><th class="col3"> Network </th><th class="col4"> USB </th><th class="col5"> Serial </th><th class="col6"> JTAG </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> AR7 </td><td class="col1"> 32 MiB </td><td class="col2"> 8 MiB </td><td class="col3"> 4 x 1 </td><td class="col4"> No </td><td class="col5"> Yes </td><td class="col6"> Yes </td>
	</tr>
</table></div>

</div>

<h1 class="sectionedit7" id="installation">Installation</h1>
<div class="level1">

<p>
It is necessary to download the OpenWrt source code, patch it, build it, and put the resulting image on a TFTP server.  Serial console access is required to flash the firmware.  (Though this this situation will improve when more of the proposed patches are integrated.)
</p>
<ul>
<li class="level1"><div class="li"> please use the &quot;Titan&quot;-Images, see <a href="https://dev.openwrt.org/changeset/19022" class="urlextern" title="https://dev.openwrt.org/changeset/19022"  rel="nofollow">r19022</a></div>
</li>
</ul>

</div>

<h2 class="sectionedit8" id="flashing_firmware">Flashing firmware</h2>
<div class="level2">

<p>
The code in OpenWrt trunk (as of May 2010) cannot build a firmware image that can be flashed using the web interface in the Linksys firmware.  Flashing firmware requires serial console access.
</p>

</div>

<h1 class="sectionedit9" id="hardware">Hardware</h1>
<div class="level1">

</div>

<h3 class="sectionedit10" id="info">Info</h3>
<div class="level3">
<div class="table sectionedit11"><table class="inline">
	<tr class="row0">
		<td class="col0 leftalign"> <strong><a href="http://en.wikipedia.org/wiki/Instruction set" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Instruction set">Architecture</a>:</strong>    </td><td class="col1 leftalign"> <a href="http://en.wikipedia.org/wiki/MIPS architecture" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/MIPS architecture">MIPS</a>  </td>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> <strong>Vendor:</strong>          </td><td class="col1 leftalign"> <a href="http://en.wikipedia.org/wiki/Lantiq" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Lantiq">Lantiq</a>  </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> <strong><a href="../doc/techref/bootloader.1" class="wikilink1" title="doc:techref:bootloader">Bootloader</a>:</strong>     </td><td class="col1 leftalign"> <a href="../doc/techref/bootloader/pspboot" class="wikilink1" title="doc:techref:bootloader:pspboot">PSPBoot</a>  </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <strong><a href="../doc/hardware/soc.1" class="wikilink1" title="doc:hardware:soc">System-On-Chip</a>:</strong>  </td><td class="col1 leftalign"> AR7  </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> <strong><a href="../doc/hardware/cpu" class="wikilink1" title="doc:hardware:cpu">CPU</a>/Speed</strong>        </td><td class="col1"> ?@200 <abbr title="Megahertz">MHz</abbr> </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> <strong>Flash-Chip:</strong>      </td><td class="col1 centeralign">  ?  </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> <strong>Flash size:</strong>      </td><td class="col1"> 8192 KiB </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> <strong>RAM:</strong>             </td><td class="col1 leftalign"> 16 MiB   </td>
	</tr>
	<tr class="row8">
		<td class="col0 leftalign"> <strong>Wireless:</strong>        </td><td class="col1"> Atheros AR9103 2.4ghz 802.11bgn </td>
	</tr>
	<tr class="row9">
		<td class="col0 leftalign"> <strong>Ethernet:</strong>        </td><td class="col1"> RealTek RTL8366RB Gigabit w/ vlan support </td>
	</tr>
	<tr class="row10">
		<td class="col0 leftalign"> <strong>USB:</strong>             </td><td class="col1 leftalign"> No   </td>
	</tr>
	<tr class="row11">
		<td class="col0 leftalign"> <strong>Serial:</strong>          </td><td class="col1"> <a href="openwrt-wrtp54g#serial" title="toh:linksys:rtp300_and_wrtp54g ↵" class="wikilink1">Yes</a> </td>
	</tr>
	<tr class="row12">
		<td class="col0 leftalign"> <strong>JTAG:</strong>            </td><td class="col1 leftalign"> <a href="openwrt-wrtp54g#jtag" title="toh:linksys:rtp300_and_wrtp54g ↵" class="wikilink1">Yes</a>  </td>
	</tr>
	<tr class="row13">
		<td class="col0 leftalign"> <strong>Other:</strong>           </td><td class="col1 leftalign"> Yes, 2x <a href="http://en.wikipedia.org/wiki/Foreign exchange service (telecommunications)" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Foreign exchange service (telecommunications)">FXO</a>?-ports  </td>
	</tr>
</table></div>

</div>

<h2 class="sectionedit12" id="photos">Photos</h2>
<div class="level2">

</div>

<h2 class="sectionedit13" id="opening_the_case">Opening the case</h2>
<div class="level2">

<p>
<strong>Note:</strong> This will void your warranty!
</p>

<p>
To remove the cover, peel the rubber feet off of the bottom.  Remove the screws found under the feet.  Finally, lift off the top cover.
</p>

</div>

<h2 class="sectionedit14" id="serial">Serial</h2>
<div class="level2">

<p>
The router has a serial port connector inside the case.  The pinout:
</p>

<p>
<pre class="code">________________________________________
|                                         |
|                                         led
|                   Pin 1: GND   ---&gt; @   |
|                                         led
|         Pin 2: Not Connected   ---&gt; @   |
|                                         led
|                   Pin 3: RX   ----&gt; @   |                 Front of RTP300 or WRTP54G
|                                         led
|                   Pin 4: TX   ----&gt; @   |
|                                         |
|                   Pin 5: VCC  ----&gt; @   led
|                                         |
|                                         |
|                                         |
 \________________________________________|</pre>

</p>

<p>
Do not connect the router&#039;s serial port directly to your computer&#039;s RS232 port. The signal voltage levels are not the same and you may damage the router&#039;s serial port. This is because your computer&#039;s serial port has a line driver which converts the computer&#039;s signal voltage levels to RS232 levels while the line driver was left out of the router to save money. So, you will have to attach a line driver to your router and plug your computer into the line driver. If you are handy with a soldering iron you can order a AD233AK 233A kit and assemble it to make a line driver.
</p>

<p>
The default settings for the serial port are 115200 BPS, 8-bit words, no parity, and hardware flow control. These settings may be changeable by setting the boot environment variable MODETTY.
</p>

<p>
If you have Kermit on Unix or Linux and if the router is connected to &quot;/dev/ttyS0&quot; on your computer, the Kermit commands to connect to it are:
</p>

<p>
<pre class="code"> C-Kermit&gt;set port /dev/ttyS0
 C-Kermit&gt;set speed 115200
 C-Kermit&gt;set carrier-watch off
 C-Kermit&gt;connect</pre>

</p>

<p>
The serial port is the boot loader console. If the boot-loader environment variable CONSOLE_STATE is set to &quot;unlocked&quot; (rather than &quot;locked&quot;), then you will have three seconds to stop the boot (by pressing ESC) and receive a boot loader prompt.
</p>

<p>
If CONSOLE_STATE is set to &quot;locked&quot;, you must find a way to execute the command:
</p>

<p>
<pre class="code"> echo &quot;CONSOLE_STATE unlocked&quot; &gt;/proc/ticfg/env</pre>

</p>

<p>
… from the existing firmware, either by installing a hacked Linksys firmware, which allows logins on the console, or by using the ping hack documented in <a href="../toh/linksys/rtp300#pinghack" class="wikilink1" title="toh:linksys:rtp300">RTP300 and WRTP54G Explored</a>.
</p>

</div>

<h2 class="sectionedit15" id="jtag">JTAG</h2>
<div class="level2">

<p>
JTAG is a standard way to gain access to the system bus of an embedded device. It can be used to reprogram the flash even if the boot loader has been damaged.  The AR7 implements EJTAG version 2.6.
</p>

<p>
<strong>WRTP54G JTAG Pinout</strong>
<pre class="code">__________________________________________
|                     J3                  |
|                                         led
| Pin 1: TRST  ----&gt; @   @ &lt;-- Pin 2:GND  |
|                                         led
| Pin 3: TDI   ----&gt; @   @ &lt;-- Pin 4:GND  |
|                                         led
| Pin 5: TDO   ----&gt; @   @ &lt;-- Pin 6:GND  |
|                                         led
| Pin 7: TMS   ----&gt; @   @ &lt;-- Pin 8:GND  |   Front of WRTP54G
|                                         |
| Pin 9: TCK   ----&gt; @   @ &lt;-- Pin 10:GND led
|                                         |
| Pin 11:RST   ----&gt; @   @ &lt;-- Pin 12:NC  |
|                                         |
| Pin 13:DINT  ----&gt; @   @ &lt;-- Pin 14:VIO*|
 \________________________________________|
     *voltage reference @ 3.3 volts</pre>

</p>

<p>
This EJTAG layout should apply to all AR7-based boards with a 14-pin JTAG pinout. The same cable, used for the WRT54G (based on the xilinx III/dlc-5) as described by HairyDairyMaid, can be used with the RTP300. Debug INT pin 13 is optional.  A 100-Ohm resister should be connected between pins 1 and 14.
</p>

<p>
A patched version of the JTAG utility written by <a href="http://wiki.openwrt.org/oldwiki/hairydairymaid" class="wikilink2" title="oldwiki:hairydairymaid" rel="nofollow">HairyDairyMaid</a> for the WRT54G can be used to reprogram the flash.  A link to it and instructions will be posted here shortly.
</p>

<p>
Writing to flash using JTAG and a passive cable is slow.  Writing a firmware would take hours.  For this reason, it is generally used to repair only the boot loader.  Once the boot loader is working again, the TFTP client in the boot loader can be used to flash a new firmware much more quickly.
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://www.dlinkpedia.net/index.php/Jtag_su_30xT" class="urlextern" title="http://www.dlinkpedia.net/index.php/Jtag_su_30xT"  rel="nofollow">JTAG for a similar AR7 device</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.dlinkpedia.net/index.php/Interfaccia_JTAG" class="urlextern" title="http://www.dlinkpedia.net/index.php/Interfaccia_JTAG"  rel="nofollow">JTAGInterface</a> (Italian!)</div>
</li>
<li class="level1"><div class="li"> <a href="http://wiki.openwrt.org/oldwiki/openwrtdocs/customizing/hardware/jtag.cable" class="wikilink2" title="oldwiki:openwrtdocs:customizing:hardware:jtag.cable" rel="nofollow">jtag.cable</a> guide</div>
</li>
</ul>

</div>

<h2 class="sectionedit16" id="interfaces">Interfaces</h2>
<div class="level2">

<p>
The default network configuration is:
</p>
<div class="table sectionedit17"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Interface Name </th><th class="col1"> Description </th><th class="col2"> Default configuration </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> br-lan </td><td class="col1"> <abbr title="Local Area Network">LAN</abbr> &amp; WiFi </td><td class="col2"> 192.168.1.1/24 </td>
	</tr>
	<tr class="row2">
		<td class="col0"> eth1 </td><td class="col1"> <abbr title="Local Area Network">LAN</abbr> ports (1 to 4) </td><td class="col2"> None </td>
	</tr>
	<tr class="row3">
		<td class="col0"> eth0 </td><td class="col1"> WAN port </td><td class="col2"> DHCP </td>
	</tr>
</table></div>

</div>

<h2 class="sectionedit18" id="firmware_dumps_for_study">Firmware Dumps for Study</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> The nearly complete contents of a RTP300 router&#039;s mounted file system (version 1.00.55) were dumped, zipped and uploaded to <a href="http://www.northern.ca/projects/openwrt/RTP300-1.0.55-fs-dump.zip" class="urlextern" title="http://www.northern.ca/projects/openwrt/RTP300-1.0.55-fs-dump.zip"  rel="nofollow">here</a></div>
</li>
<li class="level1"><div class="li"> The nearly complete contents of a WRTP54G router&#039;s mounted file system present on firmware version 1.00.60 has been dumped, zipped and uploaded to <a href="http://www.m-a-g.net/wrt-11.1.0-r021-1.00.60-r060123.tar.bz2" class="urlextern" title="http://www.m-a-g.net/wrt-11.1.0-r021-1.00.60-r060123.tar.bz2"  rel="nofollow">here</a></div>
</li>
<li class="level1"><div class="li"> All of the entries in a RTP300&#039;s <em>/proc</em> directory were cat-ed out to a log file found <a href="http://www.northern.ca/projects/openwrt/rtp300-1.0.55-proc-dump.txt" class="urlextern" title="http://www.northern.ca/projects/openwrt/rtp300-1.0.55-proc-dump.txt"  rel="nofollow">here</a></div>
</li>
<li class="level1"><div class="li"> A dump of all the flash blocks from an RTP300 with firmware 1.0.55 is available <a href="http://www.northern.ca/projects/openwrt/RTP300-1.0.55-fs-dump.zip" class="urlextern" title="http://www.northern.ca/projects/openwrt/RTP300-1.0.55-fs-dump.zip"  rel="nofollow">here</a>! This is different the mounted file system dumps which contain only the files from the mounted root</div>
</li>
<li class="level1"><div class="li"> The root file system extracted from firmware version 3.1.17 is available here attachment:wrtp54g-3.1.17-root.tar.bz2</div>
</li>
</ul>

</div>

<h2 class="sectionedit19" id="misc_notes">Misc Notes</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> CyberTAN is a subcontractor for Linksys and their name appears in the router&#039;s source code (even the source code archive&#039;s name: _cyt_).</div>
</li>
<li class="level1"><div class="li"> The VoIP daemon appears to be &quot;RADVISION SIP TOOLKIT 3.0.5.1&quot; (/usr/sbin/ggsip)</div>
</li>
<li class="level1"><div class="li"> The telephony chip is the Microsemi Le88221, part of the VE880 series. Information on Microsemi Voice Products, Documentation and Software can be found here <a href="http://www.microsemi.com/voice-line-circuits" class="urlextern" title="http://www.microsemi.com/voice-line-circuits"  rel="nofollow">Microsemi Voice Products</a>. <a href="http://mirror2.openwrt.org/ref/VoicePath%20API-II%20Lite%202.11.3.7z" class="urlextern" title="http://mirror2.openwrt.org/ref/VoicePath%20API-II%20Lite%202.11.3.7z"  rel="nofollow">Here</a> are the <abbr title="GNU General Public License">GPL</abbr> drivers for this hardware based on VP-<abbr title="Application Programming Interface">API</abbr>-II P2.11.3. Contact Microsemi Field Sales and Customer support for latest release of the VP-<abbr title="Application Programming Interface">API</abbr>-II.</div>
</li>
<li class="level1"><div class="li"> A channel on Freenode #wrtp54g is where those devoted to hacking the wrtp54g and rtp300 hang out.</div>
</li>
<li class="level1"><div class="li"> There is information about Linux on AR7 at <a href="http://www.linux-mips.org/wiki/AR7" class="urlextern" title="http://www.linux-mips.org/wiki/AR7"  rel="nofollow">http://www.linux-mips.org/wiki/AR7</a></div>
</li>
</ul>

</div>

<h2 class="sectionedit20" id="tags">Tags</h2>
<div class="level2">
<div class="tags"><span>
	<a href="../tag/lantiq?do=showtag&amp;tag=lantiq" class="wikilink1" title="tag:lantiq" rel="tag">lantiq</a>,
	<a href="../tag/ar7?do=showtag&amp;tag=ar7" class="wikilink1" title="tag:ar7" rel="tag">ar7</a>,
	<a href="../tag/adsl2?do=showtag&amp;tag=adsl2%252B" class="wikilink1" title="tag:adsl2" rel="tag">adsl2+</a>
</span></div>

</div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>toh/linksys/rtp300_and_wrtp54g.txt</bdi> · Last modified: 2013/06/23 23:09 by <bdi>lorema</bdi></div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="../toh/linksys/rtp300_and_wrtp54g?do=edit"  class="action source" accesskey="v" rel="nofollow" title="Show pagesource [V]"><span>Show pagesource</span></a></li><li><a href="../toh/linksys/rtp300_and_wrtp54g?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="../toh/linksys/rtp300_and_wrtp54g?do=backlink"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="openwrt-wrtp54g#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license" class="urlextern">CC Attribution-Noncommercial-Share Alike 3.0 Unported</a></bdi></div>
    <div class="buttons">
        <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license"><img src="../lib/images/license/button/cc-by-nc-sa.png" alt="CC Attribution-Noncommercial-Share Alike 3.0 Unported" /></a>        <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="../lib/tpl/openwrt/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://www.php.net" title="Powered by PHP" ><img
            src="../lib/tpl/openwrt/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="../lib/tpl/openwrt/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="../lib/tpl/openwrt/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="../lib/tpl/openwrt/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="http://wiki.openwrt.org/lib/exe/indexer.php?id=toh%3Alinksys%3Artp300_and_wrtp54g&amp;1432282550" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->
</body>
</html>
